<style>
    .search-btn-trip {
        position: fixed;
        right: 9px;
        top: 12px;
        z-index: 91;
    }
</style>
<div class="search-btn-trip">
    <form class="form-inline">
        <div class="form-group">
            <div style="max-height: 34px; overflow: hidden;">
                <a
                        ui-sref="home.trips({city: city,vehicleType: vehicleType})"
                        title="Show All Shapes"
                        class="btn btn-default">
                    <i class="fa fa-arrow-left" aria-hidden="true"></i> Back
                </a>
            </div>
        </div>
    </form>
</div>
<div class="container-fluid">
    <br>
    <br>
    <br>
    <br>
    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form class="form-inline no-mr">

                        <div class="input-group col-md-3 col-sm-4 col-xs-12">
                            <select ng-model="vm.filterTerm" class="form-control"
                                    ng-options="filterFields.name for filterFields in vm.filterFields">
                                <option value="" disabled>Select Filter</option>
                            </select>
                        </div>
                        <div class="input-group col-md-3 col-sm-4 col-xs-12">
                            <input ng-model="vm.searchTerm" class="form-control" placeholder="term" ng-change="vm.checkMinChr()" />
                        </div>
                        <div class="input-group col-md-1 col-sm-4 col-xs-12">
                            <button ng-disabled="!vm.enblBtn" ng-click="vm.searchTable()"
                                    class="btn btn-search"><span
                                    aria-hidden="true" class="glyphicon glyphicon-search"></span></button>
                        </div>
                        <div class="input-group col-md-3 col-sm-4 col-xs-12 pull-right">
                            <select ng-model="vm.statusCodes" ng-change="vm.searchTable()" class="form-control"
                                    ng-options="statusFilter.name for statusFilter in vm.tripStatusFilters">
                                <option value="" disabled>Select Status</option>
                            </select>
                        </div>

                    </form>
                </div>
            </div>
            <br>

            <div class="panel panel-default" style="min-height:10px" ng-show="vm.showTableData">
                <div class="panel-heading">
                    <h4 style="margin-top: 0" class="title">Search Result</h4>
                </div>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table ng-table="tableParams" class="table table-bordered"  ng-show="!vm.tblNoData">

                            <tr class="truncate"
                                ng-repeat="row in $data track by $index">
                                <td data-title="'Date'" sortable="'requestOn'" style="width: 145px;">
                                    <a target="_blank"
                                       ui-sref="home.trip_detail({id: row.id})">
                                        <div>{{(row.requestOn)*1000 | date:"dd MMM yy"}}</div>
                                    </a>

                                </td>
                                <td data-title="'Status'" sortable="'tripState'">
                                    <div ng-if="row.tripState == 20" class="text-primary" style="white-space: nowrap">
                                        Requested
                                    </div>
                                    <div ng-if="row.tripState == 22" style="white-space: nowrap">Allocated</div>
                                    <div ng-if="row.tripState == 30" style="white-space: nowrap">For Trip</div>
                                    <div ng-if="row.tripState == 40" style="white-space: nowrap">At Pickup</div>
                                    <div ng-if="row.tripState == 60" style="white-space: nowrap">At Destination</div>
                                    <div ng-if="row.tripState == 50" class="text-info" style="white-space: nowrap">In
                                        trip
                                    </div>
                                    <div ng-if="row.tripState == 61" class="text-success" style="white-space: nowrap">
                                        Successful
                                    </div>
                                    <div ng-if="row.tripState == 70" class="text-warning" style="white-space: nowrap">
                                        Can by Driver
                                    </div>
                                    <div ng-if="row.tripState == 71" class="text-warning" style="white-space: nowrap">
                                        Can by Rider
                                    </div>
                                    <div ng-if="row.tripState == 80" style="white-space: nowrap">No Drv Avlble</div>
                                    <div ng-if="row.tripState == 81" class="text-danger" style="white-space: nowrap">
                                        Failed (No Drivers Accepted)
                                    </div>
                                    <div ng-if="row.tripState == 82" style="white-space: nowrap">Terminated</div>
                                </td>
                                <td data-title="'Driver'">
                                    <div>{{row.driverInfo.name}}<br>
                                    </div>
                                </td>
                                <td data-title="'Rider'">
                                    <div>{{row.riderInfo.name}}</div>
                                </td>
                                <td data-title="'Request On'">
                                    <div>{{(row.requestOn)*1000 | date:"h:mma"}}</div>
                                </td>
                                <td data-title="'Time'" sortable="'time'">
                                    <div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div>
                                </td>

                                <td data-title="'Dist(KM)'" sortable="'disPickupDrop'" align="center">
                                    <div>{{(row.disPickupDrop)/1000 | number:2}}</div>
                                </td>
                            </tr>
                        </table >
                        <table class="table table-bordered table-striped table-condensed no-mr" ng-show="vm.tblNoData">
                            <tr>
                                <td colspan="7">No data found</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>