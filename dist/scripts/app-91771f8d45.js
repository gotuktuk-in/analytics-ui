function TripsService(e,t,a){var r=a;return t("",{frequency:"@frequency",vehicle:"@vehicle",id:"@id"},{getAllTrips:{method:"GET",url:r+"trips"},getTripDetail:{method:"GET",url:r+"trips/info/:id",isArray:!1},getRiders:{method:"GET",url:r+"rider/:frequency/:vehicle",isArray:!0},getTCash:{method:"GET",url:r+"trips/tcash",isArray:!0}})}function PerformanceService(e,t,a,r){var i=a;return t("",{frequency:"@frequency",vehicle:"@vehicle"},{getTrips:{method:"GET",url:i+"trip/:frequency/:vehicle",isArray:!0},getDrivers:{method:"GET",url:i+"driver/:frequency/:vehicle",isArray:!0},getRiders:{method:"GET",url:i+"rider/:frequency/:vehicle",isArray:!0}})}function PerformanceHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Requests",values:[]},{key:"Requests (U)",values:[]},{key:"Cancelled",values:[]},{key:"Cancelled (U)",values:[]},{key:"Fulfilled",values:[]},{key:"Fulfilled (U)",values:[]},{key:"Cancelled trips (by rider)",values:[]},{key:"Cancelled trips (by driver)",values:[]},{key:"tCash",values:[]},{key:"Failed",values:[]},{key:"Failed (U)",values:[]}],e.filteredDrivers=[{key:"New Drivers",values:[]},{key:"Active Drivers",values:[]},{key:"Avg Trip/Driver",values:[]}],e.filteredRiders=[{key:"New Riders",values:[]},{key:"Active Riders",values:[]},{key:"Total Riders",values:[]}],e.getTrips=function(t){var a=[],r=[],i=[],s=[],n=[],l=[],o=[],d=[],c=[],v=[],p=[];return _.each(t,function(t){var u=e.getLongDate(t.id);a.push([u,t.requests.total]),r.push([u,t.requests.unique_riders]),i.push([u,t.cancelled.total]),s.push([u,t.cancelled.unique]),n.push([u,t.success.total]),l.push([u,t.success.unique_riders]),o.push([u,t.cancelled.cancelled_by_riders]),d.push([u,t.cancelled.cancelled_by_drivers]),v.push([u,t.failed.total]),p.push([u,t.failed.unique_riders]),c.push([u,t.tcash_used])}),e.filteredTrips[0].values=a,e.filteredTrips[1].values=r,e.filteredTrips[2].values=i,e.filteredTrips[3].values=s,e.filteredTrips[4].values=n,e.filteredTrips[5].values=l,e.filteredTrips[6].values=o,e.filteredTrips[7].values=d,e.filteredTrips[8].values=c,e.filteredTrips[9].values=v,e.filteredTrips[10].values=p,e.filteredTrips},e.getDrivers=function(t){var a=[],r=[],i=[];return _.each(t,function(t){var s=e.getLongDate(t.id);a.push([s,t.total_offline]),r.push([s,t.total_online]),i.push([s,t.average_rides_per_driver])}),e.filteredDrivers[0].values=a,e.filteredDrivers[1].values=r,e.filteredDrivers[2].values=i,e.filteredDrivers},e.getRiders=function(t){var a=[],r=[],i=[];return _.each(t,function(t){var s=e.getLongDate(t.id);a.push([s,t.newly_reg_riders]),r.push([s,t.active_riders]),i.push([s,t.total_riders])}),e.filteredRiders[0].values=a,e.filteredRiders[1].values=r,e.filteredRiders[2].values=i,e.filteredRiders},e.getLongDate=function(e){var t=e,a=t.substring(0,4),r=t.substring(4,6),i=t.substring(6,8),s=t.substring(8,10),n=new Date(a,r-1,i,s);return n},e}function OfferService(e,t,a,r){var i=a;return t("",{id:"@id"},{getOffers:{method:"GET",url:i+"offers",isArray:!0},getDrivers:{method:"GET",url:i+"drivers/list",isArray:!0}})}function MapService(e,t,a,r){var i=a;return t("",{id:"@id"},{getDrivers:{method:"GET",url:i+"map/driver"},loadGeoJson:{method:"GET",url:r+"geofence"},registerList:{method:"GET",url:i+"drivers/registered",isArray:!0},inprocessList:{method:"GET",url:i+"drivers/inprocess"},deleteInProcessDriver:{method:"DELETE",url:i+"drivers/:id"}})}function LoginService(e,t,a,r){var i=a,s=r;return t("",{id:"@id"},{doLogin:{method:"POST",url:s+"login"},logout:{method:"GET",url:i+"logout"}})}function LiveService(e,t,a){var r=a;return t("",{},{getOverview:{method:"GET",url:r+"overview/live/"},getTrips:{method:"GET",url:r+"trip/live/"},getDrivers:{method:"GET",url:r+"driver/live/"},getRiders:{method:"GET",url:r+"rider/live/"},getNewRiders:{method:"GET",url:r+"trips/newRiders",isArray:!0},heatmap:{method:"GET",url:r+"trips/heatmap",isArray:!0}})}function LiveHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Total Booking",values:[]},{key:"Total Successful Booking",values:[]},{key:"Unique Successful Booking",values:[]},{key:"In-Progress",values:[]},{key:"Total Cancelled",values:[]},{key:"Unique Cancelled",values:[]},{key:"Total Failed",values:[]},{key:"Unique Failed",values:[]}],e.filteredDrivers=[{key:"Total Drivers",values:[]},{key:"Free Drivers",values:[]},{key:"Occupied Driver",values:[]}],e.filteredRiders=[{key:"Total Riders",values:[]},{key:"New Riders",values:[]}],e.getTrips=function(){var t=[],a=[],r=[],i=[],s=[],n=[],l=[],o=[];return _.each(e.trips,function(d){var c=e.getLongDate(d.id);t.push([c,d.booking]),a.push([c,d.successful.total]),r.push([c,d.successful.unique_riders]),i.push([c,d.in_process]),s.push([c,d.cancelled.total]),n.push([c,d.cancelled.unique_riders]),l.push([c,d.failed.total]),o.push([c,d.failed.unique_rider])}),e.filteredTrips[0].values=t,e.filteredTrips[1].values=a,e.filteredTrips[2].values=r,e.filteredTrips[3].values=i,e.filteredTrips[4].values=s,e.filteredTrips[5].values=n,e.filteredTrips[6].values=l,e.filteredTrips[7].values=o,e.filteredTrips},e.getDrivers=function(){var t=[],a=[],r=[];return _.each(e.drivers,function(i){var s=e.getLongDate(i.id);t.push([s,i.total_count]),a.push([s,i.free_driver]),r.push([s,i.occupied_driver])}),e.filteredDrivers[0].values=t,e.filteredDrivers[1].values=a,e.filteredDrivers[2].values=r,e.filteredDrivers},e.getRiders=function(){var t=[],a=[];return _.each(e.riders,function(r){var i=e.getLongDate(r.id);t.push([i,r.total_riders]),a.push([i,r.new_rider_reg])}),e.filteredRiders[0].values=t,e.filteredRiders[1].values=a,e.filteredRiders},e.getLongDate=function(e){var t=e,a=t.substring(0,4),r=t.substring(4,6),i=t.substring(6,8),s=t.substring(8,10),n=new Date(a,r-1,i,s);return n},e}function InitChart(){var e=[{x:1,y:5},{x:20,y:20},{x:40,y:10},{x:60,y:40},{x:80,y:5},{x:100,y:60}],t=d3.select("#visualisation"),a=1e3,r=500,i={top:20,right:20,bottom:20,left:50},s=d3.scale.linear().range([i.left,a-i.right]).domain([d3.min(e,function(e){return e.x}),d3.max(e,function(e){return e.x})]),n=d3.scale.linear().range([r-i.top,i.bottom]).domain([d3.min(e,function(e){return e.y}),d3.max(e,function(e){return e.y})]),l=d3.svg.axis().scale(s).tickSize(5).tickSubdivide(!0),o=d3.svg.axis().scale(n).tickSize(5).orient("left").tickSubdivide(!0);t.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(r-i.bottom)+")").call(l),t.append("svg:g").attr("class","y axis").attr("transform","translate("+i.left+",0)").call(o);var d=d3.svg.line().x(function(e){return s(e.x)}).y(function(e){return n(e.y)}).interpolate("linear");t.append("svg:path").attr("d",d(e)).attr("stroke","blue").attr("stroke-width",2).attr("fill","none")}function DriversService(e,t,a){var r=a;return t("",{id:"@id"},{getTopDrivers:{method:"GET",url:r+"drivers/topdrivers",isArray:!0},getAcquisition:{method:"GET",url:r+"drivers/acquisition",isArray:!0},getProfile:{method:"GET",url:r+"drivers/profile/:id",isArray:!1},getTrips:{method:"GET",url:r+"drivers/:id/trips",isArray:!1}})}function PunchCardFunc(){return{restrict:"EA",scope:{title:"@",data:"="},link:function(e,t,a){var r={};r.element=t,r.data=[[{key:"Type A",value:"a"},{key:"Type b",value:"b"}],[{key:"RA",value:"ra"},{key:"RB",value:"ra"}]];new D3punchcard(r).draw({width:t.offsetWidth})}}}function UserService(e,t,a,r,i){this.user,this.setUser=function(e){this.user=e,t.putObject("tuktuk.performance.admin",this.user),r.isAuthenticated=!0},this.getUser=function(){return null!=this.user?this.user:(this.user=t.getObject("tuktuk.performance.admin"),(void 0==this.user||"undefined"==this.user)&&(this.user=null),this.user)},this.clearUser=function(){this.user=null,t.remove("tuktuk.performance.admin"),e.defaults.headers.common.Authorization=""}}function StaticDataService(e,t,a){var r={};return r.cities=[{name:"Indore",value:"indore"},{name:"Bhopal",value:"bhopal"}],r.vehicleTypes=[{name:"Auto",value:"auto"},{name:"Bike",value:"bike"}],r.ranges={Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},r}function ChartConfigService(e,t,a,r){var i={};return Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},i.lineChartConfig={refreshDataOnly:!1},i.lineChartOptions={chart:{type:"lineChart",height:"400",zoom:{enabled:!0},interpolate:"basis",legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:15,bottom:20,left:50}},legendPosition:"top",margin:{top:0,right:20,bottom:100,left:50},x:function(e){return e[0]},y:function(e){return e[1]},color:d3.scale.category10().range(),duration:300,useInteractiveGuideline:!0,clipVoronoi:!1,showYAxis:!0,xAxis:{tickSize:"10",rotateLabels:"-90",tickFormat:function(e){return d3.time.format("%d %b %I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1,axisLabelDistance:0},x2Axis:{axisLabel:"Date",tickFormat:function(e){return d3.time.format("%I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1},yAxis:{axisLabel:"Trips",tickFormat:function(e){return d3.round(e)},showMaxMin:!0,axisLabelDistance:200}}},i.discreteBarChartOptions={chart:{type:"discreteBarChart",height:450,zoom:{enabled:!0},margin:{top:30,right:50,bottom:100,left:55},x:function(e){return e.label},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.round(e)},duration:500,xAxis:{axisLabel:"",rotateLabels:"-90"},yAxis:{axisLabel:"",axisLabelDistance:-10}}},i.multiBarChartOptions={chart:{type:"multiBarChart",height:400,margin:{top:30,right:50,bottom:100,left:55},text:"Credit Recovery",x:function(e){return e.x},y:function(e){return e.y},stacked:!0,showControls:!1,clipEdge:!0,transitionDuration:1e3,useInteractiveGuideline:!1,xAxis:{rotateLabels:"-90",ticks:d3.time.months,tickFormat:function(e){return d3.time.format("%d %b %y")(new Date(e))},showMaxMin:!1},yAxis:{tickFormat:function(e){return e}}}},i.linePlusBarChartOptions={chart:{type:"linePlusBarChart",height:400,focusEnable:!1,margin:{top:30,right:75,bottom:100,left:75},bars:{forceY:[0]},color:["#ff7f0e","#e377c2"],x:function(e,t){return t},xAxis:{rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=$scope.data[0].values[e]&&$scope.data[0].values[e].x||0;return t>0?d3.time.format("%x")(new Date(t)):null}}}},i}TripsService.$inject=["$q","$resource","API"],PerformanceService.$inject=["$q","$resource","API","StaticDataService"],OfferService.$inject=["$q","$resource","API","AUTH_API"],MapService.$inject=["$q","$resource","API","AUTH_API"],LoginService.$inject=["$q","$resource","API","AUTH_API"],LiveService.$inject=["$q","$resource","API"],DriversService.$inject=["$q","$resource","API"],UserService.$inject=["$http","$cookies","$resource","$rootScope","API"],StaticDataService.$inject=["$q","$resource","API"],ChartConfigService.$inject=["$q","$resource","API","PerformanceHandler"],function(){"use strict";angular.module("tuktukV2Dahboard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMap","ui.bootstrap","toastr","ngTable","rzModule","ngBootstrap","nvd3","httpInterceptor","ui-rangeSlider","angularjs-dropdown-multiselect","angularScreenfull"])}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"}];this.getTec=e}angular.module("tuktukV2Dahboard").service("webDevTec",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.relativeDate=e(t.creationDate).fromNow()}e.$inject=["moment"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("tuktukV2Dahboard").directive("acmeNavbar",e)}(),function(){"use strict";function e(e){function t(t,a,r,i){var s,n=e(a[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});a.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){n.type(e).pause()["delete"]()}),s=t.$watch("vm.contributors",function(){angular.forEach(i.contributors,function(e){n.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){s()})}function a(e,t){function a(){return r().then(function(){e.info("Activated Contributors View")})}function r(){return t.getContributors(10).then(function(e){return i.contributors=e,i.contributors})}var i=this;i.contributors=[],a()}a.$inject=["$log","githubContributor"];var r={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:a,controllerAs:"vm"};return r}e.$inject=["malarkey"],angular.module("tuktukV2Dahboard").directive("acmeMalarkey",e)}(),function(){"use strict";function e(e,t){function a(a){function i(e){return e.data}function s(t){e.error("XHR Failed for getContributors.\n"+angular.toJson(t.data,!0))}return a||(a=30),t.get(r+"/contributors?per_page="+a).then(i)["catch"](s)}var r="https://api.github.com/repos/Swiip/generator-gulp-angular",i={apiHost:r,getContributors:a};return i}e.$inject=["$log","$http"],angular.module("tuktukV2Dahboard").factory("githubContributor",e)}(),function(){"use strict";function e(e,t,a,r,i,s){function n(){i.getTripDetail({dId:r.driverId,rId:r.riderId},{id:r.id},function(t){e.selectedTrip=t},function(t){console.log(t),e.error=!0})}e.selectedTrip,n()}e.$inject=["$scope","$interval","PerformanceService","$stateParams","TripsService","$rootScope"],angular.module("tuktukV2Dahboard").controller("TripDetailController",e)}(),function(){"use strict";function e(e,t,a,r,i,s,n,l,o,d){function c(e){var t=[];e=angular.fromJson(e);var a=["tCash","Trip"],r={};r.key=a[0],r.values=[],r.bar=!0;for(var i=0;i<e.length;i++){var s=1e3*moment(d.getLongDate(e[i].date)).unix();r.values.push([s,e[i].tcash])}t.push(r);var r={};r.key=a[1],r.values=[];for(var i=0;i<e.length;i++){var s=1e3*moment(d.getLongDate(e[i].date)).unix();r.values.push([s,e[i].trip])}return t.push(r),t}var v,p=this;p.ranges=a.ranges,e.tripDates={},e.tripDates.startDate=a.ranges["Last 7 Days"][0],e.tripDates.endDate=a.ranges["Last 7 Days"][1],p.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],p.tripFrequency={value:"day"},p.config=r.lineChartConfig,p.tripChartOptions=angular.copy(r.lineChartOptions),p.tcashChartOptions=angular.copy(r.linePlusBarChartOptions),p.tcashChartOptions.chart.xAxis={rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=p.tcashData[0].values[e]&&p.tcashData[0].values[e].x||0;return t>0?d3.time.format("%d %b %y")(new Date(t)):null}},p.trips=[],p.filterTerm="",p.filterFields=[{value:"id",name:"ID"},{value:"dname",name:"Driver Name"},{value:"dphone",name:"Driver Phone"},{value:"dvehicle",name:"Vehicle Number"},{value:"rname",name:"Rider Name"},{value:"rphone",name:"Rider Phone"}],p.statusCodes="",p.tripStatusFilters=[{name:"All",value:"20,22,30,40,50,60,61,70,71,80,81,82"},{name:"Fullfiled",value:"61"},{name:"Cancelled ",value:"70,71"},{name:"In Progress",value:"20,22,30,40,50,60"},{name:"Failed",value:"80,81,82"}],p.searchTable=function(){e.tableParams.reload()},this.changeFrequency=function(e,t){console.log("Frequency changed ",t.value),p.tripChartOptions.chart.xAxis.axisLabel=t,"hour"==t?p.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:p.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},p.getTrips()},p.onDateChange=function(){p.getTCash(),p.getTrips()},p.getTCash=function(){l.getTCash({city:o.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,vehicle:o.vehicleType},{},function(e){p.tcashData=c(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e}),console.log("response ",p.tcashData)},function(t){console.log(t),e.error=!0}),e.tableParams.reload()},p.getTrips=function(){i.getTrips({city:o.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:p.tripFrequency.value},{vehicle:o.vehicleType,frequency:p.tripFrequency.value},function(e){p.trips=d.getTrips(e[0].trip),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"Cancelled trips (by rider)"})),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"Cancelled trips (by driver)"})),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"tCash"})),v=e[0].trip},function(t){console.log(t),e.error=!0}),e.tableParams.reload()};e.getTimeDiff=function(e,t){if(0==e||0==t)return"0";if(t){var a=t-e;return a}return"0"},e.tableParams=new s({page:1,count:20},{counts:[],getData:function(t){var a=10*(t.page()-1)+1;console.log("**************************");var r={};if(r.start=a,r.count=t.count(),r.startDate=moment(e.tripDates.startDate).startOf("day").unix(),r.endDate=moment(e.tripDates.endDate).endOf("day").unix(),t.orderBy().length>0){var i=t.orderBy()[0].substr(0,1);r.field=t.orderBy()[0].substr(1),"+"===i?r.orderby="ASC":r.orderby="DESC"}return p.searchTerm&&""!=p.searchTerm&&(r.term=p.filterTerm.value+"|"+p.searchTerm),""!=p.statusCodes.value&&(r.filterByStatus=p.statusCodes.value),l.getAllTrips(r).$promise.then(function(a){return t.total(a.total),a.data.length>0?e.tblNoData=!1:e.tblNoData=!0,a.data})}}),p.onDateChange();var u=t(function(){p.getTrips(),e.tableParams.reload()},3e4);e.$on("$destroy",function(){t.cancel(u)}),heatmapChart(v)}e.$inject=["$scope","$interval","StaticDataService","ChartConfigService","PerformanceService","NgTableParams","$stateParams","TripsService","$rootScope","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("TripsController",e)}();var margin={top:50,right:0,bottom:100,left:30},width=960-margin.left-margin.right,height=430-margin.top-margin.bottom,gridSize=Math.floor(width/24),legendElementWidth=2*gridSize,buckets=9,colors=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],days=["Mo","Tu","We","Th","Fr","Sa","Su"],times=["1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12a","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p","12p"];datasets=["data.tsv","data2.tsv"];var svg=d3.select("#chart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),dayLabels=svg.selectAll(".dayLabel").data(days).enter().append("text").text(function(e){return e}).attr("x",0).attr("y",function(e,t){return t*gridSize}).style("text-anchor","end").attr("transform","translate(-6,"+gridSize/1.5+")").attr("class",function(e,t){return t>=0&&4>=t?"dayLabel mono axis axis-workweek":"dayLabel mono axis"}),timeLabels=svg.selectAll(".timeLabel").data(times).enter().append("text").text(function(e){return e}).attr("x",function(e,t){return t*gridSize}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+gridSize/2+", -6)").attr("class",function(e,t){return t>=7&&16>=t?"timeLabel mono axis axis-worktime":"timeLabel mono axis"}),heatmapChart=function(e){d3.tsv(e,function(e){return{day:+e.day,hour:+e.hour,value:+e.value}},function(e,t){var a=d3.scale.quantile().domain([0,buckets-1,d3.max(t,function(e){return e.value})]).range(colors),r=svg.selectAll(".hour").data(t,function(e){return e.day+":"+e.hour});r.append("title"),r.enter().append("rect").attr("x",function(e){return(e.hour-1)*gridSize}).attr("y",function(e){return(e.day-1)*gridSize}).attr("rx",4).attr("ry",4).attr("class","hour bordered").attr("width",gridSize).attr("height",gridSize).style("fill",colors[0]),r.transition().duration(1e3).style("fill",function(e){return a(e.value)}),r.select("title").text(function(e){return e.value}),r.exit().remove();var i=svg.selectAll(".legend").data([0].concat(a.quantiles()),function(e){return e});i.enter().append("g").attr("class","legend"),i.append("rect").attr("x",function(e,t){return legendElementWidth*t}).attr("y",height).attr("width",legendElementWidth).attr("height",gridSize/2).style("fill",function(e,t){return colors[t]}),i.append("text").attr("class","mono").text(function(e){return"? "+Math.round(e)}).attr("x",function(e,t){return legendElementWidth*t}).attr("y",height+gridSize),i.exit().remove()})};angular.module("tuktukV2Dahboard").factory("TripsService",TripsService),function(){"use strict";function e(e,t,a,r,i,s,n,l){var o=this;o.ranges=a.ranges,e.tripDates={},e.tripDates.startDate=moment().subtract(1,"days").format("YYYY-MM-DD"),e.tripDates.endDate=moment().subtract(1,"days").format("YYYY-MM-DD"),e.driverDates=angular.copy(e.tripDates),e.riderDates=angular.copy(e.tripDates),o.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],o.tripFrequency={value:"hour"},o.driverFrequency={value:"hour"},o.riderFrequency={value:"hour"},o.config=r.lineChartConfig,o.tripChartOptions=angular.copy(r.lineChartOptions),o.driverChartOptions=angular.copy(r.lineChartOptions),o.riderChartOptions=angular.copy(r.lineChartOptions),o.trips=[],o.drivers=[],o.riders=[],this.changeFrequency=function(e,t){switch(console.log("Frequency changed ",t.value),e){case"driver":o.driverChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getDrivers();break;case"rider":o.riderChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getRiders();break;default:o.tripChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getTrips()}},o.getTrips=function(){n.getTrips({city:s.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.tripFrequency.value},{vehicle:s.vehicleType,frequency:o.tripFrequency.value},function(e){o.trips=l.getTrips(e[0].trip),o.trips.overview=e[0].overview},function(t){console.log(t),e.error=!0})},o.getDrivers=function(){n.getDrivers({city:s.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.driverFrequency.value},{vehicle:s.vehicleType,frequency:o.driverFrequency.value},function(e){o.drivers=l.getDrivers(e),console.log("vm.drivers ",o.drivers)},function(t){console.log(t),e.error=!0})},o.getRiders=function(){n.getRiders({city:s.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.riderFrequency.value},{vehicle:s.vehicleType,frequency:o.riderFrequency.value},function(e){o.riders=l.getRiders(e[0].riders),o.riders.overview=e[0].overview,console.log("vm.riders ",l.riders)},function(t){console.log(t),e.error=!0})},o.getAllData=function(){o.getTrips(),o.getDrivers(),o.getRiders()},o.getAllData();var d=t(function(){o.getAllData()},3e4);e.$on("$destroy",function(){t.cancel(d)})}e.$inject=["$scope","$interval","StaticDataService","ChartConfigService","$stateParams","$rootScope","PerformanceService","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("PerformanceController",e)}(),angular.module("tuktukV2Dahboard").factory("PerformanceService",PerformanceService),angular.module("tuktukV2Dahboard").factory("PerformanceHandler",PerformanceHandler),function(e){function t(e){function t(t){return this.data=t.data.reverse(),this.element=t.element,this.max=e.max(this.data,function(t){return e.max(t.slice(1),function(e){return parseFloat(e.value)})}),t.upperLimit?this.upperLimit=t.upperLimit:this.upperLimit=this.max,this}return t.prototype.draw=function(t){function a(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","none"),e.select(t).selectAll("text.value").style("display","block")}function r(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","block"),e.select(t).selectAll("text.value").style("display","none")}var i,s,n,l,o,d,c=10,v=5,p=t.width,u=80,m=p-u,g=35,f=g*this.data.length,h=m/this.data[0].length,b=14;return i=e.scale.linear().domain([0,this.data[0].length-1]).range([u+h/2,m+h/2]),s=e.scale.linear().domain([0,this.data.length-1]).range([0,f-g]),d=e.scale.linear().domain([0,this.upperLimit,this.max]).range([0,b,b]),n=e.select(this.element).html("").append("svg").attr("width",p).attr("height",f+3*c).append("g"),o=n.selectAll(".row").data([this.data[0].slice(1)]).enter().append("g").attr("class","xaxis"),o.append("line").attr("x1",0).attr("x2",p).attr("y1",3*c).attr("y2",3*c).style("stroke-width",1).style("stroke","#efefef"),o.selectAll("line.tick").data(function(e,t){return e}).enter().append("line").attr("class","tick").attr("x1",function(e,t){return u+i(t)}).attr("x2",function(e,t){return u+i(t)}).attr("y1",function(e,t){return 2*c}).attr("y2",function(e,t){return 3*c}).style("stroke-width",1).style("stroke","#efefef"),o.selectAll(".rule").data(function(e,t){return e}).enter().append("text").attr("class","rule").attr("x",function(e,t){return u+i(t)}).attr("y",c+v).attr("text-anchor","middle").text(function(e){return e.key}),l=n.selectAll(".row").data(this.data).enter().append("g").attr("class","row").attr("transform",function(e,t){var a=f-s(t)-g/2+3*c;return"translate(0, "+a+")"}),l.selectAll("line").data([0]).enter().append("line").attr("x1",0).attr("x2",p).attr("y1",g/2).attr("y2",g/2).style("stroke-width",1).style("stroke","#efefef"),l.selectAll(".textheader").data(function(e,t){return[e[0]]}).enter().append("text").attr("x",0).attr("y",function(e,t){return v}).attr("class","textheader").attr("text-anchor","left").text(function(e,t){return e.value}).on("mouseover",a).on("mouseout",r),l.selectAll("circle").data(function(e,t){return e.slice(1)}).enter().append("circle").style("fill","#888").attr("r",function(e,t){return d(parseFloat(e.value))}).attr("transform",function(e,t){var a=u+i(t);return"translate("+a+", 0)"}),l.selectAll("text.value").data(function(e,t){return e.slice(1)}).enter().append("text").attr("class","value").style("display","none").text(function(e,t){return e.value}).attr("text-anchor","middle").attr("x",function(e,t){return u+i(t)}).attr("y",function(e,t){return v}),this},t.prototype.destroy=function(){e.select(this.element).selectAll("text.textheader").on("mouseover",null).on("mouseout",null)},t}"object"==typeof exports?module.exports=t(require("d3")):"function"==typeof define&&define.amd?define(["d3"],t):e.D3punchcard=t(e.d3)}(this),function(){"use strict";function e(e,t,a){var r=this;r.offers=[],r.selectedOffers=[],r.drivers=[],r.selectedDrivers=[],r.offerCheckboxes={checked:!1,items:{}},r.addOffer=function(e){r.selectedOffers.push(e)},r.addDrivers=function(){},e.offerTableParams=new a({page:1,count:20},{counts:[],getData:function(a){var i=10*(a.page()-1)+1;console.log("**************************");var s={};if(s.start=i,s.count=a.count(),a.orderBy().length>0){var n=a.orderBy()[0].substr(0,1);s.field=a.orderBy()[0].substr(1),"+"===n?s.orderby="ASC":s.orderby="DESC"}return r.searchTerm&&""!=r.searchTerm&&(s.term=r.filterTerm.value+"|"+r.searchTerm),t.getOffers(s).$promise.then(function(t){return a.total(t.total),t.length>0?e.tblNoData=!1:e.tblNoData=!0,t})}}),e.driverTableParams=new a({page:1,count:10},{counts:[],getData:function(a){var i=10*(a.page()-1)+1;console.log("**************************");var s={};if(s.start=i,s.count=a.count(),a.orderBy().length>0){var n=a.orderBy()[0].substr(0,1);s.field=a.orderBy()[0].substr(1),"+"===n?s.orderby="ASC":s.orderby="DESC"}return r.searchTerm&&""!=r.searchTerm&&(s.term=r.filterTerm.value+"|"+r.searchTerm),t.getDrivers(s).$promise.then(function(t){return a.total(t.total),t.length>0?e.tblNoData=!1:e.tblNoData=!0,t})}})}e.$inject=["$scope","OfferService","NgTableParams"],angular.module("tuktukV2Dahboard").controller("OffersController",e)}(),angular.module("tuktukV2Dahboard").factory("OfferService",OfferService),function(){"use strict";function e(e,t,a,r,i,s){function n(){r.getDrivers({city:a.city,vehicle:a.vehicleType},function(e){l.allDrivers=e,console.log("vm.drivers ",l.allDrivers)},function(e){console.log("error ",e)})}var l=this;l.API_URL=s,l.allDrivers=[],console.log("map cont loaded"),i.getMap({id:"drivers_map"}).then(function(e){l.map=e,l.map&&l.map.data&&l.map.data.forEach(function(e){l.map.data.remove(e)}),e.data.setStyle({fillColor:"gray",strokeWeight:1,strokeOpacity:.1,fillOpacity:.1}),r.loadGeoJson({},function(e){l.geoJSON={},l.geoJSON=e,l.map.data.addGeoJson(l.geoJSON)},function(e){console.log("error ",e)})}),l.getAddress=function(e){alert("get address")},l.clicked=function(e){console.log("Clicked a link inside infoWindow",e);var t=parseFloat(e[0]),a=parseFloat(e[1]),r=new google.maps.LatLng(t,a),i=new google.maps.Geocoder;i.geocode({latLng:r},function(e,t){t==google.maps.GeocoderStatus.OK&&e[1]&&(l.driver.address=e[1].formatted_address)})},n(),l.showDetail=function(e,t,a){l.driver=t,l.map.showInfoWindow("iw-drivers",a)},l.hideDetail=function(){l.map.hideInfoWindow("iw-drivers")},l.getAddress=function(){l.map.hideInfoWindow("iw-drivers")}}e.$inject=["$scope","$log","$rootScope","MapService","NgMap","AUTH_API"],angular.module("tuktukV2Dahboard").controller("MapsController",e)}(),angular.module("tuktukV2Dahboard").factory("MapService",MapService),function(){"use strict";function e(e,t,a,r,i,s){e.cities=s.cities,e.vehicleTypes=s.vehicleTypes,a.selectedCity=s.cities[0],a.selectedVehicle=s.vehicleTypes[0],e.ChangeCity=function(e){a.selectedCity=e,a.city=e.value,r.go(r.current.name,{city:a.city,vehicleType:a.vehicleType})},e.ChangeVehicle=function(e){a.selectedVehicle=e,a.vehicleType=e.value,r.go(r.current.name,{city:a.city,vehicleType:a.vehicleType})},e.status={isopen:!1},e.toggled=function(e){t.log("Dropdown is now: ",e)}}e.$inject=["$scope","$log","$rootScope","$state","$stateParams","StaticDataService"],angular.module("tuktukV2Dahboard").controller("MainController",e)}(),function(){"use strict";function e(e,t,a,r,i,s,n,l,o){e.loginUser=function(){s.doLogin(e.user,function(e){console.log(e),e.success?(n.setUser(e),r.defaults.headers.common.Authorization="Basic "+e.token,a.isAuthenticated=!0,i.go("home.live",{city:a.city,vehicleType:a.vehicleType}),l.success("You are successfully logged in.")):l.error(e.msg)},function(e){console.log(e),l.error(e.data.msg)})}}e.$inject=["$scope","$log","$rootScope","$http","$state","LoginService","UserService","toastr","StaticDataService"],angular.module("tuktukV2Dahboard").controller("LoginController",e)}(),angular.module("tuktukV2Dahboard").factory("LoginService",LoginService),function(){"use strict";function e(e,t,a,r,i,s,n,l,o,d,c){function v(){o.getOverview({
city:a.city,vehicle:a.vehicleType},function(e){h.overview=e},function(t){console.log(t),e.error=!0})}function p(){o.getNewRiders({from:moment(y).subtract(6,"days").startOf("day").unix(),to:moment(y).endOf("day").unix()},function(e){h.newRiders=u(e),console.log("response ",h.newRiders)},function(t){console.log(t),e.error=!0})}function u(e){var t=[],a=JSON.parse(angular.toJson(e)),r=0,i=0,s=["today","1 day ago","2 day ago","3 day ago","4 day ago","5 day ago","6 day ago","Above 7 days"];_.each(a,function(e){var a={};a.key=s[i],a.bar=!0,a.values=[],t.push(a),i++});var n={};return n.key=s[i],n.bar=!0,n.values=[],t.push(n),_.each(a,function(e){for(var a=e,i=0;7>=i;i++)t[i].values[r]={},t[i].values[r].x=c.getLongDate(a.date),t[i].values[r].y=Number(e.value[i].totalRides),t[i].values[r].uniqRides=Number(e.value[i].uniqRides),"Others"===e.value[i].id?t[i].values[r].date=e.value[i].id:t[i].values[r].date=Number(e.value[i].id);r++}),t}function m(){o.getOverview({city:a.city,vehicle:a.vehicleType,startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day")},function(e){h.overview=e},function(t){console.log(t),e.error=!0})}function g(){d.getTrips({city:a.city,startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day"),count:1,page:1,rate:"hour"},{vehicle:a.vehicleType,frequency:"hour"},function(t){h.trips=c.getTrips(t[0].trip),d.getDrivers({city:a.city,startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day"),count:1,page:1,rate:"hour"},{vehicle:a.vehicleType,frequency:"hour"},function(e){h.drivers=c.getDrivers(e),h.trips=_.union(h.trips,h.drivers),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"Cancelled trips (by rider)"})),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"Cancelled trips (by driver)"})),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"tCash"})),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"New Drivers"})),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"Active Drivers"})),h.trips=_.without(h.trips,_.findWhere(h.trips,{key:"Avg Trip/Driver"}))},function(t){console.log(t),e.error=!0})},function(t){console.log(t),e.error=!0});h.resizeMap=function(){google.maps.event.trigger(h.map,"resize")},h.heatMapDataLength,h.loadHeatMap=function(){var t=moment(y).hour(e.rangSlider.min).unix(),r=moment(y).hour(e.rangSlider.max).unix();o.heatmap({city:a.city,vehicle:a.vehicleType,from:t,to:r,state:h.selected.id},function(e){h.heatMapDataLength=e.length;var t=[],a=[];_.forEach(e,function(e){t.push(new google.maps.LatLng(e.locPickupRequest.lt-0,e.locPickupRequest.ln-0))}),n.getMap({id:"live_map"}).then(function(e){h.map=e,f&&f.setMap(null),a=new google.maps.MVCArray(t),f=new google.maps.visualization.HeatmapLayer({data:a}),f.setMap(h.map)})},function(t){console.log(t),e.error=!0})}}var f,h=this,b=moment();h.heatMapFilers=[{label:"In-Process",id:"20,22,30,40,50"},{label:"Failed",id:"72,80,81,82"},{label:"Cancel",id:"70,71"},{label:"Success",id:"61"}],h.selected=h.heatMapFilers[0],e.rangSlider={max:24,min:0},e.slider={minValue:0,maxValue:24,options:{floor:0,ceil:24,showTicksValues:0,translate:function(e){return e+"h"},keyboardSupport:!1,onEnd:function(t,a,r,i){e.rangSlider.min=a,e.rangSlider.max=r,h.loadHeatMap()}}},e.ddSettings={enableSearch:!1},e.date=moment().format("dddd, MMMM Do YYYY"),h.config=l.lineChartConfig,h.tripChartOptions=angular.copy(l.lineChartOptions),h.newRidersChartOptions=angular.copy(l.multiBarChartOptions),h.newRidersChartOptions.chart.tooltip={contentGenerator:function(e,t,a,r,i){var s,n=e.data;s="Others"===n.date?"Above 7 days":moment(c.getLongDate(n.date.toString())).format("MMMM Do YYYY");var l='<div class="pd-10 text-left"><span><b>';return l+=s+" </b></span>",l+='<h3 class="no-mr">'+n.y+'<small style="color:#333;"> /'+n.uniqRides+'</small><br><small style="font-size:10px;color:#666;text-transform: uppercase;">Total Rides / Rides(U)</small></h3>',l+="</div>"}},h.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%I %p")(new Date(e).addHours(1))},h.trips=[];var y=moment();h.live=!0,h.changeDate=function(t){"next"==t?(y=moment(y).add(1,"day"),e.date=moment(y).format("dddd, MMMM Do YYYY")):(y=moment(y).subtract(1,"day"),e.date=moment(y).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(y).unix()==moment(b).unix()?(h.live=!0,v()):(h.live=!1,m()),g(),p(),h.loadHeatMap()},h.newRiders=[{values:[{x:1359072e6,y:10,label:"C1.1"},{x:13651164e5,y:30,label:"C1.2"},{x:13575168e5,y:40,label:"C1.3"}],bar:!0,key:"Carrier1"},{values:[{x:1359072e6,y:30,label:"C2.1"},{x:13651164e5,y:10,label:"C2.2"},{x:13575168e5,y:79,label:"C2.3"}],bar:!0,key:"Carrier2"}],p(),g(),v(),h.loadHeatMap();var x=i(function(){h.refreshPage()},3e4);e.$on("$destroy",function(){i.cancel(x)}),h.refreshPage=function(){g(),h.loadHeatMap(),p(),h.live?v():m()}}e.$inject=["$scope","$log","$rootScope","$state","$interval","$stateParams","NgMap","ChartConfigService","LiveService","PerformanceService","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("LiveController",e)}(),angular.module("tuktukV2Dahboard").factory("LiveService",LiveService),angular.module("tuktukV2Dahboard").factory("LiveHandler",LiveHandler),function(){"use strict";function e(e,t,a,r,i,s,n,l,o,d){var c=this;moment();c.ranges=i.ranges,e.selectedDates={},e.selectedDates.startDate=moment().format("YYYY-MM-DD"),e.selectedDates.endDate=moment().format("YYYY-MM-DD"),c.getProfile=function(){s.getProfile({id:t.driverId,from:moment(e.selectedDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.selectedDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){c.profile=e},function(t){console.log(t),e.error=!0})},c.getProfile(),c.getAllData=function(){c.getProfile(),e.tableParams.reload()};var v=r(function(){c.getAllData()},3e4);e.$on("$destroy",function(){r.cancel(v)}),e.getTimeDiff=function(e,t){var a;if(0==e)return"0";a=0==t?new Date:new Date(1e3*t);var r=new Date(1e3*e),i=moment.utc(moment(r,"DD/MM/YYYY HH:mm:ss").diff(moment(a,"DD/MM/YYYY HH:mm:ss"))),s="";return i.hours()>0&&(s=i.hours()+" hr "),s+=i.minute()+" min "},e.tableParams=new n({page:1,count:20,sorting:{earning:"desc"}},{counts:[],getData:function(a){var r=10*(a.page()-1)+1;console.log("**************************");var i="",n="";return a.orderBy().length>0&&(i=a.orderBy()[0].substr(0,1),n=a.orderBy()[0].substr(1),i="+"===i?"ASC":"DESC"),s.getTrips({startDate:moment(e.selectedDates.startDate).startOf("day").unix(),endDate:moment(e.selectedDates.endDate).endOf("day").unix(),orderby:i,field:n,start:r,count:a.count()},{id:t.driverId}).$promise.then(function(t){return a.total(t.total),console.log("trop ",t),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,t.data})}})}e.$inject=["$scope","$stateParams","$rootScope","$interval","StaticDataService","DriversService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("DriversDetailController",e)}(),InitChart(),function(){"use strict";function e(e,t,a,r,i,s,n,l,o,d,c,v,p){function u(){v.getOverview({city:a.city,vehicle:a.vehicleType},function(e){m.overview=e},function(t){console.log(t),e.error=!0})}var m=this,g=moment(),f=(moment(),moment());m.live=!0,m.acquisitionData=[],m.ranges=i.ranges,m.config=s.lineChartConfig,m.acquisitionChart=angular.copy(s.discreteBarChartOptions),m.acquisitionChart.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},e.date=moment().format("dddd, MMMM Do YYYY"),e.datesForAcq={},e.datesForAcq.startDate=moment().subtract(7,"days").format("YYYY-MM-DD"),e.datesForAcq.endDate=moment().format("YYYY-MM-DD"),m.changeDate=function(t){"next"==t?(f=moment(f).add(1,"day"),e.date=moment(f).format("dddd, MMMM Do YYYY")):(f=moment(f).subtract(1,"day"),e.date=moment(f).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(f).unix()==moment(g).unix()?m.live=!0:m.live=!1,e.tableParams.reload(),e.tableParams.page(1),m.getAcquisition()},m.filterTerm="",m.filterFields=[{value:"id",name:"Driver ID"},{value:"dname",name:"Driver Name"},{value:"dphone",name:"Driver Phone"},{value:"dvehicle",name:"Vehicle Number"},{value:"vehicleType",name:"Vehicle Type"},{value:"riderFeedbackRating",name:"Feedback Rating "}],m.statusCodes="",m.tripStatusFilters=[{name:"All",value:"20,22,30,40,50,60,61,70,71"},{name:"Occupied",value:"61"},{name:"Unoccupied ",value:"70,71"},{name:"Offline",value:"20,22,30,40,50,60"}],m.searchTable=function(){e.tableParams.reload()},m.getAcquisition=function(){console.log(e.datesForAcq),o.getAcquisition({city:a.city,vehicle:a.vehicleType,from:moment(e.datesForAcq.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.datesForAcq.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){m.acquisitionData=[];var t=[];_.each(e,function(e){t.push({label:l.getLongDate(e.id),value:e.count})}),m.acquisitionData.push({key:"Drivers",values:t}),console.log("vm.acquisitionData ",m.acquisitionData)},function(t){console.log(t),e.error=!0})},u(),m.getAcquisition();var h=r(function(){u(),m.getAcquisition(),e.tableParams.reload(),e.tableParams.page(1)},3e4);e.$on("$destroy",function(){r.cancel(h)}),e.tableParams=new d({page:1,count:20,sorting:{earning:"desc"}},{counts:[],getData:function(t){var r=t.page();console.log("**************************");var i="",s="";t.orderBy().length>0&&(i=t.orderBy()[0].substr(0,1),s=t.orderBy()[0].substr(1),i="+"===i?"ASC":"DESC");var n={city:a.city,vehicle:a.vehicleType,from:moment(f).startOf("day").format("YYYYMMDD").toString(),to:moment(f).endOf("day").format("YYYYMMDD").toString(),orderby:i,field:s,start:r,count:t.count()};return m.searchTerm&&""!=m.searchTerm&&(n.term=m.filterTerm.value+"|"+m.searchTerm),""!=m.statusCodes.value&&(n.filterByStatus=m.statusCodes.value),o.getTopDrivers(n).$promise.then(function(a){return t.total(a.total),console.log("trop ",a),a.length>0?e.tblNoData=!1:e.tblNoData=!0,a})}})}e.$inject=["$scope","$log","$rootScope","$interval","StaticDataService","ChartConfigService","PerformanceService","PerformanceHandler","DriversService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("DriversController",e)}(),angular.module("tuktukV2Dahboard").factory("DriversService",DriversService),angular.module("httpInterceptor",[]).config(["$provide","$httpProvider","$compileProvider",function(e,t,a){var r=$(),i=$('<div class="app-loader"><div class="text-center" style="padding:10%"><img src="assets/images/ring.svg" title="Tuktuk" height="100px"></div></div>').appendTo($("body")).hide();t.interceptors.push(["$q","$rootScope","$location","$cookies",function(e,t,a,r){return{request:function(t){var a=t.url.indexOf(".html");return-1==a&&i.show(),t.params&&t.params.startTime&&t.params.endTime&&("hour"==t.params.rate?(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDDHH").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDDHH").toString()):(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDD").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDD").toString())),t||e.when(t)},requestError:function(t){return i.hide(),canRecover(t)?responseOrNewPromise:e.reject(t)},response:function(e){var t=e.config.url.indexOf(".html");return-1==t&&i.hide(),e},responseError:function(a){switch(i.hide(),a.status){case 401:t.$broadcast("unauthorized");break;case 403:break;case 500:}return e.reject(a)}}}]),a.directive("appMessages",function(){var e={link:[function(e,t,a){r.push($(t))}]};return e})}]),angular.module("tuktukV2Dahboard").filter("secondsToDateTime",[function(){return function(e){var t=new Date(1e3*e),a="",r=t.getUTCHours(),i=t.getUTCMinutes(),s=t.getUTCSeconds();return r&&(a+=r+":"),i&&(a+=i+":"),s&&(a+=s+""),a}}]),angular.module("tuktukV2Dahboard").directive("ngPunchCard",PunchCardFunc),angular.module("tuktukV2Dahboard").service("UserService",UserService),angular.module("tuktukV2Dahboard").factory("StaticDataService",StaticDataService),angular.module("tuktukV2Dahboard").factory("ChartConfigService",ChartConfigService),function(){"use strict";function e(e,t,a,r,i,s,n,l,o){null!=t.getUser()&&(r.defaults.headers.common.Authorization="Basic "+t.getUser().token),e.debug("runBlock end"),n.city=a.cities[0].value,n.vehicleType=a.vehicleTypes[0].value,n.logout=function(){l.logout({},function(e){i.error("You have logged out successfully.")},function(e){i.error(e)}),t.clearUser(),s.go("login"),n.isAuthenticated=!1},n.$on("unauthorized",function(){t.clearUser(),s.go("login"),n.isAuthenticated=!1}),n.$on("$stateChangeStart",function(e,a,r,i,l){console.log("to - "+a.name+" $state.current.name - "+s.current.name),null!=t.getUser()&&"login"==a.name&&(n.isAuthenticated=!0,s.go("home.live",{city:n.city,vehicleType:n.vehicleType}),e.preventDefault())})}e.$inject=["$log","UserService","StaticDataService","$http","toastr","$state","$rootScope","LoginService","$templateCache"],angular.module("tuktukV2Dahboard").run(e)}(),function(){"use strict";function e(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main","abstract":!0}).state("home.performance",{url:"/performance/:city/:vehicleType",templateUrl:"app/performance/performance.html",controller:"PerformanceController",controllerAs:"vm"}).state("home.maps",{url:"/maps/:city/:vehicleType",templateUrl:"app/maps/maps.html",controller:"MapsController",controllerAs:"vm",cache:!1}).state("home.live",{url:"/live/:city/:vehicleType",templateUrl:"app/live/live.html",controller:"LiveController",controllerAs:"vm"}).state("home.drivers",{url:"/drivers/:city/:vehicleType",templateUrl:"app/drivers/drivers.html",controller:"DriversController",controllerAs:"vm"}).state("home.offers",{url:"/offers/",templateUrl:"app/offers/offers.html",controller:"OffersController",controllerAs:"vm"}).state("home.drivers_detail",{url:"/detail/:driverId",templateUrl:"app/drivers/detail.html",controller:"DriversDetailController",controllerAs:"vm"}).state("home.trips",{url:"/trips",templateUrl:"app/trips/trips.html",controller:"TripsController",controllerAs:"vm"}).state("home.trip_detail",{url:"/tripdetail/:id/:driverId/:riderId",templateUrl:"app/trips/trip_details.html",controller:"TripDetailController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("tuktukV2Dahboard").config(e)}(),function(){"use strict";angular.module("tuktukV2Dahboard").constant("malarkey",malarkey).constant("moment",moment).constant("API","https://dev-api-analytics.gotuktuk.in/rest/v1/").constant("AUTH_API","https://dev-api-analytics.gotuktuk.in/rest/o/v1/")}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=1e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("tuktukV2Dahboard").config(e)}(),angular.module("tuktukV2Dahboard").run(["$templateCache",function(e){e.put("app/drivers/detail.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=selectedDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><!--<div class="col-md-12 col-sm-12 col-xs-12">\n            	<span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px;">&#10094;</span> <span class="text-center" ng-model="date" style="display: inline-block; padding: 7px 0;">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if="!vm.live" style="display: inline-block; padding: 7px;">&#10095;</span>\n            </div>--></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd"><div class="box box-heading box-0 text-center" ng-class="{\'box-online\': vm.profile.state== 22 || vm.profile.state== 11, \'box-offline\': vm.profile.state== 10 } "><img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{vm.profile.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class=iw-driver height=50><h4 class=title style=margin-top:10px>{{vm.profile.name}}</h4></div></div><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.id}}</h4><span>id</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.phone}}</h4><span>phone</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.vehicle}}</h4><span>vehicle number</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.joinedOn*1000 | date:\'dd MMM yy\'}}</h4><span>joined On</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.rides_today.total}} <small>/ {{vm.profile.rides_today.unique_ride}}</small></h4><span>ride / u</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.rides_total.total}} <small>/ {{vm.profile.rides_total.unique_ride}}</small></h4><span>Total rides</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate1.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_distance.total | number:2}}</h4><span>distance</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate2.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_online.total_hours | secondsToDateTime}}</h4><span>online hour</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.feedbackRating | number:2}}</h4><span>feedback</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{vm.profile.total_fare | number:0}} <small>/ {{vm.profile.today_fare | number:0}}</small></h4><span>total fare / fare</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{vm.profile.total_earning | number:0}} <small>/ {{vm.profile.today_earning | number:0}}</small></h4><span>total earning / earning</span></div></div><!-- \n<div class="col-md-2 col-sm-4 col-xs-12">\n                        <div class="box">\n                            <h4 class="number" ng-if="vm.profile.state== 22 || vm.profile.state== 11">Online</h4>\n                            <h4 class="number" ng-if="vm.profile.state== 10">Offline</h4>\n                            <span>Current Status</span>\n                        </div>\n                    </div>\n --><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate3.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_bid.total}}</h4><span>bid</span></div></div></div></div></div></div></div><div class=row><!--<div class="col-md-12 col-sm-12 col-xs-12">\n            <div class="panel panel-default">\n                <div class="panel-heading">\n                    <h4 style="margin-top: 0" class="title">Heatmap</h4></div>\n                <div class="panel-body">\n                    <div id="example">\n                        <svg id="visualisation" width="1000" height="500"></svg>\n                    </div>\n                </div>\n            </div>\n        </div>--><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div><table ng-table=tableParams class="table table-responsive table-bordered table-striped text-center"><tr ng-class="{\'unTruncate\':row.showMore,\'truncate\':!row.showMore}" class=truncate ng-repeat="row in $data track by $index"><td data-title="\'Trip ID\'" sortable="\'id\'" style="text-transform: inherit"><div class=trnc><!--  <a href="void:javascript(0);" ng-click="selectTrip(row)">{{row.id}}</a>--> <a ui-sref="home.trip_detail({id: row.id,driverId: row.driverInfo.id,riderId: row.riderInfo.id})">{{row.id}}</a></div></td><td data-title="\'Date & Time\'" sortable="\'requestOn\'" style=width:150px><div>{{(row.requestOn)*1000 | date:"dd/MM/yy \'at\' h:mma"}}</div></td><td data-title="\'Rider Info\'"><div class=trnc>{{row.riderInfo.name}}<br>{{row.riderInfo.phone}}</div></td><td data-title="\'Status\'" sortable="\'tripState\'" style="width: 100px"><div ng-if="row.tripState == 20" class=text-primary>Requested</div><div ng-if="row.tripState == 22">Allocated</div><div ng-if="row.tripState == 30">For Trip</div><div ng-if="row.tripState == 40">At Pickup</div><div ng-if="row.tripState == 60">At Destination</div><div ng-if="row.tripState == 50" class=text-info>In trip</div><div ng-if="row.tripState == 61" class=text-success>Successful</div><div ng-if="row.tripState == 70" class=text-warning>Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning>Can by Rider</div><div ng-if="row.tripState == 80">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger>Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82">Terminated</div></td><td data-title="\'Pickup\'" style="width: 200px"><div class=trnc>{{row.pickUp.line1 + \' \' + row.pickUp.line2}} {{row.pickUp.city + " " + row.pickUp.state + \' \' + row.pickUp.country}}</div></td><td data-title="\'Drop\'" style="width: 200px"><div class=trnc>{{row.drop.line1 + \' \' + row.drop.line2}} {{row.pickUp.city + " " + row.drop.state + \' \' + row.drop.country}}</div></td><td data-title="\'Time\'" align=center><div class=trnc>{{getTimeDiff(row.dropOn,row.pickupOn)}}</div></td><td data-title="\'Distance (KM)\'" align=center><div class=trnc>{{(row.disPickupDrop)/1000 | number:2}}</div></td><td data-title="\'Amt. (Rs.)\'" align=right><div class=trnc>{{row.amount.total | number:2}}<br><span class=small>Cash: {{row.amount.cash | number:2}}</span> <span class=small>Citrus: {{row.amount.citrus | number:2}}</span> <span class=small>Discount: {{row.amount.discount | number:2}}</span></div></td><td data-title="\'Rating\'" sortable="\'riderFeedbackRating\'" align=center><div class=trnc>{{row.riderFeedbackRating | number:1}}</div></td><!--<td data-title="\'\'">\n                                    <button class="btn btn-xs btn-link" ng-click="showMore(row)">More <i\n                                            class="glyphicon glyphicon-triangle-bottom"></i></button>\n                                </td>--></tr></table><table class="table table-bordered table-condensed" ng-show=tblNoData><tr><td colspan=9>No data found</td></tr></table></div></div><br><br></div></div></div></div><script type=text/ng-template id=myPopoverTemplate1.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_distance.intrip | number:2}}</h4>\n        <span>in trip</span>\n			<br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_distance.forTrip | number:2}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate2.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_online.intrip_time | secondsToDateTime}}</h4>\n        <span>in trip</span>\n			<br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_online.fortrip_time | secondsToDateTime}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate3.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_bid.accepted}}</h4>\n        <span>accepted</span>\n			<br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.rejected}}</h4>\n        <span>rejected</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.ignored}}</h4>\n        <span>ignored</span>\n\n    </div></script>'),e.put("app/drivers/drivers.html",'<div class=container-fluid><div class=row style="z-index:1; position:fixed; width:98%; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><div class=pull-right><input ng-change=vm.getAcquisition() class="form-control cstm-width text-center daterangepicker-aqq-chart" type=daterange ng-model=datesForAcq separator=" - " format="DD MMM YY" opens=left ranges=vm.ranges></div><h4 style="margin-top: 0" class=title>Driver Acquisition</h4></div><div class=panel-body><div><nvd3 options=vm.acquisitionChart data=vm.acquisitionData config=vm.config></nvd3></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12" ngsf-fullscreen><form class=form-inline><div class="input-group col-md-3"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div><div class="input-group col-md-3"><input ng-model=vm.searchTerm class=input-search-term placeholder=term ng-disabled=!vm.filterTerm> <button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-small">Search</button></div><div class="input-group col-md-3"><select ng-model=vm.statusCodes ng-change=vm.searchTable() class=form-control ng-options="statusFilter.name for statusFilter in vm.tripStatusFilters track by statusFilter.value"><option value="" disabled=disabled>Select Status</option></select></div></form><br><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Top Drivers</h4></div><div class=panel-body><div><table ng-table=tableParams class="table table-responsive table-bordered table-striped text-center"><!--<thead>\n                                <tr>\n                                    <th width="120" style="text-align:left;">#ID</th>\n                                    <th width="200" style="text-align:left;">Name</th>\n                                    <th width="120" style="text-align:right;">Earning(Rs.)</th>\n                                    <th width="120">Rides</th>\n                                    <th style="text-align:left;">Online</th>\n\n                                </tr>\n                            </thead>--><tbody><tr ng-repeat="row in $data track by $index"><td data-title="\'#ID\'" class=text-left><a ui-sref=home.drivers_detail({driverId:row.driver_id})>{{row.driver_id}}</a></td><td data-title="\'Name\'" sortable="\'name\'" class=text-left>{{row.name}}</td><td data-title="\'Earning(Rs.)\'" sortable="\'earning\'" class=text-right>{{row.earning}}</td><td data-title="\'Rides\'" sortable="\'rides\'">{{row.rides}}</td><td class=text-left data-title="\'Online\'"><div style="max-height: 80px; overflow: auto; display: block"><span ng-repeat="time in row.online" class="label label-primary">{{time.start*1000 | date:\'h:mma\'}} - {{time.end*1000 | date:\'h:mma\'}}</span></div></td></tr></tbody></table></div></div><br><br></div></div></div></div>'),e.put("app/live/live.html",'<div class=container-fluid ng-if=vm.overview><div class=row style="z-index:1; position:fixed; width:98%; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-2 text-center"><h4 class=title>BOOKINGS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.total_booking}}<small> / {{vm.overview.trip.unique_booking}}</small></h4><span>Total / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.successful.total}} <small>/ {{ vm.overview.trip.successful.unique_riders}} / {{ vm.overview.trip.fulfillment | number:2}}%</small></h4><span>Fulfilled / U / Fulfilment</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number uib-popover-template="\'myPopoverTemplate.html\'" popover-trigger=mouseenter>{{vm.overview.trip.cancelled.total}}<small> / {{ vm.overview.trip.cancelled.total_unique_rider}}</small></h4><span class="title text-warning">Cancelled / U</span><!--<button uib-popover-template="\'myPopoverTemplate.html\'" type="button" class="btn btn-default">Popover With Template</button>--></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.before_allocation.total_count}}<small> / {{ vm.overview.trip.before_allocation.unique_count }}</small></h4><span class="title text-warning">Can before Alloc / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.failed.total}}<small> / {{ vm.overview.trip.failed.unique_rider}}</small></h4><span>Failed / U</span></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.trip.in_process}}</h4><span>in Prog</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-3 text-center"><h4 class=title>RIDERS</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.total_riders}}</h4><span>Total</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.new_riders_reg}}</h4><span>New</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-4 text-center"><h4 class=title>tCASH</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.total_amount}}/-</h4><span>Total Amount</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.trip_affected}}</h4><span>Trips Affected</span></div></div></div></div></div></div><div class=row><div class="col-md-6 col-sm-12 col-xs-12" ngsf-fullscreen><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div><a ngsf-toggle-fullscreen show-if-fullscreen-enabled></a></div></div></div><div class="col-md-6 col-sm-12 col-xs-12" ngsf-fullscreen><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rides</h4></div><div class=panel-body><div><nvd3 options=vm.newRidersChartOptions data=vm.newRiders config=vm.config></nvd3></div><a ngsf-toggle-fullscreen show-if-fullscreen-enabled></a></div></div></div><div class="col-md-12 col-sm-12 col-xs-12" ngsf-fullscreen><div class="panel panel-default"><div class=panel-heading><div class=pull-right><select name=mySelect id=mySelect ng-options="option.label for option in vm.heatMapFilers track by option.id" ng-model=vm.selected ng-change=vm.loadHeatMap();></select><span style="padding:0 10px 0 5px">{{vm.heatMapDataLength}}</span> <a ngsf-toggle-fullscreen show-if-fullscreen-enabled style=color:#ccc><i class="fa fa-arrows-alt" show-if-fullscreen=false></i> <i show-if-fullscreen=true>X</i></a></div><h4 style="margin-top: 0" class=title>Heat Map</h4></div><div class=panel-body><div><ng-map id=live_map zoom=13 center="[22.717081666666665, 75.87155666666666]" on-resized=vm.resizeMap() trigger-resize=true><!--   <heatmap-layer id="foo" data="\'heatMapData\'"></heatmap-layer>--></ng-map><rzslider rz-slider-model=slider.minValue rz-slider-high=slider.maxValue rz-slider-options=slider.options></rzslider></div></div></div></div></div></div><script type=text/ng-template id=myPopoverTemplate.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.rider_cancelled}} <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled}}</small></h4>\n        <span>Rider Cancelled / u</span>\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.driver_cancelled}} <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled_by_driver}}</small></h4>\n        <span>Driver Cancelled / u</span>\n\n    </div></script>'),
e.put("app/login/login.html",'<style>html {\n    height: 100%;\n}\nbody {\n    background-color: #333;\n    height: 100%;\n    background-image: url("../../assets/images/blur-bg.jpg");\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-attachment: fixed;\n}</style><div class="well login-bg"><div class=row><div class=col-md-12><div class=col-md-12><h1 class=logo-login><img src=assets/images/gotuktuk-play-logo.png title=Tuktuk height=64></h1></div><div class=col-md-12><form name=login novalidate><div class=group><input class=inputMaterial type=text ng-model=user.username required placeholder=Username style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.username.$error ng-if=login.username.$touched><p ng-message=required>Please enter username.</p></div><div class=group><input class=inputMaterial type=password ng-model=user.password required placeholder=Password style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.password.$error ng-if=login.password.$touched><p ng-message=required>Please enter password.</p></div><div class=group><button class="btn btn-success form-control" style="border:none !important; width:100%" ng-disabled=login.$invalid ng-click=loginUser()>Login</button></div></form></div></div></div></div>'),e.put("app/main/main.html",'<nav id=load class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container-fluid><div class=row><div><a class=tg-menu ng-click="toggle = !toggle"><img src=assets/images/menu.svg title=Tuktuk></a></div></div></div></nav><div class=sidenav ng-class="{\'open\' : toggle}"><a ng-click="toggle = !toggle" class=toggle-menu-close><img src=assets/images/menu.svg title=Tuktuk></a><ul class="nav nav-stacked"><li style="padding:2px 10px"><span class=pull-right style="color: #333; padding: 15px 0px">Admin <span style="padding: 0;color:#333" ng-click=logout() id=admin type=button uib-dropdown-toggle ng-disabled=disabled>[ Logout ] </span></span><img height=30 style="margin:10px 12px" title=Tuktuk src=assets/images/gotuktuk-play-logo.png></li><li class=header><span style="padding:5px 10px">{{selectedVehicle.name}}</span> | <span style="padding:5px 10px">{{selectedCity.name}}</span></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.live({city: city,vehicleType: vehicleType})"><span class="fa fa-heart"></span> Live</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.drivers({city: city,vehicleType: vehicleType})"><span class="fa fa-paper-plane"></span> Drivers</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.maps({city: city,vehicleType: vehicleType})"><span class="fa fa-map"></span>Maps</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.performance({city: city,vehicleType: vehicleType})"><span class="fa fa-area-chart"></span> <strike>Performance</strike> <sup class=text-lowercase>Beta</sup></a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.trips({city: city,vehicleType: vehicleType})"><span class="fa fa-map-pin"></span> Trips</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref=home.offers><span class="fa fa-barcode"></span> <strike>Offers</strike></a></li></ul></div><ui-view></ui-view>'),e.put("app/maps/maps.html",'<style>.navbar-fixed-top, .navbar-fixed-bottom {\n    z-index: 10;\n}\n.live {\n    background-color: rgb(48, 176, 58);\n    border-radius: 100%;\n    height: 12px;\n    line-height: 12px;\n    position: absolute;\n    right: 50px !important;\n    text-indent: 17px;\n    top: 22px;\n    width: 12px;\n    z-index: 10;\n    left: inherit;\n}</style><div class=content><div class=live>LIVE</div><div class=content-div><ng-map id=drivers_map center="[22.717081666666665, 75.87155666666666]" style=height:100% zoom=12><map-data load-geo-json={{vm.API_URL}}geofence></map-data><!--<map-data  add-geo-json={{vm.geoJSON}}>\n      </map-data>--><div><marker ng-repeat="driver in vm.allDrivers.free.drivers track by $index" icon="{\n        url:\'assets/images/icons/marker-green.svg\',\n        scaledSize:[30,30],\n        origin: [0,0],\n        anchor: [15,15]\n      }" id=free-driver-{{$index}} on-click="vm.showDetail(driver,\'free-driver-\'+$index)" position={{driver.marker}}></marker><!--<marker ng-repeat="driver in vm.allDrivers.available.drivers track by $index"icon="{\n        url:\'assets/images/icons/marker-green.svg\',\n        scaledSize:[30,30],\n        origin: [0,0],\n        anchor: [15,15]\n      }"\n                id="custom-marker-{{$index}}"\n                on-click="vm.map.showInfoWindow(\'iw-drivers\', \'custom-marker-\'+$index)"\n                position="{{driver.marker}}">\n        </marker>\n      </div>\n      <div>\n        <marker ng-repeat="driver in vm.allDrivers.occupied.drivers track by $index" icon="{\n        url:\'assets/images/icons/marker-red.svg\',\n        scaledSize:[30,30],\n        origin: [0,0],\n        anchor: [15,15]\n      }"\n                id="custom-marker-{{$index}}"\n                on-click="vm.showDetail(driver)"\n                position="{{driver.marker}}">\n        </marker>--></div><info-window id=iw-drivers><div ng-non-bindable=""><div class=info-window><div class=iw-wrapper><div class="iw-header text-center"><img ng-src={{vm.driver.profile.profile_image}} class=iw-driver height=50><h3>{{vm.driver.profile.name}}</h3></div><div class=iw-content><table class=table><tbody><tr><td class=text-center><i class="fa fa-clock-o"></i></td><td>Time</td><td>{{vm.driver.profile.time | date:\'shortTime\'}}</td></tr><tr><td class=text-center><i class="fa fa-mobile-phone"></i></td><td>Phone#</td><td>{{vm.driver.profile.phone}}</td></tr><tr><td class=text-center><i class="fa fa-taxi"></i></td><td>Vehicle#</td><td>{{vm.driver.profile.vehicle}}</td></tr><tr><td class=text-center><i class="fa fa-user"></i></td><td>ID#</td><td>{{vm.driver.profile.driverId}}</td></tr><tr><td class=text-center><i class="fa fa-map-marker"></i></td><td>Location</td><td style=max-width:100px><a ng-click=vm.clicked(vm.driver.marker)><span ng-if=!vm.driver.address>Show</span></a> <span ng-if=vm.driver.address>{{vm.driver.address}}</span></td></tr></tbody></table></div></div></div></div></info-window></ng-map><div class=tabs-view><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : tabView}"><uib-tabset active=active><uib-tab index=0 heading=Drivers><div class=row><!--\n  <div class="col-md-4">\n                  <div class="pentagon total">\n                    <div class="text-center">\n                      <h4>Total</h4>\n                      <span>{{vm.allDrivers.total}}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div class="col-md-6">\n                  <div class="pentagon occupied">\n                    <div class="text-center">\n                      <h4>Occupied</h4>\n                      <span>{{vm.allDrivers.occupied.total}}</span>\n                    </div>\n                  </div>\n                </div>\n                 --><div class=col-md-12 style="min-height: 80px"><div class="pentagon available"><div class=text-center><h4>Free</h4><span>{{vm.allDrivers.free.total}}</span></div></div></div></div></uib-tab></uib-tabset></div></div></div></div>'),e.put("app/offers/offers.html",'<script type=text/ng-template id=headerCheckbox.html><input type="checkbox" ng-model="vm.offerCheckboxes.checked" class="select-all" value="" /></script><div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=selectedDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><!--<div class="col-md-12 col-sm-12 col-xs-12">\n            <span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px;">&#10094;</span> <span class="text-center" ng-model="date" style="display: inline-block; padding: 7px 0;">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if="!vm.live" style="display: inline-block; padding: 7px;">&#10095;</span>\n        </div>--></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><!--<div class="row overview-box">--><!--<span class="reload" ng-click="vm.refreshPage()"><i class="fa fa-refresh" aria-hidden="true"></i>--><!--</span>--><!--<div class="col-md-12 col-sm-12 col-xs-12 text-center">--><!--<div class="panel panel-default">--><!--<div class="panel-body">--><!--<div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd">--><!--<div class="box box-heading box-2 text-center" ng-class="{\'box-online\': vm.profile.state== 22 || vm.profile.state== 11, \'box-offline\': vm.profile.state== 10 } ">--><!--<h4 class="title">Offers</h4>--><!--</div>--><!--</div>--><!--<div class="col-md-10 col-sm-12 col-xs-12">--><!--<div class="col-md-6 col-sm-4 col-xs-12">--><!--<div class="box">--><!--<h4 class="number">{{vm.profile.id}}</h4>--><!--<span>id</span>--><!--</div>--><!--</div>--><!--<div class="col-md-6 col-sm-4 col-xs-12">--><!--<div class="box">--><!--<h4 class="number">{{vm.profile.phone}}</h4>--><!--<span>phone</span>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><div class=row><div class="col-md-4 col-sm-4 col-xs-12"><form class=form-inline><div class=form-group><input type=text class="form-control col-md-6 col-sm-6 col-xs-6" id=searchOffer placeholder="Enter Offer Code"></div><button type=submit class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></form><br><div class="panel panel-default"><div class="panel-heading box-6"><h4 style="margin-top: 0" class=title>Offers</h4></div><div class=panel-body><table ng-table=offerTableParams class="table table-bordered table-responsive"><tbody><tr ng-repeat="row in $data track by $index"><td header="\'headerCheckbox.html\'"><input type=checkbox ng-model=vm.offerCheckboxes.items[row.id]></td><td data-title="\'Code\'">{{row.code}}</td><td data-title="\'Offer Detail\'">{{row.description}}</td><td data-title="\'Action\'" class=text-center><button type=submit class="btn btn-add" ng-click=" vm.addOffer(row)"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button></td></tr></tbody></table><button type=submit class="btn btn-default pull-right"><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Offer(s)</button></div></div></div><div class="col-md-8 col-sm-8 col-xs-12"><form class=form-inline><div class=form-group><input type=text class="form-control col-md-6 col-sm-6 col-xs-6" id=searchDriver placeholder="Enter keyword"></div><button type=submit class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></form><br><div class="panel panel-default"><div class="panel-heading box-5"><h4 style="margin-top: 0" class=title>Drivers</h4></div><div class=panel-body><table ng-table=driverTableParams class="table table-bordered table-responsive"><tbody><tr ng-repeat="row in $data track by $index"><td data-title="\'\'"><input type=checkbox></td><td data-title="\'Name\'">{{row.name}}</td><td data-title="\'Driver Info\'" class=hidden-xs>{{row.phone}}{{row.vehicle}}</td><td data-title="\'Assigned Offer(s)\'">{{row.id}}</td><td ata-title="\'Action\'" class=text-center><button type=submit class="btn btn-add"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button></td></tr></tbody></table><button type=submit class="btn btn-default pull-right"><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Driver(s)</button></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Confirmation</h4></div><div class=panel-body><table class="table table-responsive no-mr"><tr><td class=text-left>Offers</td></tr><tr><td class=text-left><span class="label label-warning" ng-repeat="offer in vm.selectedOffers">Offer <button class=label-btn>x</button></span><!--<span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>\n                                <span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>\n                                <span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>\n                                <span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>\n                                <span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>\n                                <span class="label label-warning">Offer <button class="label-btn">x\n                                </button></span>--></td></tr><tr><td class=text-left><hr class=hidden-xs></td></tr></table><table class="table table-responsive no-mr"><tr><td class=text-left>Drivers</td></tr><tr><td class=text-left><span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span> <span class="label label-info">Driver <button class=label-btn>x</button></span></td></tr><tr><td class=text-right><hr><button type=submit class="btn btn-default"><span aria-hidden=true class="glyphicon glyphicon-remove"></span> Clear</button> <button type=submit class="btn btn-success"><span aria-hidden=true class="glyphicon glyphicon-ok"></span> Save</button></td></tr></table></div></div></div></div></div>'),e.put("app/performance/performance.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><br><br><br><br><div class="col-md-6 col-md-offset-6"><div class="flx-container flx-performance"><div class=flx-cnt-right><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-req.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_trip_request}}</h4></span><br><span>Bookings</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-suc.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_successful_trip}}</h4></span><br><span>Successful</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/new-rider.svg title=Tuktuk height=45></span><span><h4>{{ vm.riders.overview.cum_new_rider}}</h4></span><br><span>New Riders</span></div></div></div></div></div><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getTrips()" class="form-control cstm-width" type="daterange" ng-model="tripDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--   <select ng-model="vm.tripFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div></div></div><div class=row><div class=col-md-6><!---Driver---><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getDrivers()"class="form-control cstm-width" type="daterange" ng-model="driverDates" separator="/" format="DD-MMM-YY" opens="right" ranges="vm.ranges"/>\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--  <select ng-model="vm.driverFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Driver</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.driverChartOptions data=vm.drivers config=vm.config></nvd3></div></div></div></div></div></div><div class=col-md-6><!--Rider--><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getRiders()" class="form-control cstm-width" type="daterange" ng-model="riderDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!-- <select ng-model="vm.riderFrequency" class="form-control"\n                                ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency)"\n                                ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                        </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rider</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.riderChartOptions data=vm.riders config=vm.config></nvd3></div></div></div></div></div></div></div></div>'),e.put("app/trips/trip_details.html",'<div class=content><div class=content-div><ng-map id=drivers_map center="[22.717081666666665, 75.87155666666666]" style=height:100% zoom=12><map-data load-geo-json={{vm.API_URL}}geofence></map-data><!--<map-data  add-geo-json={{vm.geoJSON}}>\n            </map-data>--><div><marker ng-repeat="driver in vm.allDrivers.free.drivers track by $index" icon="{\n        url:\'assets/images/icons/marker-green.svg\',\n        scaledSize:[30,30],\n        origin: [0,0],\n        anchor: [15,15]\n      }" id=free-driver-{{$index}} on-click="vm.showDetail(driver,\'free-driver-\'+$index)" position={{driver.marker}}></marker></div><info-window id=iw-drivers><div ng-non-bindable=""><div class=info-window><div class=iw-wrapper><div class="iw-header text-center"><img ng-src={{vm.driver.profile.profile_image}} class=iw-driver height=50><h3>{{vm.driver.profile.name}}</h3></div><div class=iw-content><table class=table><tbody><tr><td class=text-center><i class="fa fa-clock-o"></i></td><td>Time</td><td>{{vm.driver.profile.time | date:\'shortTime\'}}</td></tr><tr><td class=text-center><i class="fa fa-mobile-phone"></i></td><td>Phone#</td><td>{{vm.driver.profile.phone}}</td></tr><tr><td class=text-center><i class="fa fa-taxi"></i></td><td>Vehicle#</td><td>{{vm.driver.profile.vehicle}}</td></tr><tr><td class=text-center><i class="fa fa-user"></i></td><td>ID#</td><td>{{vm.driver.profile.driverId}}</td></tr><tr><td class=text-center><i class="fa fa-map-marker"></i></td><td>Location</td><td style=max-width:100px><a ng-click=vm.clicked(vm.driver.marker)><span ng-if=!vm.driver.address>Show</span></a> <span ng-if=vm.driver.address>{{vm.driver.address}}</span></td></tr></tbody></table></div></div></div></div></info-window></ng-map><div class=tabs-view><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : tabView}"><uib-tabset active=active><uib-tab index=0 heading=Trips><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.requestOn)*1000 | date:"MMM dd, yy \'at\' h:mma"}}</h4><span>date</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{getTimeDiff(selectedTrip.requestOn, selectedTrip.pickupOn ) | secondsToDateTime}} / {{getTimeDiff(selectedTrip.pickupOn ,selectedTrip.dropOn)| secondsToDateTime}}</h4><span>Time for Trip / in Trip</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.disStartPickup/1000) | number:2}}km / {{(selectedTrip.disPickupDrop/1000) | number:2}}km</h4><span>Distance for Trip / in Trip</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs.{{selectedTrip.fareStartPickup}}</h4><span>Amount</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.pickupOn ? (selectedTrip.pickupOn *1000 | date:"h:mma ") : \'N/A\'}} / {{selectedTrip.dropOn ? (selectedTrip.dropOn *1000| date:"h:mma ") : \'N/A\'}}</h4><span>Start Time / End Time</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs.{{selectedTrip.amount.total}} <small>/ {{selectedTrip.amount.cash}} / {{selectedTrip.amount.tcash}}</small></h4><span>Amount Total<small> / Cash / tCash</small></span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderFeedbackRating | number:2}}</h4><span>Rider\'s Feedback</span></div></div></div></div></uib-tab><uib-tab index=1 heading="Driver Info"><table width=100% class="table table-responsive table-bordered table-striped"><tr><td colspan=2><img ng-src="{{selectedTrip.driverInfo.profileImage ? selectedTrip.driverInfo.profileImage:\'assets/images/default.png\' }}" style=height:100px></td></tr><tr><td>Name</td><td><label>{{selectedTrip.driverInfo.name}}</label></td></tr><tr><td>Vehicle Number</td><td><label>{{selectedTrip.driverInfo.vehicle}}</label></td></tr><tr><td>Phone Number</td><td><label>{{selectedTrip.driverInfo.phone}}</label></td></tr><tr><td>Current Status</td><td><div ng-if="selectedTrip.driverInfo.state == 10"><span class=text-danger>Offline</span></div><div ng-if="selectedTrip.driverInfo.state == 11"><span class=text-success>Online</span></div><div ng-if="selectedTrip.driverInfo.state == 22"><span class=text-danger>Unoccupied</span></div><div ng-if="selectedTrip.driverInfo.state == 30"><span class=text-info>Occupied</span></div><div ng-if="selectedTrip.driverInfo.state == 40"><span class=text-info>Occupied</span></div><div ng-if="selectedTrip.driverInfo.state == 50"><span class=text-info>Occupied</span></div></td></tr><tr><td>Total Rides</td><td>{{selectedTrip.driverInfo.ridesTotal}}</td></tr><tr><td>Today\'s Rides</td><td>{{selectedTrip.driverInfo.ridesToday}}</td></tr><tr><td>Today\'s Earnings</td><td>{{selectedTrip.driverInfo.fare}}</td></tr><tr><td>Overall Feedback</td><td>{{selectedTrip.driverInfo.avg | number:2}}</td></tr></table></uib-tab><uib-tab index=1 heading="Rider Info"><table width=100% class="table table-responsive table-bordered table-striped"><tr><td colspan=2><img ng-src="{{selectedTrip.riderInfo.profileImage ? selectedTrip.riderInfo.profileImage:\'assets/images/default.png\' }}" style=height:100px></td></tr><tr><td>Name</td><td><label>{{selectedTrip.riderInfo.name}}</label></td></tr><tr><td>Phone Number</td><td><label>{{selectedTrip.riderInfo.phone}}</label></td></tr><tr><td>Email</td><td>{{selectedTrip.riderInfo.email}}</td></tr><tr><td>Gender</td><td>{{selectedTrip.riderInfo.gender}}</td></tr><tr><td>Age</td><td>{{selectedTrip.riderInfo.age}}</td></tr><tr><td>Total Rides</td><td>{{selectedTrip.riderInfo.ridesTotal}}</td></tr><tr><td>Today\'s Rides</td><td>{{selectedTrip.riderInfo.ridesToday}}</td></tr></table></uib-tab></uib-tabset></div></div></div></div>'),e.put("app/trips/trips.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=" vm.onDateChange()" class="form-control cstm-width text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><br><br><br><br></div><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"></div></div><br><!-- <div class="row">\n        <div class="col-md-12">\n            <div class="panel panel-default">\n                <div class="panel-body">\n                    <h4 style="margin-top: 0">Heatmap</h4>\n                    <br>\n\n                    <div class="table-responsive">\n                        <div id="chart"></div>\n                      &lt;!&ndash;  <nvd3 options="vm.tripChartOptions" data="vm.trips" config="vm.config"></nvd3>&ndash;&gt;\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>--><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right"><div class=form-group><div class="radio inpt-style"><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=day> <i></i> <span>Per Day</span></label></div></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>tCash Burned</h4></div><div class=panel-body><nvd3 options=vm.tcashChartOptions data=vm.tcashData config=vm.config></nvd3></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form class=form-inline><div class=input-group><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div><div class=input-group><input ng-model=vm.searchTerm class=form-control placeholder=term ng-disabled=!vm.filterTerm></div><div class=input-group><button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class=input-group><select ng-model=vm.statusCodes ng-change=vm.searchTable() class=form-control ng-options="statusFilter.name for statusFilter in vm.tripStatusFilters track by statusFilter.value"><option value="" disabled=disabled>Select Status</option></select></div></form><br></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips Table</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered table-condensed"><tr class=truncate ng-repeat="row in $data track by $index"><!-- <td data-title="\'Trip ID\'" sortable="\'id\'" style="text-transform: inherit">\n                                    <a target="_blank"\n                                       ui-sref="home.trip_detail({id: row.id,driverId: row.driverInfo.id,riderId: row.riderInfo.id})">{{row.id}}\n                                    </a>\n                                </td>--><td data-title="\'Date & Time\'" sortable="\'requestOn\'" style="width: 170px"><a target=_blank ui-sref="home.trip_detail({id: row.id,driverId: row.driverInfo.id,riderId: row.riderInfo.id})"><div>{{(row.requestOn)*1000 | date:"dd/MMM/yyyy \'at\' h:mma"}}</div></a></td><td data-title="\'Status\'" sortable="\'tripState\'" style="width: 100px"><div ng-if="row.tripState == 20" class=text-primary style="white-space: nowrap">Requested</div><div ng-if="row.tripState == 22" style="white-space: nowrap">Allocated</div><div ng-if="row.tripState == 30" style="white-space: nowrap">For Trip</div><div ng-if="row.tripState == 40" style="white-space: nowrap">At Pickup</div><div ng-if="row.tripState == 60" style="white-space: nowrap">At Destination</div><div ng-if="row.tripState == 50" class=text-info style="white-space: nowrap">In trip</div><div ng-if="row.tripState == 61" class=text-success style="white-space: nowrap">Successful</div><div ng-if="row.tripState == 70" class=text-warning style="white-space: nowrap">Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning style="white-space: nowrap">Can by Rider</div><div ng-if="row.tripState == 80" style="white-space: nowrap">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger style="white-space: nowrap">Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82" style="white-space: nowrap">Terminated</div></td><td data-title="\'Driver Info\'"><div>{{row.driverInfo.name}}<br><!--  <span class="small">{{row.driverInfo.phone}}</span>\n                                        <span class="small">{{row.driverInfo.vehicle}}</span>--></div></td><td data-title="\'VType\'" sortable="\'vehicleType\'" align=center><div>{{row.vehicleType}}</div></td><td data-title="\'Rider  Info\'"><div>{{row.riderInfo.name}}</div></td><!--<td data-title="\'Pickup\'" style="width:150px;">\n                                    <div class="truncate truncate-pick-drop">{{row.pickUp.line1 + \' \' + row.pickUp.line2}} {{row.drop.city + \'\n                                        \' +row.pickUp.state + \' \' +\n                                        row.pickUp.country}}\n                                    </div>\n                                </td>\n                                <td data-title="\'Drop\'" style="width:150px;">\n                                    <div class="truncate truncate-pick-drop">{{row.drop.line1 + \' \' + row.drop.line2}} {{row.drop.city + \' \'\n                                        +row.drop.state + \' \' +\n                                        row.drop.country}}\n                                    </div>\n                                </td>--><td data-title="\'Time\'" sortable="\'time\'" style=width:110px><div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div><!--<div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div>--></td><td data-title="\'Dist(KM)\'" sortable="\'disPickupDrop\'" align=center><div>{{(row.disPickupDrop)/1000 | number:2}}</div></td><!-- <td data-title="\'Amt(Rs.)\'" sortable="\'amount\'" align="right">\n                                    <div class="truncate truncate-amt"><b>{{row.amount.total}}</b>\n                                        <span class="small">Cash: {{row.amount.cash | number:2}}</span>\n                                        <span class="small">Citrus: {{row.amount.citrus | number:2}}</span>\n                                        <span class="small">Discount: {{row.amount.discount | number:2}} </span>\n                                    </div>\n                                </td>\n                                <td data-title="\'Rating\'" sortable="\'riderFeedbackRating\'" align="center">\n                                    <div>{{row.riderFeedbackRating | number:1}}</div>\n                                </td>--><!-- <td data-title="\'Show\'" align="center">\n                                    <button class="btn btn-xs btn-link" ng-click="showMore(row)"><i\n                                            ng-class="{\'glyphicon-chevron-up\':row.showMore,\'glyphicon-chevron-down\':!row.showMore}"\n                                            class="glyphicon glyphicon-chevron-down"></i></button>\n                                </td>--></tr></table><table class="table table-bordered table-striped table-condensed" ng-show=tblNoData><tr><td colspan=11>No data found</td></tr></table></div></div></div></div></div><!--<div class="row">\n        <div class="col-md-6">\n            &lt;!&ndash;-Driver-&ndash;&gt;\n            <div class="row">\n                <div class="col-md-6"></div>\n                <div class="col-md-6 text-right">\n                    <form class="form-inline">\n                        <div class="form-group " style="margin-top:15px">\n                            <div class="radio inpt-style">\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)"\n                                              ng-model="vm.driverFrequency.value" value="hour"><i></i>\n                                    <span>Per Hour</span></label>\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)"\n                                              ng-model="vm.driverFrequency.value" value="day"> <i></i>\n                                    <span>Per Day</span></label>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <br>\n\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="panel panel-default">\n                        <div class="panel-body">\n                            <h4 style="margin-top: 0">Driver</h4>\n                            <br>\n\n                            <div class="table-responsive">\n                                <nvd3 options="vm.driverChartOptions" data="vm.drivers" config="vm.config"></nvd3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-6">\n            &lt;!&ndash;Rider&ndash;&gt;\n            <div class="row">\n                <div class="col-md-6"></div>\n                <div class="col-md-6 text-right">\n                    <form class="form-inline">\n\n                        <div class="form-group " style="margin-top:15px">\n                            <div class="radio inpt-style">\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)"\n                                              ng-model="vm.riderFrequency.value" value="hour"><i></i>\n                                    <span>Per Hour</span></label>\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)"\n                                              ng-model="vm.riderFrequency.value" value="day"> <i></i>\n                                    <span>Per Day</span></label>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <br>\n\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="panel panel-default">\n                        <div class="panel-body">\n                            <h4 style="margin-top: 0">Rider</h4>\n                            <br>\n\n                            <div class="table-responsive">\n                                <nvd3 options="vm.riderChartOptions" data="vm.riders" config="vm.config"></nvd3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>--></div>'),
e.put("app/components/navbar/navbar.html","")}]);
//# sourceMappingURL=../maps/scripts/app-91771f8d45.js.map
