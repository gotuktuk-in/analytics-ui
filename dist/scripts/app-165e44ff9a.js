function MapService(e,t,i,a){var s=i;return t("",{id:"@id",precision:"@precision",geohash:"@geohash"},{getDrivers:{method:"GET",url:s+"map/driver"},getAllDrivers:{method:"GET",url:s+"online/driver",isArray:!0},getProfile:{method:"GET",url:s+"drivers/profile/:id",isArray:!1},loadGeoJson:{method:"GET",url:a+"geofence"},registerList:{method:"GET",url:s+"drivers/registered",isArray:!0},inprocessList:{method:"GET",url:s+"drivers/inprocess"},deleteInProcessDriver:{method:"DELETE",url:s+"drivers/:id"},getDemandSupply:{method:"GET",url:s+"supply/demand/indore/auto/:precision",isArray:!0},getDemandSupplyHistory:{method:"GET",url:s+"supply/demand/geohash/:geohash",isArray:!1},getGroups:{method:"GET",url:s+"surge/group/",isArray:!0},heatmap:{method:"GET",url:s+"trips/heatmap",isArray:!0}})}function DSHandler(){var e={};return e.trips=[],e.filteredTrips=[{key:"Demand",values:[]},{key:"Supply",values:[]}],e.getDS=function(t){var i=[],a=[];return _.each(t.value,function(t){var s=e.getLongDate(t.id);i.push([s,t.supply]),a.push([s,t.demand])}),e.filteredTrips[0].values=i,e.filteredTrips[1].values=a,e.filteredTrips},e.getLongDate=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=t.substring(8,10),n=15*(t.substring(10,11)-1),l=new Date(i,a-1,s,r,n);return l},e}function TripsService(e,t,i){var a=i;return t("",{frequency:"@frequency",vehicle:"@vehicle",id:"@id",term:"@term",filterURL:"@filterURL"},{getTrips:{method:"GET",url:a+"trip/:frequency/:vehicle",isArray:!0},getBurn:{method:"GET",url:a+"burn",isArray:!0},getAllTrips:{method:"GET",url:a+"trips"},getTripDetail:{method:"GET",url:a+"tripinfo/:id",isArray:!1},getRiders:{method:"GET",url:a+"rider/:frequency/:vehicle",isArray:!0},getTCash:{method:"GET",url:a+"trips/tcash",isArray:!0},getBidDetail:{method:"GET",url:a+"trip/bid/drivers/:id",isArray:!0},getProfile:{method:"GET",url:a+"drivers/profile/:id",isArray:!1},updateFare:{method:"POST",url:a+"trip/settled/:id"},cancelTrip:{method:"PUT",url:a+"trip/cancelled/:id"},getNewRiders:{method:"GET",url:a+"trips/newRiders",isArray:!0}})}function TripsHandler(){var e={};return e.trips=[],e.filteredTrips=[{key:"Requests",values:[]},{key:"Requests (U)",values:[]},{key:"Cancelled",values:[]},{key:"Cancelled (U)",values:[]},{key:"Fulfilled",values:[]},{key:"Fulfilled (U)",values:[]},{key:"Cancelled trips (by rider)",values:[]},{key:"Cancelled trips (by driver)",values:[]},{key:"tCash",values:[]},{key:"Failed",values:[]},{key:"Failed (U)",values:[]}],e.getTrips=function(t){var i=[],a=[],s=[],r=[],n=[],l=[],o=[],d=[],c=[],u=[],p=[];return _.each(t,function(t){var m=e.getLongDate(t.id);i.push([m,t.requests.total]),a.push([m,t.requests.unique_riders]),s.push([m,t.cancelled.total]),r.push([m,t.cancelled.unique]),n.push([m,t.success.total]),l.push([m,t.success.unique_riders]),o.push([m,t.cancelled.cancelled_by_riders]),d.push([m,t.cancelled.cancelled_by_drivers]),u.push([m,t.failed.total]),p.push([m,t.failed.unique_riders]),c.push([m,t.tcash_used])}),e.filteredTrips[0].values=i,e.filteredTrips[1].values=a,e.filteredTrips[2].values=s,e.filteredTrips[3].values=r,e.filteredTrips[4].values=n,e.filteredTrips[5].values=l,e.filteredTrips[6].values=o,e.filteredTrips[7].values=d,e.filteredTrips[8].values=c,e.filteredTrips[9].values=u,e.filteredTrips[10].values=p,console.log(e.filteredTrips),e.filteredTrips},e.burn=[],e.filteredBurn=[{key:"Trip",values:[]},{key:"Offer",values:[]},{key:"Bonus",values:[]},{key:"Tcash",values:[]},{key:"Total",values:[]}],e.getBurn=function(t){var i=[],a=[],s=[],r=[],n=[];return _.each(t,function(t){var l=e.getLongDateBurn(t.date);i.push([l,t.trip]),a.push([l,t.offer]),s.push([l,t.bonus]),r.push([l,t.tcash]),n.push([l,t.total])}),e.filteredBurn[0].values=i,e.filteredBurn[1].values=a,e.filteredBurn[2].values=s,e.filteredBurn[3].values=r,e.filteredBurn[4].values=n,e.filteredBurn},e.drivers=[],e.filteredDrivers=[{key:"New Drivers",values:[]},{key:"Active Drivers",values:[]},{key:"Avg Trip/Driver",values:[]}],e.getDrivers=function(t){var i=[],a=[],s=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.total_offline]),a.push([r,t.total_online]),s.push([r,t.average_rides_per_driver])}),e.filteredDrivers[0].values=i,e.filteredDrivers[1].values=a,e.filteredDrivers[2].values=s,e.filteredDrivers},e.riders=[],e.filteredRiders=[{key:"New Riders",values:[]},{key:"Active Riders",values:[]},{key:"Total Riders",values:[]}],e.getRiders=function(t){var i=[],a=[],s=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.newly_reg_riders]),a.push([r,t.active_riders]),s.push([r,t.total_riders])}),e.filteredRiders[0].values=i,e.filteredRiders[1].values=a,e.filteredRiders[2].values=s,e.filteredRiders},e.getLongDate=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=t.substring(8,10),n=new Date(i,a-1,s,r);return n},e.getLongDateBurn=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=new Date(i,a-1,s);return r},e}function RidersService(e,t,i){var a=i;return t("",{id:"@id"},{getRiders:{method:"GET",url:a+"trips/riderChart",isArray:!0}})}function SurgeService(e,t,i){var a=i;return t("",{id:"@id"},{getGroups:{method:"GET",url:a+"surge/group/",isArray:!0},createGroup:{method:"POST",url:a+"surge/create/group/"},updateSurgeForGroup:{method:"POST",url:a+"surge/apply"},createSurge:{method:"POST",url:a+"surge/create",isArray:!0},removeGroup:{method:"DELETE",url:a+"surge/delete/group/:id/indore/auto"},updateGroup:{method:"PUT",url:a+"surge/edit/group",isArray:!0},getGroupSetting:{method:"GET",url:a+"surge/apply/group/:id"}})}function PerformanceService(e,t,i,a){var s=i;return t("",{frequency:"@frequency",vehicle:"@vehicle"},{getTrips:{method:"GET",url:s+"trip/:frequency/:vehicle",isArray:!0},getDrivers:{method:"GET",url:s+"driver/:frequency/:vehicle",isArray:!0},getRiders:{method:"GET",url:s+"rider/:frequency/:vehicle",isArray:!0}})}function PerformanceHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Requests",values:[]},{key:"Requests (U)",values:[]},{key:"Cancelled",values:[]},{key:"Cancelled (U)",values:[]},{key:"Fulfilled",values:[]},{key:"Fulfilled (U)",values:[]},{key:"Cancelled trips (by rider)",values:[]},{key:"Cancelled trips (by driver)",values:[]},{key:"tCash",values:[]},{key:"Failed",values:[]},{key:"Failed (U)",values:[]}],e.filteredDrivers=[{key:"New Drivers",values:[]},{key:"Active Drivers",values:[]},{key:"Avg Trip/Driver",values:[]}],e.filteredRiders=[{key:"New Riders",values:[]},{key:"Active Riders",values:[]},{key:"Total Riders",values:[]}],e.getTrips=function(t){var i=[],a=[],s=[],r=[],n=[],l=[],o=[],d=[],c=[],u=[],p=[];return _.each(t,function(t){var m=e.getLongDate(t.id);i.push([m,t.requests.total]),a.push([m,t.requests.unique_riders]),s.push([m,t.cancelled.total]),r.push([m,t.cancelled.unique]),n.push([m,t.success.total]),l.push([m,t.success.unique_riders]),o.push([m,t.cancelled.cancelled_by_riders]),d.push([m,t.cancelled.cancelled_by_drivers]),u.push([m,t.failed.total]),p.push([m,t.failed.unique_riders]),c.push([m,t.tcash_used])}),e.filteredTrips[0].values=i,e.filteredTrips[1].values=a,e.filteredTrips[2].values=s,e.filteredTrips[3].values=r,e.filteredTrips[4].values=n,e.filteredTrips[5].values=l,e.filteredTrips[6].values=o,e.filteredTrips[7].values=d,e.filteredTrips[8].values=c,e.filteredTrips[9].values=u,e.filteredTrips[10].values=p,e.filteredTrips},e.getDrivers=function(t){var i=[],a=[],s=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.total_offline]),a.push([r,t.total_online]),s.push([r,t.average_rides_per_driver])}),e.filteredDrivers[0].values=i,e.filteredDrivers[1].values=a,e.filteredDrivers[2].values=s,e.filteredDrivers},e.getRiders=function(t){var i=[],a=[],s=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.newly_reg_riders]),a.push([r,t.active_riders]),s.push([r,t.total_riders])}),e.filteredRiders[0].values=i,e.filteredRiders[1].values=a,e.filteredRiders[2].values=s,e.filteredRiders},e.getLongDate=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=t.substring(8,10),n=new Date(i,a-1,s,r);return n},e}function OfferService(e,t,i,a){var s=i;return t("",{id:"@id"},{getOffers:{method:"GET",url:s+"offers",isArray:!1},getDrivers:{method:"GET",url:s+"drivers/list",isArray:!1},getDriverOffers:{method:"GET",url:s+"offers/driver/:id",isArray:!1},assignOffers:{method:"POST",url:s+"drivers/offers",isArray:!1}})}function LoginService(e,t,i,a){var s=i,r=a;return t("",{id:"@id"},{doLogin:{method:"POST",url:r+"login"},logout:{method:"GET",url:s+"logout"}})}function PayoutService(e,t,i){var a=i;return t("",{drivers:"@drivers"},{invoiceListPublish:{method:"PUT",url:a+"drivers/invoice/publish",isArray:!1},invoiceListPublishAll:{method:"PUT",url:a+"allDrivers/invoice/publish",isArray:!1},invoiceListPaid:{method:"POST",url:a+"drivers/invoice/paid/:drivers",isArray:!1},addFine:{method:"PUT",url:a+"drivers/invoice/fine/:drivers",isArray:!1},getInvoiceList:{method:"GET",url:a+"drivers/invoice",isArray:!0},viewDaywiseList:{method:"GET",url:a+"drivers/invoice/detail/:drivers",isArray:!1},getWeeks:{method:"GET",url:a+"payout/weeks",isArray:!0}})}function OnboardingService(e,t,i){var a=i;return t("",{driverId:"@driverId",vehicleRegNumber:"@vehicleRegNumber"},{saveDriverInfo:{method:"POST",url:a+"drivers/BasicInfo",isArray:!1},updateDriverInfo:{method:"PUT",url:a+"drivers/:driverId/BasicInfo",isArray:!1},saveAccountInfo:{method:"POST",url:a+"drivers/AccountInfo",isArray:!1},saveVehicleInfo:{method:"POST",url:a+"drivers/VehicleInfo",isArray:!1},saveLicenseInfo:{method:"POST",url:a+"drivers/LicenseInfo",isArray:!1},saveIdentityInfo:{method:"POST",url:a+"drivers/IdentityInfo",isArray:!1},saveDeviceInfo:{method:"POST",url:a+"drivers/saveDeviceInfo",isArray:!1},saveOtherInfo:{method:"POST",url:a+"drivers/AccountInfo",isArray:!1},verifyDriver:{method:"POST",url:a+"driver/verify",isArray:!1},vehicleSearch:{method:"GET",url:a+"vehicle/:vehicleRegNumber",isArray:!1}})}function DriversService(e,t,i){var a=i;return t("",{id:"@id",mobile:"@mobile",drivers:"@drivers"},{getTopDrivers:{method:"GET",url:a+"drivers/topdrivers",isArray:!0},getLeaderboard:{method:"GET",url:a+"drivers/leaderboard",isArray:!1},getAcquisition:{method:"GET",url:a+"drivers/acquisition",isArray:!0},getSupply:{method:"GET",url:a+"drivers/supply/hours",isArray:!0},getProfile:{method:"GET",url:a+"drivers/profile/:id",isArray:!1},getTrips:{method:"GET",url:a+"drivers/:id/trips",isArray:!1},verifyDriver:{method:"GET",url:a+"drivers/:mobile/",isArray:!1},accountDriver:{method:"PUT",url:a+"driver/account/:id/",isArray:!1},getWeeks:{method:"GET",url:a+"payout/weeks",isArray:!0},getInvoiceList:{method:"GET",url:a+"drivers/invoice/:id",isArray:!1},viewDaywiseList:{method:"GET",url:a+"drivers/invoice/detail/:drivers",isArray:!1},getTripsChart:{method:"GET",url:a+"drivers/trip/chart/:drivers",isArray:!0},getOnlineChart:{method:"GET",url:a+"drivers/online/chart/:drivers",isArray:!0}})}function DriverHandler(){function e(e){var t=Math.floor(e/3600),i=e%3600,a=(Math.floor(i/60),i%60),s=(Math.ceil(a),t);return s}var t={};return t.trips=[],t.filteredTrips=[{key:"Successful",values:[]},{key:"Cancelled",values:[]},{key:"Accepted Trip",values:[]},{key:"Rejected Trip",values:[]},{key:"Ignored Trip",values:[]},{key:"Allocated Trip",values:[]}],t.getTripsFtr=function(e){var i=[],a=[],s=[],r=[],n=[],l=[];return _.each(e,function(e){var o=t.getLongDate(e.date);i.push([o,e.successful]),a.push([o,e.cancelled]),s.push([o,e.acceptedTrip]),r.push([o,e.rejectedTrip]),n.push([o,e.ignoredTrip]),l.push([o,e.allocatedTrip])}),t.filteredTrips[0].values=i,t.filteredTrips[1].values=a,t.filteredTrips[2].values=s,t.filteredTrips[3].values=r,t.filteredTrips[4].values=n,t.filteredTrips[5].values=l,t.filteredTrips},t.online=[],t.filteredOnline=[{key:"Hours",values:[]}],t.getOnlineFtr=function(i){var a=[];return _.each(i,function(i){var s=t.getLongDate(i.date);a.push([s,e(i.online)])}),t.filteredOnline[0].values=a,t.filteredOnline},t.acquisition=[],t.getAcquisition=function(e){var i=[],a=0;return _.each(e,function(e){var s=t.getLongDate(e.id);i.push([s,parseInt(e.count)]),a+=parseInt(e.count)}),t.totalDrivers=a,t.filteredAcquisition=[{key:"Drivers "+t.totalDrivers,values:[]}],t.filteredAcquisition[0].values=i,console.log(t.filteredAcquisition),t.filteredAcquisition},t.supply=[],t.filteredSupply=[{key:"Hours",values:[]}],t.getSupply=function(i){var a=[],s=[];return _.each(i,function(i){var r=t.getLongDate(i.id);a.push([r,e(i.totalOnline)]),s.push(parseInt(e(i.totalOnline)))}),t.maxValueDNew=_.max(s,function(e){return e}),t.filteredSupply[0].values=a,console.log(t.filteredSupply),t.filteredSupply},t.getLongDate=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=t.substring(8,10),n=new Date(i,a-1,s,r);return n},t}function LiveService(e,t,i){var a=i;return t("",{frequency:"@frequency",vehicle:"@vehicle",id:"@id",term:"@term",filterURL:"@filterURL"},{getOverview:{method:"GET",url:a+"overview/live/"},getTrips:{method:"GET",url:a+"trip/:frequency/:vehicle",isArray:!0},getDrivers:{method:"GET",url:a+"driver/live/"},getCancelTripsDriver:{method:"GET",url:a+"drivers/cancelled"},getCancelTripsRider:{method:"GET",url:a+"riders/cancelled"},getRiders:{method:"GET",url:a+"rider/live/"},heatmap:{method:"GET",url:a+"trips/heatmap",isArray:!0}})}function LiveHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Total Booking",values:[]},{key:"Total Successful Booking",values:[]},{key:"Unique Successful Booking",values:[]},{key:"In-Progress",values:[]},{key:"Total Cancelled",values:[]},{key:"Unique Cancelled",values:[]},{key:"Total Failed",values:[]},{key:"Unique Failed",values:[]}],e.filteredDrivers=[{key:"Total Drivers",values:[]},{key:"Free Drivers",values:[]},{key:"Occupied Driver",values:[]}],e.filteredRiders=[{key:"Total Riders",values:[]},{key:"New Riders",values:[]}],e.getDrivers=function(){var t=[],i=[],a=[];return _.each(e.drivers,function(s){var r=e.getLongDate(s.id);t.push([r,s.total_count]),i.push([r,s.free_driver]),a.push([r,s.occupied_driver])}),e.filteredDrivers[0].values=t,e.filteredDrivers[1].values=i,e.filteredDrivers[2].values=a,e.filteredDrivers},e.canTripDriver=function(t){e.cancelledTripsDriver1=[];return _.each(t.drcan.data,function(t){e.cancelledTripsDriver1.push({label:t.reason_code,value:t.count})}),e.cancelledTripsDriver1},e.canTripRider=function(t){e.cancelledTripsRider1=[];return _.each(t.rican.data,function(t){e.cancelledTripsRider1.push({label:t.reason_code,value:t.count})}),e.cancelledTripsRider1},e.getRiders=function(){var t=[],i=[];return _.each(e.riders,function(a){var s=e.getLongDate(a.id);t.push([s,a.total_riders]),i.push([s,a.new_rider_reg])}),e.filteredRiders[0].values=t,e.filteredRiders[1].values=i,e.filteredRiders},e.getLongDate=function(e){var t=e,i=t.substring(0,4),a=t.substring(4,6),s=t.substring(6,8),r=t.substring(8,10),n=new Date(i,a-1,s,r);return n},e}function setNavByRoleService(e,t,i){this.navList=angular.fromJson(i.localStorage.newNavList)||{},this.setNav=function(e){var t={},i=e.split(",");this.navList=i.reduce(function(e,t){return e[t]=!0,e},{}),console.log("newNav",t),this.persist()},this.getNav=function(){return this},this.persist=function(){window.localStorage.newNavList=angular.toJson(this.navList)},this.clearNav=function(){this.navList="",window.localStorage.removeItem("newNavList")}}function PunchCardFunc(){return{restrict:"EA",scope:{title:"@",data:"="},link:function(e,t,i){var a={};a.element=t,a.data=[[{key:"Type A",value:"a"},{key:"Type b",value:"b"}],[{key:"RA",value:"ra"},{key:"RB",value:"ra"}]];new D3punchcard(a).draw({width:t.offsetWidth})}}}function imageonload(){return{restrict:"A",link:function(e,t,i){t.bind("load",function(){alert("image is loaded")}),t.bind("error",function(){alert("image could not be loaded")})}}}function UserService(e,t,i,a,s){this.user,this.setUser=function(e){this.user=e,t.putObject("tuktuk.performance.admin",this.user),a.isAuthenticated=!0},this.getUser=function(){return null!=this.user?this.user:(this.user=t.getObject("tuktuk.performance.admin"),(void 0==this.user||"undefined"==this.user)&&(this.user=null),this.user)},this.clearUser=function(){this.user=null,t.remove("tuktuk.performance.admin"),e.defaults.headers.common.Authorization=""}}function StaticDataService(e,t,i){var a={};return a.cities=[{name:"Indore",value:"indore"},{name:"Bhopal",value:"bhopal"}],a.vehicleTypes=[{name:"Auto",value:"auto"},{name:"Bike",value:"bike"}],a.ranges={Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},a.getRandomColor=function(){for(var e="0123456789ABCDEF".split(""),t="#",i=0;6>i;i++)t+=e[Math.floor(16*Math.random())];return t},a}function ChartConfigService(e,t,i,a){var s={};return Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},s.lineChartConfig={refreshDataOnly:!1},s.lineChartOptions={chart:{type:"lineChart",height:455,zoom:{enabled:!0},interpolate:"basis",legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0},dispatch:{legendClick:function(e,t){},legendDblClick:function(e,t){}}},legendPosition:"top",margin:{top:0,right:20,bottom:120,left:50},x:function(e){return e[0]},y:function(e){return e[1]},color:d3.scale.category10().range(),duration:300,useInteractiveGuideline:!0,clipVoronoi:!1,showYAxis:!0,xAxis:{tickSize:"10",rotateLabels:"-90",tickFormat:function(e){return d3.time.format("%d %b %I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1,axisLabelDistance:10},x2Axis:{axisLabel:"Date",tickFormat:function(e){return d3.time.format("%I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1},yAxis:{axisLabel:"Trips",tickFormat:function(e){return d3.round(e)},showMaxMin:!0,axisLabelDistance:200}}},s.discreteBarChartOptions={chart:{type:"discreteBarChart",height:450,zoom:{enabled:!0},legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0}},legendPosition:"top",margin:{top:30,right:50,bottom:180,left:55},x:function(e){return e.label},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.round(e)},duration:500,xAxis:{axisLabel:"",rotateLabels:"-90"},yAxis:{axisLabel:"",axisLabelDistance:-10,tickFormat:function(e){return d3.round(e)}}}},s.multiBarChartOptions={chart:{type:"multiBarChart",height:450,margin:{top:30,right:50,bottom:100,left:55},legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0}},legendPosition:"top",text:"",x:function(e){return e.x},y:function(e){return e.y},stacked:!0,showControls:!1,clipEdge:!0,transitionDuration:1e3,useInteractiveGuideline:!1,xAxis:{rotateLabels:"-90",ticks:d3.time.months,tickFormat:function(e){return d3.time.format("%d %b %y")(new Date(e))},showMaxMin:!1},yAxis:{tickFormat:function(e){return d3.round(e)}}}},s.linePlusBarChartOptions={chart:{type:"linePlusBarChart",height:465,focusEnable:!1,legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:100,bottom:30,left:0}},legendPosition:"left",margin:{top:30,right:75,bottom:20,left:75},bars:{forceY:[0]},color:["#ff7f0e","#e377c2"],x:function(e,t){return t},xAxis:{rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=$scope.data[0].values[e]&&$scope.data[0].values[e].x||0;return t>0?d3.time.format("%x")(new Date(t)):null}}}},s.pieChartOptions={chart:{type:"pieChart",height:410,x:function(e){return e.label},y:function(e){return e.value},valueFormat:function(e){return d3.format(",.0f")(e)},showValues:!0,showLabels:!1,duration:500,labelThreshold:0,labelSunbeamLayout:!0,margin:{top:0,right:0,bottom:0,left:0},legend:{maxKeyLength:400,margin:{top:5,right:5,bottom:5,left:0}}}},s}function AlertService(e,t,i){var a=i;return t("",{},{sendNotification:{method:"POST",url:a+"notification"},getNotification:{method:"GET",url:a+"notification",isArray:!0}})}MapService.$inject=["$q","$resource","API","AUTH_API"],TripsService.$inject=["$q","$resource","API"],RidersService.$inject=["$q","$resource","API"],SurgeService.$inject=["$q","$resource","API"],PerformanceService.$inject=["$q","$resource","API","StaticDataService"],OfferService.$inject=["$q","$resource","API","AUTH_API"],LoginService.$inject=["$q","$resource","API","AUTH_API"],PayoutService.$inject=["$q","$resource","API"],OnboardingService.$inject=["$q","$resource","API"],DriversService.$inject=["$q","$resource","API"],LiveService.$inject=["$q","$resource","API"],setNavByRoleService.$inject=["$q","$resource","$window"],UserService.$inject=["$http","$cookies","$resource","$rootScope","API"],StaticDataService.$inject=["$q","$resource","API"],ChartConfigService.$inject=["$q","$resource","API","PerformanceHandler"],AlertService.$inject=["$q","$resource","API"],function(){"use strict";angular.module("tuktukV2Dahboard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMap","ngDialog","ui.bootstrap","toastr","ngTable","rzModule","ngBootstrap","nvd3","httpInterceptor","ui-rangeSlider","angularjs-dropdown-multiselect","angularScreenfull","angular-geohash","angular-confirm","ngStorage"])}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"}];this.getTec=e}angular.module("tuktukV2Dahboard").service("webDevTec",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.relativeDate=e(t.creationDate).fromNow()}e.$inject=["moment"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("tuktukV2Dahboard").directive("acmeNavbar",e)}(),function(){"use strict";function e(e,t){function i(i){function s(e){return e.data}function r(t){e.error("XHR Failed for getContributors.\n"+angular.toJson(t.data,!0))}return i||(i=30),t.get(a+"/contributors?per_page="+i).then(s)["catch"](r)}var a="https://api.github.com/repos/Swiip/generator-gulp-angular",s={apiHost:a,getContributors:i};return s}e.$inject=["$log","$http"],angular.module("tuktukV2Dahboard").factory("githubContributor",e)}(),function(){"use strict";function e(e){function t(t,i,a,s){var r,n=e(i[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});i.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){n.type(e).pause()["delete"]()}),r=t.$watch("vm.contributors",function(){angular.forEach(s.contributors,function(e){n.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){r()})}function i(e,t){function i(){return a().then(function(){e.info("Activated Contributors View")})}function a(){return t.getContributors(10).then(function(e){return s.contributors=e,s.contributors})}var s=this;s.contributors=[],i()}i.$inject=["$log","githubContributor"];var a={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:i,controllerAs:"vm"};return a}e.$inject=["malarkey"],angular.module("tuktukV2Dahboard").directive("acmeMalarkey",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d){function c(){s.getAllDrivers({city:t.city,vehicle:t.vehicleType},function(t){e.allDrivers=t,g.data=[],_.each(e.allDrivers,function(t){var i=t.split("/");e.id=i[0],e.hash=v(i[1]),e.time=i[3],g.data.push({id:i[0],hash:e.hash,time:i[3]})})},function(e){console.log("error ",e)})}function u(){s.getProfile({id:g.driver.id,from:moment(e.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){$(".card").show(),g.driver.profile=e,console.log(g.driver.time)},function(t){console.log(t),e.error=!0})}function p(e){var t;return _.each(g.allHash,function(i){i.geo_hash==e&&(t=i)}),t}function m(){s.getDemandSupply({forTime:e.formatedDate,precision:g.selectedPrecision.value},function(t){e.allHash=t,g.allHash=e.allHash,e.totalHash=t.length;var i=e.formatedDate,a=i.substring(0,4),s=i.substring(4,6),r=i.substring(6,8),n=i.substring(8,10),l=i.substring(10,11),o=new Date(a,s-1,r,n,15*(l-1));e.dsDate=moment(o).format("ddd, MMM Do YYYY,  h:mm");var d=0;_.each(e.allHash,function(e){e.hash=v(e.geo_hash),d++})},function(t){console.log(t),e.error=!0})}function h(){i.getMap({id:"bidMap"}).then(function(e){g.map=e,google.maps.event.addDomListener(g.map),g.map&&g.map.data&&g.map.data.forEach(function(e){g.map.data.remove(e)}),e.data.setStyle({fillColor:"#ccc",strokeWeight:1,strokeOpacity:.1,fillOpacity:.2,draggable:!1,editable:!1,zIndex:-9999999}),s.loadGeoJson({},function(e){g.geoJSON={},g.geoJSON=e,g.map.data.addGeoJson(g.geoJSON)},function(e){console.log("error ",e)})})}function v(e){var t={};t.geoHash=e;var i=a.decode_bbox(t.geoHash);return t.boxBounds=[[i[0],i[1]],[i[2],i[3]]],t}e.dsGraph=!1,e.heatMapSlider=!0;var g=this;g.live=!0,g.liveDS=!0,e.count=0,g.map,g.dsShow=!1,g.allHash;var f=moment();e.date=moment().format("ddd, MMM Do YYYY");var b=moment(),y=b.year(),x=b.month(),w=b.date(),D=b.hour(),T=b.minute(),k=new Date(y,x,w,D),C=parseInt(T/15)+1;0==C?(k=new Date(y,x,w,D-1),e.formatedDate=moment(k).format("YYYYMMDDHH")+4):e.formatedDate=moment(k).format("YYYYMMDDHH")+C,g.colors=["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],g.precisionArr=[{name:"PR-6",value:6},{name:"PR-7",value:7}],g.selectedPrecision=g.precisionArr[0];var S;g.selectedPrecision.value;g.heatMapFilers=[{label:"In-Process ",id:"20,22,30,40,50"},{label:"Failed",id:"72,80,81,82"},{label:"Cancel",id:"70,71"},{label:"Success",id:"61"}],g.selected=g.heatMapFilers[0],e.rangSlider={max:24,min:0},e.slider={minValue:0,maxValue:24,options:{floor:0,ceil:24,showTicksValues:0,translate:function(e){return e+"h"},keyboardSupport:!1,onEnd:function(t,i,a,s){e.rangSlider.min=i,e.rangSlider.max=a,g.loadHeatMap()}}},Array.prototype.sum=function(e){for(var t=0,i=0,a=this.length;a>i;i++)t+=this[i][e];return t},e.ddSettings={enableSearch:!1},g.heatMapDataLength,g.loadHeatMap=function(){var a=moment(b).hour(e.rangSlider.min).unix(),r=moment(b).hour(e.rangSlider.max).unix();s.heatmap({city:t.city,vehicle:t.vehicleType,from:a,to:r,state:g.selected.id},function(e){g.heatMapDataLength=e.length;var t=[],a=[];_.forEach(e,function(e){t.push(new google.maps.LatLng(e.locPickupRequest.lt-0,e.locPickupRequest.ln-0))}),i.getMap({id:"bidMap"}).then(function(e){g.map=e,S&&S.setMap(null),a=new google.maps.MVCArray(t),S=new google.maps.visualization.HeatmapLayer({data:a}),S.setMap(g.map)})},function(t){console.log(t),e.error=!0})},g.loadHeatMap(),g.changeDate=function(t){e.dsGraph=!1;var i=e.formatedDate.substring(0,4),a=e.formatedDate.substring(4,6),s=e.formatedDate.substring(6,8),r=e.formatedDate.substring(8,10),n=15*e.formatedDate.substring(10,11);if("next"==t){g.dsShow=!1,k=new Date(i,a-1,s,r,n+15);var l=parseInt(k.getMinutes()/15);0==l?(k=new Date(i,a-1,s,r),e.formatedDate=moment(k).format("YYYYMMDDHH")+4):e.formatedDate=moment(k).format("YYYYMMDDHH")+l,e.count++}else{g.dsShow=!1,k=new Date(i,a-1,s,r,n-15);var l=parseInt(k.getMinutes()/15);0==l?(k=new Date(i,a-1,s,r-1),e.formatedDate=moment(k).format("YYYYMMDDHH")+4):e.formatedDate=moment(k).format("YYYYMMDDHH")+l,e.count--}e.count<0?g.live=!1:g.live=!0,m()},g.changeDateDS=function(t){"next"==t?(b=moment(b).add(1,"day"),e.date=moment(b).format("dddd, MMMM Do YYYY")):(b=moment(b).subtract(1,"day"),e.date=moment(b).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(b).unix()==moment(f).unix()?g.liveDS=!0:g.liveDS=!1,g.showDSGraph()},g.onPrecisionChange=function(){m()},c(),m(),g.heatmapView=!0,g.markersView=!0,g.shapesView=!0,g.showHeatmap=function(){g.heatmapView=!0,e.heatMapSlider=!0,S.setMap(g.map)},g.hideHeatmap=function(){g.heatmapView=!1,e.heatMapSlider=!1,S.setMap(null)},g.showMarkers=function(){g.markersView=!0;for(var e in g.map.markers)g.map.markers[e].setMap(g.map)},g.hideMarkers=function(){g.markersView=!1;for(var e in g.map.markers)g.map.markers[e].setMap(null)},g.showShapes=function(){g.shapesView=!0;for(var e in g.map.shapes)g.map.shapes[e].setMap(g.map)},g.hideShapes=function(){g.shapesView=!1;for(var e in g.map.shapes)g.map.shapes[e].setMap(null)},g.showDetail=function(e,t,i){g.driver=t;var a=g.driver.hash.boxBounds[0][0],s=g.driver.hash.boxBounds[0][1],r=new google.maps.LatLng(a,s),n=new google.maps.Geocoder;n.geocode({location:r},function(e,t){"OK"===t?e[1]?g.driver.address=e[1].formatted_address:window.alert("No results found"):window.alert("Geocoder failed due to: "+t)}),u()},g.hideDetail=function(){g.map.hideInfoWindow("iw-drivers")},g.getAddress=function(){g.map.hideInfoWindow("iw-drivers")},g.selectedGeohash="",g.showGeoHashDetail=function(e){var t=a.encode(e.latLng.lat(),e.latLng.lng(),g.selectedPrecision.value);g.hashDetail=p(t),g.selectedGeohash=t,g.getDSGraph()},h(),g.config=o.lineChartConfig,g.dsGraphOptions=angular.copy(o.lineChartOptions),g.dsGraphOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%H:%M")(new Date(e))},g.dsGraphData=[],g.getDSGraph=function(){s.getDemandSupplyHistory({geohash:g.selectedGeohash,fromTime:moment(b).format("YYYYMMDD")+"000",toTime:moment(b).format("YYYYMMDD")+"234"},function(e){g.dsGraphData=l.getDS(e),console.log(g.dsGraphData),g.dsGraphOptions.chart.xAxis.axisLabel="",g.axisGeohash=g.selectedGeohash,g.axisTitle1=e.title,g.axisTitle2=e.subTitle,g.dsShow=!0},function(e){console.log("error ",e)})},g.showDSGraph=function(){g.hideCard(),e.dsGraph=!0},g.hideDSDetail=function(){g.dsShow=!1},g.hideDSGraph=function(){e.dsGraph=!1},g.hideCard=function(){$(".card").hide()}}e.$inject=["$scope","$rootScope","NgMap","geohash","MapService","toastr","ngDialog","DSHandler","ChartConfigService","StaticDataService"],angular.module("tuktukV2Dahboard").controller("DemandSupplyController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n){function l(){s.getAllDrivers({city:i.city,vehicle:i.vehicleType},function(t){e.allDrivers=t,c.data=[],_.each(e.allDrivers,function(t){var i=t.split("/");e.id=i[0],e.hash=o(i[1]),e.time=i[3],c.data.push({id:i[0],hash:e.hash,time:i[3]})})},function(e){console.log("error ",e)})}function o(e){var t={};t.geoHash=e;var i=a.decode_bbox(t.geoHash);return t.boxBounds=[[i[0],i[1]],[i[2],i[3]]],t}function d(){s.getProfile({id:c.driver.id,from:moment(e.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){$(".card").show(),c.driver.profile=e,console.log(c.driver.time)},function(t){console.log(t),e.error=!0})}var c=this;c.API_URL=n,c.allDrivers=[],e.startDate=moment().format("YYYY-MM-DD"),e.endDate=moment().format("YYYY-MM-DD"),function(){window.localStorage&&(localStorage.getItem("firstLoad")?localStorage.removeItem("firstLoad"):(localStorage.firstLoad=!0,
window.location.reload()))}(),r.getMap({id:"drivers_map"}).then(function(e){c.map=e,c.map&&c.map.data&&c.map.data.forEach(function(e){c.map.data.remove(e)}),e.data.setStyle({fillColor:"gray",strokeWeight:1,strokeOpacity:.1,fillOpacity:.1,draggable:!1,editable:!1}),s.loadGeoJson({},function(e){c.geoJSON={},c.geoJSON=e,c.map.data.addGeoJson(c.geoJSON)},function(e){console.log("error ",e)})}),$(document).ready(function(){$("#hide").click(function(){$(".card").hide()})}),l(),c.showDetail=function(e,t,i){c.driver=t;var a=c.driver.hash.boxBounds[0][0],s=c.driver.hash.boxBounds[0][1],r=new google.maps.LatLng(a,s),n=new google.maps.Geocoder;n.geocode({location:r},function(e,t){"OK"===t?e[1]?c.driver.address=e[1].formatted_address:window.alert("No results found"):window.alert("Geocoder failed due to: "+t)}),d()},c.hideDetail=function(){c.map.hideInfoWindow("iw-drivers")},c.getAddress=function(){c.map.hideInfoWindow("iw-drivers")}}e.$inject=["$scope","$log","$rootScope","geohash","MapService","NgMap","AUTH_API"],angular.module("tuktukV2Dahboard").controller("MapsController",e)}(),angular.module("tuktukV2Dahboard").factory("MapService",MapService),angular.module("tuktukV2Dahboard").factory("DSHandler",DSHandler),function(){"use strict";function e(e,t,i,a,s,r,n,l,o){var d=this;moment(),moment();d.termURL=s.term,d.filterURL=s.filterURL,d.searchTerm=d.termURL,d.showTableData=!0,d.enblBtn=!1,d.selectedRow=null,d.setSelected=function(e){d.selectedRow=e},d.ranges=i.ranges,e.date=moment().format("dddd, MMMM Do YYYY"),e.datesForSearch={},e.datesForSearch.startDate=i.ranges["Last 7 Days"][0],e.datesForSearch.endDate=i.ranges["Last 7 Days"][1],d.trips=[],d.filterTerm="",d.filterFields=[{value:"dname",name:"Driver Name"},{value:"rname",name:"Rider Name"},{value:"id",name:"Trip ID"},{value:"did",name:"Driver ID"},{value:"remail",name:"Rider Email"},{value:"dphone",name:"Driver Phone"},{value:"rphone",name:"Rider Phone"},{value:"dvehicle",name:"Vehicle Number"}],d.statusCodes="",d.tripStatusFilters=[{name:"All",value:"20,22,30,40,50,60,61,70,71,80,81,82"},{name:"Success",value:"61"},{name:"Cancelled ",value:"70,71"},{name:"Failed",value:"80,81,82"},{name:"In Progress",value:"20,22,30,40,50,60"}],""!==d.statusURL?d.statusCodes=d.tripStatusFilters[d.statusURL]:d.statusCodes=d.tripStatusFilters[0],d.checkMinChr=function(e){d.searchTerm.length>2?d.enblBtn=!0:d.enblBtn=!1},d.selectedFilterFields=_.find(d.filterFields,function(e){return e.value==d.filterURL}),d.filterTerm=d.selectedFilterFields,d.searchTable=function(){t.go("home.search",{filterURL:d.filterTerm.value,term:d.searchTerm})},e.$back=function(){window.history.back()};var c=o(function(){d.tblNoData=!1},8e3);e.$on("$destroy",function(){o.cancel(c)}),d.live=!0;e.getTimeDiff=function(e,t){if(0==e||0==t)return"0";if(t){var i=t-e;return i}return"0"},d.getResult=function(){e.tableParams=new a({page:1,count:20},{counts:[],getData:function(t){var i=20*(t.page()-1)+1;console.log("**************************");var a={};if(a.start=i,a.count=t.count(),a.startDate=moment(e.datesForSearch.startDate).unix(),a.endDate=moment(e.datesForSearch.endDate).unix(),t.orderBy().length>0){var s=t.orderBy()[0].substr(0,1);a.field=t.orderBy()[0].substr(1),"+"===s?a.orderby="ASC":a.orderby="DESC"}return d.filterTerm&&""!=d.filterTerm&&""!=d.searchTerm&&(a.term=d.filterTerm.value+"|"+d.searchTerm),""!=d.filterURL&&""!=d.termURL?a.term=d.filterURL+"|"+d.termURL:a.term="",n.getAllTrips(a).$promise.then(function(e){return t.total(e.total),e.data.length>0?d.showTableData=!0:d.showTableData=!1,e.data})}})},d.getResult()}e.$inject=["$scope","$state","StaticDataService","NgTableParams","$stateParams","TripsHandler","TripsService","$rootScope","$interval"],angular.module("tuktukV2Dahboard").controller("TripsSearchController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l){function o(){a.getTripDetail({id:i.id},function(t){e.selectedTrip=t,d.snapCodesFor=e.selectedTrip.forTripSnapCode,d.snapCodesIn=e.selectedTrip.inTripSnapCode,d.initialize()},function(t){console.log(t),e.error=!0}),d.initialize=function(){function t(e,t,i){t=Math.pow(10,-t);for(var a=e.length,s=0,r=0,n=0,l=[],o=[];a>s;){var d,c=0,u=0;do d=e.charCodeAt(s++)-63,u|=(31&d)<<c,c+=5;while(d>=32);var p=1&u?~(u>>1):u>>1;r+=p,c=0,u=0;do d=e.charCodeAt(s++)-63,u|=(31&d)<<c,c+=5;while(d>=32);var m=1&u?~(u>>1):u>>1;n+=m,l.push(r*t),o.push(n*t)}i({lat:_.first(l),lon:_.first(o)},{lat:_.last(l),lon:_.last(o)})}var i=d.snapCodesFor,a=d.snapCodesIn,s=new google.maps.LatLng(22.717081666666665,75.87155666666666),r={zoom:13,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("driversMap"),r),l=google.maps.geometry.encoding.decodePath(i),o=google.maps.geometry.encoding.decodePath(a),c=(new google.maps.Polyline({path:l,strokeColor:"red",strokeOpacity:.8,strokeWeight:3,map:n}),new google.maps.Polyline({path:o,strokeColor:"#8A87FC",strokeOpacity:.8,strokeWeight:3,map:n}),{url:"assets/images/icons/marker-green.svg",scaledSize:new google.maps.Size(30,30)},{url:"assets/images/icons/marker-green.svg",scaledSize:new google.maps.Size(30,30)}),u={url:"assets/images/icons/marker-green.svg",scaledSize:new google.maps.Size(40,40)},p={url:"assets/images/icons/spacer.gif",scaledSize:new google.maps.Size(1,1)},m={url:"assets/images/icons/pickup.png",scaledSize:new google.maps.Size(20,20)},h={url:"assets/images/icons/drop.png",scaledSize:new google.maps.Size(20,20)},v={url:"assets/images/icons/marker-orange.svg",scaledSize:new google.maps.Size(30,30)},g=[],f=[],b=[],y=0;for(e.bidConstants={0:"Reject",1:"Accept","-2":"Low_ Battery","-1":"Offline",2:"Delivered","-3":"Unknown","-4":"Retry Failed"},y=0;y<(e.totalBid||[]).length;y++)(e.selectedTrip.driverInfo||{}).id===e.totalBid[y].dr?g[y]=new google.maps.Marker({position:new google.maps.LatLng(e.totalBid[y].lt,e.totalBid[y].ln),map:n,title:"Bid"+[y],icon:c}):g[y]=new google.maps.Marker({position:new google.maps.LatLng(e.totalBid[y].lt,e.totalBid[y].ln),map:n,title:"Bid"+[y],icon:v}),g[y].index=y,f[y]='<div class="popup_container"><div class="col-md-12 col-sm-12 col-xs-12"><h4 class="number ng-binding" style="margin: 14px 0 0 0;"><a href="#/home/detail/'+e.selectedTripBid[y].dr+'">'+e.selectedTripBid[y].name+'</a></h4><span>Name</span></div><div class="col-md-12 col-sm-12 col-xs-12"><h4 class="number ng-binding" style="margin: 14px 0 0 0;">'+e.bidConstants[e.selectedTripBid[y].bid]+"</h4><span>Bid</span><br></div></div>",b[y]=new google.maps.InfoWindow({content:f[y],maxWidth:300}),google.maps.event.addListener(g[y],"click",function(){b[this.index].open(n,g[this.index]),n.panTo(g[this.index].getPosition())});t(i,5,function(t,i){e.startLtFor=t.lat,e.endtLtFor=i.lat,e.starttLnFor=t.lon,e.endtLnFor=i.lon,new google.maps.Marker({position:new google.maps.LatLng(e.startLtFor,e.starttLnFor),icon:u,map:n}),new google.maps.Marker({position:new google.maps.LatLng(e.endtLtFor,e.endtLnFor),icon:p,map:n})}),t(a,5,function(t,i){e.startLtIn=t.lat,e.starttLnIn=t.lon,e.endtLtIn=i.lat,e.endtLnIn=i.lon,new google.maps.Marker({position:new google.maps.LatLng(e.startLtIn,e.starttLnIn),icon:m,map:n}),new google.maps.Marker({position:new google.maps.LatLng(e.endtLtIn,e.endtLnIn),icon:h,map:n})})}}var d=this;e.showHide=!0,d.editFareBox=!1,e.selectedDates={},e.selectedDates.startDate=moment().format("YYYY-MM-DD"),e.selectedDates.endDate=moment().format("YYYY-MM-DD"),e.selectedTrip,e.selectedTripBid,d.bidDr,d.drID,d.drID2,d.renderEditForm=function(){d.reasonArr=[{name:"Extra Luggage",value:0},{name:"Extra Passenger",value:1},{name:"No change with the driver",value:2},{name:"Miscommunication between driver and rider",value:3},{name:"Misunderstood the bill",value:4},{name:"Others",value:5}],d.selectedReason=d.reasonArr[0],d.fareTypeArr=[{name:"+",value:0},{name:"-",value:1}],d.selectedFareType=d.fareTypeArr[0],d.inputFare=0,d.inputReason="",d.inputTcash=0},d.renderEditForm(),d.closeEditFareModal=function(){d.renderEditForm(),d.editFareBox=!1},d.openEditFareModal=function(){d.editFareBox=!0},e.confirmEdit=function(){l({text:"Are you sure want edit fare?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){d.editFare()})},d.editFare=function(){var t={};5==d.selectedReason.value&&(d.selectedReason.name=d.inputReason),0==d.selectedFareType.value?d.selectedReasonNew="":d.selectedReasonNew="-",t.driver=e.selectedTrip.driverInfo.id,t.rider=e.selectedTrip.riderInfo.id,t.driverChangeFare=parseFloat(d.selectedReasonNew+d.inputFare),t.riderCashback=parseInt(d.inputTcash),t.fareChangeReason=d.selectedReason.name,t.requestOn=e.selectedTrip.requestOn,console.log(t),a.updateFare({id:i.id},t,function(e){o(),d.renderEditForm(),d.closeEditFareModal(),n.success("edited")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)})},e.confirmCancelTrip=function(){l({text:"Are you sure want cancel?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){d.cancelTrip()})},d.cancelTrip=function(){a.cancelTrip({id:i.id},function(e){n.success("Cancelled")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)})},d.getBid=function(){a.getBidDetail({id:i.id},function(t){e.selectedTripBid=t,d.bidDr=e.selectedTripBid,console.log("selectedTripBid-dr",e.selectedTripBid),e.totalBid=t,e.showHide=!1,d.initialize()},function(t){console.log(t),e.error=!0})},d.getForTrip=function(){},d.clearBid=function(){e.showHide=!0,e.totalBid=[],d.initialize()},d.getDriverDetail=function(){var t=d.drID;d.drID2=d.bidDr[t].dr,a.getProfile({id:d.drID2,from:moment(e.selectedDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.selectedDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){var t=e;d.infowindows.setContent(content),console.log("$scope.detail",t)},function(t){console.log(t),e.error=!0})},o()}e.$inject=["$scope","$interval","$stateParams","TripsService","$rootScope","NgMap","toastr","$confirm"],angular.module("tuktukV2Dahboard").controller("TripDetailController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o){function d(){v.cancelledTripByDriver=[],r.getCancelTripsDriver({startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,city:n.city,vehicle:n.vehicleType},function(t){v.cancelledTripByDriver=o.canTripDriver(t),e.totalCanDriver=v.cancelledTripByDriver.sum("value")},function(t){console.log(t),e.error=!0})}function c(){v.cancelledTripByRider=[],r.getCancelTripsRider({startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,city:n.city,vehicle:n.vehicleType},function(t){v.cancelledTripByRider=o.canTripRider(t),e.totalCanRider=v.cancelledTripByRider.sum("value")},function(t){console.log(t),e.error=!0})}function u(){var t=moment(e.rideDates.startDate).startOf("day").unix(),i=moment(e.rideDates.endDate).unix();s.getNewRiders({from:t,to:i},function(e){v.newRiders=p(e)},function(t){console.log(t),e.error=!0})}function p(e){for(var t=[],i=JSON.parse(angular.toJson(e)),a=0,s=0,r=["today","1 day ago","2 day ago","3 day ago","4 day ago","5 day ago","6 day ago","Before a day"],n=0;7>=n;n++){var o={};o.key=r[s],o.bar=!0,o.values=[],t.push(o),s++}return _.each(i,function(e){for(var i=e,s=0;7>=s;s++){var r=e.value[s]?e.value[s].totalRides:0,n=e.value[s]?e.value[s].uniqRides:0,o=e.value[s]?e.value[s].id:0;t[s].values[a]={},t[s].values[a].x=l.getLongDate(i.date),t[s].values[a].y=Number(r),t[s].values[a].uniqRides=Number(n),"Others"===o?t[s].values[a].date=e.value[s].id||0:t[s].values[a].date=Number(o)}a++}),t}function m(t){var i=[];e.rT=0,e.rUT=0,e.cT=0,e.cUT=0,e.fT=0,e.fUT=0,e.faT=0,e.faUT=0,t=angular.fromJson(t);for(var a=t[0].trip,s=0;s<a.length;s++)e.rT+=t[0].trip[s].requests.total,e.rUT+=t[0].trip[s].requests.unique_riders,e.cT+=t[0].trip[s].cancelled.total,e.cUT+=t[0].trip[s].cancelled.unique,e.fT+=t[0].trip[s].success.total,e.fUT+=t[0].trip[s].success.unique_riders,e.faT+=t[0].trip[s].failed.total,e.faUT+=t[0].trip[s].failed.unique_riders;var r=["Requests("+e.rT+")","Requests(U "+e.rUT+")","Cancelled("+e.cT+")","Cancelled(U "+e.cUT+")","Fulfilled("+e.fT+")","Fulfilled(U "+e.fUT+")","Failed("+e.faT+")","Failed(U "+e.faUT+")"],n={};n.key=r[0],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].requests.total])}i.push(n);var n={};n.key=r[1],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].requests.unique_riders])}i.push(n);var n={};n.key=r[2],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].cancelled.total])}i.push(n);var n={};n.key=r[3],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].cancelled.unique])}i.push(n);var n={};n.key=r[4],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].success.total])}i.push(n);var n={};n.key=r[5],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].success.unique_riders])}i.push(n);var n={};n.key=r[6],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].failed.total])}i.push(n);var n={};n.key=r[7],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var o=1e3*moment(l.getLongDate(t[0].trip[s].id)).unix();n.values.push([o,t[0].trip[s].failed.unique_riders])}return i.push(n),i}function h(i){var a=[];e.trip=0,e.offer=0,e.bonus=0,e.tcash=0,e.total=0,i=angular.fromJson(i);for(var s=0;s<i.length;s++)e.trip+=i[s].trip,e.offer+=i[s].offer,e.bonus+=i[s].bonus,e.tcash+=i[s].tcash,e.total+=i[s].total;var r=["Trip("+t("number")(e.trip,2)+")","Offer("+t("number")(e.offer,2)+")","Bonus("+t("number")(e.bonus,2)+")","tCash("+t("number")(e.tcash,2)+")","Total("+t("number")(e.total,2)+")"],n={};n.key=r[0],n.values=[],n.bar=!0;for(var s=0;s<i.length;s++){var o=1e3*moment(l.getLongDate(i[s].date)).unix();n.values.push([o,i[s].trip])}a.push(n);var n={};n.key=r[1],n.values=[],n.bar=!0;for(var s=0;s<i.length;s++){var o=1e3*moment(l.getLongDate(i[s].date)).unix();n.values.push([o,i[s].offer])}a.push(n);var n={};n.key=r[2],n.values=[],n.bar=!0;for(var s=0;s<i.length;s++){var o=1e3*moment(l.getLongDate(i[s].date)).unix();n.values.push([o,i[s].bonus])}a.push(n);var n={};n.key=r[3],n.values=[],n.bar=!0;for(var s=0;s<i.length;s++){var o=1e3*moment(l.getLongDate(i[s].date)).unix();n.values.push([o,e.tcash])}a.push(n);var n={};n.key=r[4],n.values=[],n.bar=!0;for(var s=0;s<i.length;s++){var o=1e3*moment(l.getLongDate(i[s].date)).unix();n.values.push([o,e.total])}return a.push(n),a}var v=this;moment(),moment();v.live=!0,v.showTableData=!1;v.ranges=i.ranges,e.date=moment().format("dddd, MMMM Do YYYY"),e.dateURL=moment().format("DD/MM/YYYY"),e.tripDates={},e.tripDates.startDate=i.ranges["Last 7 Days"][0],e.tripDates.endDate=i.ranges["Last 7 Days"][1],e.burnDates={},e.burnDates.startDate=i.ranges["Last 7 Days"][0],e.burnDates.endDate=i.ranges["Last 7 Days"][1],e.rideDates={},e.rideDates.startDate=i.ranges["Last 7 Days"][0],e.rideDates.endDate=i.ranges["Last 7 Days"][1],v.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],v.tripFrequency={value:"day"},v.config=a.lineChartConfig,v.newRidersChartOptions=angular.copy(a.multiBarChartOptions),v.newRidersChartOptions.chart.tooltip={contentGenerator:function(e,t,i,a,s){var r,n=e.data;r="Others"===n.date?"Before a day":moment(l.getLongDate(n.date.toString())).format("MMMM Do YYYY");var o='<div class="pd-10 text-left"><span><b>';return o+=r+" </b></span>",o+='<h3 class="no-mr">'+n.y+'<small style="color:#333;"> /'+n.uniqRides+"</small></h3>",o+="</div>"}},Array.prototype.sum=function(e){for(var t=0,i=0,a=this.length;a>i;i++)t+=this[i][e];return t},v.drRideCancelReasonCode={dCR_TYRE_FLAT:"Flat tyre",dCR_VEH_ISSUE:"Vehicle issues",dCR_STUCK_TRAFFIC:"Stuck in traffic",dCR_CUSTOMER_LATE:"Customer is late",dCR_CUSTOMER_NOT_RESPONDED:"Customer not responded"},v.cancelTripByDriverChartOptions=angular.copy(a.pieChartOptions),v.cancelTripByDriverChartOptions.chart.x=function(e){return v.drRideCancelReasonCode[e.label]},v.rdRideCancelReasonCode={rCR_MIND_CHANGE:"Changed my Mind",rCR_ROUTE_CHANGE:"Changed the Route",rCR_NOT_INTEREST:"Not need the ride anymore",rCR_DRIVER_ASKED_TO:"Driver asked to cancel",rCR_OTHER:"Other",rCR_BEFORE_CONFIRM:"Ride canceled before confirmation"},v.cancelTripByRiderChartOptions=angular.copy(a.pieChartOptions),v.cancelTripByRiderChartOptions.chart.x=function(e){return v.rdRideCancelReasonCode[e.label]},v.tripChartOptions=angular.copy(a.multiBarChartOptions),v.burnChartOptions=angular.copy(a.multiBarChartOptions),v.tcashChartOptions=angular.copy(a.multiBarChartOptions),v.tcashChartOptions.chart.xAxis={rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=v.tcashData[0].values[e]&&v.tcashData[0].values[e].x||0;return t>0?d3.time.format("%d %b %y")(new Date(t)):null}},v.onDateChangeTrips=function(t){v.diffDays=Math.floor((e.tripDates.endDate-e.tripDates.startDate)/864e5)+1,v.changeFrequencyTrips(t)},v.changeFrequencyTrips=function(e){v.tripChartOptions.chart.xAxis.axisLabel=e,v.diffDays<4?(v.tripFrequency={value:"hour"},v.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%I %p")(new Date(e).addHours(1))}):(v.tripFrequency={value:"day"},v.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))}),v.getTrips()},v.onDateChangeRide=function(){u()},v.onDateChangeBurn=function(){v.getBurn()},v.onDateChangeTripsCancelled=function(){d(),c()},v.onDateChange=function(){v.getTrips(),v.getBurn(),v.onDateChangeTripsCancelled(),u()},v.getTrips=function(){var t=moment(e.tripDates.startDate).startOf("day").toString(),i=moment(e.tripDates.endDate).endOf("day").toString();s.getTrips({city:n.city,vehicle:n.vehicleType,startTime:t,endTime:i,rate:v.tripFrequency.value},{vehicle:n.vehicleType,frequency:v.tripFrequency.value},function(e){v.tripData=m(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e})},function(t){console.log(t),e.error=!0})},v.getBurn=function(){s.getBurn({startTime:e.burnDates.startDate,endTime:e.burnDates.endDate},function(e){v.burnData=h(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e})},function(t){console.log(t),e.error=!0})},v.onDateChange()}e.$inject=["$scope","$filter","StaticDataService","ChartConfigService","TripsService","LiveService","$rootScope","TripsHandler","LiveHandler"],angular.module("tuktukV2Dahboard").controller("TripsController",e)}(),angular.module("tuktukV2Dahboard").factory("TripsService",TripsService),angular.module("tuktukV2Dahboard").factory("TripsHandler",TripsHandler),!function(e,t){"use strict";function i(i,n){var l=this;l.$el=e(i),l.el=i,l.id=s++,l.$window=e(t),l.$document=e(document),l.$el.bind("destroyed",e.proxy(l.teardown,l)),l.$clonedHeader=null,l.$originalHeader=null,l.isSticky=!1,l.hasBeenSticky=!1,l.leftOffset=null,l.topOffset=null,l.init=function(){l.$el.each(function(){var t=e(this);t.css("padding",0),l.$originalHeader=e("thead:first",this),l.$clonedHeader=l.$originalHeader.clone(),t.trigger("clonedHeader."+a,[l.$clonedHeader]),l.$clonedHeader.addClass("tableFloatingHeader"),l.$clonedHeader.css("display","none"),l.$originalHeader.addClass("tableFloatingHeaderOriginal"),l.$originalHeader.after(l.$clonedHeader),l.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(l.$printStyle)}),l.setOptions(n),l.updateWidth(),l.toggleHeaders(),l.bind()},l.destroy=function(){l.$el.unbind("destroyed",l.teardown),l.teardown()},l.teardown=function(){l.isSticky&&l.$originalHeader.css("position","static"),e.removeData(l.el,"plugin_"+a),l.unbind(),l.$clonedHeader.remove(),l.$originalHeader.removeClass("tableFloatingHeaderOriginal"),l.$originalHeader.css("visibility","visible"),l.$printStyle.remove(),l.el=null,l.$el=null},l.bind=function(){l.$scrollableArea.on("scroll."+a,l.toggleHeaders),l.isWindowScrolling||(l.$window.on("scroll."+a+l.id,l.setPositionValues),l.$window.on("resize."+a+l.id,l.toggleHeaders)),l.$scrollableArea.on("resize."+a,l.toggleHeaders),l.$scrollableArea.on("resize."+a,l.updateWidth)},l.unbind=function(){l.$scrollableArea.off("."+a,l.toggleHeaders),l.isWindowScrolling||(l.$window.off("."+a+l.id,l.setPositionValues),l.$window.off("."+a+l.id,l.toggleHeaders)),l.$scrollableArea.off("."+a,l.updateWidth)},l.toggleHeaders=function(){l.$el&&l.$el.each(function(){var t,i=e(this),a=l.isWindowScrolling?isNaN(l.options.fixedOffset)?l.options.fixedOffset.outerHeight():l.options.fixedOffset:l.$scrollableArea.offset().top+(isNaN(l.options.fixedOffset)?0:l.options.fixedOffset),s=i.offset(),r=l.$scrollableArea.scrollTop()+a,n=l.$scrollableArea.scrollLeft(),o=l.isWindowScrolling?r>s.top:a>s.top,d=(l.isWindowScrolling?r:0)<s.top+i.height()-l.$clonedHeader.height()-(l.isWindowScrolling?0:a);o&&d?(t=s.left-n+l.options.leftOffset,l.$originalHeader.css({position:"fixed","margin-top":0,left:t,"z-index":3}),l.leftOffset=t,l.topOffset=a,l.$clonedHeader.css("display",""),l.isSticky||(l.isSticky=!0,l.updateWidth()),l.setPositionValues()):l.isSticky&&(l.$originalHeader.css("position","static"),l.$clonedHeader.css("display","none"),l.isSticky=!1,l.resetWidth(e("td,th",l.$clonedHeader),e("td,th",l.$originalHeader)))})},l.setPositionValues=function(){var e=l.$window.scrollTop(),t=l.$window.scrollLeft();!l.isSticky||0>e||e+l.$window.height()>l.$document.height()||0>t||t+l.$window.width()>l.$document.width()||l.$originalHeader.css({top:l.topOffset-(l.isWindowScrolling?0:e),left:l.leftOffset-(l.isWindowScrolling?0:t)})},l.updateWidth=function(){if(l.isSticky){l.$originalHeaderCells||(l.$originalHeaderCells=e("th,td",l.$originalHeader)),l.$clonedHeaderCells||(l.$clonedHeaderCells=e("th,td",l.$clonedHeader));var t=l.getWidth(l.$clonedHeaderCells);l.setWidth(t,l.$clonedHeaderCells,l.$originalHeaderCells),l.$originalHeader.css("width",l.$clonedHeader.width())}},l.getWidth=function(i){var a=[];return i.each(function(i){var s,r=e(this);if("border-box"===r.css("box-sizing"))s=r.outerWidth();else{var n=e("th",l.$originalHeader);if("collapse"===n.css("border-collapse"))if(t.getComputedStyle)s=parseFloat(t.getComputedStyle(this,null).width);else{var o=parseFloat(r.css("padding-left")),d=parseFloat(r.css("padding-right")),c=parseFloat(r.css("border-width"));s=r.outerWidth()-o-d-c}else s=r.width()}a[i]=s}),a},l.setWidth=function(e,t,i){t.each(function(t){var a=e[t];i.eq(t).css({"min-width":a,"max-width":a})})},l.resetWidth=function(t,i){t.each(function(t){var a=e(this);i.eq(t).css({"min-width":a.css("min-width"),"max-width":a.css("max-width")})})},l.setOptions=function(i){l.options=e.extend({},r,i),l.$scrollableArea=e(l.options.scrollableArea),l.isWindowScrolling=l.$scrollableArea[0]===t},l.updateOptions=function(e){l.setOptions(e),l.unbind(),l.bind(),l.updateWidth(),l.toggleHeaders()},l.init()}var a="stickyTableHeaders",s=0,r={fixedOffset:0,leftOffset:0,scrollableArea:t};e.fn[a]=function(t){return this.each(function(){var s=e.data(this,"plugin_"+a);s?"string"==typeof t?s[t].apply(s):s.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+a,new i(this,t))})}}(jQuery,window),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d,c,u,p){function m(){o.getRiders({},function(e){g.ridersData=v(JSON.parse(angular.toJson(e))),h()},function(t){console.log(t),e.error=!0})}function h(){var e=document.getElementById("matrixChartDiv").offsetWidth,t=document.getElementById("matrixChartDiv").offsetWidth-180,i=dimple.newSvg("#matrixChart",e,450),a=new dimple.chart(i,g.ridersData);a.setBounds(90,50,t,350);var s=a.addCategoryAxis("x",["RiderReg"]),r=a.addCategoryAxis("y",["Week","TotalRequest","UniqueRequest","FulfillRequest","UniqueFulfillRequest"]);a.addSeries("Week",dimple.plot.bubble);s.title="",r.title="",s.addOrderRule("Week"),a.draw()}function v(e){var t=[];return _.each(e,function(e){_.each(e.values,function(i){var a={};a.RiderReg=e.rider_reg,a.Week=i.week,a.TotalRequest=i.total_request,a.UniqueRequest=i.unique_request,a.FulfillRequest=i.fulfill_request,a.UniqueFulfillRequest=i.unique_fulfill_request,t.push(a)})}),t}var g=this;m(),g.refreshPage=function(){m()};var f;$(window).resize(function(){clearTimeout(f),f=setTimeout(function(){document.getElementById("matrixChartDiv").offsetWidth,document.getElementById("matrixChartDiv").offsetWidth-180;$("#matrixChart").empty(),m()},500)})}e.$inject=["$scope","$log","$rootScope","$interval","StaticDataService","ChartConfigService","PerformanceService","PerformanceHandler","RidersService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("RidersController",e)}(),angular.module("tuktukV2Dahboard").factory("RidersService",RidersService),function(){"use strict";function e(e,t,i,a,s,r,n,l,o){function d(){v.setting.value="",v.setting.driverValue="",v.setting.groupTitle="",v.setting.type="x",v.setting.geoHashArr=[],v.setting.startTime=moment().add(0,"m"),v.setting.endTime=moment().add(0,"m"),v.setting.forceConfirm=!0}function c(e){var t;return _.each(v.geohashGroups,function(i){_.each(i.geoHashArr,function(a){return a.geoHash==e?void(t=i):void 0})}),t}function u(e){r.getGroupSetting({id:e},function(e){v.setting.type=e.type,v.setValueArr(),v.setting.driverValue={name:e.driverValue,value:e.driverValue},v.setting.value={name:e.value,value:e.value},v.setting.forceConfirm=e.forceConfirm?!0:!1},function(e){n.success(e)})}function p(){v.geohashGroups=[],r.getGroups({precision:v.selectedPrecision.value},function(e){var t=e,i=0;_.each(t,function(e){var t=e;t.color=v.colors[i],t.geoHashArr=[],_.each(e.geohash,function(e){t.geoHashArr.push(m(e))}),v.geohashGroups.push(t),i++}),console.log(" vm.geohashGroups ",v.geohashGroups)},function(e){n.error(e)})}function m(e){var t={};t.geoHash=e;var i=s.decode_bbox(t.geoHash);return t.boxBounds=[[i[0],i[1]],[i[2],i[3]]],t}function h(t){if(!v.groupCreation&&!v.groupEdit){v.groupCreation=!0;var i={};i.geoHashArr=[],i.groupTitle="untitled group",i.color="#cc99ff",i.startTime=moment().add(0,"m"),i.endTime=moment().add(15,"m"),v.setting.driverValue=v.multipleArrDriver[0],e.$apply(function(){v.geohashGroups.push(i)})}if(v.groupCreation){var a={};a.geoHash=s.encode(t.latLng.lat(),t.latLng.lng(),v.selectedPrecision.value),e.$apply(function(){_.last(v.geohashGroups).geoHashArr.push(m(a.geoHash)),v.setting=_.last(v.geohashGroups),v.setting.driverValue=v.multipleArrDriver[0],v.setting.value=v.multipleArrDriver[0]})}if(v.groupEdit){var a={};a.geoHash=s.encode(t.latLng.lat(),t.latLng.lng(),v.selectedPrecision.value),e.$apply(function(){v.setting.geoHashArr.push(m(a.geoHash))})}}var v=this;v.map,v.show500=!1,e.date=moment().format("ddd, MMM Do YYYY"),v.geohashArray=[],v.geohashGroups=[],v.setting={},v.colors=["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],v.hstep=1,v.mstep=5,e.ismeridian=!1,e.toggle=!1,v.groupCreation=!1,v.groupEdit=!1,v.precisionArr=[{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8}],v.selectedPrecision=v.precisionArr[0],v.multipleArrRider=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.driverValue=v.multipleArrDriver[0],function(){window.localStorage&&(localStorage.getItem("firstLoad")?localStorage.removeItem("firstLoad"):(localStorage.firstLoad=!0,window.location.reload()))}(),d(),v.setValueArr=function(){"x"==v.setting.type&&(v.multipleArrRider=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.driverValue=v.multipleArrDriver[0]),"a"==v.setting.type&&(v.multipleArrRider=[{name:"5",value:5},{name:"10",value:10},{name:"15",value:15},{name:"20",value:20},{name:"25",value:25},{name:"30",value:30},{name:"35",value:35},{name:"40",value:40},{name:"45",value:45},{name:"50",value:50}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"5",value:5},{name:"10",value:10},{name:"15",value:15},{name:"20",value:20},{name:"25",value:25},{name:"30",value:30},{name:"35",value:35},{name:"40",value:40},{name:"45",value:45},{name:"50",value:50}],v.setting.driverValue=v.multipleArrDriver[0])},v.ShapeClicked=function(e){v.groupEdit=!0;var t=s.encode(e.latLng.lat(),e.latLng.lng(),v.selectedPrecision.value);if(v.setting=c(t),v.setting.groupId){v.groupEdit=!0,v.groupCreation=!1,console.log(v.setting.fromTime),console.log(v.setting.toTime);var i=v.setting.fromTime.slice(0,2),a=v.setting.fromTime.slice(2,4),r=v.setting.toTime.slice(0,2),n=v.setting.toTime.slice(2,4),l=new Date;l.setUTCHours(i,a,0,0);var o=l.getHours(),d=l.getMinutes(),p=new Date;p.setUTCHours(r,n,0,0);var m=p.getHours(),h=p.getMinutes();v.setting.startTime=moment().hour(o).minute(d),v.setting.endTime=moment().hour(m).minute(h),u(v.setting.groupId)}else v.groupEdit=!1,v.groupCreation=!0},v.ShapeDblClicked=function(e){e.stop();var t=s.encode(e.latLng.lat(),e.latLng.lng(),v.selectedPrecision.value);v.setting=c(t);var i=_.findIndex(v.setting.geoHashArr,{geoHash:t});v.setting.geoHashArr.splice(i,1)},a.getMap({id:"surgeMap"}).then(function(e){v.map=e,google.maps.event.addDomListener(v.map,"click",h),v.map.setClickableIcons(!1)}),v.onPrecisionChange=function(){v.groupCreation=!1,v.groupEdit=!1,v.geohashGroups=[],d(),p()},v.refresh=function(){v.groupCreation=!1,v.groupEdit=!1,d(),p()},v.removeGeoHash=function(){v.geohashArray.splice(index,1)},v.removeGroup=function(e){r.removeGroup({id:e},function(e){v.refresh(),p(),n.success(e)},function(e){n.success(e)})},p(),v.createSurge=function(){var e={};e.groupTitle=v.setting.groupTitle,e.geohash=_.pluck(v.setting.geoHashArr,"geoHash"),e.precision=v.selectedPrecision.value,e.precision=v.selectedPrecision.value,e.city=t.city,e.vehicleType=t.vehicleType,e.driverValue=v.setting.driverValue.value,e.value=v.setting.value.value;var i=moment.utc(v.setting.startTime).format("Hmm"),a=moment.utc(v.setting.endTime).format("Hmm");i.length<4?e.fromTime="0"+i:e.fromTime=i,a.length<4?e.toTime="0"+a:e.toTime=a,e.type=v.setting.type,e.forceConfirm=v.setting.forceConfirm?1:0,console.log(e),v.groupCreation?r.createSurge(e,function(e){v.groupCreation=!1,d(),p(),n.success("Surge Group Created.")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)}):(e.groupId=v.setting.groupId,r.updateGroup(e,function(e){v.groupEdit=!1,d(),p(),n.success("Surge Group Updated.")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)}))},v.addSetting=function(){}}e.$inject=["$scope","$rootScope","$interval","NgMap","geohash","SurgeService","toastr","ngDialog","StaticDataService"],angular.module("tuktukV2Dahboard").controller("SurgeController",e)}(),angular.module("tuktukV2Dahboard").factory("SurgeService",SurgeService),function(){"use strict";function e(e,t,i,a,s,r,n,l){var o=this;o.ranges=i.ranges,e.tripDates={},e.tripDates.startDate=moment().subtract(1,"days").format("YYYY-MM-DD"),e.tripDates.endDate=moment().subtract(1,"days").format("YYYY-MM-DD"),
e.driverDates=angular.copy(e.tripDates),e.riderDates=angular.copy(e.tripDates),o.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],o.tripFrequency={value:"hour"},o.driverFrequency={value:"hour"},o.riderFrequency={value:"hour"},o.config=a.lineChartConfig,o.tripChartOptions=angular.copy(a.lineChartOptions),o.driverChartOptions=angular.copy(a.lineChartOptions),o.riderChartOptions=angular.copy(a.lineChartOptions),o.trips=[],o.drivers=[],o.riders=[],this.changeFrequency=function(e,t){switch(console.log("Frequency changed ",t.value),e){case"driver":o.driverChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getDrivers();break;case"rider":o.riderChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getRiders();break;default:o.tripChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getTrips()}},o.getTrips=function(){n.getTrips({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.tripFrequency.value},{vehicle:r.vehicleType,frequency:o.tripFrequency.value},function(e){o.trips=l.getTrips(e[0].trip),o.trips.overview=e[0].overview},function(t){console.log(t),e.error=!0})},o.getDrivers=function(){n.getDrivers({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.driverFrequency.value},{vehicle:r.vehicleType,frequency:o.driverFrequency.value},function(e){o.drivers=l.getDrivers(e),console.log("vm.drivers ",o.drivers)},function(t){console.log(t),e.error=!0})},o.getRiders=function(){n.getRiders({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.riderFrequency.value},{vehicle:r.vehicleType,frequency:o.riderFrequency.value},function(e){o.riders=l.getRiders(e[0].riders),o.riders.overview=e[0].overview,console.log("vm.riders ",l.riders)},function(t){console.log(t),e.error=!0})},o.getAllData=function(){o.getTrips(),o.getDrivers(),o.getRiders()},o.getAllData();var d=t(function(){o.getAllData()},3e4);e.$on("$destroy",function(){t.cancel(d)})}e.$inject=["$scope","$interval","StaticDataService","ChartConfigService","$stateParams","$rootScope","PerformanceService","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("PerformanceController",e)}(),angular.module("tuktukV2Dahboard").factory("PerformanceService",PerformanceService),angular.module("tuktukV2Dahboard").factory("PerformanceHandler",PerformanceHandler),function(e){function t(e){function t(t){return this.data=t.data.reverse(),this.element=t.element,this.max=e.max(this.data,function(t){return e.max(t.slice(1),function(e){return parseFloat(e.value)})}),t.upperLimit?this.upperLimit=t.upperLimit:this.upperLimit=this.max,this}return t.prototype.draw=function(t){function i(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","none"),e.select(t).selectAll("text.value").style("display","block")}function a(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","block"),e.select(t).selectAll("text.value").style("display","none")}var s,r,n,l,o,d,c=10,u=5,p=t.width,m=80,h=p-m,v=35,g=v*this.data.length,f=h/this.data[0].length,b=14;return s=e.scale.linear().domain([0,this.data[0].length-1]).range([m+f/2,h+f/2]),r=e.scale.linear().domain([0,this.data.length-1]).range([0,g-v]),d=e.scale.linear().domain([0,this.upperLimit,this.max]).range([0,b,b]),n=e.select(this.element).html("").append("svg").attr("width",p).attr("height",g+3*c).append("g"),o=n.selectAll(".row").data([this.data[0].slice(1)]).enter().append("g").attr("class","xaxis"),o.append("line").attr("x1",0).attr("x2",p).attr("y1",3*c).attr("y2",3*c).style("stroke-width",1).style("stroke","#efefef"),o.selectAll("line.tick").data(function(e,t){return e}).enter().append("line").attr("class","tick").attr("x1",function(e,t){return m+s(t)}).attr("x2",function(e,t){return m+s(t)}).attr("y1",function(e,t){return 2*c}).attr("y2",function(e,t){return 3*c}).style("stroke-width",1).style("stroke","#efefef"),o.selectAll(".rule").data(function(e,t){return e}).enter().append("text").attr("class","rule").attr("x",function(e,t){return m+s(t)}).attr("y",c+u).attr("text-anchor","middle").text(function(e){return e.key}),l=n.selectAll(".row").data(this.data).enter().append("g").attr("class","row").attr("transform",function(e,t){var i=g-r(t)-v/2+3*c;return"translate(0, "+i+")"}),l.selectAll("line").data([0]).enter().append("line").attr("x1",0).attr("x2",p).attr("y1",v/2).attr("y2",v/2).style("stroke-width",1).style("stroke","#efefef"),l.selectAll(".textheader").data(function(e,t){return[e[0]]}).enter().append("text").attr("x",0).attr("y",function(e,t){return u}).attr("class","textheader").attr("text-anchor","left").text(function(e,t){return e.value}).on("mouseover",i).on("mouseout",a),l.selectAll("circle").data(function(e,t){return e.slice(1)}).enter().append("circle").style("fill","#888").attr("r",function(e,t){return d(parseFloat(e.value))}).attr("transform",function(e,t){var i=m+s(t);return"translate("+i+", 0)"}),l.selectAll("text.value").data(function(e,t){return e.slice(1)}).enter().append("text").attr("class","value").style("display","none").text(function(e,t){return e.value}).attr("text-anchor","middle").attr("x",function(e,t){return m+s(t)}).attr("y",function(e,t){return u}),this},t.prototype.destroy=function(){e.select(this.element).selectAll("text.textheader").on("mouseover",null).on("mouseout",null)},t}"object"==typeof exports?module.exports=t(require("d3")):"function"==typeof define&&define.amd?define(["d3"],t):e.D3punchcard=t(e.d3)}(this),function(){"use strict";function e(e,t,i,a,s,r){var n=this;n.offers=[],n.drivers=[],n.selectedOffers=[],n.selectedDrivers=[],n.offerCheckboxes={},n.driverCheckboxes={},n.noDriversSelected=!1,n.noOffersSelected=!1,n.filterTerm="",n.filterFields=[{value:"id",name:"Driver ID"},{value:"name",name:"Driver Name"},{value:"phone",name:"Driver Phone"}],n.addOffer=function(e){_.find(n.selectedOffers,{id:e.id})||n.selectedOffers.push(e)},n.removeOffer=function(e){n.selectedOffers.splice(e,1)},n.addDriver=function(e){_.find(n.selectedDrivers,{id:e.id})||n.selectedDrivers.push(e)},n.addDrivers=function(){n.noDriversSelected=!1;var t=_.pairs(n.driverCheckboxes.items);return 0==t.length?void(n.noDriversSelected=!0):void _.each(t,function(t){if(1==t[1]&&!_.find(n.selectedDrivers,{id:t[0]})){var i=_.find(e.driverTableParams.data,{id:t[0]});n.addDriver(i)}})},n.addOffers=function(){var t=_.pairs(n.offerCheckboxes.items);_.each(t,function(t){if(0==n.selectedOffers.length&&1==t[1]){var i=_.find(e.offerTableParams.data,{id:Number(t[0])});n.addOffer(i)}if(1==t[1]&&!_.find(n.selectedOffers,{id:Number(t[0])})){var i=_.find(e.offerTableParams.data,{id:Number(t[0])});n.addOffer(i)}})},n.removeDriver=function(e){n.selectedDrivers.splice(e,1)},n.searchOffers=function(){e.offerTableParams.reload()},n.searchDrivers=function(){e.driverTableParams.reload()},n.clearOfferSearch=function(){n.offerTxt="",e.offerTableParams.reload()},n.refreshPage=function(){e.driverTableParams.reload(),e.offerTableParams.reload()},n.clearDriverSearch=function(){n.driverTxt="",e.driverTableParams.reload()},n.assignOffers=function(){if(confirm("Are you sure you want to save?")){var e={};e.drivers=_.pluck(n.selectedDrivers,"id"),e.offers=_.pluck(n.selectedOffers,"code"),e.status=!0,t.assignOffers({},e,function(e){s.success("Offers assigned to selected drivers."),n.clearAll()},function(e){s.error("Error : "+e)})}},n.openSingleAlert=function(e,t){r.open({template:"alertSingleDelete.html",className:"ngdialog-theme-plain",overlay:!0,resolve:{index:function(){return e},row:function(){return t}},controller:["index","row","OfferService","$scope",function(e,t,i,a){a.index=e,a.row=t,console.log(e,t),a.removeSingleOffer=function(e,t){var a={};a.drivers=[t.id],a.offers=[t.offers[e]],a.status=!1,i.assignOffers({},a,function(i){s.success("Offer removed."),t.offers.splice(e,1)},function(e){s.error("Error : "+e)})}}]})},n.alertDeleteAllOffers=function(t){n.currentRow=t,r.open({template:"alert.html",className:"ngdialog-theme-plain",scope:e,overlay:!0})},n.removeAllAssignedOffers=function(){t.getDriverOffers({id:n.currentRow.id},function(e){var i={};i.drivers=[n.currentRow.id],i.offers=e.offers,i.status=!1,t.assignOffers({},i,function(e){s.success("All offers removed for this driver."),n.refreshPage()},function(e){s.error("Error : "+e)})},function(e){s.error("Error : "+e)})},n.getDriverOffers=function(e){t.getDriverOffers({id:e.id},function(t){e.offers=t.offers},function(e){s.error("Error : "+e)})},n.clearAll=function(){n.selectedOffers=[],n.selectedDrivers=[]},e.offerTableParams=new i({page:1,count:10},{counts:[],getData:function(i){var a=10*(i.page()-1)+1;console.log("**************************");var s={};if(s.start=a,s.count=i.count(),i.orderBy().length>0){var r=i.orderBy()[0].substr(0,1);s.field=i.orderBy()[0].substr(1),"+"===r?s.orderby="ASC":s.orderby="DESC"}return n.offerTxt&&""!=n.offerTxt&&(s.term="code|"+n.offerTxt),t.getOffers(s).$promise.then(function(t){return i.total(t.total),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,n.offerCheckboxes={checked:!1,items:{}},t.data})}}),e.driverTableParams=new i({page:1,count:10},{counts:[],getData:function(i){var a=10*(i.page()-1)+1;console.log("**************************");var s={};if(s.start=a,s.count=i.count(),i.orderBy().length>0){var r=i.orderBy()[0].substr(0,1);s.field=i.orderBy()[0].substr(1),"+"===r?s.orderby="ASC":s.orderby="DESC"}return n.driverTxt&&""!=n.driverTxt&&(s.term=n.filterTerm.value+"|"+n.driverTxt),t.getDrivers(s).$promise.then(function(t){return i.total(t.total),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,n.driverCheckboxes={checked:!1,items:{}},t.data})}}),e.$watch(function(){return n.offerCheckboxes.checked},function(t){angular.forEach(e.offerTableParams.data,function(e){n.offerCheckboxes.items[e.id]=t,console.log("value ",t)})}),e.$watch(function(){return n.offerCheckboxes.items},function(t){var i=0,s=0,r=e.offerTableParams.data.length;angular.forEach(e.offerTableParams.data,function(e){i+=n.offerCheckboxes.items[e.id]||0,s+=!n.offerCheckboxes.items[e.id]||0}),(0==s||0==i)&&(n.offerCheckboxes.checked=i==r),angular.element(a[0].getElementsByClassName("select-all")).prop("indeterminate",0!=i&&0!=s)},!0),e.$watch(function(){return n.driverCheckboxes.checked},function(t){var i=0;angular.forEach(e.driverTableParams.data,function(e){n.driverCheckboxes.items[e.id]=t,i++})}),e.$watch(function(){return n.driverCheckboxes.items},function(t){var i=0,s=0,r=e.driverTableParams.data.length;angular.forEach(e.driverTableParams.data,function(e){i+=n.driverCheckboxes.items[e.id]||0,s+=!n.driverCheckboxes.items[e.id]||0}),(0==s||0==i)&&(n.driverCheckboxes.checked=i==r),angular.element(a[0].getElementsByClassName("select-all-drivers")).prop("indeterminate",0!=i&&0!=s)},!0)}e.$inject=["$scope","OfferService","NgTableParams","$element","toastr","ngDialog"],angular.module("tuktukV2Dahboard").controller("OffersController",e)}(),angular.module("tuktukV2Dahboard").factory("OfferService",OfferService),function(){"use strict";function e(e,t,i,a,s,r,n){e.navsLister=[],e.cities=r.cities,e.vehicleTypes=r.vehicleTypes,i.selectedCity=r.cities[0],i.selectedVehicle=r.vehicleTypes[0],e.ChangeCity=function(e){i.selectedCity=e,i.city=e.value,a.go(a.current.name,{city:i.city,vehicleType:i.vehicleType})},e.ChangeVehicle=function(e){i.selectedVehicle=e,i.vehicleType=e.value,a.go(a.current.name,{city:i.city,vehicleType:i.vehicleType})},e.status={isopen:!1},e.toggled=function(e){t.log("Dropdown is now: ",e)},n.getNav()&&(e.navsLister=n.getNav())}e.$inject=["$scope","$log","$rootScope","$state","$stateParams","StaticDataService","setNavByRoleService"],angular.module("tuktukV2Dahboard").controller("MainController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d,c){var u=this;e.loginUser=function(){n.doLogin(e.user,function(e){console.log("vm.modules",u.modules),e.success?(u.modules=e.resources,l.setUser(e),s.defaults.headers.common.Authorization="Basic "+e.token,a.isAuthenticated=!0,c.setNav(u.modules),i(function(){r.go("home.live",{city:a.city,vehicleType:a.vehicleType})},20),o.success("You are successfully logged in.")):o.error(e.msg)},function(e){console.log(e),o.error(e.data.msg)})}}e.$inject=["$scope","$log","$timeout","$rootScope","$http","$state","LoginService","UserService","toastr","StaticDataService","setNavByRoleService"],angular.module("tuktukV2Dahboard").controller("LoginController",e)}(),angular.module("tuktukV2Dahboard").factory("LoginService",LoginService),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d,c,u,p,m){function h(e){var t=[];g.totalWeek=e.length;var t=e,i=t[D].startOn,a=t[D].endOn;g.formattedStartWeek=moment(1e3*i).format("YYYYMMDD"),g.formattedEndWeek=moment(1e3*a).format("YYYYMMDD"),g.formattedStartWeekDs=moment(1e3*i).format("ddd, MMM Do YYYY"),g.formattedEndWeekDs=moment(1e3*a).format("ddd, MMM Do YYYY"),v()}function v(){e.payoutTableParams=new l({page:1,count:20,sorting:{name:"ASC"}},{counts:[],getData:function(t){var i=(t.page(),""),a="";t.orderBy().length>0&&(i=t.orderBy()[0].substr(0,1),a=t.orderBy()[0].substr(1),i="+"===i?"DESC":"ASC");var s={endDate:g.formattedEndWeek,startDate:g.formattedStartWeek,type:i,order:a};return n.getInvoiceList(s).$promise.then(function(i){return t.total(i.total),e.data=i,i.length>0?e.tblNoData=!1:e.tblNoData=!0,i})}})}var g=this;g.prev=!0,g.next=!1,e.editable=!0,e.dayWiseList=!1,e.addFineModel=!1,e.amountPaid=!1,e.publishAllBtn=!1;moment();g.date=moment().format("ddd, MMM Do YYYY");var f=moment(),b=f.year(),y=f.month(),x=f.date(),w=f.hour();f.minute(),new Date(b,y,x,w);g.formattedStartWeek,g.formattedEndWeek,g.fineAmount="",g.fineReason="",g.selectedRow=null,g.setSelected=function(e){g.selectedRow=e,console.log(e)};var D=0;g.getDataList=function(){n.getWeeks(function(e){h(e)},function(t){console.log(t),e.error=!0})},g.getDataList(),g.changeDate=function(t){"next"==t?(D--,g.getDataList(),0==D&&(g.next=!1,e.editable=!0),g.prev=!0):(D++,g.getDataList(),D>=g.totalWeek-1&&(g.prev=!1),g.next=!0,e.editable=!1)},e.addDriver=[],e.checkedForPub=function(t){-1===e.addDriver.indexOf(t)?(e.addDriver.push(t),e.publishAllBtn=!0):e.addDriver.splice(e.addDriver.indexOf(t),1),console.log(e.addDriver)},e.removeAllChecked=function(){e.addDriver=[],console.log(e.addDriver),e.publishAllBtn=!1,g.setCheck=!1},e.confirmPublish=function(e){u({text:"Are you sure want publish?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){g.invoiceListPublishAll()})},g.invoiceListPublishAll=function(e){n.invoiceListPublishAll({startDate:g.formattedStartWeek,endDate:g.formattedEndWeek},function(e){g.msg="All drivers published successfully.",d.success(g.msg),v()},function(e){g.msg="Already Published.",d.error(e.message)})},e.confirmPaid=function(e){u({text:"Are you sure want pay?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){g.invoiceListPaid(e)})},g.invoiceListPaid=function(t){n.invoiceListPaid({drivers:e.data[t].driver},{startDate:g.formattedStartWeek,endDate:g.formattedEndWeek,paidAmount:e.data[t].newClosingBalance||e.data[t].closingBalance},function(t){g.msg="Amount Paid",e.amountPaid=!0,d.success(g.msg),v()},function(e){g.msg="Already Published.",d.error(e.message)})},g.viewDaywiseListData=function(t){n.viewDaywiseList({startDate:g.formattedStartWeek,endDate:g.formattedEndWeek,drivers:[e.data[t].driver]},function(t){e.dataDay=t,e.dataSettledTrip=e.dataDay.settledTrip,e.dayWiseList=!0,g.emi=e.dataDay.emi,g.settled=e.dataDay.settled,g.totalTripCount=e.dataDay.balance.totalTripCount,g.totalEarning=e.dataDay.balance.totalEarning,g.cashCollection=e.dataDay.balance.cashCollection,g.totalShare=e.dataDay.balance.totalShare,g.totalBalance=e.dataDay.balance.totalBalance},function(e){d.error(e.message)})},g.addFine=function(t){n.addFine({drivers:g.newDriverID},{startDate:g.formattedStartWeek,endDate:g.formattedEndWeek,fine:g.fineAmount,fineReason:g.fineReason},function(t){g.msg="Amount Paid",e.addFineModel=!0,d.success(g.msg),v()},function(e){g.msg="Already Published.",d.error(e.message)})},g.hideDayWiseList=function(t){e.dayWiseList=!1},g.hideFineModel=function(t){e.addFineModel=!1},g.showFineModel=function(t,i,a,s){e.addFineModel=!0,g.newDriverID=i,g.fineReason=s,g.fineAmount=a}}e.$inject=["$scope","$stateParams","$log","$rootScope","$interval","StaticDataService","PayoutService","NgTableParams","$resource","toastr","ngDialog","$confirm","$localStorage","$sessionStorage"],angular.module("tuktukV2Dahboard").controller("PayoutController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d){var c=this;c.countryCode="+91",c.basic={},c.basic.dob=new Date,c.bank={},c.vehicle={},c.licence={},c.identity={},c.device={},c.others={},c.calender={},c.calender.opened=!1,c.calender.maxDate=new Date,c.canEdit=!1,c.canCreate=!1,c.canView=!1,c.AddVehicleForm=!1,c.DRIVER_ACCOUNT={STATUS_DRAFT:0,STATUS_ACTIVE:1,STATUS_SUSPENDED:2,STATUS_DELETED:3,NEW_ACCOUNT:-1},c.openCalender=function(){c.calender.opened=!0},c.verifyDriver=function(){n.verifyDriver({},{phone:c.countryCode+""+c.basic.phone},function(e){e.ac_status==c.DRIVER_ACCOUNT.NEW_ACCOUNT?c.canCreate=!0:e.ac_status==c.DRIVER_ACCOUNT.STATUS_DELETED||e.ac_status==c.DRIVER_ACCOUNT.STATUS_DRAFT?(c.basic=e.basic_info,c.basic.phone=c.basic.phone.substring(3),c.canEdit=!0):c.canView=!0},function(t){e.error=!0})},c.SaveBasicInfo=function(){c.basic.phone=angular.copy(c.countryCode+""+c.basic.phone),c.canCreate?n.saveDriverInfo(c.basic,function(e){o.success(e.message),c.driveId=e.id,c.basic.phone=c.basic.phone.substring(3),c.canCreate=!1,c.canEdit=!0},function(e){o.error(e.message)}):n.updateDriverInfo({driveId:c.driveId},c.basic,function(e){o.success(e.message),c.basic.phone=c.basic.phone.substring(3)},function(e){o.error(e.message)})},c.SaveBankInfo=function(){c.bank.driverId=c.driveId,n.saveAccountInfo(c.bank,function(e){o.success(e.message)},function(e){o.error(e.data.message)})},c.SaveVehicleInfo=function(){n.saveVehicleInfo(c.basic,{},function(e){o.success(e.message)},function(e){o.error(e)})},c.SaveLicenseInfo=function(){n.saveLicenseInfo(c.basic,{},function(e){o.success(e)},function(e){o.error(e.message)})},c.SaveIdentityInfo=function(){n.saveIdentityInfo(c.basic,{},function(e){o.success(e.message)},function(e){o.error(e)})},c.SaveDeviceInfo=function(){n.saveDeviceInfo(c.basic,{},function(e){o.success(e)},function(e){o.error(e.message)})},c.SaveOthers=function(){n.saveDriverInfo(c.basic,{},function(e){o.success(e.message)},function(e){o.error(e.message)})},c.SearchVehiclesByReg=function(){n.vehicleSearch({vehicleRegNumber:c.vehicle.vehicleRegNumber},function(e){o.success(e.message)},function(e){o.error(e.message)})},c.showAddVehicleForm=function(){c.AddVehicleForm=!0},c.hideAddVehicleForm=function(){c.AddVehicleForm=!1}}e.$inject=["$scope","$stateParams","$log","$rootScope","$interval","StaticDataService","OnboardingService","$resource","toastr","ngDialog"],angular.module("tuktukV2Dahboard").controller("OnboardingController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d){var c=this,u=moment();moment();c.termURL=r.term,c.filterURL=r.filterURL,c.statusURL=r.status,c.startDateURL=r.startDate,c.endDatefilterURL=r.endDate,c.searchTerm=c.termURL,c.showTableData=!0,c.enblBtn=!1,c.selectedRow=null,c.setSelected=function(e){c.selectedRow=e},c.ranges=n.ranges,c.config=l.lineChartConfig,e.date=moment().format("ddd, MMM Do YYYY"),e.datesForSearch={},e.datesForSearch.startDate=moment(u),e.datesForSearch.endDate=moment(u),c.filterTerm="",c.filterFields=[{value:"id",name:"Driver ID"},{value:"dname",name:"Driver Name"},{value:"phone",name:"Driver Phone"},{value:"vehicle",name:"Vehicle Number"},{value:"joined",name:"Joined On"}],c.statusCodes="",c.driverStatusFilters=[{name:"All",value:"all"},{name:"Occupied",value:"22"},{name:"Unoccupied ",value:"11"},{name:"Offline",value:"10"}],c.checkMinChr=function(e){c.searchTerm.length>2?c.enblBtn=!0:c.enblBtn=!1},c.checkMinChr(),c.selectedFilterFields=_.find(c.filterFields,function(e){return e.value==c.filterURL}),c.filterTerm=c.selectedFilterFields;e.getTimeDiff=function(e,t){if(0==e||0==t)return"0";if(t){var i=t-e;return i}return"0"},c.getAllData=function(){c.getResult(),e.tableParams.reload()},c.refreshPage=function(){c.getAllData()},c.onFocus=function(){c.getAllData()},c.getResult=function(){e.tableParams=new d({page:1,count:20},{counts:[],total:1,getData:function(t){var i=t.page();console.log("**************************");var s={};if(s.city=a.city,s.vehicle=a.vehicleType,s.from=moment(e.datesForSearch.startDate).startOf("day").format("YYYYMMDD").toString(),s.to=moment(e.datesForSearch.startDate).startOf("day").format("YYYYMMDD").toString(),s.start=i,s.count=t.count(),t.orderBy().length>0){var r=t.orderBy()[0].substr(0,1);s.field=t.orderBy()[0].substr(1),"+"===r?s.orderby="ASC":s.orderby="DESC"}return""!=c.filterTerm&&""!=c.searchTerm&&(s.term=c.filterTerm.value+"|"+c.searchTerm),""==c.filterURL||""==c.termURL?void(s.term=""):(s.term=c.filterURL+"|"+c.termURL,""!=c.statusCodes.value&&(s.filterByStatus=c.statusCodes.value),o.getTopDrivers(s).$promise.then(function(e){return t.total(e.total),e.length>0?c.showTableData=!0:c.showTableData=!1,e}))}})},c.getResult()}e.$inject=["$scope","$window","toastr","$rootScope","$state","$stateParams","StaticDataService","ChartConfigService","DriversService","NgTableParams"],angular.module("tuktukV2Dahboard").controller("DriversSearchController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d,c,u,p,m,h,v){function g(t){var i=[];e.sT=0,e.cT=0,e.atT=0,e.rtT=0,e.iT=0,e.alT=0,t=angular.fromJson(t);for(var a=0;a<t.length;a++)e.sT+=t[a].successful,e.cT+=t[a].cancelled,e.atT+=t[a].acceptedTrip,e.rtT+=t[a].rejectedTrip,e.iT+=t[a].ignoredTrip,e.alT+=t[a].allocatedTrip;var s=["Successful("+e.sT+")","Cancelled("+e.cT+")","Accepted Trip("+e.atT+")","Rejected Trip("+e.rtT+")","Ignored Trip("+e.iT+")","Allocated Trip("+e.alT+")"],r={};r.key=s[0],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].successful])}i.push(r);var r={};r.key=s[1],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].cancelled])}i.push(r);var r={};r.key=s[2],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].acceptedTrip])}i.push(r);var r={};r.key=s[3],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].rejectedTrip])}i.push(r);var r={};r.key=s[4],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].ignoredTrip])}i.push(r);var r={};r.key=s[5],r.values=[],r.bar=!0;for(var a=0;a<t.length;a++){var n=1e3*moment(c.getLongDate(t[a].date)).unix();r.values.push([n,t[a].allocatedTrip])}return i.push(r),console.log(i),i}function f(e){var t=[];y.totalWeek=e.length;var t=e,i=t[k].startOn,a=t[k].endOn;y.formattedStartWeek=moment(1e3*i).format("YYYYMMDD"),y.formattedEndWeek=moment(1e3*a).format("YYYYMMDD"),y.formattedStartWeekDs=moment(1e3*i).format("ddd, MMM Do YYYY"),y.formattedEndWeekDs=moment(1e3*a).format("ddd, MMM Do YYYY"),b()}function b(){e.payoutTableParams=new p({page:1,count:20,sorting:{name:"ASC"}},{counts:[],total:1,getData:function(t){console.log(s.driverId);var i=(t.page(),""),a="";return t.orderBy().length>0&&(i=t.orderBy()[0].substr(0,1),a=t.orderBy()[0].substr(1),i="+"===i?"DESC":"ASC"),d.getInvoiceList({startDate:y.formattedStartWeek,endDate:y.formattedEndWeek},{id:s.driverId}).$promise.then(function(i){return t.total(i.total),e.dataInvoice=i,i.length>0?e.tblNoData=!1:e.tblNoData=!0,i})}})}var y=this,x=moment();moment();y.prev=!0,y.next=!1,y.date=moment().format("ddd, MMM Do YYYY");var w=x.year(),D=x.month(),_=x.date(),T=x.hour();x.minute(),new Date(w,D,_,T);y.formattedStartWeek,y.formattedEndWeek,e.dayWiseList=!1,y.ranges=o.ranges,y.config=u.lineChartConfig,e.selectedDates={},e.selectedDates.startDate=moment().format("YYYY-MM-DD"),e.selectedDates.endDate=moment().format("YYYY-MM-DD"),e.driverTripDates={},e.driverTripDates.startDate=o.ranges["Last 7 Days"][0],e.driverTripDates.endDate=o.ranges["Last 7 Days"][1],y.tripChartOptions=angular.copy(u.multiBarChartOptions),y.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},y.getTripsChart=function(){d.getTripsChart({city:t.city,vehicle:t.vehicleType,drivers:s.driverId,from:moment(e.driverTripDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.driverTripDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){y.tripData=g(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e})},function(t){console.log(t),e.error=!0})},e.driverOnlineDates={},e.driverOnlineDates.startDate=o.ranges["Last 7 Days"][0],e.driverOnlineDates.endDate=o.ranges["Last 7 Days"][1],y.onlineChartOptions=angular.copy(u.lineChartOptions),y.onlineChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},y.onlineChartOptions.chart.yAxis.tickFormat=function(e){return d3.format(".3n")(e)},y.getOnlineChart=function(){d.getOnlineChart({city:t.city,vehicle:t.vehicleType,drivers:s.driverId,from:moment(e.driverOnlineDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.driverOnlineDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){c.online=e,y.online=c.getOnlineFtr(e)},function(t){console.log(t),e.error=!0})},y.getProfile=function(){d.getProfile({id:s.driverId},function(e){y.profile=e},function(t){console.log(t),e.error=!0})},y.getProfile(),y.getAllData=function(){y.getProfile(),e.tableParams.reload()},e.confirmSuspend=function(){r({text:"Are you sure want suspend?",title:"Are you sure?",ok:"Yes",cancel:"No"}).then(function(){y.driverSuspend()})},e.confirmDelete=function(){r({text:"Are you sure want delete?",title:"Are you sure?",ok:"Yes",cancel:"No"}).then(function(){y.driverDelete()})},y.driverSuspend=function(){d.accountDriver({id:s.driverId},{accountStatus:2},function(t){y.msg="Driver Suspend",e.amountPaid=!0,n.success(y.msg),i.close()},function(e){y.msg="Already Suspended.",n.error(e.message)})},y.driverDelete=function(t){d.accountDriver({id:s.driverId},{accountStatus:3},function(t){y.msg="Driver Deleted",e.amountPaid=!0,n.success(y.msg),i.close()},function(e){y.msg="Already Deleted.",n.error(e.message)})};var k=0;y.getDataList=function(){d.getWeeks(function(e){f(e)},function(t){console.log(t),e.error=!0})},y.getDataList(),y.changeDate=function(t){"next"==t?(k--,y.getDataList(),0==k&&(y.next=!1,e.editable=!0),y.prev=!0):(k++,y.getDataList(),k>=y.totalWeek-1&&(y.prev=!1),y.next=!0,e.editable=!1)},y.viewDaywiseListData=function(t){d.viewDaywiseList({startDate:y.formattedStartWeek,endDate:y.formattedEndWeek,drivers:t},function(t){e.dataDay=t,e.dataSettledTrip=e.dataDay.settledTrip,e.dayWiseList=!0,y.emi=e.dataDay.emi,y.settled=e.dataDay.settled,y.totalTripCount=e.dataDay.balance.totalTripCount,y.totalEarning=e.dataDay.balance.totalEarning,y.cashCollection=e.dataDay.balance.cashCollection,y.totalShare=e.dataDay.balance.totalShare,y.totalBalance=e.dataDay.balance.totalBalance,n.success(y.msg)},function(e){n.error(e.message)})},y.hideDayWiseList=function(){e.dayWiseList=!1},e.getTimeDiff=function(e,t){var i;if(0==e)return"0";i=0==t?new Date:new Date(1e3*t);var a=new Date(1e3*e),s=moment.utc(moment(a,"DD/MM/YYYY HH:mm:ss").diff(moment(i,"DD/MM/YYYY HH:mm:ss"))),r="";return s.hours()>0&&(r=s.hours()+" hr "),r+=s.minute()+" min "},y.getTripsList=function(){e.tableParams=new p({page:1,count:20,sorting:{earning:"desc"}},{counts:[],getData:function(t){var i=20*(t.page()-1)+1;console.log("**************************");var a="",r="";return t.orderBy().length>0&&(a=t.orderBy()[0].substr(0,1),r=t.orderBy()[0].substr(1),a="+"===a?"ASC":"DESC"),d.getTrips({startDate:moment(e.driverTripDates.startDate).startOf("day").unix(),endDate:moment(e.driverTripDates.endDate).endOf("day").unix(),orderby:a,field:r,start:i,count:t.count()},{id:s.driverId}).$promise.then(function(i){return t.total(i.total),console.log("trop ",i),i.data.length>0?e.tblNoData=!1:e.tblNoData=!0,i.data})}})},y.onDateChangeTrips=function(){y.getTripsChart()},y.onDateChangeTrips(),y.onDateChangeOnline=function(){y.getOnlineChart()},y.onDateChangeOnline()}e.$inject=["$scope","$rootScope","$window","$state","$stateParams","$confirm","toastr","$interval","StaticDataService","DriversService","DriverHandler","ChartConfigService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("DriversDetailController",e)}(),function(){"use strict";function e(e,t,i,a,s,r,n,l,o){var d=this;e.date=moment().format("ddd, MMM Do YYYY"),e.dateURL=moment().format("DD/MM/YYYY");var c=moment();d.termURL="d",d.filterURL="id",d.statusURL=0,d.startDateURL=moment(c).startOf("day").format("YYYYMMDD").toString(),d.endDateURL=moment(c).endOf("day").format("YYYYMMDD").toString(),d.ranges=i.ranges,d.config=s.lineChartConfig,e.datesForLeaderboard={},e.datesForLeaderboard.startDate=moment(c).subtract(1,"days"),e.datesForLeaderboard.endDate=moment(c).subtract(1,"days"),e.datesForAcq={},e.datesForAcq.startDate=i.ranges["Last 7 Days"][0],e.datesForAcq.endDate=i.ranges["Last 7 Days"][1],d.acquisitionData=[],d.acquisitionChart=angular.copy(s.lineChartOptions),d.acquisitionChart.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},e.driverSupplyDates={},e.driverSupplyDates.startDate=i.ranges["Last 7 Days"][0],e.driverSupplyDates.endDate=i.ranges["Last 7 Days"][1],d.supplyChartOptions=angular.copy(s.lineChartOptions),d.supplyChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},d.getLive=function(){o.getOverview({city:t.city,vehicle:t.vehicleType},function(e){d.overview=e},function(t){console.log(t),e.error=!0})},d.getLeaderboard=function(){d.leaderboradData="",n.getLeaderboard({from:moment(e.datesForLeaderboard.startDate).startOf("day").format("YYYYMMDD").toString()},function(e){d.leaderboradData=e,d.dataCount=_.size(d.leaderboradData)},function(e){a.error(e.message)})},d.getLeaderboard(),d.getAcquisition=function(){n.getAcquisition({city:t.city,vehicle:t.vehicleType,from:moment(e.datesForAcq.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.datesForAcq.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){r.acquisition=e,d.acquisition=r.getAcquisition(e),d.totalAqDrivers=r.totalDrivers},function(t){console.log(t),e.error=!0})},d.onDateChangeSupply=function(){d.getSupply()},d.getLeaderboardLength=function(e){console.log(_.size(e))},d.getSupply=function(){n.getSupply({city:t.city,vehicle:t.vehicleType,from:moment(e.driverSupplyDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.driverSupplyDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){r.supply=e,d.supply=r.getSupply(e),d.hourMax=r.maxValueDNew,d.supplyChartOptions.chart.yDomain=[0,d.hourMax]},function(t){console.log(t),e.error=!0})},d.getLive(),d.getAcquisition(),d.getSupply()}e.$inject=["$scope","$rootScope","StaticDataService","toastr","ChartConfigService","DriverHandler","DriversService","NgTableParams","LiveService"],
angular.module("tuktukV2Dahboard").controller("DriversController",e)}(),angular.module("tuktukV2Dahboard").factory("PayoutService",PayoutService),angular.module("tuktukV2Dahboard").factory("OnboardingService",OnboardingService),angular.module("tuktukV2Dahboard").factory("DriversService",DriversService),angular.module("tuktukV2Dahboard").factory("DriverHandler",DriverHandler),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d,c,u){function p(){f.canceledTripByDriver=[],o.getCancelTripsDriver({startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day"),city:i.city,vehicle:i.vehicleType},function(t){f.canceledTripByDriver=u.canTripDriver(t),e.totalCanDriver=f.canceledTripByDriver.sum("value")},function(t){console.log(t),e.error=!0})}function m(){f.canceledTripByRider=[],o.getCancelTripsRider({startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day"),city:i.city,vehicle:i.vehicleType},function(t){f.canceledTripByRider=u.canTripRider(t),e.totalCanRider=f.canceledTripByRider.sum("value")},function(t){console.log(t),e.error=!0})}function h(){o.getOverview({city:i.city,vehicle:i.vehicleType},function(e){f.overview=e},function(t){console.log(t),e.error=!0})}function v(){o.getOverview({city:i.city,vehicle:i.vehicleType,startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day")},function(e){f.overview=e},function(t){console.log(t),e.error=!0})}function g(t){var i=[];e.rT=0,e.rUT=0,e.cT=0,e.cUT=0,e.fT=0,e.fUT=0,e.faT=0,e.faUT=0,t=angular.fromJson(t);var a=t[0].trip;console.log(a.length);for(var s=0;s<a.length;s++)e.rT+=t[0].trip[s].requests.total,e.rUT+=t[0].trip[s].requests.unique_riders,e.cT+=t[0].trip[s].cancelled.total,e.cUT+=t[0].trip[s].cancelled.unique,e.fT+=t[0].trip[s].success.total,e.fUT+=t[0].trip[s].success.unique_riders,e.faT+=t[0].trip[s].failed.total,e.faUT+=t[0].trip[s].failed.unique_riders;var r=["Requests("+e.rT+") ","Requests(U "+e.rUT+") ","Cancelled("+e.cT+") ","Cancelled(U "+e.cUT+") ","Fulfilled("+e.fT+") ","Fulfilled(U "+e.fUT+") ","Failed("+e.faT+") ","Failed(U "+e.faUT+") "],n={};n.key=r[0],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].requests.total])}i.push(n);var n={};n.key=r[1],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].requests.unique_riders])}i.push(n);var n={};n.key=r[2],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].cancelled.total])}i.push(n);var n={};n.key=r[3],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].cancelled.unique])}i.push(n);var n={};n.key=r[4],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].success.total])}i.push(n);var n={};n.key=r[5],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].success.unique_riders])}i.push(n);var n={};n.key=r[6],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].failed.total])}i.push(n);var n={};n.key=r[7],n.values=[],n.bar=!0;for(var s=0;s<a.length;s++){var l=1e3*moment(u.getLongDate(t[0].trip[s].id)).unix();n.values.push([l,t[0].trip[s].failed.unique_riders])}return i.push(n),i}var f=this,b=moment();Array.prototype.sum=function(e){for(var t=0,i=0,a=this.length;a>i;i++)t+=this[i][e];return t},e.date=moment().format("ddd, MMM Do YYYY"),f.config=l.lineChartConfig,f.tripChartOptions=angular.copy(l.lineChartOptions),f.drRideCancelReasonCode={dCR_TYRE_FLAT:"Flat tyre",dCR_VEH_ISSUE:"Vehicle issues",dCR_STUCK_TRAFFIC:"Stuck in traffic",dCR_CUSTOMER_LATE:"Customer is late",dCR_CUSTOMER_NOT_RESPONDED:"Customer not responded"},f.cancelTripByDriverChartOptions=angular.copy(l.pieChartOptions),f.cancelTripByDriverChartOptions.chart.x=function(e){return f.drRideCancelReasonCode[e.label]},f.rdRideCancelReasonCode={rCR_MIND_CHANGE:"Changed my Mind",rCR_ROUTE_CHANGE:"Changed the Route",rCR_NOT_INTEREST:"Not need the ride anymore",rCR_DRIVER_ASKED_TO:"Driver asked to cancel",rCR_OTHER:"Other",rCR_BEFORE_CONFIRM:"Ride canceled before confirmation"},f.cancelTripByRiderChartOptions=angular.copy(l.pieChartOptions),f.cancelTripByRiderChartOptions.chart.x=function(e){return f.rdRideCancelReasonCode[e.label]};var y=moment();f.live=!0,f.changeDate=function(t){"next"==t?(y=moment(y).add(1,"day"),e.date=moment(y).format("dddd, MMMM Do YYYY")):(y=moment(y).subtract(1,"day"),e.date=moment(y).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(y).unix()==moment(b).unix()?(f.live=!0,h()):(f.live=!1,v(),p(),m()),getLive(),p(),m()},f.tripChartOptions=angular.copy(l.multiBarChartOptions),f.tripFrequency="hour",f.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%I %p")(new Date(e).addHours(1))},f.tripData=[],f.getTrips=function(){o.getTrips({city:i.city,vehicle:i.vehicleType,startTime:moment(y).startOf("day"),endTime:moment(y).endOf("day"),rate:f.tripFrequency,count:1,page:1},{vehicle:i.vehicleType,frequency:f.tripFrequency},function(e){f.tripData=g(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e})},function(t){console.log(t),e.error=!0})},f.getTrips(),h(),p(),m(),f.refreshPage=function(){f.getTrips(),f.live?(h(),p(),m()):v()}}e.$inject=["$scope","$log","$rootScope","$state","$interval","$stateParams","NgMap","ChartConfigService","LiveService","PerformanceService","PerformanceHandler","LiveHandler"],angular.module("tuktukV2Dahboard").controller("LiveController",e)}(),angular.module("tuktukV2Dahboard").factory("LiveService",LiveService),angular.module("tuktukV2Dahboard").factory("LiveHandler",LiveHandler),angular.module("tuktukV2Dahboard").service("setNavByRoleService",setNavByRoleService),angular.module("httpInterceptor",[]).config(["$provide","$httpProvider","$compileProvider",function(e,t,i){var a=$(),s=$('<div class="app-loader"><div class="text-center" style="padding:10%"><img src="assets/images/ring.svg" title="Tuktuk" height="100px"></div></div>').appendTo($("body")).hide();t.interceptors.push(["$q","$rootScope","$location","$cookies",function(e,t,i,a){return{request:function(t){var i=t.url.indexOf(".html");return-1==i&&s.show(),t.params&&t.params.startTime&&t.params.endTime&&("hour"==t.params.rate?(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDDHH").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDDHH").toString()):(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDD").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDD").toString())),t||e.when(t)},requestError:function(t){return s.hide(),canRecover(t)?responseOrNewPromise:e.reject(t)},response:function(e){var t=e.config.url.indexOf(".html");return-1==t&&s.hide(),e},responseError:function(i){switch(s.hide(),i.status){case 401:t.$broadcast("unauthorized");break;case 403:break;case 500:}return e.reject(i)}}}]),i.directive("appMessages",function(){var e={link:[function(e,t,i){a.push($(t))}]};return e})}]),angular.module("tuktukV2Dahboard").filter("secondsToDateTime",[function(){return function(e){var t=new Date(1e3*e),i="",a=t.getUTCHours(),s=t.getUTCMinutes(),r=t.getUTCSeconds();return a&&(i+=a+":"),s&&(i+=s+":"),r&&(i+=r+""),i}}]).filter("toMinSec",function(){return function(e){var t=parseInt(e/60,10),i=e%60;return t+" Min."+(i?" & "+i+" Sec.":"")}}).filter("customNumber",function(){return function(e){return parseInt(e,10)}}),angular.module("tuktukV2Dahboard").directive("ngPunchCard",PunchCardFunc),angular.module("tuktukV2Dahboard").directive("imageOnLoad",imageonload),angular.module("tuktukV2Dahboard").directive("fixedTableHeaders",["$timeout",function(e){return{restrict:"A",link:function(t,i,a){e(function(){var e=i.parentsUntil(a.fixedTableHeaders);i.stickyTableHeaders({scrollableArea:e,fixedOffset:2})},0)}}}]),angular.module("tuktukV2Dahboard").service("UserService",UserService),angular.module("tuktukV2Dahboard").factory("StaticDataService",StaticDataService),angular.module("tuktukV2Dahboard").factory("ChartConfigService",ChartConfigService),function(){"use strict";function e(e,t,i,a,s,r,n){function l(){a.getNotification({},function(e){o.notification=e},function(t){console.log(t),e.error=!0})}var o=this,d=moment();o.formObj={},o.formObj.message={},o.formObj.notificationType="push",o.formObj.message.lang="hi",o.formObj.type="topic",o.selectedDrivers=[],o.selectedType,o.filterFields=[{value:"name",name:"Driver Name"},{value:"phone",name:"Driver Phone"}],o.expirationValues=[{value:1,name:"1 Hour"},{value:12,name:"12 Hour"},{value:24,name:"24 Hour"},{value:25,name:"1 Week"}],o.expireAt=o.expirationValues[0],o.filterTerm=o.filterFields[0],o.tabChanged=function(e){console.log("changed",e),o.selectedType=e,o.formObj.type=e},o.searchTable=function(){e.tableParams.reload()},o.clearSearch=function(){o.searchTerm="",e.tableParams.reload()},o.deselectAll=function(){o.selectedDrivers=[],angular.forEach(e.tableParams.data,function(e){e&&e.selected&&(e.selected=!1)})},o.selectDriver=function(e,t){if(e.selected&&o.selectedDrivers.length<10)o.selectedDrivers.push(e);else if(e.selected)e.selected=!1,alert("You have selected maximum allowed drivers.");else{var i=_.indexOf(_.pluck(o.selectedDrivers,"id"),t);o.selectedDrivers.splice(i,1)}},e.confirmSendPushMsg=function(){i({text:"Are you sure want send Push Message?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){o.sendPushMsg()})},o.sendPushMsg=function(){o.formObj.message.id=moment().unix(),"user"==o.formObj.type?(o.formObj.drivers=[],o.formObj.drivers=_.pluck(o.selectedDrivers,"id")):o.formObj.drivers=[],o.expireAt.value>24?o.formObj.message.expireAt=moment().add(1,"week").unix():o.formObj.message.expireAt=moment().add(o.expireAt.value,"hour").unix(),a.sendNotification(o.formObj,function(e){s.success("Notification sent."),o.formObj={},o.formObj.message={},o.formObj.drivers=[],o.formObj.notificationType="push",o.formObj.message.lang="hi",o.formObj.type=o.selectedType,o.deselectAll()},function(e){s.success("Error in sending notification."+e)})},e.tableParams=new r({page:1,count:1e3,sorting:{earning:"desc"}},{counts:[],getData:function(i){var a=i.page();console.log("**************************");var s="",r="";i.orderBy().length>0&&(s=i.orderBy()[0].substr(0,1),r=i.orderBy()[0].substr(1),s="+"===s?"ASC":"DESC");var l={city:t.city,vehicle:t.vehicleType,from:moment(d).startOf("day").format("YYYYMMDD").toString(),to:moment(d).endOf("day").format("YYYYMMDD").toString(),orderby:s,field:r,start:a,count:i.count()};return o.searchTerm&&""!=o.searchTerm&&(l.term=o.filterTerm.value+"|"+o.searchTerm),n.getDrivers(l).$promise.then(function(t){return i.total(t.total),t.data.length>0?(e.tblNoData=!1,t.data):(e.tblNoData=!0,[])})}}),l(),o.refreshPage=function(){l()}}e.$inject=["$scope","$rootScope","$confirm","AlertService","toastr","NgTableParams","OfferService"],angular.module("tuktukV2Dahboard").controller("AlertController",e)}(),angular.module("tuktukV2Dahboard").factory("AlertService",AlertService),!function(e,t){"use strict";function i(i,n){var l=this;l.$el=e(i),l.el=i,l.id=s++,l.$window=e(t),l.$document=e(document),l.$el.bind("destroyed",e.proxy(l.teardown,l)),l.$clonedHeader=null,l.$originalHeader=null,l.isSticky=!1,l.hasBeenSticky=!1,l.leftOffset=null,l.topOffset=null,l.init=function(){l.$el.each(function(){var t=e(this);t.css("padding",0),l.$originalHeader=e("thead:first",this),l.$clonedHeader=l.$originalHeader.clone(),t.trigger("clonedHeader."+a,[l.$clonedHeader]),l.$clonedHeader.addClass("tableFloatingHeader"),l.$clonedHeader.css("display","none"),l.$originalHeader.addClass("tableFloatingHeaderOriginal"),l.$originalHeader.after(l.$clonedHeader),l.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(l.$printStyle)}),l.setOptions(n),l.updateWidth(),l.toggleHeaders(),l.bind()},l.destroy=function(){l.$el.unbind("destroyed",l.teardown),l.teardown()},l.teardown=function(){l.isSticky&&l.$originalHeader.css("position","static"),e.removeData(l.el,"plugin_"+a),l.unbind(),l.$clonedHeader.remove(),l.$originalHeader.removeClass("tableFloatingHeaderOriginal"),l.$originalHeader.css("visibility","visible"),l.$printStyle.remove(),l.el=null,l.$el=null},l.bind=function(){l.$scrollableArea.on("scroll."+a,l.toggleHeaders),l.isWindowScrolling||(l.$window.on("scroll."+a+l.id,l.setPositionValues),l.$window.on("resize."+a+l.id,l.toggleHeaders)),l.$scrollableArea.on("resize."+a,l.toggleHeaders),l.$scrollableArea.on("resize."+a,l.updateWidth)},l.unbind=function(){l.$scrollableArea.off("."+a,l.toggleHeaders),l.isWindowScrolling||(l.$window.off("."+a+l.id,l.setPositionValues),l.$window.off("."+a+l.id,l.toggleHeaders)),l.$scrollableArea.off("."+a,l.updateWidth)},l.toggleHeaders=function(){l.$el&&l.$el.each(function(){var t,i=e(this),a=l.isWindowScrolling?isNaN(l.options.fixedOffset)?l.options.fixedOffset.outerHeight():l.options.fixedOffset:l.$scrollableArea.offset().top+(isNaN(l.options.fixedOffset)?0:l.options.fixedOffset),s=i.offset(),r=l.$scrollableArea.scrollTop()+a,n=l.$scrollableArea.scrollLeft(),o=l.isWindowScrolling?r>s.top:a>s.top,d=(l.isWindowScrolling?r:0)<s.top+i.height()-l.$clonedHeader.height()-(l.isWindowScrolling?0:a);o&&d?(t=s.left-n+l.options.leftOffset,l.$originalHeader.css({position:"fixed","margin-top":0,left:t,"z-index":3}),l.leftOffset=t,l.topOffset=a,l.$clonedHeader.css("display",""),l.isSticky||(l.isSticky=!0,l.updateWidth()),l.setPositionValues()):l.isSticky&&(l.$originalHeader.css("position","static"),l.$clonedHeader.css("display","none"),l.isSticky=!1,l.resetWidth(e("td,th",l.$clonedHeader),e("td,th",l.$originalHeader)))})},l.setPositionValues=function(){var e=l.$window.scrollTop(),t=l.$window.scrollLeft();!l.isSticky||0>e||e+l.$window.height()>l.$document.height()||0>t||t+l.$window.width()>l.$document.width()||l.$originalHeader.css({top:l.topOffset-(l.isWindowScrolling?0:e),left:l.leftOffset-(l.isWindowScrolling?0:t)})},l.updateWidth=function(){if(l.isSticky){l.$originalHeaderCells||(l.$originalHeaderCells=e("th,td",l.$originalHeader)),l.$clonedHeaderCells||(l.$clonedHeaderCells=e("th,td",l.$clonedHeader));var t=l.getWidth(l.$clonedHeaderCells);l.setWidth(t,l.$clonedHeaderCells,l.$originalHeaderCells),l.$originalHeader.css("width",l.$clonedHeader.width())}},l.getWidth=function(i){var a=[];return i.each(function(i){var s,r=e(this);if("border-box"===r.css("box-sizing"))s=r.outerWidth();else{var n=e("th",l.$originalHeader);if("collapse"===n.css("border-collapse"))if(t.getComputedStyle)s=parseFloat(t.getComputedStyle(this,null).width);else{var o=parseFloat(r.css("padding-left")),d=parseFloat(r.css("padding-right")),c=parseFloat(r.css("border-width"));s=r.outerWidth()-o-d-c}else s=r.width()}a[i]=s}),a},l.setWidth=function(e,t,i){t.each(function(t){var a=e[t];i.eq(t).css({"min-width":a,"max-width":a})})},l.resetWidth=function(t,i){t.each(function(t){var a=e(this);i.eq(t).css({"min-width":a.css("min-width"),"max-width":a.css("max-width")})})},l.setOptions=function(i){l.options=e.extend({},r,i),l.$scrollableArea=e(l.options.scrollableArea),l.isWindowScrolling=l.$scrollableArea[0]===t},l.updateOptions=function(e){l.setOptions(e),l.unbind(),l.bind(),l.updateWidth(),l.toggleHeaders()},l.init()}var a="stickyTableHeaders",s=0,r={fixedOffset:0,leftOffset:0,scrollableArea:t};e.fn[a]=function(t){return this.each(function(){var s=e.data(this,"plugin_"+a);s?"string"==typeof t?s[t].apply(s):s.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+a,new i(this,t))})}}(jQuery,window),function(){"use strict";function e(e,t,i,a,s,r,n,l,o,d){null!=t.getUser()&&(a.defaults.headers.common.Authorization="Basic "+t.getUser().token),e.debug("runBlock end"),n.city=i.cities[0].value,n.vehicleType=i.vehicleTypes[0].value,n.logout=function(){l.logout({},function(e){d.clearNav(),s.error("You have logged out successfully.")},function(e){s.error(e)}),t.clearUser(),r.go("login"),n.isAuthenticated=!1},n.$on("unauthorized",function(){t.clearUser(),r.go("login"),n.isAuthenticated=!1}),n.$on("$stateChangeStart",function(e,i,a,s,l){console.log("to - "+i.name+" $state.current.name - "+r.current.name),null!=t.getUser()&&"login"==i.name&&(n.isAuthenticated=!0,r.go("home.live",{city:n.city,vehicleType:n.vehicleType}),e.preventDefault())})}e.$inject=["$log","UserService","StaticDataService","$http","toastr","$state","$rootScope","LoginService","$templateCache","setNavByRoleService"],angular.module("tuktukV2Dahboard").run(e)}(),function(){"use strict";function e(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main","abstract":!0}).state("home.performance",{url:"/performance/:city/:vehicleType",templateUrl:"app/performance/performance.html",controller:"PerformanceController",controllerAs:"vm"}).state("home.map",{url:"/maps/:city/:vehicleType",templateUrl:"app/maps/demand-supply.html",controller:"DemandSupplyController",controllerAs:"vm",cache:!1}).state("home.live",{url:"/live/:city/:vehicleType",templateUrl:"app/live/live.html",controller:"LiveController",controllerAs:"vm"}).state("home.drivers",{url:"/drivers/:city/:vehicleType",templateUrl:"app/drivers/drivers.html",controller:"DriversController",controllerAs:"vm"}).state("home.drivers_search",{url:"/drivers/search/:city/:vehicleType/:filterURL/:term",templateUrl:"app/drivers/drivers_search.html",controller:"DriversSearchController",controllerAs:"vm"}).state("home.onboarding",{url:"/drivers/onboarding/:city/:vehicleType",templateUrl:"app/drivers/onboarding.html",controller:"OnboardingController",controllerAs:"vm"}).state("home.payout",{url:"/drivers/payout/:city/:vehicleType",templateUrl:"app/drivers/payout.html",controller:"PayoutController",controllerAs:"vm"}).state("home.offers",{url:"/offers/",templateUrl:"app/offers/offers.html",controller:"OffersController",controllerAs:"vm"}).state("home.drivers_detail",{url:"/detail/:driverId",templateUrl:"app/drivers/detail.html",controller:"DriversDetailController",controllerAs:"vm"}).state("home.trips",{url:"/trips",templateUrl:"app/trips/trips.html",controller:"TripsController",controllerAs:"vm"}).state("home.trip_detail",{url:"/trip/detail/:id",templateUrl:"app/trips/trip_details.html",controller:"TripDetailController",controllerAs:"vm"}).state("home.search",{url:"/trips/search/:city/:vehicleType/:filterURL/:term/",templateUrl:"app/trips/trip_search.html",controller:"TripsSearchController",controllerAs:"vm"}).state("home.riders",{url:"/riders",templateUrl:"app/riders/riders.html",controller:"RidersController",controllerAs:"vm"}).state("home.surge",{url:"/surge",templateUrl:"app/surge/surge.html",controller:"SurgeController",controllerAs:"vm"}).state("home.alert",{url:"/alert",templateUrl:"app/alert/alert.html",controller:"AlertController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("tuktukV2Dahboard").config(e)}(),function(){"use strict";angular.module("tuktukV2Dahboard").constant("malarkey",malarkey).constant("moment",moment).constant("API","https://dev-api-analytics.gotuktuk.in/rest/v1/").constant("AUTH_API","https://dev-api-analytics.gotuktuk.in/rest/o/v1/")}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=1e3,t.positionClass="toast-top-right",t.preventDuplicates=!1,t.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("tuktukV2Dahboard").config(e)}(),!function(e,t){"use strict";if("object"==typeof exports)module.exports=t(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(i){return e.dimple=t(i),e.dimple});else if(e.d3)e.dimple=t(e.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(e){"use strict";var t={version:"2.1.6",plot:{},aggregateMethod:{}};return t.axis=function(i,a,s,r,n,l){this.chart=i,this.position=a,this.categoryFields=null===n||void 0===n?s:[].concat(n),this.measure=r,this.timeField=n,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===l||void 0===l?!0:l,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var e,t,i=[],a=!1;if(this.chart&&this.chart.series){for(e=0;e<this.chart.series.length;e+=1)t=this.chart.series[e],t[this.position]===this&&(t.data&&t.data.length>0?i=i.concat(t.data):a=!0);a&&this.chart.data&&(i=i.concat(this.chart.data))}return i},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var t,i,a,s,r,n,l;return null!==this.tickFormat&&void 0!==this.tickFormat?t=this._hasTimeField()?e.time.format(this.tickFormat):e.format(this.tickFormat):this.showPercent?t=e.format("%"):this.useLog&&null!==this.measure?t=function(t){var i=Math.floor(Math.abs(t),0).toString().length,a=Math.min(Math.floor((i-1)/3),4),s="kmBT".substring(a-1,a),r="0"===Math.round(t/Math.pow(1e3,a)*10).toString().slice(-1)?0:1;return 0===t?0:e.format(",."+r+"f")(t/Math.pow(1e3,a))+s}:null!==this.measure?(i=Math.floor(Math.abs(this._max),0).toString(),a=Math.floor(Math.abs(this._min),0).toString(),s=Math.max(a.length,i.length),s>3?(r=Math.min(Math.floor((s-1)/3),4),n="kmBT".substring(r-1,r),l=1>=s-3*r?1:0,t=function(t){return 0===t?0:e.format(",."+l+"f")(t/Math.pow(1e3,r))+n}):(l=-Math.floor(Math.log(this._tick_step)/Math.LN10),t=e.format(",."+l+"f"))):t=function(e){return e},t},this._getTimePeriod=function(){var t=this.timePeriod,i=30,a=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(t=i>=a/1e3?e.time.seconds:i>=a/6e4?e.time.minutes:i>=a/36e5?e.time.hours:i>=a/864e5?e.time.days:i>=a/6048e5?e.time.weeks:i>=a/26298e5?e.time.months:e.time.years),t},this._getTooltipText=function(t,i){if(this._hasTimeField())i[this.position+"Field"][0]&&t.push(this.timeField+": "+this._getFormat()(i[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(e,a){null!==e&&void 0!==e&&i[this.position+"Field"][a]&&t.push(e+(i[this.position+"Field"][a]!==e?": "+i[this.position+"Field"][a]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":t.push(this.measure+": "+this._getFormat()(i.width));break;case"y":t.push(this.measure+": "+this._getFormat()(i.height));break;case"p":t.push(this.measure+": "+this._getFormat()(i.angle)+" ("+e.format("%")(i.piePct)+")");break;default:t.push(this.measure+": "+this._getFormat()(i[this.position+"Value"]))}},this._getTopMaster=function(){var e=this;return null!==this.master&&void 0!==this.master&&(e=this.master._getTopMaster()),e},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(t){var i;return i=null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(t)?Date.parse(t):new Date(t):e.time.format(this.dateParseFormat).parse(t)},this._update=function(i){var a,s,r,n,l=[],o=this.ticks||10,d=function(e,i,a){var s,r,n=e.categoryFields[0],l=e._getAxisData(),o=n,d=!1,c=!0,u=null;for(s=0;s<l.length;s+=1)if(u=e._parseDate(l[s][n]),null!==u&&void 0!==u&&isNaN(u)){c=!1;break}return c||e.chart.series.forEach(function(t){t[i]===e&&t[a]._hasMeasure()&&(o=t[a].measure,d=!0)},this),r=e._orderRules.concat({ordering:o,desc:d}),t._getOrderedList(l,n,r)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!i){if("y"!==this.position||null!==this._scale&&!i)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=e.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(l=d(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){l=l.concat(d(e,"y","x"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(l.concat([""]))):this._scale=e.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=e.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(o);break;case 1:this._draw=e.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(o)}}else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(l=d(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){l=l.concat(d(e,"x","y"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(l.concat([""]))):this._scale=e.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=e.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(o);break;case 1:this._draw=e.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(o)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(e){e._scale=this._scale},this),null!==i&&void 0!==i&&i!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(o).length>0)||"x"!==this.position&&"y"!==this.position||(a=this._scale.ticks(o),s=a[1]-a[0],r=((this._max-this._min)%s).toFixed(0),this._tick_step=s,0!==r&&(this._max=Math.ceil(this._max/s)*s,this._min=Math.floor(this._min/s)*s,this._update(!0))),n=null!==l&&void 0!==l&&l.length>0?this._scale.copy()(l[0]):this._min>0?this._scale.copy()(this._min):this._max<0?this._scale.copy()(this._max):this._scale.copy()(0),this._origin!==n&&(this._previousOrigin=null===this._origin?n:this._origin,this._origin=n),this},this.addGroupOrderRule=function(e,t){this._groupOrderRules.push({ordering:e,desc:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})}},t.chart=function(i,a){this.svg=i,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=a,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=i.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(e,t){var i=0,a=0,s=-1;for(i=0;i<this.axes.length;i+=1){if(this.axes[i]===e){s=a;break}(null===t||void 0===t||t[0]===this.axes[i].position[0])&&(a+=1)}return s},this._getAllData=function(){var e=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(e=e.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(t){null!==t.data&&void 0!==t.data&&t.data.length>0&&(e=e.concat(t.data))}),e},this._getData=function(i,a,s,r,n,l,o,d,c,u){var p,m,h=[],v=function(e,t){var i=[];return null!==e&&(e._hasTimeField()?i.push(e._parseDate(t[e.timeField])):e._hasCategories()&&e.categoryFields.forEach(function(e){i.push(t[e])},this)),i},g={x:!1,y:!1,z:!1,p:!1,c:!1},f={x:[],y:[]},b={x:[],y:[],z:[],p:[]},y={min:null,max:null},x={x:[],y:[],z:[],p:[]},w=[],D={},_={x:0,y:0,z:0,p:0},T="",k=[],C=[],S=[],F="",A=[],M="",O=[],P="",$=[],L=[],R=i,B=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(T=this.storyboard.categoryFields[0],k=t._getOrderedList(R,T,this.storyboard._orderRules)),l&&l._hasCategories()&&l._hasMeasure()&&(F=l.categoryFields[0],A=t._getOrderedList(R,F,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),o&&o._hasCategories()&&o._hasMeasure()&&(M=o.categoryFields[0],O=t._getOrderedList(R,M,o._orderRules.concat([{ordering:o.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(P=c.categoryFields[0],$=t._getOrderedList(R,P,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),R.length>0&&a&&a.length>0&&(L=[].concat(r),C=[],a.forEach(function(e){void 0!==R[0][e]&&C.push(e)},this),c&&c._hasMeasure()?L.push({ordering:c.measure,desc:!0}):u&&u._hasMeasure()?L.push({ordering:u.measure,desc:!0}):d&&d._hasMeasure()?L.push({ordering:d.measure,desc:!0}):l&&l._hasMeasure()?L.push({ordering:l.measure,desc:!0}):o&&o._hasMeasure()&&L.push({ordering:o.measure,desc:!0}),S=t._getOrderedList(R,C,L)),R.sort(function(e,t){var i,a,s,r,n,l,o=0;if(""!==T&&(o=k.indexOf(e[T])-k.indexOf(t[T])),""!==F&&0===o&&(o=A.indexOf(e[F])-A.indexOf(t[F])),""!==M&&0===o&&(o=O.indexOf(e[M])-O.indexOf(t[M])),""!==P&&0===o&&(o=$.indexOf(e[P])-O.indexOf(t[P])),C&&C.length>0&&0===o)for(i=[].concat(C),o=0,s=0;s<S.length;s+=1){
for(a=[].concat(S[s]),n=!0,l=!0,r=0;r<i.length;r+=1)n=n&&e[i[r]]===a[r],l=l&&t[i[r]]===a[r];if(n&&l){o=0;break}if(n){o=-1;break}if(l){o=1;break}}return o}),R.forEach(function(e){var t,i,r,n,p,m=-1,f=v(l,e),b=v(o,e),y=v(d,e),x=v(c,e),w=[];if(a&&0!==a.length)for(r=0;r<a.length;r+=1)void 0===e[a[r]]?w.push(a[r]):w.push(e[a[r]]);else w=["All"];for(t=w.join("/")+"_"+f.join("/")+"_"+b.join("/")+"_"+x.join("/")+"_"+y.join("/"),i=0;i<h.length;i+=1)if(h[i].key===t){m=i;break}-1===m&&(n={key:t,aggField:w,xField:f,xValue:null,xCount:0,yField:b,yValue:null,yCount:0,pField:x,pValue:null,pCount:0,zField:y,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},h.push(n),m=h.length-1),p=function(t,i){var a,r,n=!0,l={value:0,count:1},o={value:0,count:1},d="";null!==i&&(a=i.getFrameValue(),i.categoryFields.forEach(function(t,i){i>0&&(d+="/"),d+=e[t],n=d===a},this)),null!==t&&void 0!==t&&n&&(r=h[m],t._hasMeasure()&&null!==e[t.measure]&&void 0!==e[t.measure]&&(-1===r[t.position+"ValueList"].indexOf(e[t.measure])&&r[t.position+"ValueList"].push(e[t.measure]),isNaN(parseFloat(e[t.measure]))&&(g[t.position]=!0),l.value=r[t.position+"Value"],l.count=r[t.position+"Count"],o.value=e[t.measure],r[t.position+"Value"]=s(l,o),r[t.position+"Count"]+=1))},p(l,this.storyboard),p(o,this.storyboard),p(d,this.storyboard),p(c,this.storyboard),p(u,this.storyboard)},this),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==f.x&&(B=[],o._hasMeasure()&&B.push({ordering:o.measure,desc:!0}),f.x=t._getOrderedList(R,l.categoryFields[1],l._groupOrderRules.concat(B))),o&&o._hasCategories()&&o.categoryFields.length>1&&void 0!==f.y&&(B=[],l._hasMeasure()&&B.push({ordering:l.measure,desc:!0}),f.y=t._getOrderedList(R,o.categoryFields[1],o._groupOrderRules.concat(B)),f.y.reverse()),h.forEach(function(e){null!==l&&(g.x===!0&&(e.xValue=e.xValueList.length),p=(b.x[e.xField.join("/")]||0)+(o._hasMeasure()?Math.abs(e.yValue):0),b.x[e.xField.join("/")]=p),null!==o&&(g.y===!0&&(e.yValue=e.yValueList.length),p=(b.y[e.yField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.xValue):0),b.y[e.yField.join("/")]=p),null!==c&&(g.p===!0&&(e.pValue=e.pValueList.length),p=(b.p[e.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(e.pValue):0),b.p[e.pField.join("/")]=p),null!==d&&(g.z===!0&&(e.zValue=e.zValueList.length),p=(b.z[e.zField.join("/")]||0)+(d._hasMeasure()?Math.abs(e.zValue):0),b.z[e.zField.join("/")]=p),null!==u&&((null===y.min||e.cValue<y.min)&&(y.min=e.cValue),(null===y.max||e.cValue>y.max)&&(y.max=e.cValue))},this);for(m in b.x)b.x.hasOwnProperty(m)&&(_.x+=b.x[m]);for(m in b.y)b.y.hasOwnProperty(m)&&(_.y+=b.y[m]);for(m in b.p)b.p.hasOwnProperty(m)&&(_.p+=b.p[m]);for(m in b.z)b.z.hasOwnProperty(m)&&(_.z+=b.z[m]);return h.forEach(function(t){var i,a,s,r,p,m=function(e,i,a){var s,r,l,o,d;null!==e&&void 0!==e&&(o=e.position,e._hasCategories()?e._hasMeasure()?(s=t[e.position+"Field"].join("/"),r=e.showPercent?b[e.position][s]/_[e.position]:b[e.position][s],-1===w.indexOf(s)&&(D[s]=r+(w.length>0?D[w[w.length-1]]:0),w.push(s)),l=t[o+"Bound"]=t["c"+o]="x"!==o&&"y"!==o||!n?r:D[s],t[a]=r,t[o]=l-("x"===o&&r>=0||"y"===o&&0>=r?r:0)):(t[o]=t["c"+o]=t[o+"Field"][0],t[a]=1,void 0!==f[o]&&null!==f[o]&&f[o].length>=2&&(t[o+"Offset"]=f[o].indexOf(t[o+"Field"][1]),t[a]=1/f[o].length)):(r=e.showPercent?t[o+"Value"]/b[i][t[i+"Field"].join("/")]:t[o+"Value"],s=t[i+"Field"].join("/")+(t[o+"Value"]>=0),d=x[o][s]=(null===x[o][s]||void 0===x[o][s]||"z"===o||"p"===o?0:x[o][s])+r,l=t[o+"Bound"]=t["c"+o]="x"!==o&&"y"!==o||!n?r:d,t[a]=r,t[o]=l-("x"===o&&r>=0||"y"===o&&0>=r?r:0)))};m(l,"y","width"),m(o,"x","height"),m(d,"z","r"),m(c,"p","angle"),null!==u&&null!==y.min&&null!==y.max&&(y.min===y.max&&(y.min-=.5,y.max+=.5),y.min=u.overrideMin||y.min,y.max=u.overrideMax||y.max,t.cValue=t.cValue>y.max?y.max:t.cValue<y.min?y.min:t.cValue,s=e.scale.linear().range([0,null===u.colors||1===u.colors.length?1:u.colors.length-1]).domain([y.min,y.max]),r=s(t.cValue),p=r-Math.floor(r),t.cValue===y.max&&(p=1),u.colors&&1===u.colors.length?(i=e.rgb(u.colors[0]),a=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)):u.colors&&u.colors.length>1?(i=e.rgb(u.colors[Math.floor(r)]),a=e.rgb(u.colors[Math.ceil(r)])):(i=e.rgb("white"),a=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)),i.r=Math.floor(i.r+(a.r-i.r)*p),i.g=Math.floor(i.g+(a.g-i.g)*p),i.b=Math.floor(i.b+(a.b-i.b)*p),t.fill=i.toString(),t.stroke=i.darker(.5).toString())},this),h},this._getDelay=function(e,i,a){return function(s){var r=0;return a&&i.staggerDraw&&(a.x._hasCategories()?r=t._helpers.cx(s,i,a)/i._widthPixels()*e:a.y._hasCategories()&&(r=(1-t._helpers.cy(s,i,a)/i._heightPixels())*e)),r}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(e){var t,i,a,s,r,n,l=e.data||this.data||[],o=[].concat(e.categoryFields||"All"),d=this._getData(l,o,e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),c=[],u={},p=e.startAngle*(Math.PI/180)||0,m=(e.endAngle||360)*(Math.PI/180);if(p>m&&(p-=2*Math.PI),e.p&&o.length>0){if(e.x&&e.y){for(o.pop(),c=this._getData(l,["__dimple_placeholder__"].concat(o),e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),t=0;t<d.length;t+=1)for(a=["__dimple_placeholder__"].concat(d[t].aggField),a.pop(),e.x&&e.x._hasCategories()&&(a=a.concat(d[t].xField)),e.y&&e.y._hasCategories()&&(a=a.concat(d[t].yField)),s=a.join("|"),i=0;i<c.length;i+=1)if(r=[].concat(c[i].aggField),e.x&&e.x._hasCategories()&&(r=r.concat(c[i].xField)),e.y&&e.y._hasCategories()&&(r=r.concat(c[i].yField)),n=r.join("|"),s===n){d[t].xField=c[i].xField,d[t].xValue=c[i].xValue,d[t].xCount=c[i].xCount,d[t].yField=c[i].yField,d[t].yValue=c[i].yValue,d[t].yCount=c[i].yCount,d[t].zField=c[i].zField,d[t].zValue=c[i].zValue,d[t].zCount=c[i].zCount,d[t].x=c[i].x,d[t].y=c[i].y,d[t].r=c[i].r,d[t].xOffset=c[i].xOffset,d[t].yOffset=c[i].yOffset,d[t].width=c[i].width,d[t].height=c[i].height,d[t].cx=c[i].cx,d[t].cy=c[i].cy,d[t].xBound=c[i].xBound,d[t].yBound=c[i].yBound,d[t].xValueList=c[i].xValueList,d[t].yValueList=c[i].yValueList,d[t].zValueList=c[i].zValueList,d[t].cValueList=c[i].cValueList,d[t].pieKey=c[i].key,d[t].value=d.pValue,u[c[i].key]||(u[c[i].key]={total:0,angle:p}),u[c[i].key].total+=d[t].pValue;break}}else for(t=0;t<d.length;t+=1)d[t].pieKey="All",d[t].value=d.pValue,u[d[t].pieKey]||(u[d[t].pieKey]={total:0,angle:p}),u[d[t].pieKey].total+=d[t].pValue;for(t=0;t<d.length;t+=1)d[t].piePct=d[t].pValue/u[d[t].pieKey].total,d[t].startAngle=u[d[t].pieKey].angle,d[t].endAngle=d[t].startAngle+d[t].piePct*(m-p),u[d[t].pieKey].angle=d[t].endAngle}e._positionData=d},this)},this._handleTransition=function(e,t,i,a){var s=null;return s=0===t?e:e.transition().duration(t).delay(i._getDelay(t,i,a)).ease(i.ease)},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(i){null!==i._eventHandlers&&i._eventHandlers.length>0&&i._eventHandlers.forEach(function(a){var s,r=function(s){var r=new t.eventArgs;null!==i.chart.storyboard&&(r.frameValue=i.chart.storyboard.getFrameValue()),r.seriesValue=s.aggField,r.xValue=s.x,r.yValue=s.y,r.zValue=s.z,r.pValue=s.p,r.colorValue=s.cValue,r.seriesShapes=i.shapes,r.selectedShape=e.select(this),a.handler(r)};if(null!==a.handler&&"function"==typeof a.handler)if(null!==i._markers&&void 0!==i._markers)for(s in i._markers)i._markers.hasOwnProperty(s)&&i._markers[s].on(a.event,r);else i.shapes.on(a.event,r)},this)},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this.addAxis=function(e,i,a,s){var r=null,n=null;if(null!==i&&void 0!==i&&(i=[].concat(i)),"string"==typeof e||e instanceof String)r=new t.axis(this,e,i,a,s),this.axes.push(r);else{if(n=e,r=new t.axis(this,n.position,i,a,s),r._hasMeasure()!==n._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(r._hasTimeField()!==n._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===r.categoryFields||void 0===r.categoryFields?0:r.categoryFields.length)!==(null===n.categoryFields||void 0===n.categoryFields?0:n.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";n._slaves.push(r)}return r},this.addCategoryAxis=function(e,t){return this.addAxis(e,t,null)},this.addColorAxis=function(e,t){var i=this.addAxis("c",null,e);return i.colors=null===t||void 0===t?null:[].concat(t),i},this.addLegend=function(e,i,a,s,r,n){n=null===n||void 0===n?this.series:[].concat(n),r=null===r||void 0===r?"left":r;var l=new t.legend(this,e,i,a,s,r,n);return this.legends.push(l),l},this.addLogAxis=function(e,t,i){var a=this.addAxis(e,null,t,null);return null!==i&&void 0!==i&&(a.logBase=i),a.useLog=!0,a},this.addMeasureAxis=function(e,t){return this.addAxis(e,null,t)},this.addPctAxis=function(e,t,i){var a=null;return a=null!==i&&void 0!==i?this.addAxis(e,i,t):this.addMeasureAxis(e,t),a.showPercent=!0,a},this.addSeries=function(e,i,a){(null===a||void 0===a)&&(a=this.axes),(null===i||void 0===i)&&(i=t.plot.bubble);var s,r=null,n=null,l=null,o=null,d=null;return a.forEach(function(e){null!==e&&i.supportedAxes.indexOf(e.position)>-1&&(null===r&&"x"===e.position[0]?r=e:null===n&&"y"===e.position[0]?n=e:null===l&&"z"===e.position[0]?l=e:null===o&&"c"===e.position[0]?o=e:null===o&&"p"===e.position[0]&&(d=e))},this),e&&(e=[].concat(e)),s=new t.series(this,e,r,n,l,o,d,i,t.aggregateMethod.sum,i.stacked),this.series.push(s),s},this.addTimeAxis=function(e,t,i,a){var s=this.addAxis(e,null,null,t);return s.tickFormat=a,s.dateParseFormat=i,s},this.assignClass=function(e,t){return this._assignedClasses[e]=t,this._assignedClasses[e]},this.assignColor=function(e,i,a,s){return this._assignedColors[e]=new t.color(i,a,s),this._assignedColors[e]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new t.color("#80B1D3"),new t.color("#FB8072"),new t.color("#FDB462"),new t.color("#B3DE69"),new t.color("#FFED6F"),new t.color("#BC80BD"),new t.color("#8DD3C7"),new t.color("#CCEBC5"),new t.color("#FFFFB3"),new t.color("#BEBADA"),new t.color("#FCCDE5"),new t.color("#D9D9D9")],this.draw=function(t,i){t=t||0;var a,s,r=null,n=null,l=!1,o=!1,d=this._xPixels(),c=this._yPixels(),u=this._widthPixels(),p=this._heightPixels();return(void 0===i||null===i||i===!1)&&this._getSeriesData(),this.axes.forEach(function(e){e._scale=null},this),this.axes.forEach(function(e){if(e._min=0,e._max=0,s=[],e._hasMeasure()){var t=!1;this.series.forEach(function(i){if(i._deepMatch(e)){var a=i._axisBounds(e.position);e._min>a.min&&(e._min=a.min),e._max<a.max&&(e._max=a.max),t=!0}},this),t||this._getAllData().forEach(function(t){e._min>t[e.measure]&&(e._min=t[e.measure]),e._max<t[e.measure]&&(e._max=t[e.measure])},this)}else e._hasTimeField()?(e._min=null,e._max=null,this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].timeField&&void 0!==t[e.position].timeField&&-1===s.indexOf(t[e.position].timeField)&&s.push(t[e.position].timeField)},this),e._getAxisData().forEach(function(t){s.forEach(function(i){var a=e._parseDate(t[i]);(null===e._min||a<e._min)&&(e._min=a),(null===e._max||a>e._max)&&(e._max=a)},this)},this)):e._hasCategories()&&(e._min=0,a=[],this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].categoryFields[0]&&void 0!==t[e.position].categoryFields[0]&&-1===s.indexOf(t[e.position].categoryFields[0])&&s.push(t[e.position].categoryFields[0])},this),e._getAxisData().forEach(function(e){s.forEach(function(t){-1===a.indexOf(e[t])&&a.push(e[t])},this)},this),e._max=a.length);null!==e._slaves&&void 0!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(t){t._min=e._min,t._max=e._max},this),e._update(),null===r&&"x"===e.position?r=e:null===n&&"y"===e.position&&(n=e)},this),this.axes.forEach(function(i){var a=!1,s=null,m=0,h=null,v=!1,g=0,f={l:null,t:null,r:null,b:null},b=0,y=0,x="",w=this,D=function(e){var i;return i=null===s||0===t||a?e:w._handleTransition(e,t,w)},_=function(){var t=e.select(this).selectAll("text");return!i.measure&&i._max>0&&("x"===i.position?t.attr("x",u/i._max/2):"y"===i.position&&t.attr("y",-1*(p/i._max)/2)),i.categoryFields&&i.categoryFields.length>0&&(i!==r||null!==n.categoryFields&&0!==n.categoryFields.length||t.attr("y",c+p-n._scale(0)+9),i!==n||null!==r.categoryFields&&0!==r.categoryFields.length||t.attr("x",-1*(r._scale(0)-d)-9)),this},T=function(t){return function(){var i=e.select(this).attr("class")||"";return-1===i.indexOf(t)&&(i+=" "+t),i.trim()}};null===i.gridlineShapes?(i.showGridlines||null===i.showGridlines&&!i._hasCategories()&&(!l&&"x"===i.position||!o&&"y"===i.position))&&(i.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),"x"===i.position?l=!0:o=!0):"x"===i.position?l=!0:o=!0,null===i.shapes&&(i.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+i.position).each(function(){w.noFormats||e.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),a=!0),i===r&&null!==n?(s="translate(0, "+(null===n.categoryFields||0===n.categoryFields.length?n._scale(0):c+p)+")",h="translate(0, "+(i===r?c+p:c)+")",m=-p):i===n&&null!==r?(s="translate("+(null===r.categoryFields||0===r.categoryFields.length?r._scale(0):d)+", 0)",h="translate("+(i===n?d:d+u)+", 0)",m=-u):"x"===i.position?(h=s="translate(0, "+(i===r?c+p:c)+")",m=-p):"y"===i.position&&(h=s="translate("+(i===n?d:d+u)+", 0)",m=-u),null!==s&&null!==i._draw&&(i._hasTimeField()?D(i.shapes).call(i._draw.ticks(i._getTimePeriod(),i.timeInterval).tickFormat(i._getFormat())).attr("transform",s).each(_):i.useLog?D(i.shapes).call(i._draw.ticks(4,i._getFormat())).attr("transform",s).each(_):D(i.shapes).call(i._draw.tickFormat(i._getFormat())).attr("transform",s).each(_),null!==i.gridlineShapes&&D(i.gridlineShapes).call(i._draw.tickSize(m,0,0).tickFormat("")).attr("transform",h)),D(i.shapes.selectAll("text")).attr("class",T(w.customClassList.axisLabel)).call(function(){w.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),D(i.shapes.selectAll("path, line")).attr("class",T(w.customClassList.axisLine)).call(function(){w.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==i.gridlineShapes&&D(i.gridlineShapes.selectAll("line")).attr("class",T(w.customClassList.gridline)).call(function(){w.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===i.measure||void 0===i.measure)&&(i.autoRotateLabel?i===r?(g=0,i.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();g=e>g?e:g}),g>u/i.shapes.selectAll("text")[0].length?(v=!0,i.shapes.selectAll("text").style("text-anchor","start").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+t.x+","+(t.y+t.height/2)+") translate(-5, 0)")})):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===i.position&&(g=0,i.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();g=e>g?e:g}),g>u/i.shapes.selectAll("text")[0].length?(v=!0,i.shapes.selectAll("text").style("text-anchor","end").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+(t.x+t.width)+","+(t.y+t.height/2)+") translate(5, 0)")})):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==i.titleShape&&void 0!==i.titleShape&&i.titleShape.remove(),i.shapes.selectAll("text").each(function(){var e=this.getBBox();(null===f.l||-9-e.width<f.l)&&(f.l=-9-e.width),(null===f.r||e.x+e.width>f.r)&&(f.r=e.x+e.width),v?((null===f.t||e.y+e.height-e.width<f.t)&&(f.t=e.y+e.height-e.width),(null===f.b||e.height+e.width>f.b)&&(f.b=e.height+e.width)):((null===f.t||e.y<f.t)&&(f.t=e.y),(null===f.b||9+e.height>f.b)&&(f.b=9+e.height))}),"x"===i.position?(y=i===r?c+p+f.b+5:c+f.t-10,b=d+u/2):"y"===i.position&&(b=i===n?d+f.l-10:d+u+f.r+20,y=c+p/2,x="rotate(270, "+b+", "+y+")"),i.hidden||"x"!==i.position&&"y"!==i.position||null===i.title||(i.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+w.customClassList.axisTitle+" dimple-axis-"+i.position),i.titleShape.attr("x",b).attr("y",y).attr("text-anchor","middle").attr("transform",x).text(void 0!==i.title?i.title:null===i.categoryFields||void 0===i.categoryFields||0===i.categoryFields.length?i.measure:i.categoryFields.join("/")).each(function(){w.noFormats||e.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),i===r?i.titleShape.each(function(){e.select(this).attr("y",y+this.getBBox().height/1.65)}):i===n&&i.titleShape.each(function(){e.select(this).attr("x",b+this.getBBox().height/1.65)}))},this),this.series.forEach(function(e){e.plot.draw(this,e,t),this._registerEventHandlers(e)},this),this.legends.forEach(function(e){e._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(e){return this._assignedClasses[e]||(this._assignedClasses[e]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[e]},this.getColor=function(e){return(null===this._assignedColors[e]||void 0===this._assignedColors[e])&&(this._assignedColors[e]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[e]},this.setBounds=function(e,i,a,s){return this.x=e,this.y=i,this.width=a,this.height=s,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(e,i,a,s){return this.x=e,this.y=i,this.width=0,this.height=0,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parentWidth(this.svg.node())-this._xPixels()-t._parseXPosition(a,this.svg.node())},this._heightPixels=function(){return t._parentHeight(this.svg.node())-this._yPixels()-t._parseYPosition(s,this.svg.node())},this.draw(0,!0),this},this.setStoryboard=function(e,i){return this.storyboard=new t.storyboard(this,e),null!==i&&void 0!==i&&(this.storyboard.onTick=i),this.storyboard}},t.color=function(t,i,a){this.fill=t,this.stroke=null===i||void 0===i?e.rgb(t).darker(.5).toString():i,this.opacity=null===a||void 0===a?.8:a},t.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},t.legend=function(i,a,s,r,n,l,o){this.chart=i,this.series=o,this.x=a,this.y=s,this.width=r,this.height=n,this.horizontalAlign=l,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var i,a=this._getEntries(),s=0,r=0,n=0,l=0,o=15,d=9,c=5,u=this;this.shapes&&this.shapes.remove(),i=this.chart._group.selectAll(".dimple-dont-select-any").data(a).enter().append("g").attr("class",function(e){return"dimple-legend "+t._createClass(e.aggField)}).attr("opacity",1),i.append("text").attr("class",function(e){return"dimple-legend dimple-legend-text "+t._createClass(e.aggField)+" "+u.chart.customClassList.legendLabel}).text(function(e){return e.key}).call(function(){u.chart.noFormats||this.style("font-family",u.fontFamily).style("font-size",u._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var e=this.getBBox();e.width>s&&(s=e.width),e.height>r&&(r=e.height)}),i.append("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)}).attr("height",d).attr("width",o),r=(d>r?d:r)+u._getVerticalPadding(),s+=o+u._getHorizontalPadding(),i.each(function(i){n+s>u._widthPixels()&&(n=0,l+=r),l>u._heightPixels()?e.select(this).remove():(e.select(this).select("text").attr("x","left"===u.horizontalAlign?u._xPixels()+o+c+n:u._xPixels()+(u._widthPixels()-n-s)+o+c).attr("y",function(){return u._yPixels()+l+this.getBBox().height/1.65}).attr("width",u._widthPixels()).attr("height",u._heightPixels()),e.select(this).select("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)+" "+u.chart.customClassList.legendKey+" "+e.css}).attr("x","left"===u.horizontalAlign?u._xPixels()+n:u._xPixels()+(u._widthPixels()-n-s)).attr("y",u._yPixels()+l).attr("height",d).attr("width",o).call(function(){u.chart.noFormats||this.style("fill",i.fill).style("stroke",i.stroke).style("opacity",i.opacity).style("shape-rendering","crispEdges")}),n+=s)}),this.shapes=i},this._getEntries=function(){var e=[];return this.series&&this.series.forEach(function(t){var i=t._positionData;i.forEach(function(i){var a,s=-1,r=t.plot.grouped&&!t.x._hasCategories()&&!t.y._hasCategories()&&i.aggField.length<2?"All":i.aggField.slice(-1)[0];for(a=0;a<e.length;a+=1)if(e[a].key===r){s=a;break}-1===s&&t.chart._assignedColors[r]&&(e.push({key:r,fill:t.chart._assignedColors[r].fill,stroke:t.chart._assignedColors[r].stroke,opacity:t.chart._assignedColors[r].opacity,css:t.chart._assignedClasses[r],series:t,aggField:i.aggField}),s=e.length-1)})},this),e},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){var e;return e=isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){var e;return e=isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return t._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.chart.svg.node())}},t.series=function(e,t,i,a,s,r,n,l,o,d){this.chart=e,this.x=i,this.y=a,this.z=s,this.c=r,this.p=n,this.plot=l,this.categoryFields=t,this.aggregate=o,this.stacked=d,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(e){var t,i,a,s={min:0,max:0},r=null,n=null,l=[],o=0,d=this._positionData;return"x"===e?(r=this.x,n=this.y):"y"===e?(r=this.y,n=this.x):"z"===e?r=this.z:"p"===e?r=this.p:"c"===e&&(r=this.c),r.showPercent?d.forEach(function(e){e[r.position+"Bound"]<s.min&&(s.min=e[r.position+"Bound"]),e[r.position+"Bound"]>s.max&&(s.max=e[r.position+"Bound"])},this):null===n||null===n.categoryFields||0===n.categoryFields.length?d.forEach(function(e){!this._isStacked()||"x"!==r.position&&"y"!==r.position?(e[r.position+"Value"]<s.min&&(s.min=e[r.position+"Value"]),e[r.position+"Value"]>s.max&&(s.max=e[r.position+"Value"])):e[r.position+"Value"]<0?s.min=s.min+e[r.position+"Value"]:s.max=s.max+e[r.position+"Value"]},this):(t=r.position+"Value",i=n.position+"Field",a=[],d.forEach(function(e){var s=e[i].join("/"),r=a.indexOf(s);-1===r&&(a.push(s),r=a.length-1),void 0===l[r]&&(l[r]={min:0,max:0},r>=o&&(o=r+1)),this.stacked?e[t]<0?l[r].min=l[r].min+e[t]:l[r].max=l[r].max+e[t]:(e[t]<l[r].min&&(l[r].min=e[t]),e[t]>l[r].max&&(l[r].max=e[t]))},this),l.forEach(function(e){void 0!==e&&(e.min<s.min&&(s.min=e.min),e.max>s.max&&(s.max=e.max))},this)),s},this._deepMatch=function(e){var t=!1;return this[e.position]===e?t=!0:void 0!==e._slaves&&null!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(e){t=t||this._deepMatch(e)},this),t},this._dropLineOrigin=function(){var e=0,t=0,i={x:null,y:null},a={x:null,y:null};return this.chart.axes.forEach(function(e){"x"===e.position&&null===a.x?e._hasTimeField()?a.x=this.chart._xPixels():a.x=e._origin:"y"===e.position&&null===a.y&&(e._hasTimeField()?a.y=this.chart._yPixels()+this.chart._heightPixels():a.y=e._origin)},this),this.chart.axes.forEach(function(s){"x"!==s.position||this.x.hidden?"y"!==s.position||this.y.hidden||(this._deepMatch(s)&&(0===t?i.x=a.x:1===t&&(i.x=this.chart._xPixels()+this.chart._widthPixels())),t+=1):(this._deepMatch(s)&&(0===e?i.y=a.y:1===e&&(i.y=this.chart._yPixels())),e+=1)},this),i},this._getTooltipFontSize=function(){var e;return e=this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(e,t){this._eventHandlers.push({event:e,handler:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getTooltipText=function(e){var t=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(i,a){null!==i&&void 0!==i&&null!==e.aggField[a]&&void 0!==e.aggField[a]&&t.push(i+(e.aggField[a]!==i?": "+e.aggField[a]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(t,e),this.y&&this.y._hasCategories()&&this.y._getTooltipText(t,e),this.z&&this.z._hasCategories()&&this.z._getTooltipText(t,e),this.p._getTooltipText(t,e)):(this.x&&this.x._getTooltipText(t,e),this.y&&this.y._getTooltipText(t,e),this.z&&this.z._getTooltipText(t,e)),this.c&&this.c._getTooltipText(t,e),t.filter(function(e,i){return t.indexOf(e)===i})}},t.storyboard=function(e,t){null!==t&&void 0!==t&&(t=[].concat(t)),this.chart=e,this.categoryFields=t,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var e=this.chart,t=this,i=0;this.chart.axes.forEach(function(e){"x"===e.position&&(i+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(i>1?1.25:-1)).call(function(){e.noFormats||this.style("font-family",t.fontFamily).style("font-size",t._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(e){var t=-1,i="";null!==this.categoryFields&&(this.categoryFields.forEach(function(t,a){a>0&&(i+="/"),i+=e[t]},this),t=this._categories.indexOf(i),-1===t&&(this._categories.push(i),t=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(e){this._frame=e%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getFrameValue=function(){var e=null;return this._frame>=0&&this._getCategories().length>this._frame&&(e=this._getCategories()[this._frame]),e},this.goToFrame=function(e){if(this._getCategories().length>0){var t=this._getCategories().indexOf(e);this._goToFrameIndex(t)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(e){return function(){e._goToFrameIndex(e._frame+1),null!==e.onTick&&e.onTick(e.getFrameValue()),e._drawText(e.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},t.aggregateMethod.avg=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),(e.value*e.count+t.value*t.count)/(e.count+t.count)},t.aggregateMethod.count=function(e,t){return e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count+t.count},t.aggregateMethod.max=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value>t.value?e.value:t.value},t.aggregateMethod.min=function(e,t){return null===e.value?parseFloat(t.value):parseFloat(e.value)<parseFloat(t.value)?parseFloat(e.value):parseFloat(t.value)},t.aggregateMethod.sum=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value+t.value},t.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,a,s){var r,n,l,o,d,c,u,p,m,h,v,g,f,b,y,x,w,D,_,T,k,C,S=a._positionData,F=[],A=null,M="dimple-series-"+i.series.indexOf(a),O=a.x._hasCategories()||a.y._hasCategories()?0:1,P=!1,$={},L=[],R=[],B=function(){return function(i,a,s,r){e.select(a).style("opacity",1),t._showPointTooltip(i,a,s,r)}},q=function(i){return function(a,s,r,n){e.select(s).style("opacity",n.lineMarkers||i.data.length<2?t._helpers.opacity(a,r,n):0),t._removeTooltip(a,s,r,n)}},E=function(e,r){t._drawMarkers(e,i,a,s,M,P,B(e),q(e),r)},I=function(e,s){var r;return"step"===a.interpolation&&a[e]._hasCategories()?(r=t._helpers[e](s,i,a)+("y"===e?t._helpers.height(s,i,a):0),a[e].categoryFields.length<2&&(r+=("y"===e?1:-1)*t._helpers[e+"Gap"](i,a))):r=t._helpers["c"+e](s,i,a),parseFloat(r)},Y=function(t,i){return e.svg.line().x(function(e){return a.x._hasCategories()||!i?e.x:a.x[i]}).y(function(e){
return a.y._hasCategories()||!i?e.y:a.y[i]}).interpolate(t)},V=function(e,t){return parseFloat(e)-parseFloat(t)},H=function(e,t){return parseFloat(e.x)-parseFloat(t.x)},N=function(e,t,i){var a,s,r=t[t.length-1],n=9999,l=r;for(a=0;a<e.length;a+=1)(e[a].x!==r.x||e[a].y!==r.y)&&(s=180-Math.atan2(e[a].x-r.x,e[a].y-r.y)*(180/Math.PI),s>i&&n>s&&(l=e[a],n=s));return t.push(l),n};for(r="step"===a.interpolation?"step-after":a.interpolation,h=t._getSeriesOrder(a.data||i.data,a),a.c&&(a.x._hasCategories()&&a.y._hasMeasure()||a.y._hasCategories()&&a.x._hasMeasure())&&(P=!0),a.x._hasCategories()?(k="x",C="y"):a.y._hasCategories()&&(k="y",C="x"),n=0;n<S.length;n+=1){for(d=[],u=-1,o=O;o<S[n].aggField.length;o+=1)d.push(S[n].aggField[o]);for(c=t._createClass(d),o=0;o<F.length;o+=1)if(F[o].keyString===c){u=o;break}-1===u&&(u=F.length,F.push({key:d,keyString:c,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:k&&S[n][k+"Field"]&&S[n][k+"Field"].length>=2?S[n][k+"Field"][0]:"All"})),F[u].data.push(S[n])}for(h&&F.sort(function(e,i){return t._arrayIndexCompare(h,e.key,i.key)}),n=0;n<F.length;n+=1){for(F[n].data.sort(t._getSeriesSortPredicate(i,a,h)),l=0;l<F[n].data.length;l+=1)F[n].points.push({x:I("x",F[n].data[l]),y:I("y",F[n].data[l])}),k&&($[F[n].group]||($[F[n].group]={}),$[F[n].group][F[n].points[F[n].points.length-1][k]]=a[C]._origin);v=F[n].points,"step"===a.interpolation&&v.length>1&&k&&(a.x._hasCategories()?(v.push({x:2*v[v.length-1].x-v[v.length-2].x,y:v[v.length-1].y}),$[F[n].group][v[v.length-1][k]]=a[C]._origin):a.y._hasCategories()&&(v=[{x:v[0].x,y:2*v[0].y-v[1].y}].concat(v),$[F[n].group][v[0][k]]=a[C]._origin,F[n].points=v))}for(b in $)if($.hasOwnProperty(b)){L[b]=[];for(y in $[b])$[b].hasOwnProperty(y)&&L[b].push(parseFloat(y));L[b].sort(V)}for(n=0;n<F.length;n+=1){if(v=F[n].points,x=F[n].group,g=[],R=[],P&&t._addGradient(F[n].key,"fill-area-gradient-"+F[n].keyString,a.x._hasCategories()?a.x:a.y,S,i,s,"fill"),L[x]&&L[x].length>0)for(l=0,o=0;l<L[x].length;l+=1)L[x][l]>=v[0][k]&&L[x][l]<=v[v.length-1][k]&&(f={},f[k]=L[x][l],f[C]=$[x][L[x][l]],g.push(f),v[o][k]>L[x][l]?R.push(f):(R.push(v[o]),$[F[n].group][L[x][l]]=v[o][C],o+=1));else if(a._orderRules&&a._orderRules.length>0)R=v.concat(v[0]);else{v=v.sort(H),R.push(v[0]),T=0;do T=N(v,R,T);while(R.length<=v.length&&(R[0].x!==R[R.length-1].x||R[0].y!==R[R.length-1].y))}g=g.reverse(),w=Y(r,"_previousOrigin")(R),D=Y("step-after"===r?"step-before":"step-before"===r?"step-after":r,"_previousOrigin")(g),_=Y("linear","_previousOrigin")(R),F[n].entry=w+(D&&D.length>0?"L"+D.substring(1):"")+(_&&_.length>0?"L"+_.substring(1,_.indexOf("L")):0),w=Y(r)(R),D=Y("step-after"===r?"step-before":"step-before"===r?"step-after":r)(g),_=Y("linear")(R),F[n].update=w+(D&&D.length>0?"L"+D.substring(1):"")+(_&&_.length>0?"L"+_.substring(1,_.indexOf("L")):0),w=Y(r,"_origin")(R),D=Y("step-after"===r?"step-before":"step-before"===r?"step-after":r,"_origin")(g),_=Y("linear","_origin")(R),F[n].exit=w+(D&&D.length>0?"L"+D.substring(1):"")+(_&&_.length>0?"L"+_.substring(1,_.indexOf("L")):0),F[n].color=i.getColor(F[n].key.length>0?F[n].key[F[n].key.length-1]:"All"),F[n].css=i.getClass(F[n].key.length>0?F[n].key[F[n].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),A=null===a.shapes||void 0===a.shapes?i._group.selectAll("."+M).data(F):a.shapes.data(F,function(e){return e.key}),A.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return M+" dimple-line "+e.keyString+" "+i.customClassList.areaSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){i.noFormats||this.attr("opacity",function(e){return P?1:e.color.opacity}).style("fill",function(e){return P?"url(#"+t._createClass(["fill-area-gradient-"+e.keyString])+")":e.color.fill}).style("stroke",function(e){return P?"url(#"+t._createClass(["stroke-area-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",a.lineWeight)}).each(function(e){e.markerData=e.data,E(e,this)}),p=i._handleTransition(A,s,i).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,E(e,this)}),m=i._handleTransition(A.exit(),s,i).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],E(e,this)}),t._postDrawHandling(a,p,m,s),a.shapes=A}},t.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(e,i,a){var s,r,n=i._positionData,l=null,o=["dimple-series-"+e.series.indexOf(i),"dimple-bar"],d=!i._isStacked()&&i.x._hasMeasure(),c=!i._isStacked()&&i.y._hasMeasure(),u="none";i.x._hasCategories()&&i.y._hasCategories()?u="both":i.x._hasCategories()?u="x":i.y._hasCategories()&&(u="y"),null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),l=null===i.shapes||void 0===i.shapes?e._group.selectAll("."+o.join(".")).data(n):i.shapes.data(n,function(e){return e.key}),l.enter().append("rect").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(i){var a=[];return a=a.concat(i.aggField),a=a.concat(i.xField),a=a.concat(i.yField),o.join(" ")+" "+t._createClass(a)+" "+e.customClassList.barSeries+" "+t._helpers.css(i,e)}).attr("x",function(a){var s=i.x._previousOrigin;return"x"===u?s=t._helpers.x(a,e,i):"both"===u&&(s=t._helpers.cx(a,e,i)),s}).attr("y",function(a){var s=i.y._previousOrigin;return"y"===u?s=t._helpers.y(a,e,i):"both"===u&&(s=t._helpers.cy(a,e,i)),s}).attr("width",function(a){return"x"===u?t._helpers.width(a,e,i):0}).attr("height",function(a){return"y"===u?t._helpers.height(a,e,i):0}).on("mouseover",function(a){t._showBarTooltip(a,this,e,i)}).on("mouseleave",function(a){t._removeTooltip(a,this,e,i)}).call(function(){e.noFormats||this.attr("opacity",function(a){return t._helpers.opacity(a,e,i)}).style("fill",function(a){return t._helpers.fill(a,e,i)}).style("stroke",function(a){return t._helpers.stroke(a,e,i)})}),s=e._handleTransition(l,a,e,i).attr("x",function(a){return d?t._helpers.cx(a,e,i)-i.x.floatingBarWidth/2:t._helpers.x(a,e,i)}).attr("y",function(a){return c?t._helpers.cy(a,e,i)-i.y.floatingBarWidth/2:t._helpers.y(a,e,i)}).attr("width",function(a){return d?i.x.floatingBarWidth:t._helpers.width(a,e,i)}).attr("height",function(a){return c?i.y.floatingBarWidth:t._helpers.height(a,e,i)}).call(function(){e.noFormats||this.attr("fill",function(a){return t._helpers.fill(a,e,i)}).attr("stroke",function(a){return t._helpers.stroke(a,e,i)})}),r=e._handleTransition(l.exit(),a,e,i).attr("x",function(a){var s=i.x._origin;return"x"===u?s=t._helpers.x(a,e,i):"both"===u&&(s=t._helpers.cx(a,e,i)),s}).attr("y",function(a){var s=i.y._origin;return"y"===u?s=t._helpers.y(a,e,i):"both"===u&&(s=t._helpers.cy(a,e,i)),s}).attr("width",function(a){return"x"===u?t._helpers.width(a,e,i):0}).attr("height",function(a){return"y"===u?t._helpers.height(a,e,i):0}),t._postDrawHandling(i,s,r,a),i.shapes=l}},t.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(e,i,a){var s,r,n=i._positionData,l=null,o=["dimple-series-"+e.series.indexOf(i),"dimple-bubble"];null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),l=null===i.shapes||void 0===i.shapes?e._group.selectAll("."+o.join(".")).data(n):i.shapes.data(n,function(e){return e.key}),l.enter().append("circle").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(i){var a=[];return a=a.concat(i.aggField),a=a.concat(i.xField),a=a.concat(i.yField),a=a.concat(i.zField),o.join(" ")+" "+t._createClass(a)+" "+e.customClassList.bubbleSeries+" "+t._helpers.css(i,e)}).attr("cx",function(a){return i.x._hasCategories()?t._helpers.cx(a,e,i):i.x._previousOrigin}).attr("cy",function(a){return i.y._hasCategories()?t._helpers.cy(a,e,i):i.y._previousOrigin}).attr("r",0).on("mouseover",function(a){t._showPointTooltip(a,this,e,i)}).on("mouseleave",function(a){t._removeTooltip(a,this,e,i)}).call(function(){e.noFormats||this.attr("opacity",function(a){return t._helpers.opacity(a,e,i)}).style("fill",function(a){return t._helpers.fill(a,e,i)}).style("stroke",function(a){return t._helpers.stroke(a,e,i)})}),s=e._handleTransition(l,a,e,i).attr("cx",function(a){return t._helpers.cx(a,e,i)}).attr("cy",function(a){return t._helpers.cy(a,e,i)}).attr("r",function(a){return t._helpers.r(a,e,i)}).call(function(){e.noFormats||this.attr("fill",function(a){return t._helpers.fill(a,e,i)}).attr("stroke",function(a){return t._helpers.stroke(a,e,i)})}),r=e._handleTransition(l.exit(),a,e,i).attr("r",0).attr("cx",function(a){return i.x._hasCategories()?t._helpers.cx(a,e,i):i.x._origin}).attr("cy",function(a){return i.y._hasCategories()?t._helpers.cy(a,e,i):i.y._origin}),t._postDrawHandling(i,s,r,a),i.shapes=l}},t.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,a,s){var r,n,l,o,d,c,u,p,m,h,v=a._positionData,g=[],f=null,b="dimple-series-"+i.series.indexOf(a),y=a.x._hasCategories()||a.y._hasCategories()?0:1,x=!1,w=function(){return function(i,a,s,r){e.select(a).style("opacity",1),t._showPointTooltip(i,a,s,r)}},D=function(i){return function(a,s,r,n){e.select(s).style("opacity",n.lineMarkers||i.data.length<2?t._helpers.opacity(a,r,n):0),t._removeTooltip(a,s,r,n)}},_=function(e,r){t._drawMarkers(e,i,a,s,b,x,w(e),D(e),r)},T=function(e,s){var r;return"step"===a.interpolation&&a[e]._hasCategories()?(a.barGap=0,a.clusterBarGap=0,r=t._helpers[e](s,i,a)+("y"===e?t._helpers.height(s,i,a):0)):r=t._helpers["c"+e](s,i,a),parseFloat(r.toFixed(1))},k=function(t,i){return e.svg.line().x(function(e){return a.x._hasCategories()||!i?e.x:a.x[i]}).y(function(e){return a.y._hasCategories()||!i?e.y:a.y[i]}).interpolate(t)};for(r="step"===a.interpolation?"step-after":a.interpolation,h=t._getSeriesOrder(a.data||i.data,a),a.c&&(a.x._hasCategories()&&a.y._hasMeasure()||a.y._hasCategories()&&a.x._hasMeasure())&&(x=!0),n=0;n<v.length;n+=1){for(d=[],u=-1,o=y;o<v[n].aggField.length;o+=1)d.push(v[n].aggField[o]);for(c=t._createClass(d),o=0;o<g.length;o+=1)if(g[o].keyString===c){u=o;break}-1===u&&(u=g.length,g.push({key:d,keyString:c,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),g[u].data.push(v[n])}for(h&&g.sort(function(e,i){return t._arrayIndexCompare(h,e.key,i.key)}),n=0;n<g.length;n+=1){for(g[n].data.sort(t._getSeriesSortPredicate(i,a,h)),x&&t._addGradient(g[n].key,"fill-line-gradient-"+g[n].keyString,a.x._hasCategories()?a.x:a.y,v,i,s,"fill"),l=0;l<g[n].data.length;l+=1)g[n].points.push({x:T("x",g[n].data[l]),y:T("y",g[n].data[l])});"step"===a.interpolation&&g[n].points.length>1&&(a.x._hasCategories()?g[n].points.push({x:2*g[n].points[g[n].points.length-1].x-g[n].points[g[n].points.length-2].x,y:g[n].points[g[n].points.length-1].y}):a.y._hasCategories()&&(g[n].points=[{x:g[n].points[0].x,y:2*g[n].points[0].y-g[n].points[1].y}].concat(g[n].points))),g[n].entry=k(r,"_previousOrigin")(g[n].points),g[n].update=k(r)(g[n].points),g[n].exit=k(r,"_origin")(g[n].points),g[n].color=i.getColor(g[n].key.length>0?g[n].key[g[n].key.length-1]:"All"),g[n].css=i.getClass(g[n].key.length>0?g[n].key[g[n].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),f=null===a.shapes||void 0===a.shapes?i._group.selectAll("."+b).data(g):a.shapes.data(g,function(e){return e.key}),f.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return b+" dimple-line "+e.keyString+" "+i.customClassList.lineSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){i.noFormats||this.attr("opacity",function(e){return x?1:e.color.opacity}).style("fill","none").style("stroke",function(e){return x?"url(#"+t._createClass(["fill-line-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",a.lineWeight)}).each(function(e){e.markerData=e.data,_(e,this)}),p=i._handleTransition(f,s,i).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,_(e,this)}),m=i._handleTransition(f.exit(),s,i).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],_(e,this)}),t._postDrawHandling(a,p,m,s),a.shapes=f}},t.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(i,a,s){var r,n,l=a._positionData,o=null,d=["dimple-series-"+i.series.indexOf(a),"dimple-pie"],c=function(e){var s;return s=a.x&&a.y?t._helpers.r(e,i,a):i._widthPixels()<i._heightPixels()?i._widthPixels()/2:i._heightPixels()/2},u=function(e){var i=c(e);return a.outerRadius&&(i=t._parsePosition(a.outerRadius,i)),Math.max(i,0)},p=function(e){var i=0;return a.innerRadius&&(i=t._parsePosition(a.innerRadius,c(e))),Math.max(i,0)},m=function(t){var i;return(i=e.svg.arc().innerRadius(p(t)).outerRadius(u(t)))(t)},h=function(t){t.innerRadius=p(t),t.outerRadius=u(t);var i,a=e.interpolate(this._current,t);return i=e.svg.arc().innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}),this._current=a(0),function(e){return i(a(e))}},v=function(e){return function(s){var r,n;return a.x&&a.y?(r=!e||a.x._hasCategories()?t._helpers.cx(s,i,a):a.x._previousOrigin,n=!e||a.y._hasCategories()?t._helpers.cy(s,i,a):a.y._previousOrigin):(r=i._xPixels()+i._widthPixels()/2,n=i._yPixels()+i._heightPixels()/2),"translate("+r+","+n+")"}};null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),o=null===a.shapes||void 0===a.shapes?i._group.selectAll("."+d.join(".")).data(l):a.shapes.data(l,function(e){return e.key}),o.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){var a=[];return a=a.concat(e.aggField),a=a.concat(e.pField),d.join(" ")+" "+t._createClass(a)+" "+i.customClassList.pieSeries+" "+t._helpers.css(e,i)}).attr("d",m).on("mouseover",function(e){t._showBarTooltip(e,this,i,a)}).on("mouseleave",function(e){t._removeTooltip(e,this,i,a)}).call(function(){i.noFormats||this.attr("opacity",function(e){return t._helpers.opacity(e,i,a)}).style("fill",function(e){return t._helpers.fill(e,i,a)}).style("stroke",function(e){return t._helpers.stroke(e,i,a)})}).attr("transform",v(!0)).each(function(e){this._current=e,e.innerRadius=p(e),e.outerRadius=u(e)}),r=i._handleTransition(o,s,i,a).call(function(){s&&s>0?this.attrTween("d",h):this.attr("d",m),i.noFormats||this.attr("fill",function(e){return t._helpers.fill(e,i,a)}).attr("stroke",function(e){return t._helpers.stroke(e,i,a)})}).attr("transform",v(!1)),n=i._handleTransition(o.exit(),s,i,a).attr("transform",v(!0)).attr("d",m),t._postDrawHandling(a,r,n,s),a.shapes=o}},t._addGradient=function(e,i,a,s,r,n,l){var o=[].concat(e),d=r.svg.select("#"+t._createClass([i])),c=[],u=a.position+"Field",p=!0,m=[];s.forEach(function(e){-1===c.indexOf(e[u])&&e.aggField.join("_")===o.join("_")&&c.push(e[u])},this),c=c.sort(function(e,t){return a._scale(e)-a._scale(t)}),null===d.node()&&(p=!1,d=r.svg.append("defs").append("linearGradient").attr("id",t._createClass([i])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===a.position?a._scale(c[0])+r._widthPixels()/c.length/2:0).attr("y1","y"===a.position?a._scale(c[0])-r._heightPixels()/c.length/2:0).attr("x2","x"===a.position?a._scale(c[c.length-1])+r._widthPixels()/c.length/2:0).attr("y2","y"===a.position?a._scale(c[c.length-1])-r._heightPixels()/c.length/2:0)),c.forEach(function(e,t){var i={},a=0;for(a=0;a<s.length;a+=1)if(s[a].aggField.join("_")===o.join("_")&&s[a][u].join("_")===e.join("_")){i=s[a];break}m.push({offset:Math.round(t/(c.length-1)*100)+"%",color:i[l]})},this),p?r._handleTransition(d.selectAll("stop").data(m),n,r).attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}):d.selectAll("stop").data(m).enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color})},t._arrayIndexCompare=function(e,t,i){var a,s,r,n,l,o;for(s=0;s<e.length;s+=1){for(n=!0,l=!0,o=[].concat(e[s]),r=0;r<t.length;r+=1)n=n&&t[r]===o[r];for(r=0;r<i.length;r+=1)l=l&&i[r]===o[r];if(n&&l){a=0;break}if(n){a=-1;break}if(l){a=1;break}}return a},t._createClass=function(e){var t,i,a=[];if(i=function(e){var t=e.charCodeAt(0),i="-";return t>=65&&90>=t&&(i=e.toLowerCase()),i},e.length>0)for(t=0;t<e.length;t+=1)e[t]&&a.push("dimple-"+e[t].toString().replace(/[^a-z0-9]/g,i));else a=["dimple-all"];return a.join(" ")},t._drawMarkerBacks=function(i,a,s,r,n,l){var o,d,c,u=["dimple-marker-back",n,i.keyString];s.lineMarkers&&(o=null===s._markerBacks||void 0===s._markerBacks||void 0===s._markerBacks[i.keyString]?a._group.selectAll("."+u.join(".")).data(i.markerData):s._markerBacks[i.keyString].data(i.markerData,function(e){return e.key}),c=l.nextSibling&&l.nextSibling.id?o.enter().insert("circle","#"+l.nextSibling.id):o.enter().append("circle"),c.attr("id",function(e){return t._createClass([e.key+" Marker Back"])}).attr("class",function(e){var i=[];return s.x._hasCategories()&&(i=i.concat(e.xField)),s.y._hasCategories()&&(i=i.concat(e.yField)),t._createClass(i)+" "+u.join(" ")}).attr("cx",function(e){return s.x._hasCategories()?t._helpers.cx(e,a,s):s.x._previousOrigin}).attr("cy",function(e){return s.y._hasCategories()?t._helpers.cy(e,a,s):s.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),a._handleTransition(o,r,a).attr("cx",function(e){return t._helpers.cx(e,a,s)}).attr("cy",function(e){return t._helpers.cy(e,a,s)}).attr("r",2+s.lineWeight),d=a._handleTransition(o.exit(),r,a).attr("cx",function(e){return s.x._hasCategories()?t._helpers.cx(e,a,s):s.x._origin}).attr("cy",function(e){return s.y._hasCategories()?t._helpers.cy(e,a,s):s.y._origin}).attr("r",0),0===r?d.remove():d.each("end",function(){e.select(this).remove()}),(void 0===s._markerBacks||null===s._markerBacks)&&(s._markerBacks={}),s._markerBacks[i.keyString]=o)},t._drawMarkers=function(i,a,s,r,n,l,o,d,c){var u,p,m,h=["dimple-marker",n,i.keyString];u=null===s._markers||void 0===s._markers||void 0===s._markers[i.keyString]?a._group.selectAll("."+h.join(".")).data(i.markerData):s._markers[i.keyString].data(i.markerData,function(e){return e.key}),m=c.nextSibling&&c.nextSibling.id?u.enter().insert("circle","#"+c.nextSibling.id):u.enter().append("circle"),m.attr("id",function(e){return t._createClass([e.key+" Marker"])}).attr("class",function(e){var i=[],r=a.getClass(e.aggField.length>0?e.aggField[e.aggField.length-1]:"All");return s.x._hasCategories()&&(i=i.concat(e.xField)),s.y._hasCategories()&&(i=i.concat(e.yField)),t._createClass(i)+" "+h.join(" ")+" "+a.customClassList.lineMarker+" "+r}).on("mouseover",function(e){o(e,this,a,s)}).on("mouseleave",function(e){d(e,this,a,s)}).attr("cx",function(e){return s.x._hasCategories()?t._helpers.cx(e,a,s):s.x._previousOrigin}).attr("cy",function(e){return s.y._hasCategories()?t._helpers.cy(e,a,s):s.y._previousOrigin}).attr("r",0).attr("opacity",s.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){a.noFormats||this.attr("fill","white").style("stroke-width",s.lineWeight).attr("stroke",function(e){return l?t._helpers.fill(e,a,s):i.color.stroke})}),a._handleTransition(u,r,a).attr("cx",function(e){return t._helpers.cx(e,a,s)}).attr("cy",function(e){return t._helpers.cy(e,a,s)}).attr("r",2+s.lineWeight).attr("opacity",s.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){a.noFormats||this.attr("fill","white").style("stroke-width",s.lineWeight).attr("stroke",function(e){return l?t._helpers.fill(e,a,s):i.color.stroke})}),p=a._handleTransition(u.exit(),r,a).attr("cx",function(e){return s.x._hasCategories()?t._helpers.cx(e,a,s):s.x._origin}).attr("cy",function(e){return s.y._hasCategories()?t._helpers.cy(e,a,s):s.y._origin}).attr("r",0),0===r?p.remove():p.each("end",function(){e.select(this).remove()}),(void 0===s._markers||null===s._markers)&&(s._markers={}),s._markers[i.keyString]=u,t._drawMarkerBacks(i,a,s,r,n,c)},t._getOrderedList=function(e,i,a){var s,r=[],n=[],l=[].concat(i),o=[].concat(i),d=[];return null!==a&&void 0!==a&&(d=d.concat(a)),d=d.concat({ordering:l,desc:!1}),d.forEach(function(t){var i,a=[],s=[];if("function"==typeof t.ordering){if(e&&e.length>0)for(i in e[0])e[0].hasOwnProperty(i)&&-1===o.indexOf(i)&&o.push(i)}else if(t.ordering instanceof Array){for(i=0;i<t.ordering.length;i+=1)e&&e.length>0&&e[0].hasOwnProperty(t.ordering[i])&&s.push(t.ordering[i]),a.push(t.ordering[i]);s.length>a.length/2?o.concat(s):t.values=a}else o.push(t.ordering)},this),s=t._rollUp(e,l,o),d.length>=1&&(d.forEach(function(e){var t=null===e.desc||void 0===e.desc?!1:e.desc,i=e.ordering,a=[],s=function(e){var t,i=0;for(t=0;t<e.length;t+=1){if(isNaN(e[t])){i=void 0;break}i+=parseFloat(e[t])}return i},n=function(e,t){var i=0,a=s(e),r=s(t);return isNaN(a)||isNaN(r)?isNaN(Date.parse(e[0]))||isNaN(Date.parse(t[0]))?e[0]<t[0]?i=-1:e[0]>t[0]&&(i=1):i=Date.parse(e[0])-Date.parse(t[0]):i=parseFloat(a)-parseFloat(r),i};"function"==typeof i?r.push(function(e,a){return(t?-1:1)*i(e,a)}):e.values&&e.values.length>0?(e.values.forEach(function(e){a.push([].concat(e).join("|"))},this),r.push(function(e,i){var s,r,n,o="",d="";for(n=0;n<l.length;n+=1)n>0&&(o+="|",d+="|"),o+=e[l[n]],d+=i[l[n]];return s=a.indexOf(o),r=a.indexOf(d),s=0>s?t?-1:a.length:s,r=0>r?t?-1:a.length:r,(t?-1:1)*(s-r)})):[].concat(e.ordering).forEach(function(e){r.push(function(i,a){var s=0;return void 0!==i[e]&&void 0!==a[e]&&(s=n([].concat(i[e]),[].concat(a[e]))),(t?-1:1)*s})})}),s.sort(function(e,t){for(var i=0,a=0;i<r.length&&0===a;)a=r[i](e,t),i+=1;return a}),s.forEach(function(e){var t,i=[];if(1===l.length)n.push(e[l[0]]);else{for(t=0;t<l.length;t+=1)i.push(e[l[t]]);n.push(i)}},this)),n},t._getSeriesOrder=function(e,i){var a=[].concat(i._orderRules),s=i.categoryFields,r=[];return null!==s&&void 0!==s&&s.length>0&&(null!==i.c&&void 0!==i.c&&i.c._hasMeasure()&&a.push({ordering:i.c.measure,desc:!0}),i.x._hasMeasure()&&a.push({ordering:i.x.measure,desc:!0}),i.y._hasMeasure()&&a.push({ordering:i.y.measure,desc:!0}),r=t._getOrderedList(e,s,a)),r},t._getSeriesSortPredicate=function(e,i,a){return function(s,r){var n=0;return i.x._hasCategories()&&(n=t._helpers.cx(s,e,i)-t._helpers.cx(r,e,i)),0===n&&i.y._hasCategories()&&(n=t._helpers.cy(s,e,i)-t._helpers.cy(r,e,i)),0===n&&a&&(n=t._arrayIndexCompare(a,s.aggField,r.aggField)),n}},t._helpers={cx:function(e,i,a){var s=0;return s=null!==a.x.measure&&void 0!==a.x.measure?a.x._scale(e.cx):a.x._hasCategories()&&a.x.categoryFields.length>=2?a.x._scale(e.cx)+t._helpers.xGap(i,a)+(e.xOffset+.5)*(i._widthPixels()/a.x._max-2*t._helpers.xGap(i,a))*e.width:a.x._scale(e.cx)+i._widthPixels()/a.x._max/2},cy:function(e,i,a){var s=0;return s=null!==a.y.measure&&void 0!==a.y.measure?a.y._scale(e.cy):null!==a.y.categoryFields&&void 0!==a.y.categoryFields&&a.y.categoryFields.length>=2?a.y._scale(e.cy)-i._heightPixels()/a.y._max+t._helpers.yGap(i,a)+(e.yOffset+.5)*(i._heightPixels()/a.y._max-2*t._helpers.yGap(i,a))*e.height:a.y._scale(e.cy)-i._heightPixels()/a.y._max/2},r:function(e,t,i){var a=0,s=1;return null===i.z||void 0===i.z?a=i.radius&&"auto"!==i.radius?i.radius:5:(i.radius&&"auto"!==i.radius&&i.radius>1&&(s=i.radius/i.z._scale(i.z._max)),a=i.z._hasMeasure()?i.z._scale(e.r)*s:i.z._scale(t._heightPixels()/100)*s),a},xGap:function(e,t){var i=0;return(null===t.x.measure||void 0===t.x.measure)&&t.barGap>0&&(i=e._widthPixels()/t.x._max*(t.barGap>.99?.99:t.barGap)/2),i},xClusterGap:function(e,i,a){var s=0;return null!==a.x.categoryFields&&void 0!==a.x.categoryFields&&a.x.categoryFields.length>=2&&a.clusterBarGap>0&&!a.x._hasMeasure()&&(s=e.width*(i._widthPixels()/a.x._max-2*t._helpers.xGap(i,a))*(a.clusterBarGap>.99?.99:a.clusterBarGap)/2),s},yGap:function(e,t){var i=0;return(null===t.y.measure||void 0===t.y.measure)&&t.barGap>0&&(i=e._heightPixels()/t.y._max*(t.barGap>.99?.99:t.barGap)/2),i},yClusterGap:function(e,i,a){var s=0;return null!==a.y.categoryFields&&void 0!==a.y.categoryFields&&a.y.categoryFields.length>=2&&a.clusterBarGap>0&&!a.y._hasMeasure()&&(s=e.height*(i._heightPixels()/a.y._max-2*t._helpers.yGap(i,a))*(a.clusterBarGap>.99?.99:a.clusterBarGap)/2),s},x:function(e,i,a){var s=0;return s=a.x._hasTimeField()?a.x._scale(e.x)-t._helpers.width(e,i,a)/2:null!==a.x.measure&&void 0!==a.x.measure?a.x._scale(e.x):a.x._scale(e.x)+t._helpers.xGap(i,a)+e.xOffset*(t._helpers.width(e,i,a)+2*t._helpers.xClusterGap(e,i,a))+t._helpers.xClusterGap(e,i,a)},y:function(e,i,a){var s=0;return s=a.y._hasTimeField()?a.y._scale(e.y)-t._helpers.height(e,i,a)/2:null!==a.y.measure&&void 0!==a.y.measure?a.y._scale(e.y):a.y._scale(e.y)-i._heightPixels()/a.y._max+t._helpers.yGap(i,a)+e.yOffset*(t._helpers.height(e,i,a)+2*t._helpers.yClusterGap(e,i,a))+t._helpers.yClusterGap(e,i,a)},width:function(e,i,a){var s=0;return s=null!==a.x.measure&&void 0!==a.x.measure?Math.abs(a.x._scale(e.x<0?e.x-e.width:e.x+e.width)-a.x._scale(e.x)):a.x._hasTimeField()?a.x.floatingBarWidth:e.width*(i._widthPixels()/a.x._max-2*t._helpers.xGap(i,a))-2*t._helpers.xClusterGap(e,i,a)},height:function(e,i,a){var s=0;return s=a.y._hasTimeField()?a.y.floatingBarWidth:null!==a.y.measure&&void 0!==a.y.measure?Math.abs(a.y._scale(e.y)-a.y._scale(e.y<=0?e.y+e.height:e.y-e.height)):e.height*(i._heightPixels()/a.y._max-2*t._helpers.yGap(i,a))-2*t._helpers.yClusterGap(e,i,a)},opacity:function(e,t,i){var a=0;return a=null!==i.c&&void 0!==i.c?e.opacity:t.getColor(e.aggField.slice(-1)[0]).opacity},fill:function(e,t,i){var a=0;return a=null!==i.c&&void 0!==i.c?e.fill:t.getColor(e.aggField.slice(-1)[0]).fill},stroke:function(e,t,i){var a=0;return a=null!==i.c&&void 0!==i.c?e.stroke:t.getColor(e.aggField.slice(-1)[0]).stroke},css:function(e,t){return t.getClass(e.aggField.slice(-1)[0])}},t._parentHeight=function(e){var i=e.offsetHeight;return(0>=i||null===i||void 0===i)&&(i=e.clientHeight),(0>=i||null===i||void 0===i)&&(i=null===e.parentNode||void 0===e.parentNode?0:t._parentHeight(e.parentNode)),i},t._parentWidth=function(e){var i=e.offsetWidth;return(!i||0>i)&&(i=e.clientWidth),(!i||0>i)&&(i=e.parentNode?t._parentWidth(e.parentNode):0),i},t._parsePosition=function(e,t){var i,a=0;return e&&(i=e.toString().split(","),i.forEach(function(i){i&&(isNaN(i)?"%"===i.slice(-1)?a+=t*(parseFloat(i.slice(0,i.length-1))/100):"px"===i.slice(-2)?a+=parseFloat(i.slice(0,i.length-2)):a=e:a+=parseFloat(i))},this)),0>a&&(a=t+a),a},t._parseXPosition=function(e,i){return t._parsePosition(e,t._parentWidth(i))},t._parseYPosition=function(e,i){return t._parsePosition(e,t._parentHeight(i))},t._postDrawHandling=function(t,i,a,s){0===s?(i.each(function(e,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,i)}),a.remove()):(i.each("end",function(e,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,i)}),a.each("end",function(){e.select(this).remove()}))},t._removeTooltip=function(e,t,i,a){i._tooltipGroup&&i._tooltipGroup.remove()},t._rollUp=function(e,t,i){var a=[];return t=null!==t&&void 0!==t?[].concat(t):[],e.forEach(function(e){var s=-1,r={},n=!0;a.forEach(function(i,a){-1===s&&(n=!0,t.forEach(function(t){n=n&&e[t]===i[t]},this),n&&(s=a))},this),-1!==s?r=a[s]:(t.forEach(function(t){r[t]=e[t]},this),a.push(r),s=a.length-1),i.forEach(function(i){-1===t.indexOf(i)&&(void 0===r[i]&&(r[i]=[]),r[i]=r[i].concat(e[i]))},this),a[s]=r},this),a},t._showBarTooltip=function(t,i,a,s){var r,n,l,o,d,c,u=5,p=10,m=750,h=e.select(i),v=h.node().getBBox().x,g=h.node().getBBox().y,f=h.node().getBBox().width,b=h.node().getBBox().height,y=h.attr("opacity"),x=h.attr("fill"),w=s._dropLineOrigin(),D=e.rgb(e.rgb(x).r+.6*(255-e.rgb(x).r),e.rgb(x).g+.6*(255-e.rgb(x).g),e.rgb(x).b+.6*(255-e.rgb(x).b)),_=e.rgb(e.rgb(x).r+.8*(255-e.rgb(x).r),e.rgb(x).g+.8*(255-e.rgb(x).g),e.rgb(x).b+.8*(255-e.rgb(x).b)),T=s.getTooltipText(t),k=0,C=0,S=0,F=function(e,t){var i=h.node().getCTM(),s=a.svg.node().createSVGPoint();return s.x=e||0,s.y=t||0,s.matrixTransform(i)};null!==a._tooltipGroup&&void 0!==a._tooltipGroup&&a._tooltipGroup.remove(),a._tooltipGroup=a.svg.append("g"),s.p||(c=s._isStacked()?1:f/2,s.x._hasCategories()||null===w.y||a._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+a.customClassList.tooltipDropLine).attr("x1",v<s.x._origin?v+c:v+f-c).attr("y1",g<w.y?g+b:g).attr("x2",v<s.x._origin?v+c:v+f-c).attr("y2",g<w.y?g+b:g).call(function(){a.noFormats||this.style("fill","none").style("stroke",x).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(m/2).duration(m/2).ease("linear").attr("y2",g<w.y?w.y-1:w.y+1),c=s._isStacked()?1:b/2,s.y._hasCategories()||null===w.x||a._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+a.customClassList.tooltipDropLine).attr("x1",v<w.x?v+f:v).attr("y1",g<s.y._origin?g+c:g+b-c).attr("x2",v<w.x?v+f:v).attr("y2",g<s.y._origin?g+c:g+b-c).call(function(){a.noFormats||this.style("fill","none").style("stroke",x).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(m/2).duration(m/2).ease("linear").attr("x2",v<w.x?w.x-1:w.x+1)),r=a._tooltipGroup.append("g"),n=r.append("rect").attr("class","dimple-tooltip "+a.customClassList.tooltipBox),r.selectAll(".dimple-dont-select-any").data(T).enter().append("text").attr("class","dimple-tooltip "+a.customClassList.tooltipLabel).text(function(e){return e}).call(function(){a.noFormats||this.style("font-family",s.tooltipFontFamily).style("font-size",s._getTooltipFontSize())}),r.each(function(){C=this.getBBox().width>C?this.getBBox().width:C,S=this.getBBox().width>S?this.getBBox().height:S}),r.selectAll("text").attr("x",0).attr("y",function(){return k+=this.getBBox().height,k-this.getBBox().height/2}),n.attr("x",-u).attr("y",-u).attr("height",Math.floor(k+u)-.5).attr("width",C+2*u).attr("rx",5).attr("ry",5).call(function(){a.noFormats||this.style("fill",_).style("stroke",D).style("stroke-width",2).style("opacity",.95)}),F(v+f+u+p+C).x<parseFloat(a.svg.node().getBBox().width)?(l=v+f+u+p,o=g+b/2-(k-(S-u))/2):F(v-(u+p+C)).x>0?(l=v-(u+p+C),o=g+b/2-(k-(S-u))/2):F(0,g+b+k+p+u).y<parseFloat(a.svg.node().getBBox().height)?(l=v+f/2-(2*u+C)/2,l=l>0?l:p,l=l+C<parseFloat(a.svg.node().getBBox().width)?l:parseFloat(a.svg.node().getBBox().width)-C-p,o=g+b+2*u):(l=v+f/2-(2*u+C)/2,l=l>0?l:p,l=l+C<parseFloat(a.svg.node().getBBox().width)?l:parseFloat(a.svg.node().getBBox().width)-C-p,o=g-k-(S-u)),d=F(l,o),r.attr("transform","translate("+d.x+" , "+d.y+")")},t._showPointTooltip=function(i,a,s,r){var n,l,o,d,c=5,u=10,p=750,m=e.select(a),h=parseFloat(m.attr("cx")),v=parseFloat(m.attr("cy")),g=parseFloat(m.attr("r")),f=t._helpers.opacity(i,s,r),b=m.attr("stroke"),y=r._dropLineOrigin(),x=e.rgb(e.rgb(b).r+.6*(255-e.rgb(b).r),e.rgb(b).g+.6*(255-e.rgb(b).g),e.rgb(b).b+.6*(255-e.rgb(b).b)),w=e.rgb(e.rgb(b).r+.8*(255-e.rgb(b).r),e.rgb(b).g+.8*(255-e.rgb(b).g),e.rgb(b).b+.8*(255-e.rgb(b).b)),D=0,_=0,T=0,k=r.getTooltipText(i);null!==s._tooltipGroup&&void 0!==s._tooltipGroup&&s._tooltipGroup.remove(),s._tooltipGroup=s.svg.append("g"),s._tooltipGroup.append("circle").attr("cx",h).attr("cy",v).attr("r",g).call(function(){s.noFormats||this.attr("opacity",0).style("fill","none").style("stroke",b).style("stroke-width",1)}).transition().duration(p/2).ease("linear").attr("r",g+r.lineWeight+2).call(function(){s.noFormats||this.attr("opacity",1).style("stroke-width",2)}),null!==y.y&&s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",h).attr("y1",v<y.y?v+g+r.lineWeight+2:v-g-r.lineWeight-2).attr("x2",h).attr("y2",v<y.y?v+g+r.lineWeight+2:v-g-r.lineWeight-2).call(function(){s.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",f)}).transition().delay(p/2).duration(p/2).ease("linear").attr("y2",v<y.y?y.y-1:y.y+1),null!==y.x&&s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",h<y.x?h+g+r.lineWeight+2:h-g-r.lineWeight-2).attr("y1",v).attr("x2",h<y.x?h+g+r.lineWeight+2:h-g-r.lineWeight-2).attr("y2",v).call(function(){s.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",f);
}).transition().delay(p/2).duration(p/2).ease("linear").attr("x2",h<y.x?y.x-1:y.x+1),n=s._tooltipGroup.append("g"),l=n.append("rect").attr("class","dimple-tooltip "+s.customClassList.tooltipBox),n.selectAll(".dont-select-any").data(k).enter().append("text").attr("class","dimple-tooltip "+s.customClassList.tooltipLabel).text(function(e){return e}).call(function(){s.noFormats||this.style("font-family",r.tooltipFontFamily).style("font-size",r._getTooltipFontSize())}),n.each(function(){_=this.getBBox().width>_?this.getBBox().width:_,T=this.getBBox().width>T?this.getBBox().height:T}),n.selectAll("text").attr("x",0).attr("y",function(){return D+=this.getBBox().height,D-this.getBBox().height/2}),l.attr("x",-c).attr("y",-c).attr("height",Math.floor(D+c)-.5).attr("width",_+2*c).attr("rx",5).attr("ry",5).call(function(){s.noFormats||this.style("fill",w).style("stroke",x).style("stroke-width",2).style("opacity",.95)}),h+g+c+u+_<parseFloat(s.svg.node().getBBox().width)?(o=h+g+c+u,d=v-(D-(T-c))/2):h-g-(c+u+_)>0?(o=h-g-(c+u+_),d=v-(D-(T-c))/2):v+g+D+u+c<parseFloat(s.svg.node().getBBox().height)?(o=h-(2*c+_)/2,o=o>0?o:u,o=o+_<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-_-u,d=v+g+2*c):(o=h-(2*c+_)/2,o=o>0?o:u,o=o+_<parseFloat(s.svg.node().getBBox().width)?o:parseFloat(s.svg.node().getBBox().width)-_-u,d=v-D-(T-c)),n.attr("transform","translate("+o+" , "+d+")")},t.filterData=function(e,t,i){var a=e;return null!==t&&null!==i&&(null!==i&&void 0!==i&&(i=[].concat(i)),a=[],e.forEach(function(e){null===e[t]?a.push(e):i.indexOf([].concat(e[t]).join("/"))>-1&&a.push(e)},this)),a},t.getUniqueValues=function(e,t){var i=[];return null!==t&&void 0!==t&&(t=[].concat(t),e.forEach(function(e){var a="";t.forEach(function(t,i){i>0&&(a+="/"),a+=e[t]},this),-1===i.indexOf(a)&&i.push(a)},this)),i},t.newSvg=function(t,i,a){var s=null;if((null===t||void 0===t)&&(t="body"),s=e.select(t),s.empty())throw"The '"+t+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return s.append("svg").attr("width",i).attr("height",a)},t}),angular.module("tuktukV2Dahboard").run(["$templateCache",function(e){e.put("app/alert/alert.html",'<style>body {\n        background: #fff !important;\n    }</style><div class="container-fluid alert-container"><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><div class="tabs-view alert-tabs-view"><uib-tabset active=active><uib-tab index=0 heading="All Drivers" select="vm.tabChanged(\'topic\')"><div class=row><div class="col-md-7 col-sm-12 col-xs-12"><form role=form name=msgForm novalidate><div class="form-group col-md-6"><label class=control-label>TYPE</label><br><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=push name=inputNotificationType>Push</label><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=sms name=inputNotificationType disabled=disabled>SMS</label><p class=help-block></p><br></div><div class="form-group col-md-6"><label class=control-label>LANGUAGE</label><br><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=en name=inputLang>English</label><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=hi name=inputLang checked=checked>Hindi</label><p class=help-block></p><br></div><div class="form-group col-md-12"><label class=control-label>Title</label><input ng-model=vm.formObj.message.title type=text placeholder="Enter Title" name=inputTitle class=form-control required><div ng-messages=msgForm.inputTitle.$error ng-if=msgForm.inputTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p><br></div><div class="form-group col-md-12"><label>MESSAGE</label><textarea ng-model=vm.formObj.message.message class=form-control rows=5 name=inputMessage required></textarea><!--<p class="help-block">Character Count: {{"149"}}</p>--><div ng-messages=msgForm.inputMessage.$error ng-if=msgForm.inputMessage.$touched><div ng-message=required>This field is required</div></div><p class=help-block><a href=https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab target=_blank>(Download Chrome Extensions)</a></p><br></div><div class="form-group col-md-6"><label class=control-label>URL</label><input ng-model=vm.formObj.message.url type=text placeholder="Enter URL" name=inputURL class=form-control><br></div><div class="form-group col-md-2"><label class=control-label>Expiration</label><select class=form-control style="padding:5px 10px; border-radius: 4px" ng-model=vm.expireAt ng-options="exp.name for exp in vm.expirationValues track by exp.value"></select><p class=help-block></p><br></div><div class="form-group col-md-12"><!--<button class="btn btn-success" type="submit" ng-disabled="msgForm.$invalid"--><!--ng-click="vm.sendPushMsg()">Send <i class="fa fa-paper-plane"--><!--aria-hidden="true"></i>--><!--</button>--> <button class="btn btn-success" type=submit ng-disabled=msgForm1.$invalid ng-click=confirmSendPushMsg()>Send <i class="fa fa-paper-plane" aria-hidden=true></i></button></div></form></div></div></uib-tab><uib-tab index=1 heading="Selected Driver" select="vm.tabChanged(\'user\')"><div class=row><div class="col-md-7 col-sm-12 col-xs-12"><form role=form name=msgForm1><div class="form-group col-md-6"><label class=control-label>TYPE</label><br><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=push name=inputNotificationType>Push</label><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=sms name=inputNotificationType disabled=disabled>SMS</label><p class=help-block></p><br></div><div class="form-group col-md-6"><label class=control-label>LANGUAGE</label><br><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=en name=inputLang>English</label><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=hi name=inputLang>Hindi</label><p class=help-block></p><br></div><div class="form-group col-md-12"><label class=control-label>Title</label><input ng-model=vm.formObj.message.title type=text placeholder="Enter Title" name=inputTitle class=form-control required><div ng-messages=msgForm1.inputTitle.$error ng-if=msgForm1.inputTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p><br></div><div class="form-group col-md-12" ng-if="vm.selectedDrivers.length>0"><label>DRIVERS</label><br><div ng-repeat="driver in vm.selectedDrivers" class=badge>{{driver.name}}</div><p class=help-block></p><br></div><div class="form-group col-md-12"><label>MESSAGE</label><textarea ng-model=vm.formObj.message.message class=form-control rows=5 name=inputMessage required></textarea><div ng-messages=msgForm1.inputMessage.$error ng-if=msgForm1.inputMessage.$touched><div ng-message=required>This field is required</div></div><p class=help-block><a href=https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab target=_blank>(Download Chrome Extensions)</a></p><br></div><div class="form-group col-md-6"><label class=control-label>URL</label><input ng-model=vm.formObj.message.url type=text placeholder="Enter URL" name=inputURL class=form-control><p class=help-block></p><br></div><div class="form-group col-md-2"><label class=control-label>Expiration</label><select class=form-control style="padding:5px 10px; border-radius: 4px" ng-model=vm.expireAt ng-options="exp.name for exp in vm.expirationValues track by exp.value"></select><p class=help-block></p><br></div><div class="form-group col-md-12"><!--<button class="btn btn-success" type="submit" ng-disabled="msgForm1.$invalid"--><!--ng-click="vm.sendPushMsg()">Send <i class="fa fa-paper-plane"--><!--aria-hidden="true"></i>--><!--</button>--> <button class="btn btn-success" type=submit ng-disabled=msgForm1.$invalid ng-click=confirmSendPushMsg()>Send <i class="fa fa-paper-plane" aria-hidden=true></i></button></div></form></div><div class="col-md-5 col-sm-12 col-xs-12"><form class="form-inline col-md-12 col-sm-12 col-xs-12" role=form name=msgForm2><label class=control-label>SELECT DRIVERS</label><br><br><div class="input-group col-md-4 col-sm-6 col-xs-12"><input type=text ng-model=vm.searchTerm placeholder="Driver Name" class=form-control></div><div class="input-group col-md-4 col-sm-3 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"></select></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-center"><button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-search" type=submit><span class="glyphicon glyphicon-search" aria-hidden=true></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-left"><button ng-disabled=!vm.searchTerm ng-click=vm.clearSearch() class="btn btn-search" type=submit><span class="glyphicon glyphicon-remove" aria-hidden=true></span></button></div></form><!--<form role="form" name="msgForm1">--><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<label class="control-label">SELECT DRIVERS</label>--><!--</div>--><!--<div class="inline-group col-md-6 col-sm-12 col-xs-12">--><!--<input ng-model="vm.searchTerm" class="form-control input-search-term"--><!--placeholder="Driver Name" />--><!--</div>--><!--<div class="inline-group col-md-4 col-sm-12 col-xs-12 no-mr no-pd">--><!--<button ng-disabled="!vm.searchTerm" ng-click="vm.searchTable()" class="btn btn-small">--><!--Search--><!--</button>--><!--<p class="help-block"></p>--><!--</div>--><!--</form>--><div class="col-md-12 col-sm-12 col-xs-12"><div class=table-responsive style="max-height: 400px; overflow: auto"><table ng-table=tableParams class="table table-bordered table-striped text-center"><tbody><tr ng-repeat="row in $data track by $index" ng-if=!tblNoData><td data-title="\'#\'" class=text-center><input type=checkbox ng-model=row.selected ng-change="vm.selectDriver(row, row.id)"></td><td data-title="\'Name\'" class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.name}}</a></td><td data-title="\'Phone\'" class=text-center>{{row.phone}}</td></tr><tr ng-if=tblNoData><td colspan=3>no result found</td></tr></tbody></table></div></div></div></div></uib-tab><uib-tab index=2 heading=Archive><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=table-responsive><table ng-table=msgTableParams class="table table-bordered table-striped text-center"><tbody><tr ng-repeat="row in vm.notification"><td data-title="\'ID\'" class=text-left>{{row.id}}</td><td data-title="\'Title\'" class=text-left>{{row.title}}</td><td data-title="\'Message\'" class=text-left>{{row.message.message}}</td><td data-title="\'Send On\'" class=text-left>{{(row.sendOn)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Updated On\'" class=text-left>{{(row.updatedOn)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Expire At\'" class=text-left>{{(row.message.expireAt)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Type\'" class=text-left>{{row.type}}</td><td data-title="\'Notification Type\'" class=text-left>{{row.notificationType}}</td><td data-title="\'Send To\'" class=text-left><div style="width:200px; word-break: break-all">{{row.sendTo.toString()}}</div></td><td data-title="\'Author\'" class=text-left>{{row.author}}</td></tr><!--<tr >--><!--<td colspan="3">--><!--no result found--><!--</td>--><!--</tr>--></tbody></table></div></div></div></uib-tab></uib-tabset></div></div><br><br>'),e.put("app/drivers/detail.html",'<style>.search-btn-trip {\n        position: fixed;\n        right: 9px;\n        top: 12px;\n        z-index: 91;\n    }\n    .payout-daywise-div {\n        position: fixed;\n        height: 100%;\n        width: 99%;\n        z-index: 99;\n        background: rgba(255, 255, 255, 0.95);\n        top: 0;\n        overflow: hidden;\n    }</style><div class=search-btn-trip><form class=form-inline><div class=form-group><div style="max-height: 34px; overflow: hidden"><a ui-sref="home.drivers_search({city: city,vehicleType: vehicleType, filterURL: \'joined\', term: dateURL})" class="btn btn-default disabled no-border"><i class="fa fa-pencil" aria-hidden=true></i> </a><a title=Suspend ng-click=confirmSuspend(); class="btn btn-default no-border"><i class="fa fa-minus-circle" aria-hidden=true></i> </a><a title=Delete ng-click=confirmDelete(); class="btn btn-default no-border"><i class="fa fa-times" aria-hidden=true></i></a></div></div></form></div><div class=container-fluid><!--<div class="row">--><!--<form class="form-inline date-selection date-selection-dr">--><!--<div class="form-group ">--><!--<input ng-change="vm.getAllData()" class="form-control cstm-width text-center" type="daterange"--><!--ng-model="selectedDates" separator=" - " format="DD MMM YY" opens="right" ranges="vm.ranges">--><!--</div>--><!--</form>--><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px;">&#10094;</span> <span--><!--class="text-center" ng-model="date" style="display: inline-block; padding: 7px 0;">{{date}}</span> <span--><!--ng-click="vm.changeDate(\'next\')" ng-if="!vm.live"--><!--style="display: inline-block; padding: 7px;">&#10095;</span>--><!--</div>--><!--</div>--><!--<span class="live" ng-if="vm.live"> LIVE</span>--><!--<span class="reload" ng-click="vm.refreshPage()"><i class="fa fa-refresh" aria-hidden="true"></i></span>--><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd"><div class="box box-heading box-0 text-center" ng-class="{\'box-online\': vm.profile.state== 22 || vm.profile.state== 11, \'box-offline\': vm.profile.state== 10 } "><img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{vm.profile.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class=iw-driver height=50><h4 class=title style=margin-top:10px>{{vm.profile.name}}</h4></div></div><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.id}}</h4><span>id</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.phone}}</h4><span>phone</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.vehicle}}</h4><span>vehicle number</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.joinedOn*1000 | date:\'dd MMM yy\'}}</h4><span>joined On</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.rides_total.total}} <small>/ {{vm.profile.rides_total.unique_ride}}</small></h4><span>Total rides</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.can_rides_total.total}} <small>/ {{vm.profile.can_rides_total.unique_ride}}</small></h4><span>Total Cancellation</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.total_online}}</h4><span>online hours</span></div></div><div class="col-md-2 col-sm-4 col-xs-12" ng-if=vm.profile.utilization><div class=box><h4 class=number>{{vm.profile.utilization | number:2}}</h4><span>utilization</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.total_earning}}</h4><span>Total Trip Earning</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate1.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.distance.total | number:2}}</h4><span>distance</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.feedbackRating}}</h4><span>feedback</span></div></div></div></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><div class=row style="position:absolute;width:auto;margin: -5px 0 0;right: 20px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" ng-if=vm.prev style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{vm.formattedStartWeekDs}} - {{vm.formattedEndWeekDs}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=vm.next style="display: inline-block; padding: 7px">&#10095;</span></div></div><h4 style="margin-top: 0" class=title>Invoice</h4></div><div class=panel-body><div class=data-table-payout><table ng-table=payoutTableParams class="table table-bordered table-striped text-center"><tr ng-click=vm.setSelected(dataInvoice.driver) ng-class="{selected : row.driver === vm.selectedRow}"><td data-title="\'ID\'" class=text-left width=100>{{dataInvoice.driver}}</td><td data-title="\'Name\'" sortable="\'name\'" class=text-left width=100><a target=_blank ui-sref=home.drivers_detail({driverId:row.driver})>{{dataInvoice.name}}</a></td><td data-title="\'Trips\'" sortable="\'tripCount\'" class=text-center width=50>{{dataInvoice.tripCount}}</td><td data-title="\'Trip\'" sortable="\'tripEarning\'" class=text-right width=100>{{dataInvoice.tripEarning | number:2}}</td><td data-title="\'Offer\'" sortable="\'offerEarning\'" class=text-right width=100>{{dataInvoice.offerEarning | number:2}}</td><td data-title="\'Bonus\'" sortable="\'bonusEarning\'" class=text-right width=100>{{dataInvoice.bonusEarning | number:2}}</td><td data-title="\'Cash\'" sortable="\'cash\'" class=text-right width=100>{{dataInvoice.cashCollected | number:2}}</td><td data-title="\'Commission\'" class=text-right width=100>{{(dataInvoice.tripTuktukCommission + dataInvoice.bonusTuktukCommission + dataInvoice.offerTuktukCommission) | number:2}}</td><td data-title="\'Settlements\'" sortable="\'settlement\'" class=text-right width=100>{{dataInvoice.tripSettledAmount | number:2}}</td><td data-title="\'tCASH\'" sortable="\'tCASH\'" class=text-right width=100>{{dataInvoice.tcashEarning | number:2}}</td><td data-title="\'Balance\'" sortable="\'balance\'" class=text-right width=100><a href="" data-toggle=tooltip tooltip=View tooltip-placement=top ng-click=vm.viewDaywiseListData(dataInvoice.driver);>{{dataInvoice.balance | number:2}}</a></td><td data-title="\'Opening&nbsp;Bal\'" sortable="\'openingBalance\'" class=text-right width=100>{{dataInvoice.openingBalance | number:2}}</td><td data-title="\'Closing&nbsp;Bal\'" sortable="\'closingBalance\'" class=text-right width=100>{{dataInvoice.closingBalance | number:2}}</td><td data-title="\'Fine\'" sortable="\'fine\'" class=text-right width=100>{{dataInvoice.fine | number:2}}</td><td data-title="\'Paid&nbsp;Amt\'" class=text-right width=100>{{dataInvoice.paidAmount | number:2}}</td><!--<td data-title="\'Paid&nbsp;Amt\'" class="text-right" ng-if="editable" width="120">--><!--<form class="form-inline text-left">--><!--<div class="form-group">--><!--<input ng-if="!dataInvoice.paidStatus"--><!--class="form-control text-right"--><!--type="number"--><!--name="inputPaid"--><!--ng-value="dataInvoice.closingBalance"--><!--ng-model="dataInvoice.newClosingBalance">--><!--<input ng-if="dataInvoice.paidStatus" class="form-control text-right"--><!--type="number"--><!--name="inputPaid"--><!--ng-value="dataInvoice.paidAmount">--><!--</div>--><!--<div class="form-group">--><!--<a href=""--><!--data-toggle="tooltip"--><!--tooltip="Pay"--><!--tooltip-placement="top"--><!--ng-if="!dataInvoice.draft && !dataInvoice.paidStatus  && dataInvoice.closingBalance >= 0"--><!--class="btn btn-default btn-xs"--><!--ng-click="confirmPaid(dataInvoice.driver);"--><!--style="padding:1px 8px;">Pay</a>--><!--</div>--><!--<div class="form-group">--><!--<a href=""--><!--data-toggle="tooltip"--><!--tooltip="Pay"--><!--tooltip-placement="top"--><!--ng-if="!dataInvoice.draft && !dataInvoice.paidStatus && dataInvoice.closingBalance <0"--><!--class="btn btn-default btn-xs"--><!--ng-click="confirmPaid(dataInvoice.driver);"--><!--style="padding:1px 8px;">Accept</a>--><!--</div>--><!--</form>--><!--</td>--><td data-title="\'Last&nbsp;Upt\'" class=text-left width=100>{{(dataInvoice.updatedOn)*1000 | date:"dd-MM-yy h:mma"}}<span ng-if=dataInvoice.updatedBy>,</span> {{dataInvoice.updatedBy}}</td></tr></table></div></div></div><div class=payout-daywise-div ng-if=dayWiseList><span ng-click=vm.hideDayWiseList(); class="close-payout-daywise-div pull-right"><i class="fa fa-remove"></i></span><div class=row style="padding:5% 10%"><div class="col-md-2 col-sm-12 col-xs-12"></div><div class="col-md-8 col-sm-12 col-xs-12"><div style="background: #fff; padding:40px"><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-center colspan=2 width=100>Date</th><th class=text-center width=100>Type</th><th class=text-center width=100>Trip Count</th><th class=text-right width=100>Earning</th><th class=text-right width=100>Cash Collected</th><th class=text-right width=100>Tuktuk Share</th><th class=text-right width=100>Balance</th></tr></thead><tbody><tr ng-repeat="row in dataDay.trip"><td class=text-left colspan=2 width=100>{{(row.date)*1000 | date:"dd-MM-yy h:mma"}}</td><td class=text-left style="padding: 0 !important" colspan=6><table class="table table-striped text-center no-mr" style="background: transparent !important"><tr ng-repeat="row1 in row.values" style="background: transparent !important"><td class=text-center width=100>{{row1.action}}</td><td class=text-center width=100>{{row1.tripCount}}</td><td class=text-right width=100>{{row1.earning | number:2}}</td><td class=text-right width=100>{{row1.cashCollected | number:2}}</td><td class=text-right width=100>{{row1.commission | number:2}}</td><td class=text-right width=100>{{row1.balance | number:2}}</td></tr></table></td></tr><tr><td colspan=8 style="padding: 0"><table class="table table-striped text-center no-mr"><tr><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>EMI</b></td><td class=text-center width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100><b>{{vm.emi | number:2}}</b></td><td class=text-right width=100><b>- {{vm.emi | number:2}}</b></td></tr><tr style="background: transparent"><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>Settled</b></td><td class=text-center width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100><b>{{vm.settled | number:2}}</b></td></tr></table></td></tr><tr><td colspan=8 style="padding: 0"><table class="table table-striped text-center no-mr"><tr><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>Balance</b></td><td class=text-center width=100><b>{{vm.totalTripCount}}</b></td><td class=text-right width=100><b>{{vm.totalEarning | number:2}}</b></td><td class=text-right width=100><b>{{vm.cashCollection | number:2}}</b></td><td class=text-right width=100><b>{{vm.totalShare | number:2}}</b></td><td class=text-right width=100><b>{{vm.totalBalance | number:2}}</b></td></tr></table></td></tr></tbody></table></div><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-center colspan=2 width=100>Settlement {{dataSettledTrip.sc}}</th><th class=text-center width=100>Trip ID</th><th class=text-center width=100>Updated On</th><th class=text-right width=100>Amount</th><th class=text-right width=100>Reason</th></tr></thead><tbody><tr><td class=text-left colspan=2 width=100></td><td class=text-left style="padding: 0 !important" colspan=6><table class="table table-striped text-center no-mr"><tr ng-repeat="row3 in dataSettledTrip.va" style="background: transparent"><td class=text-center width=100>{{row3.tr}}</td><td class=text-center width=100>{{(row3.up)*1000 | date:"dd-MM-yy h:mma"}}</td><td class=text-right width=100>{{row3.am}}</td><td class=text-right width=100>{{row3.re}}</td></tr></table></td></tr></tbody></table></div></div></div><div class="col-md-2 col-sm-12 col-xs-12"></div></div></div></div></div><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right no-mr pd-2-"><div class=form-group><input ng-change=vm.onDateChangeTrips() class="form-control text-center" type=daterange ng-model=driverTripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges style="margin: 8px 10px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div><nvd3 options=vm.tripChartOptions data=vm.tripData config=vm.config></nvd3></div><table ng-if="" ng-table=tableParams class="table table-bordered"><tr class=truncate ng-repeat="row in $data track by $index"><td data-title="\'Date\'" sortable="\'requestOn\'" style="width: 145px"><a target=_blank ui-sref="home.trip_detail({id: row.id})">{{(row.requestOn)*1000 | date:"dd MMM yy"}}</a></td><td data-title="\'Status\'" sortable="\'tripState\'"><div ng-if="row.tripState == 20" class=text-primary style="white-space: nowrap">Requested</div><div ng-if="row.tripState == 22" style="white-space: nowrap">Allocated</div><div ng-if="row.tripState == 30" style="white-space: nowrap">For Trip</div><div ng-if="row.tripState == 40" style="white-space: nowrap">At Pickup</div><div ng-if="row.tripState == 60" style="white-space: nowrap">At Destination</div><div ng-if="row.tripState == 50" class=text-info style="white-space: nowrap">In trip</div><div ng-if="row.tripState == 61" class=text-success style="white-space: nowrap">Successful</div><div ng-if="row.tripState == 70" class=text-warning style="white-space: nowrap">Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning style="white-space: nowrap">Can by Rider</div><div ng-if="row.tripState == 80" style="white-space: nowrap">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger style="white-space: nowrap">Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82" style="white-space: nowrap">Terminated</div></td><td data-title="\'Rider\'">{{row.riderInfo.name}}</td><td data-title="\'Driver Fare\'" class=text-right><div>{{row.amount.driverFare | number:2}}<br></div></td><td data-title="\'Rider Fare\'" class=text-right><div>{{row.amount.riderFare | number:2}}</div></td><td data-title="\'tCASH\'" class=text-right><div>{{row.amount.tcash | number:2}}</div></td><td data-title="\'Request On\'" class=text-right><div>{{(row.requestOn)*1000 | date:"h:mma"}}</div></td></tr></table></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right no-mr pd-2-"><div class=form-group><input ng-change=vm.onDateChangeOnline() class="form-control text-center" type=daterange ng-model=driverOnlineDates separator=" - " format="DD MMM YY" opens=left ranges=vm.ranges style="margin: 8px 10px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Online Hours</h4></div><div class=panel-body><div><nvd3 options=vm.onlineChartOptions data=vm.online config=vm.config></nvd3></div></div></div></div></div></div><script type=text/ng-template id=myPopoverTemplate1.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.distance.inTrip | number:2}}</h4>\n        <span>in trip</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.distance.forTrip | number:2}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate2.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_online.intrip_time | secondsToDateTime}}</h4>\n        <span>in trip</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_online.fortrip_time | secondsToDateTime}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate3.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_bid.accepted}}</h4>\n        <span>accepted</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.rejected}}</h4>\n        <span>rejected</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.ignored}}</h4>\n        <span>ignored</span>\n    </div></script>'),e.put("app/drivers/drivers.html",'<style>.search-btn-trip {\n        position: fixed;\n        right: 9px;\n        top: 12px;\n        z-index: 91;\n    }</style><div class=search-btn-trip><form class=form-inline><div class=form-group><div style="max-height: 34px; overflow: hidden"><a ui-sref="home.drivers_search({city:city, vehicleType:vehicleType, filterURL: vm.filterURL, term:vm.termURL})" class="btn btn-default no-border"><i class="fa fa-search" aria-hidden=true></i> </a><a class="btn btn-default no-border" href=#/home/drivers/onboarding/indore/auto><i class="fa fa-plus" aria-hidden=true></i></a></div></div></form></div><div class=container-fluid><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div></div><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><div class=pull-right><input ng-change=vm.getAcquisition() class="form-control cstm-width text-center daterangepicker-aqq-chart" type=daterange ng-model=datesForAcq separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div><h4 style="margin-top: 0" class=title>Driver Acquisition</h4></div><div class=panel-body><div><nvd3 options=vm.acquisitionChart data=vm.acquisition config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right no-mr pd-2-"><div class=form-group><input ng-change=vm.getSupply() class="form-control text-center" type=daterange ng-model=driverSupplyDates separator=" - " format="DD MMM YY" opens=left ranges=vm.ranges style="margin: 8px 10px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>SUPPLY HOURS</h4></div><div class=panel-body><nvd3 options=vm.supplyChartOptions data=vm.supply config=vm.config></nvd3></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><div class="pull-right daterangepicker-leaderboard-box"><input ng-change=vm.getLeaderboard() class="form-control cstm-width text-center daterangepicker-leaderboard" type=daterange ng-model=datesForLeaderboard separator=" - " format="DD MMM YY" limit=0 opens=left></div><h4 style="margin-top: 0" class=title>Leaderboard</h4></div><div class=panel-body><div class="alert alert-warning fade in" ng-show="vm.dataCount<3"><strong>oops!</strong> no result found.</div><div class=row ng-show="vm.dataCount>2"><div class="col-md-4 col-sm-6 col-xs-12"><h4>Max Trips</h4><div class=table-responsive><table class="table table-bordered table-striped text-center no-mr"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>Trips</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.trip.maxTrip"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.tc}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Largest Cancelled Trips</h4><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>Cancel / Total</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.trip.largestCan"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.tc}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Longest Trip</h4><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>KM</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.trip.longestTrip"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.td}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Longest For Trip</h4><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>KM</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.trip.longestForTrip"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.td}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Max Hour</h4><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>Hours</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.availability.maxHour"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.hc}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Max Utilization</h4><div class=table-responsive><table class="table table-bordered table-striped text-center no-mr"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>Hours</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.availability.maxUtilization"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.tc}}</td></tr></tbody></table></div></div><div class="col-md-4 col-sm-6 col-xs-12"><h4>Income</h4><div class=table-responsive><table class="table table-bordered table-striped text-center no-mr"><thead><tr><th class=text-left>Name</th><th class=text-right width=100>Income</th></tr></thead><tbody><tr ng-repeat="row in vm.leaderboradData.income.topEarner"><td class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.dr}}</a></td><td class=text-right>{{row.tc}}</td></tr></tbody></table></div></div></div></div></div></div></div></div>'),
e.put("app/drivers/drivers_search.html",'<style>.search-btn-trip {\n        position: fixed;\n        right: 9px;\n        top: 12px;\n        z-index: 91;\n    }\n    .ng-table-pager {\n        display: none;\n    }\n    .selected {\n        background: #fff1df !important;\n    }</style><div class=search-btn-trip><form class=form-inline><div class=form-group><div style="max-height: 34px; overflow: hidden"><a ui-sref="home.drivers({city: city,vehicleType: vehicleType})" title=Back class="btn btn-default no-border"><i class="fa fa-arrow-left" aria-hidden=true></i> </a><a ng-click=vm.getResult() title=Reload class="btn btn-default no-border"><i class="fa fa-refresh" aria-hidden=true></i> </a><a class="btn btn-default no-border" title="Add Driver" href=#/home/drivers/onboarding/indore/auto><i class="fa fa-plus" aria-hidden=true></i></a></div></div></form></div><div class=container-fluid><br><br><br><br><div class=row><div class="col-md-8 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-body><form class="form-inline no-mr"><div class="input-group col-md-1"><h4>Search</h4></div><div class="input-group col-md-4"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div><div class="input-group col-md-4"><input ng-model=vm.searchTerm class="form-control input-search-term" placeholder=term ng-disabled=!vm.filterTerm></div><div class="input-group col-md-1"><button ng-click=vm.searchTable() class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div></form></div></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-body><form class="form-inline no-mr"><div class="input-group col-md-1"><h4>Filter</h4></div><div class="input-group col-md-10 pull-right"><select ng-model=vm.statusCodes ng-change=vm.getResult() class=form-control ng-options="statusFilter.name for statusFilter in vm.driverStatusFilters track by statusFilter.value"><option value="" disabled=disabled>Select Status</option></select></div></form></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default" ng-show=vm.showTableData><div class=panel-heading><div class="pull-right daterangepicker-leaderboard-box"><input ng-change=vm.getResult() class="form-control cstm-width text-center daterangepicker-leaderboard" type=daterange ng-model=datesForSearch separator=" - " format="DD MMM YY" limit=0 opens=left></div><h4 style="margin-top: 0" class=title>Results</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered table-striped text-center no-mr"><!--<thead>\n                                <tr>\n                                    <th width="120" style="text-align:left;">#ID</th>\n                                    <th width="200" style="text-align:left;">Name</th>\n                                    <th width="120" style="text-align:right;">Earning(Rs.)</th>\n                                    <th width="120">Rides</th>\n                                    <th style="text-align:left;">Online</th>\n\n                                </tr>\n                            </thead>--><tbody><tr ng-repeat="row in $data track by $index" ng-click=vm.setSelected(row.driver_id) ng-class="{selected : row.driver_id === vm.selectedRow}"><td data-title="\'#ID\'" class=text-left><a ui-sref=home.drivers_detail({driverId:row.driver_id})>{{row.driver_id}}</a></td><td data-title="\'Name\'" sortable="\'name\'" class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.driver_id})>{{row.name}}</a></td><td data-title="\'Phone\'" class=text-right>{{row.phone}}</td><td data-title="\'State\'" sortable="\'state\'" class=text-center><span ng-if="row.state== 22" class=text-warning>Occupied </span><span ng-if="row.state== 11" class=text-success>Online </span><span ng-if="row.state== 10" class=text-danger>Offline</span></td><td data-title="\'App Version\'" class=text-right>{{row.app_version}}</td><td data-title="\'Earning(Rs.)\'" sortable="\'earning\'" class=text-right>{{row.earning}}</td><td data-title="\'Trips\'" sortable="\'rides\'">{{row.rides}}</td><td class=text-left data-title="\'Online Hours\'">{{row.online}}</td></tr></tbody></table></div></div><br><br></div><div class="alert alert-warning fade in" ng-show=!vm.showTableData><strong>oops!</strong> no result found.</div></div></div></div>'),e.put("app/drivers/onboarding.html",'<style>body {\n        background: #fff !important;\n    }\n\n    .nav-tabs > li > a {\n        background: none !important;\n    }\n\n    .nav-tabs {\n        background: #f9f9f9 !important;\n    }\n\n    label {\n        text-transform: uppercase;\n    }\n\n    @media only screen and (max-width: 375px) {\n        .alert-tabs-view .nav-tabs > li {\n            margin: 0 8px;\n        }\n    }</style><div class=container-fluid><br><br><br><br><div class=row><div class="col-md-8 col-sm-12 col-xs-12"><h4>&nbsp; &nbsp;DRIVER ONBOARDING</h4><br><div class="tabs-view alert-tabs-view"><uib-tabset active=active><uib-tab index=0 heading=Basic><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=basicForm novalidate=novalidate><div class="col-md-2 col-sm-12 col-xs-12"><div class=form-group><input type=text class=form-control name=countryCodeVerify placeholder="Country Code" ng-model=vm.countryCode disabled=disabled><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><input type=text class=form-control ng-minlength=10 ng-maxlength=10 name=mobileNumberVerify ng-model=vm.basic.phone placeholder="Enter Mobile Number"><p class=help-block>9981600956<br></p></div></div><div class="col-md-2 col-sm-12 col-xs-12"><div class=form-group><input class="form-control btn btn-warning" name=Verify type=button value=Verify ng-click=vm.verifyDriver() ng-disabled=!vm.basic.phone><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><span class="alert alert info">deete</span><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>Profile Photo</label><br><label class="btn btn-default pd-2-5"><span class="fa fa-plus"></span> Add Image<input type=file style="display: none" required=required></label><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=firstName>First Name</label><input type=text class=form-control name=firstName placeholder="First Name" ng-model=vm.basic.firstName required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=lastName>Last Name</label><input type=text class=form-control ng-model=vm.basic.lastName name=lastName placeholder="Last Name" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><br><div class="col-md-3 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=gender>Gender</label><select class=form-control ng-model=vm.basic.gender name=gender required=required><option value="" disabled=disabled>Select</option><option label=Male value=Male selected=selected>Male</option><option label=Female value=Female>Female</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-3 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=bloodGroup>Blood Group</label><select class=form-control ng-model=vm.basic.bloodGroup name=bloodGroup required=required><option value="" disabled=disabled>Select</option><option label=O+ value=O+>O+</option><option label=O- value=O->O-</option><option label=A+ value=A+>A+</option><option label=A- value=A->A-</option><option label=B+ value=B+>B+</option><option label=B- value=B->B-</option><option label=AB+ value=AB+>AB+</option><option label=AB- value=AB->AB-</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=DOB>DOB</label><div class="input-group date" name=DOB><input type=text class=form-control ng-model=vm.basic.dob style="border-radius: 4px 0px 0px 4px !important" value=1980-01-01 required=required ng-click=vm.openCalender() uib-datepicker-popup=dd-MMMM-yyyy max-date=vm.calender.maxDate is-open=vm.calender.opened> <span class=input-group-addon><span class="glyphicon glyphicon-calendar" ng-click=vm.openCalender()></span></span></div><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-2 col-sm-12 col-xs-12"><div class="form-group disabled"><label class=control-label for=countryCode>Country Code</label><input type=text class=form-control name=countryCode placeholder="Country Code" ng-model=vm.countryCode autocomplete=off disabled=disabled required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=mobileNumber>Mobile Number</label><input type=text class=form-control name=primary placeholder="Primary Mobile Number" ng-model=vm.basic.contacts.primary autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-2 col-sm-12 col-xs-12"><div class="form-group disabled"><label class=control-label for=countryCodeAlt>Country Code</label><input type=text class=form-control id=countryCodeAlt name=countryCodeAlt placeholder="Country Code" ng-model=vm.countryCode autocomplete=off disabled=disabled><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=mobileNumberAlt>Alternate Mobile Number</label><input type=text class=form-control ng-model=vm.basic.contacts.alternate name=alternate placeholder="Alternate Mobile Number" autocomplete=off><p class=help-block><br></p></div></div><!--<div class="col-md-6 col-sm-12 col-xs-12">\n                                        <div class="form-group">\n                                            <label class="control-label" for="emailID">Email ID</label>\n                                            <input type="email" class="form-control" ng-model="vm.basic.emailID" name="emailID"\n                                                   placeholder="Email ID"\n                                                   autocomplete="off" required="required">\n\n                                            <div ng-messages="stopForm.stopDownTime.$error"\n                                                 ng-show="stopForm.stopDownTime.$touched" role="alert">\n                                                <div ng-message="required">Please enter a value for this field.</div>\n                                                <div ng-message="email">This field must be a valid email address.</div>\n                                                <div ng-message="maxlength">This field can be at most 15 characters\n                                                    long.\n                                                </div>\n                                            </div>\n                                            <p class="help-block"><br></p>\n                                        </div>\n                                    </div>--><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=addressOne>Address 1</label><input type=text class=form-control ng-model=vm.basic.address.address.line1 name=addressOne placeholder="Address 1" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=addressTwo>Address 2</label><input type=text class=form-control ng-model=vm.basic.address.address.line2 name=addressTwo placeholder="Address 2" autocomplete=off><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=city>City</label><input type=text class=form-control ng-model=vm.basic.address.address.city name=city placeholder=City autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=state>State</label><input type=text class=form-control ng-model=vm.basic.address.address.state name=state placeholder=State autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=pin>PIN</label><input type=text class=form-control id=pin name=pin placeholder=PIN ng-model=vm.basic.address.address.pin autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=pin>CURRENT</label><label><input type=radio ng-model=vm.basic.address.address.current ng-value=true> Yes</label><br><label><input type=radio ng-model=vm.basic.address.address.current value=false> No</label><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=pin>Type</label><label><input type=radio ng-model=vm.basic.address.address.type value=local> Local</label><br><label><input type=radio ng-model=vm.basic.address.address.type ng-value=other> Other</label><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" ng-if=vm.canCreate ng-click=vm.SaveBasicInfo() name=submit type=button value="Save & Next"> <input class="btn btn-primary" ng-if=vm.canEdit ng-click=vm.SaveBasicInfo() name=submit type=button value="Save & Next"> <input class="btn btn-primary" ng-if=vm.canView ng-disabled=true ng-click=vm.SaveBasicInfo() name=submit type=button value="Save & Next"></div></form></div></div></uib-tab><uib-tab index=1 heading=Bank><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=bankForm novalidate><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>Account Holder\'s Name</label><input type=text class=form-control ng-model=vm.bank.accountHolder name=accountHolder placeholder="Account Holder\'s Name" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>Account Number</label><input type=text class=form-control ng-model=vm.bank.accountNumber name=accountNumber placeholder="Account Number" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><br><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>Bank\'s Name</label><input type=text class=form-control ng-model=vm.bank.bank name=bankName placeholder="Bank\'s Name" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>IFSC Code</label><input type=text class=form-control ng-model=vm.bank.ifsc name=ifscCode placeholder="IFSC Code" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" ng-click=vm.SaveBankInfo() name=submit type=submit value="Save & Next"></div></form></div></div></uib-tab><uib-tab index=2 heading=Vehicle><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=vehicleForm novalidate=novalidate><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><input type=text class=form-control ng-model=vm.vehicle.vehicleRegNumber name=vehicleNumber placeholder="Vehicle Number" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-2 col-sm-12 col-xs-12"><div class=form-group><input class="form-control btn btn-warning" name=Search type=button ng-disabled=!vm.vehicle.vehicleRegNumber value=Search ng-click=vm.SearchVehiclesByReg()><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"></div><div class="col-md-2 col-sm-12 col-xs-12"><div class=form-group><input class="form-control btn btn-default" name=addVehicle type=button value="Add Vehicle" ng-click=vm.showAddVehicleForm();><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><div class=table-responsive><table ng-table=msgTableParams class="table table-bordered table-striped text-center"><tbody><tr><td data-title="\' \'" class=text-left><div class=checkbox><label><input type=checkbox ng-model=vm.setting.forceConfirm style="margin-top: 2px"></label></div></td><td data-title="\'ID\'" class=text-left>{{row.id}}</td><td data-title="\'NUMBER\'" class=text-left>{{row.number}}</td><td data-title="\'NAME\'" class=text-left>{{row.name}}</td><td data-title="\'EXPIRY\'" class=text-left>{{row.expiry}}</td></tr></tbody></table></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" name=submit type=submit value="Save & Next"></div></form></div><div class=add-vehicle-div ng-if=vm.AddVehicleForm><div class=row><div class="col-md-2 col-sm-12 col-xs-12"></div><div class="col-md-8 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><span ng-click=vm.hideAddVehicleForm(); class="close-add-vehicle-div pull-right"><i class="fa fa-remove"></i></span><h4 style="margin-top: 0" class=title>ADD VEHICLE</h4></div><div class=panel-body><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><br><form name=vehicleForm novalidate=novalidate><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>1073</label><br><label class="btn btn-default pd-2-5"><span class="fa fa-plus"></span> Add Image<input type=file style="display: none" required=required></label><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=expiryDate>Expiry</label><div class="input-group date" id=expiryDate name=expiryDate><input type=text class=form-control style="border-radius: 4px 0px 0px 4px !important" value=1980-01-01 required=required> <span class=input-group-addon><span class="glyphicon glyphicon-calendar"></span></span></div><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12"></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=type>Type</label><select class=form-control id=type name=type required=required><option label=Auto value=Auto selected=selected>Auto</option><option label=Bike value=Bike>Bike</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=vehicleNumber>Vehicle Number</label><input type=text class=form-control id=vehicleNumber name=vehicleNumber placeholder="Vehicle Number" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=ownership>Ownership</label><select class=form-control id=ownership name=ownership ng-model=vm.selectedOwnership ng-options="ownership.name for ownership  in  vm.ownershipArr track by ownership.value" required=required></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=type>Owner Name</label><input type=text class=form-control id=ownerName name=ownerName placeholder="Owner Name" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=vehicleNumber>Owner\'s Phone Number</label><input type=text class=form-control id=ownerPhoneNumber name=ownerPhoneNumber placeholder="Owner\'s Phone Number" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" name=submit type=submit value=ADD></div></form></div></div></div></div></div><div class="col-md-2 col-sm-12 col-xs-12"></div></div></div></div></uib-tab><uib-tab index=2 heading=License><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=licenseForm novalidate=novalidate><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=licenseNumber>License Number</label><input type=text class=form-control id=licenseNumber name=licenseNumber placeholder="Driving License" autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=dlType>Type</label><select class=form-control id=dlType name=dlType required=required><option label="Light Vehicle" value="Light Vehicle" selected=selected>Light Vehicle</option><option label="Heavy Vehicle" value="Heavy Vehicle">Heavy Vehicle</option><option label=Other value=Other>Other</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=expiryDateLi>Expiry</label><div class="input-group date" id=expiryDateLi name=expiryDateLi><input type=text class=form-control style="border-radius: 4px 0px 0px 4px !important" value=1980-01-01 required=required> <span class=input-group-addon><span class="glyphicon glyphicon-calendar"></span></span></div><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" name=submit type=submit value="Save & Next"></div></form></div></div></uib-tab><uib-tab index=2 heading=Identity><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=identityForm novalidate=novalidate><div class="col-md-12 col-sm-12 col-xs-12"><div class=form-group><label class=control-label>ID Scan Copy</label><br><label class="btn btn-default pd-2-5"><span class="fa fa-plus"></span> Add Image<input type=file style="display: none" required=required></label><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=identityType>Identity Type</label><select class=form-control id=identityType name=identityType required=required><option label="Voter ID" value="Voter ID" selected=selected>Voter ID</option><option label="Aadhar Card" value="Aadhar Card">Aadhar Card</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" name=submit type=submit value="Save & Next"></div></form></div></div></uib-tab><uib-tab index=2 heading=Device><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=deviceForm novalidate=novalidate><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=ownershipDevice>Ownership</label><select class=form-control id=ownershipDevice name=ownershipDevice required=required><option label=Self value=Self selected=selected>Self</option><option label=TukTuk value=TukTuk>TukTuk</option></select><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=modelDevice>Model</label><input type=text class=form-control id=modelDevice name=modelDevice placeholder=Model autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=makeDevice>Make</label><input type=text class=form-control id=makeDevice name=makeDevice placeholder=Make autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=imeiDevice>IMEI</label><input type=text class=form-control id=imeiDevice name=imeiDevice placeholder=IMEI autocomplete=off required=required><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-primary" name=submit type=submit value="Save & Next"></div></form></div></div></uib-tab><uib-tab index=2 heading=Others><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form name=othersForm novalidate=novalidate><div class="col-md-12 col-sm-12 col-xs-12"><div class=form-group><label class=control-label for=comments>Comments</label><textarea class=form-control id=comments name=comments placeholder=comments rows=10 required=required></textarea><div ng-messages=stopForm.stopDownTime.$error ng-show=stopForm.stopDownTime.$touched role=alert><div ng-message=required>Please enter a value for this field.</div><div ng-message=email>This field must be a valid email address.</div><div ng-message=maxlength>This field can be at most 15 characters long.</div></div><p class=help-block><br></p></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-right"><hr><input class="btn btn-success" name=submit type=submit value=Register></div></form></div></div></uib-tab></uib-tabset></div></div><div class="col-md-4 col-sm-12 col-xs-12"><h4>&nbsp; &nbsp;IN DRAFT MODE</h4><br><div class="tabs-view alert-tabs-view"><uib-tabset active=active><uib-tab index=2 heading=DRIVERS><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=table-responsive><table ng-table=msgTableParams class="table table-bordered table-striped text-center"><tbody><tr><td data-title="\'ID\'" class=text-left>{{row.id}}</td><td data-title="\'NAME\'" class=text-left>{{row.name}}</td><td data-title="\'NUMBER\'" class=text-left>{{row.number}}</td></tr></tbody></table></div></div></div></uib-tab></uib-tabset></div></div></div></div>'),
e.put("app/drivers/payout.html",'<style>body {\n        background: #fff !important;\n        overflow: auto;\n    }\n\n    .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {\n        padding: 6px 4px;\n        vertical-align: top;\n    }\n\n    .table > thead > tr > th span {\n    }\n\n    div.data-table-payout .form-control {\n        display: block;\n        width: 100%;\n        height: 24px;\n        padding: 2px 4px;\n    }\n\n    div.data-table-payout .form-control {\n        max-width: 70px !important;\n        padding: 0 0 0 4px !important;\n        line-height: 0 !important;\n        border: 1px solid #ddd !important;\n        box-shadow: none !important;\n        font-size: inherit !important;\n        vertical-align: top !important;\n        margin: -2px 0 0 !important;\n        height: 18px !important;\n        border-radius: 0 !important;\n    }\n\n    div.data-table-payout .form-inline {\n        padding: 0 !important;\n        margin: 0 !important;\n        vertical-align: top !important;\n        height: auto !important;\n    }\n\n    div.data-table-payout .btn.btn-default.btn-xs {\n        padding: 0px 4px !important;\n        font-size: 11px !important;\n        border-radius: 0 !important;\n        margin: -5px 0 0 !important;\n        border-color: #ddd !important;\n    }\n    @media only screen and (min-width: 1440px) {\n        #scrollable-area {\n            margin: auto;\n            width: 100%;\n            height: 750px;\n            border: 0px solid #ccc;\n            overflow-y: scroll;\n        }\n    }\n    @media only screen and (max-width: 1280px) {\n        #scrollable-area {\n            margin: auto;\n            width: 100%;\n            height: 650px;\n            border: 0px solid #ccc;\n            overflow-y: scroll;\n        }\n    }\n    .selected {\n        background: #fff1df !important;\n    }\n    input[type=number]::-webkit-inner-spin-button,\n    input[type=number]::-webkit-outer-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }</style><div class=container-fluid><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" ng-if=vm.prev style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{vm.formattedStartWeekDs}} - {{vm.formattedEndWeekDs}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=vm.next style="display: inline-block; padding: 7px">&#10095;</span></div></div><br><br><br><br><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><!--<a href="" data-toggle="tooltip" ng-if="publishAllBtn"--><!--tooltip="Publish All"--><!--tooltip-placement="top" class="btn btn-default btn-xs pull-right"--><!--ng-click="removeAllChecked($index);">--><!--<i class="fa fa-remove" aria-hidden="true"></i> Clear All </a>--><!--<a href="" data-toggle="tooltip" ng-if="publishAllBtn"--><!--tooltip="Publish All"--><!--tooltip-placement="top" class="btn btn-default btn-xs pull-right mr-rt-5"--><!--ng-click="confirmPublish();">--><!--<i class="fa fa-share" aria-hidden="true"></i> Publish All </a>--><h4>&nbsp; &nbsp;DRIVER PAYOUT</h4></div><div class="col-md-12 col-sm-12 col-xs-12"><div class=data-table-payout id=scrollable-area><a href="" data-toggle=tooltip tooltip="Publish All" tooltip-placement=top class="btn btn-default btn-xs pull-right" ng-click=confirmPublish(); style="margin:0 !important;\n    padding: 5px !important;\n    position: absolute;\n    right: 15px;\n    top: -38px"><i class="fa fa-share" aria-hidden=true></i> Publish All</a><table ng-table=payoutTableParams fixed-table-headers=scrollable-area class="table table-bordered table-striped text-center"><tr ng-repeat="row in $data track by $index" ng-click=vm.setSelected(row.driver) ng-class="{selected : row.driver === vm.selectedRow}"><td data-title="\'ID\'" class=text-left width=100>{{row.driver}}</td><td data-title="\'Name\'" sortable="\'name\'" class=text-left width=100><a target=_blank ui-sref=home.drivers_detail({driverId:row.driver})>{{row.name}}</a></td><td data-title="\'Trips\'" sortable="\'tripCount\'" class=text-center width=50>{{row.tripCount}}</td><td data-title="\'Trip\'" sortable="\'tripEarning\'" class=text-right width=100>{{row.tripEarning | number:2}}</td><td data-title="\'Offer\'" sortable="\'offerEarning\'" class=text-right width=100>{{row.offerEarning | number:2}}</td><td data-title="\'Bonus\'" sortable="\'bonusEarning\'" class=text-right width=100>{{row.bonusEarning | number:2}}</td><td data-title="\'Cash\'" sortable="\'cash\'" class=text-right width=100>{{row.cashCollected | number:2}}</td><td data-title="\'Commission\'" class=text-right width=100>{{(row.tripTuktukCommission + row.bonusTuktukCommission + row.offerTuktukCommission) | number:2}}</td><td data-title="\'Settlements\'" sortable="\'settlement\'" class=text-right width=100>{{row.tripSettledAmount | number:2}}</td><td data-title="\'tCASH\'" sortable="\'tCASH\'" class=text-right width=100>{{row.tcashEarning | number:2}}</td><td data-title="\'Balance\'" sortable="\'balance\'" class=text-right width=100><a href="" data-toggle=tooltip tooltip=View tooltip-placement=top ng-click=vm.viewDaywiseListData($index);>{{row.balance | number:2}}</a></td><td data-title="\'Opening&nbsp;Bal\'" sortable="\'openingBalance\'" class=text-right width=100>{{row.openingBalance | number:2}}</td><td data-title="\'Closing&nbsp;Bal\'" sortable="\'closingBalance\'" class=text-right width=100>{{row.closingBalance | number:2}}</td><td data-title="\'Fine\'" sortable="\'fine\'" class=text-right width=100><a href="" data-toggle=tooltip tooltip=View tooltip-placement=top ng-click="vm.showFineModel($index, row.driver, row.fine, row.fineReason);">{{row.fine | number:2}}</a></td><td data-title="\'Paid&nbsp;Amt\'" class=text-right ng-if=!editable width=100>{{row.paidAmount | number:2}}</td><td data-title="\'Paid&nbsp;Amt\'" class=text-right ng-if=editable width=120><form class="form-inline text-left"><div class=form-group><input ng-if=!row.paidStatus class="form-control text-right" type=number name=inputPaid ng-value=row.closingBalance ng-model=row.newClosingBalance> <input ng-if=row.paidStatus class="form-control text-right" type=number name=inputPaid ng-value=row.paidAmount></div><div class=form-group><a href="" data-toggle=tooltip tooltip=Pay tooltip-placement=top ng-if="!row.draft && !row.paidStatus  && row.closingBalance >= 0" class="btn btn-default btn-xs" ng-click=confirmPaid($index); style="padding:1px 8px">Pay</a></div><div class=form-group><a href="" data-toggle=tooltip tooltip=Pay tooltip-placement=top ng-if="!row.draft && !row.paidStatus && row.closingBalance <0" class="btn btn-default btn-xs" ng-click=confirmPaid($index); style="padding:1px 8px">Accept</a></div></form></td><td data-title="\'Last&nbsp;Upt\'" class=text-left width=100>{{(row.updatedOn)*1000 | date:"dd-MM-yy h:mma"}}<span ng-if=row.updatedBy>,</span> {{row.updatedBy}}</td><!--<td data-title="\'Updated By\'" class="text-left" width="100">--><!--{{row.updatedBy}}--><!--</td>--><!--<td data-title="\'Status\'" class="text-center">--><!--{{row.draft}} {{!amountPaid}}--><!--</td>--><!--<td data-title="\'Action\'" class="text-right" style="min-width: 90px !important;" width="100">--><!--<input ng-if="row.draft" type="checkbox" ng-model="drID.checked"--><!--ng-click="checkedForPub(row.driver)" ng-checked="vm.setCheck">--><!--<a href="" data-toggle="tooltip"--><!--tooltip="Pay"--><!--tooltip-placement="top" ng-if="!row.draft && !row.paidStatus"--><!--class="btn btn-success btn-xs"--><!--ng-click="confirmPaid($index);" style="padding:1px 8px;">--><!--<i class="fa fa-inr" aria-hidden="true"></i>--><!--</a>--><!--<a href="" data-toggle="tooltip"--><!--tooltip="Publish"--><!--tooltip-placement="top" ng-if="row.draft" class="btn btn-warning btn-xs"--><!--ng-click="confirmPublish($index);">--><!--<i class="fa fa-share" aria-hidden="true"></i>--><!--</a>--><!--<a href="" data-toggle="tooltip"--><!--tooltip="View"--><!--tooltip-placement="top" class="btn btn-default btn-xs"--><!--ng-click="vm.viewDaywiseListData($index);">--><!--<i class="fa fa-eye" aria-hidden="true"></i>--><!--</a>--><!--</td>--></tr></table></div></div><div class=payout-daywise-div ng-if=dayWiseList><span ng-click=vm.hideDayWiseList(); class="close-payout-daywise-div pull-right"><i class="fa fa-remove"></i></span><div class=row style="padding:5% 10%"><div class="col-md-2 col-sm-12 col-xs-12"></div><div class="col-md-8 col-sm-12 col-xs-12"><div style="background: #fff; padding:40px"><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-center colspan=2 width=100>Date</th><th class=text-center width=100>Type</th><th class=text-center width=100>Trip Count</th><th class=text-right width=100>Earning</th><th class=text-right width=100>Cash Collected</th><th class=text-right width=100>Tuktuk Share</th><th class=text-right width=100>Balance</th></tr></thead><tbody><tr ng-repeat="row in dataDay.trip"><td class=text-left colspan=2 width=100>{{(row.date)*1000 | date:"dd-MM-yy h:mma"}}</td><td class=text-left style="padding: 0 !important" colspan=6><table class="table table-striped text-center no-mr" style="background: transparent !important"><tr ng-repeat="row1 in row.values" style="background: transparent !important"><td class=text-center width=100>{{row1.action}}</td><td class=text-center width=100>{{row1.tripCount}}</td><td class=text-right width=100>{{row1.earning | number:2}}</td><td class=text-right width=100>{{row1.cashCollected | number:2}}</td><td class=text-right width=100>{{row1.commission | number:2}}</td><td class=text-right width=100>{{row1.balance | number:2}}</td></tr></table></td></tr><tr><td colspan=8 style="padding: 0"><table class="table table-striped text-center no-mr"><tr><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>EMI</b></td><td class=text-center width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100><b>{{vm.emi | number:2}}</b></td><td class=text-right width=100><b>- {{vm.emi | number:2}}</b></td></tr><tr style="background: transparent"><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>Settled</b></td><td class=text-center width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100></td><td class=text-right width=100><b>{{vm.settled | number:2}}</b></td></tr></table></td></tr><tr><td colspan=8 style="padding: 0"><table class="table table-striped text-center no-mr"><tr><td class=text-center colspan=2 width=100></td><td class=text-center width=100><b>Balance</b></td><td class=text-center width=100><b>{{vm.totalTripCount}}</b></td><td class=text-right width=100><b>{{vm.totalEarning | number:2}}</b></td><td class=text-right width=100><b>{{vm.cashCollection | number:2}}</b></td><td class=text-right width=100><b>{{vm.totalShare | number:2}}</b></td><td class=text-right width=100><b>{{vm.totalBalance | number:2}}</b></td></tr></table></td></tr></tbody></table></div><div class=table-responsive><table class="table table-bordered table-striped text-center"><thead><tr><th class=text-center colspan=2 width=100>Settlement {{dataSettledTrip.sc}}</th><th class=text-center width=100>Trip ID</th><th class=text-center width=100>Updated On</th><th class=text-right width=100>Amount</th><th class=text-right width=100>Reason</th></tr></thead><tbody><tr><td class=text-left colspan=2 width=100></td><td class=text-left style="padding: 0 !important" colspan=6><table class="table table-striped text-center no-mr"><tr ng-repeat="row3 in dataSettledTrip.va" style="background: transparent"><td class=text-center width=100>{{row3.tr}}</td><td class=text-center width=100>{{(row3.up)*1000 | date:"dd-MM-yy h:mma"}}</td><td class=text-right width=100>{{row3.am}}</td><td class=text-right width=100>{{row3.re}}</td></tr></table></td></tr></tbody></table></div></div></div><div class="col-md-2 col-sm-12 col-xs-12"></div></div></div><div class=payout-fine-div ng-if=addFineModel><span ng-click=vm.hideFineModel($index); class="close-payout-fine-div pull-right"><i class="fa fa-remove"></i></span><div class=row style="padding:5% 10%"><div class="col-md-3 col-sm-12 col-xs-12"></div><div class="col-md-6 col-sm-12 col-xs-12"><div style="background: #fff; padding:40px"><form class=form-inline><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-12 col-sm-12 col-xs-12"><h4 style="margin-bottom: 20px">Add/Edit Fine</h4><p class=help-block></p></div><div class="form-group col-md-8 col-sm-8 col-xs-8"><div class=input-group style="width: 100%"><input class=form-control type=number placeholder=Fine name=inputFine ng-model=vm.fineAmount></div><p class=help-block></p></div><div class="form-group col-md-12 col-sm-12 col-xs-12"><div class=input-group style="width: 100%"><textarea class=form-control placeholder=Reason name=inputReason ng-model=vm.fineReason></textarea></div><p class=help-block></p><button type=button class="btn btn-primary" ng-click=vm.addFine($index)>Save</button></div></div></div></form></div></div><div class="col-md-3 col-sm-12 col-xs-12"></div></div></div></div></div>'),e.put("app/live/live.html",'<div class=container-fluid ng-if=vm.overview><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-2 text-center"><h4 class=title>Trips</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.total_booking}} <small>/ {{vm.overview.trip.unique_booking}}</small></h4><span>Total / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.successful.total}} <small>/ {{ vm.overview.trip.successful.unique_riders}} / {{ vm.overview.trip.fulfillment | number:2}}%</small></h4><span>Fulfilled / U / Fulfilment</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number uib-popover-template="\'myPopoverTemplate.html\'" popover-trigger=mouseenter>{{vm.overview.trip.cancelled.total}} <small>/ {{ vm.overview.trip.cancelled.total_unique_rider}}</small></h4><span class="title text-warning">Cancelled / U</span><!--<button uib-popover-template="\'myPopoverTemplate.html\'" type="button" class="btn btn-default">Popover With Template</button>--></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.before_allocation.total_count}} <small>/ {{ vm.overview.trip.before_allocation.unique_count }}</small></h4><span class="title text-warning">Can before Alloc / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.failed.total}} <small>/ {{ vm.overview.trip.failed.unique_rider}}</small></h4><span>Failed / U</span></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.trip.in_process}}</h4><span>in Prog</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-3 text-center"><h4 class=title>RIDERS</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.total_riders}}</h4><span>Total</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.new_riders_reg}}</h4><span>New</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-4 text-center"><h4 class=title>tCASH</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.total_amount}}/-</h4><span>Total Amount</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.trip_affected}}</h4><span>Trips Affected</span></div></div></div></div></div></div><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div><nvd3 options=vm.tripChartOptions data=vm.tripData config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 cancelled-trip-quad1"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Cancelled Trips</h4></div><div class=panel-body><div class="col-md-6 col-sm-6 col-xs-12"><h5>Driver {{totalCanDriver}}</h5><nvd3 options=vm.cancelTripByDriverChartOptions data=vm.canceledTripByDriver config=vm.config></nvd3></div><div class="col-md-6 col-sm-6 col-xs-12"><h5>Rider {{totalCanRider}}</h5><nvd3 options=vm.cancelTripByRiderChartOptions data=vm.canceledTripByRider config=vm.config></nvd3></div></div></div></div><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<div class="panel panel-default">--><!--<div class="panel-heading">--><!--<h4 style="margin-top: 0" class="title">Rides</h4></div>--><!--<div class="panel-body">--><!--<div>--><!--<nvd3 options="vm.newRidersChartOptions" data="vm.newRiders" config="vm.config"></nvd3>--><!--</div>--><!--</a>--><!--</div>--><!--</div>--><!--</div>--><div class=clearfix></div><!--<div class="col-md-6 col-sm-6 col-xs-12" ngsf-fullscreen>--><!--<div class="panel panel-default">--><!--<div class="panel-heading">--><!--<div class="pull-right">--><!--<select name="mySelect" id="mySelect"--><!--ng-options="option.label for option in vm.heatMapFilers track by option.id"--><!--ng-model="vm.selected" ng-change="vm.loadHeatMap();"></select>--><!--<span style="padding:0 10px 0 5px">{{vm.heatMapDataLength}}</span>--><!--<a ngsf-toggle-fullscreen show-if-fullscreen-enabled style="color:#ccc;">--><!--<i class="fa fa-arrows-alt" show-if-fullscreen=false></i>--><!--<i show-if-fullscreen=true>X</i>--><!--</a>--><!--</div>--><!--<h4 style="margin-top: 0" class="title">Heat Map</h4></div>--><!--<div class="panel-body">--><!--<div>--><!--<ng-map id="live_map" zoom="14" center="[22.717081666666665, 75.87155666666666]"--><!--on-resized="vm.resizeMap()" trigger-resize="true" style="height:400px;">--><!--&lt;!&ndash;   <heatmap-layer id="foo" data="\'heatMapData\'"></heatmap-layer>&ndash;&gt;--><!--</ng-map>--><!--<rzslider rz-slider-model="slider.minValue" rz-slider-high="slider.maxValue"--><!--rz-slider-options="slider.options">--><!--</rzslider>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--></div></div><script type=text/ng-template id=myPopoverTemplate.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.rider_cancelled}}\n            <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled}}</small>\n        </h4>\n        <span>Rider Cancelled / u</span>\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.driver_cancelled}}\n            <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled_by_driver}}</small>\n        </h4>\n        <span>Driver Cancelled / u</span>\n\n    </div></script>'),e.put("app/login/login.html",'<style>html {\n    height: 100%;\n}\nbody {\n    background-color: #333;\n    height: 100%;\n    background-image: url("../../assets/images/blur-bg.jpg");\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-attachment: fixed;\n}</style><div class="well login-bg"><div class=row><div class=col-md-12><div class=col-md-12><h1 class=logo-login><img src=assets/images/gotuktuk-play-logo.png title=Tuktuk height=64></h1></div><div class=col-md-12><form name=login novalidate><div class=group><input class=inputMaterial type=text ng-model=user.username required placeholder=Username style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.username.$error ng-if=login.username.$touched><p ng-message=required>Please enter username.</p></div><div class=group><input class=inputMaterial type=password ng-model=user.password required placeholder=Password style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.password.$error ng-if=login.password.$touched><p ng-message=required>Please enter password.</p></div><div class=group><button class="btn btn-success form-control" style="border:none !important; width:100%" ng-disabled=login.$invalid ng-click=loginUser()>Login</button></div></form></div></div></div></div>'),e.put("app/main/main.html",'<nav id=load class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container-fluid><div class=row><div><a class=tg-menu ng-click="toggle = !toggle"><img src=assets/images/menu.svg title=Tuktuk></a></div></div></div></nav><div class=sidenav ng-class="{\'open\' : toggle}" style="z-index: 999999 !important"><a ng-click="toggle = !toggle" class=toggle-menu-close><img src=assets/images/menu.svg title=Tuktuk></a><ul class="nav nav-stacked"><li style="padding:2px 10px"><span class=pull-right style="color: #333; padding: 15px 0px">Admin <span style="padding: 0;color:#333" ng-click=logout() id=admin type=button uib-dropdown-toggle ng-disabled=disabled>[ Logout ] </span></span><img height=30 style="margin:10px 12px" title=Tuktuk src=assets/images/gotuktuk-play-logo.png></li><li class=header><span style="padding:5px 10px">{{selectedVehicle.name}}</span> | <span style="padding:5px 10px">{{selectedCity.name}}</span></li></ul><ul class="nav nav-stacked role-base-navs" ng-click="toggle = !toggle"><li ui-sref-active=active ng-if=navsLister.navList.LIVE><a ui-sref="home.live({city: city,vehicleType: vehicleType})"><span class="fa fa-heart"></span> Live</a></li><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.DRIVERS><a ui-sref="home.drivers({city: city,vehicleType: vehicleType})"><span class="fa fa-paper-plane"></span> Drivers</a><ul class="nav sub-nav"><li><a ui-sref="home.payout({city: city,vehicleType: vehicleType})"><span class="fa fa-pencil-square-o"></span><strike>Payout</strike></a></li></ul></li><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.MAPS><a ui-sref="home.map({city: city,vehicleType: vehicleType})"><span class="fa fa-map"></span>Maps </a><!--<ul class="nav sub-nav">\n                <li>\n                    <a ui-sref="home.demandsupply({city: city,vehicleType: vehicleType})">\n                        <span class="fa fa-line-chart"></span>\n                        Demand / Supply\n                    </a>\n                </li>\n            </ul>--></li><!--<li ng-click="toggle = !toggle" ui-sref-active="active">\n            <a ui-sref="home.performance({city: city,vehicleType: vehicleType})">\n                <span class="fa fa-area-chart "></span>\n                <strike>Performance</strike>\n                <sup class="text-lowercase">Beta</sup>\n            </a>\n        </li>--><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.TRIP><a ui-sref="home.trips({city: city,vehicleType: vehicleType})"><span class="fa fa-map-pin"></span> Trips</a></li><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.OFFERS><a ui-sref=home.offers><span class="fa fa-barcode"></span> Offers</a></li><!--<li ng-click="toggle = !toggle" ui-sref-active="active" ng-if="navsLister.navList.RIDERS">--><!--<a ui-sref="home.riders">--><!--<span class="fa fa-users"></span>--><!--<strike>Riders</strike>--><!--</a>--><!--</li>--><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.SURGE><a ui-sref=home.surge><span class="fa fa-rupee"></span> Surge</a></li><li ng-click="toggle = !toggle" ui-sref-active=active ng-if=navsLister.navList.ALERT><a ui-sref=home.alert><span class="fa fa-bell"></span>Alert</a></li></ul></div><ui-view></ui-view>'),e.put("app/maps/demand-supply.html",'<style>.navbar-fixed-top, .navbar-fixed-bottom {\n        z-index: 10;\n    }\n    .btn-map-icon {\n        max-width: 45px !important;\n         width: auto;\n    }\n    .live {\n        background-color: rgb(48, 176, 58);\n        border-radius: 100%;\n        height: 12px;\n        line-height: 12px;\n        position: absolute;\n        right: 50px !important;\n        text-indent: 17px;\n        top: 22px;\n        width: 12px;\n        z-index: 999999999;\n        left: inherit;\n    }\n\n    .card-bg-img {\n        background: url("https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{vm.driver.profile.profileImage}}&container=focus&resize_w=200&resize_h=250&refresh=2592000"), url("assets/images/ajax-loader.gif");\n        background-color: #fff;\n        background-size: cover, 20px;\n        background-repeat: no-repeat;\n        background-position: center 20%;\n    }\n\n    .close-card {\n        position: absolute;\n        right: 18px;\n        top: 15px;\n    }\n    .custom-marker.my1 {\n        font-size: 1.5em;\n        padding: 10px;\n        background: #fff;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n        border: #7F7F7F solid 1px;\n    }\n\n    .custom-marker.my1:after {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #fff transparent;\n        display: block;\n        width: 0;\n        z-index: 1;\n        margin-left: -6px;\n        bottom: -6px;\n        left: 50%;\n    }\n\n    .custom-marker.my1:before {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #7F7F7F transparent;\n        display: block;\n        width: 0;\n        z-index: 0;\n        margin-left: -6px;\n        bottom: -7px;\n        left: 50%;\n    }\n\n    .custom-marker.my2 {\n        font-size: 1.5em;\n        padding: 10px;\n        background: #fff;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n        border: #7F7F7F solid 1px;\n        background: red;\n    }\n\n    .custom-marker.my2:after {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: red transparent;\n        display: block;\n        width: 0;\n        z-index: 1;\n        margin-left: -6px;\n        bottom: -6px;\n        left: 50%;\n    }\n\n    .custom-marker.my2:before {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #7F7F7F transparent;\n        display: block;\n        width: 0;\n        z-index: 0;\n        margin-left: -6px;\n        bottom: -7px;\n        left: 50%;\n    }</style><div class=content><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{dsDate}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><div class="geo-hash-detail text-center" ng-if=vm.dsShow><span ng-click=vm.hideDSDetail(); class="close-ds-detail pull-right" role=button tabindex=0><i class="fa fa-remove"></i></span> <span ng-if=vm.axisGeohash>{{vm.axisGeohash}}<span ng-if=vm.axisTitle1>|</span> {{vm.axisTitle1}}<span ng-if=vm.axisTitle2>|</span> {{vm.axisTitle2}}</span><br><span>D: <b>{{vm.hashDetail.demand}}</b></span> <span>S: <b>{{vm.hashDetail.supply}}</b></span> <span>|</span> <span ng-click=vm.showDSGraph(); class="pointer text-primary">History</span></div><div class=geo-hash-select><form class=form-inline><div class=form-group><select name=mySelect id=mySelect class=form-control ng-options="option.label for option in vm.heatMapFilers track by option.id" ng-model=vm.selected ng-change=vm.loadHeatMap(); style="min-width: 95px"></select></div><div class=form-group><div style="max-height: 34px; overflow: hidden"><button class="btn btn-default btn-map-icon no-border"><span style="text-align: center !important">{{vm.heatMapDataLength}}</span></button> <button ng-click=vm.hideHeatmap() ng-if=vm.heatmapView title="Hide Heatmap" class="btn btn-default btn-map-icon no-border"><i class="fa fa-fire" aria-hidden=true></i></button> <button ng-click=vm.showHeatmap() ng-if=!vm.heatmapView title="Show All Heatmap" class="btn btn-map-icon no-border"><i class="fa fa-fire inverse-btn" aria-hidden=true></i></button></div></div><div class=form-group style="border-left: 1px solid #eee;border-right: 1px solid #eee; margin: 0 20px 0 10px"><div style="max-height: 34px; overflow: hidden"><button ng-click=vm.hideMarkers() ng-if=vm.markersView title="Hide Markers" class="btn btn-default btn-map-icon no-border"><i class="fa fa-map-marker" aria-hidden=true></i></button> <button ng-click=vm.showMarkers() ng-if=!vm.markersView title="Show All Markers" class="btn btn-default btn-map-icon no-border"><i class="fa fa-map-marker inverse-btn" aria-hidden=true></i></button></div></div><div class=form-group><select class=form-control ng-change=vm.onPrecisionChange() style="padding:5px 10px; border-radius: 4px; min-width: 60px" ng-model=vm.selectedPrecision ng-options="precision.name for precision  in  vm.precisionArr track by precision.value"></select><button ng-click=vm.hideShapes() ng-if=vm.shapesView title="Hide Shapes" class="btn btn-default btn-map-icon no-border"><i class="fa fa-clone" aria-hidden=true></i></button> <button ng-click=vm.showShapes() ng-if=!vm.shapesView title="Show All Shapes" class="btn btn-default btn-map-icon no-border"><i class="fa fa-clone inverse-btn" aria-hidden=true></i></button></div></form></div><ng-map click id=bidMap center=indore style="width:100%; height:100%; position:fixed" zoom={{vm.selectedPrecision.value+7}}><div class=marker-box><marker ng-repeat="data in vm.data track by $index" title={{data.id}} icon="{ url:\'assets/images/icons/marker-green.svg\', scaledSize:[30,30]}" id=free-driver-{{$index}} on-click="vm.showDetail(data,\'free-driver-\'+$index)" position="{{(data.hash.boxBounds[0][0] + data.hash.boxBounds[1][0])/2}},{{(data.hash.boxBounds[0][1] + data.hash.boxBounds[1][1])/2}}"></marker></div><div class=geo-hash-box><shape ng-repeat="data in allHash" name=rectangle editable=false draggable=false fill-color=#0000ff fill-opacity={{(data.rank)/10}} stroke-color=#0000ff stroke-weight=0.4 stroke-opacity=0.5 bounds={{data.hash.boxBounds}} clickable=true on-click=vm.showGeoHashDetail()></shape></div></ng-map><div class=ds-graph-div ng-if=dsGraph><div class=row style="padding:5% 10%"><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><span ng-click=vm.hideDSGraph(); class="close-ds-graph-div pull-right"><i class="fa fa-remove"></i></span><h4 style="margin-top: 0" class=title>History</h4></div><div class=panel-body><div><div class=row><div class="col-md-12 col-sm-12 col-xs-12 text-center"><span ng-click="vm.changeDateDS(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDateDS(\'next\')" ng-if=!vm.liveDS style="display: inline-block; padding: 7px">&#10095;</span></div></div><nvd3 options=vm.dsGraphOptions data=vm.dsGraphData config=vm.config height=50%></nvd3><div class=text-center style="padding: 10px 0"><h3 class=no-mr>{{vm.axisGeohash}}</h3><span ng-if=vm.axisTitle1>{{vm.axisTitle1}}</span><span ng-if=vm.axisTitle2><br>{{vm.axisTitle2}}</span></div></div></div></div></div></div></div><div class=card ng-show=vm.driver.profile><span class="fa fa-remove close-card" ng-click=vm.hideCard()></span><div class="view overlay hm-white-slight card-bg-img"></div><div class=card-block><h3 class=card-title>{{vm.driver.profile.name}}</h3><div><table class=table><tbody><tr><!--<td class="text-center"><i class="fa fa-user"></i></td>--><td class=text-bold width=80>ID#</td><td><a ui-sref=home.drivers_detail({driverId:vm.driver.profile.id})>{{vm.driver.profile.id}}</a></td></tr><tr><!--<td class="text-center"><i class="fa fa-mobile-phone"></i></td>--><td class=text-bold>Phone#</td><td>{{vm.driver.profile.phone}}</td></tr><tr><!--<td class="text-center"><i class="fa fa-taxi"></i></td>--><td class=text-bold>Vehicle#</td><td>{{vm.driver.profile.vehicle}}</td></tr><tr><!--<td class="text-center" width="10"><i class="fa fa-clock-o"></i></td>--><td class=text-bold>Ping</td><td>{{vm.driver.time | date:\'shortTime\'}}</td></tr><tr><!--<td class="text-center"><i class="fa fa-map-marker"></i></td>--><td class=text-bold>Location</td><td style=max-width:100px><span ng-if=vm.driver.address>{{vm.driver.address}}</span></td></tr></tbody></table></div></div></div><div class="tabs-view tabs-view-2"><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn"><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : !tabView}"><uib-tabset active=active><uib-tab index=0 heading=Drivers><div class=row><div class=col-md-12 style="min-height: 80px"><div class="pentagon available"><div class=text-center><h4>Free</h4><span>{{vm.data.length}}</span></div></div></div></div></uib-tab></uib-tabset></div></div><div class=row style="position: absolute; bottom: 0px; width: 60%; margin: 0 20%" ng-if=heatMapSlider><div class=col-md-12><div class=text-center><rzslider rz-slider-model=slider.minValue rz-slider-high=slider.maxValue rz-slider-options=slider.options></rzslider></div></div></div></div>'),
e.put("app/maps/maps.html",'<style>.navbar-fixed-top, .navbar-fixed-bottom {\n        z-index: 10;\n    }\n\n    .live {\n        background-color: rgb(48, 176, 58);\n        border-radius: 100%;\n        height: 12px;\n        line-height: 12px;\n        position: absolute;\n        right: 50px !important;\n        text-indent: 17px;\n        top: 22px;\n        width: 12px;\n        z-index: 999999999;\n        left: inherit;\n    }\n\n    .card-bg-img {\n        background: url("https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{vm.driver.profile.profileImage}}&container=focus&resize_w=200&resize_h=250&refresh=2592000"), url("assets/images/ajax-loader.gif");\n        background-color: #fff;\n        background-size: cover, 20px;\n        background-repeat: no-repeat;\n        background-position: center 20%;\n    }\n    .close-card {\n        position: absolute;\n        right: 18px;\n        top: 15px;\n    }</style><div class=content><div class=live>LIVE</div><div class=content-div><ng-map id=drivers_map center=indore style="height:100%; width:100%; position: fixed" zoom=12><div><marker ng-repeat="data in vm.data track by $index" title={{data.id}} icon="{ url:\'assets/images/icons/marker-green.svg\', scaledSize:[30,30]}" id=free-driver-{{$index}} on-click="vm.showDetail(data,\'free-driver-\'+$index)" position="{{(data.hash.boxBounds[0][0] + data.hash.boxBounds[1][0])/2}},{{(data.hash.boxBounds[0][1] + data.hash.boxBounds[1][1])/2}}"></marker></div><!--<info-window id="iw-drivers" ng-show="vm.driver.profile">--><!--<div ng-non-bindable="" >--><!--<div class="info-window">--><!--<div class="iw-wrapper">--><!--<div class="iw-header text-center">--><!--<img ng-src="{{vm.driver.profile.profile_image}}" class="iw-driver" height="50">--><!--<h3>{{vm.driver.profile.name}}</h3>--><!--</div>--><!--<div class="iw-content">--><!--<table class="table">--><!--<tbody>--><!--<tr>--><!--<td class="text-center"><i class="fa fa-clock-o"></i></td>--><!--<td>Time</td>--><!--<td>{{vm.driver.time | date:\'shortTime\'}}</td>--><!--</tr>--><!--<tr>--><!--<td class="text-center"><i class="fa fa-mobile-phone"></i></td>--><!--<td>Phone#</td>--><!--<td>{{vm.driver.profile.phone}}</td>--><!--</tr>--><!--<tr>--><!--<td class="text-center"><i class="fa fa-taxi"></i></td>--><!--<td>Vehicle#</td>--><!--<td>{{vm.driver.profile.vehicle}}</td>--><!--</tr>--><!--<tr>--><!--<td class="text-center"><i class="fa fa-user"></i></td>--><!--<td>ID#</td>--><!--<td>{{vm.driver.profile.driverId}}</td>--><!--</tr>--><!--<tr>--><!--<td class="text-center"><i class="fa fa-map-marker"></i></td>--><!--<td>Location</td>--><!--<td style="max-width:100px">--><!--<span ng-if="vm.driver.address">{{vm.driver.address}}</span>--><!--</td>--><!--</tr>--><!--</tbody>--><!--</table>--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><!--</info-window>--></ng-map><!--Card--><div class=card ng-show=vm.driver.profile><span class="fa fa-remove close-card" id=hide></span><!--Card image--><div class="view overlay hm-white-slight card-bg-img"><!--<img image-on-load ng-src="{{vm.driver.profile.profileImage}}" class="img-fluid" alt="">--></div><!--/.Card image--><!--Card content--><div class=card-block><!--Title--><h3 class=card-title>{{vm.driver.profile.name}}</h3><!--Text--><!--<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card\'s content.</p>--><div><table class=table><tbody><tr><td class=text-center><i class="fa fa-user"></i></td><td>ID#</td><td>{{vm.driver.profile.id}}</td></tr><tr><td class=text-center><i class="fa fa-mobile-phone"></i></td><td>Phone#</td><td>{{vm.driver.profile.phone}}</td></tr><tr><td class=text-center><i class="fa fa-taxi"></i></td><td>Vehicle#</td><td>{{vm.driver.profile.vehicle}}</td></tr><tr><td class=text-center width=10><i class="fa fa-clock-o"></i></td><td width=80>Time</td><td>{{vm.driver.time | date:\'shortTime\'}}</td></tr><tr><td class=text-center><i class="fa fa-map-marker"></i></td><td>Location</td><td style=max-width:100px><span ng-if=vm.driver.address>{{vm.driver.address}}</span></td></tr></tbody></table></div></div><!--/.Card content--></div><!--/.Card--><div class="tabs-view tabs-view-2"><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : !tabView}"><uib-tabset active=active><uib-tab index=0 heading=Drivers><div class=row><!--\n              <div class="col-md-4">\n                              <div class="pentagon total">\n                                <div class="text-center">\n                                  <h4>Total</h4>\n                                  <span>{{vm.allDrivers.total}}</span>\n                                </div>\n                              </div>\n                            </div>\n\n                            <div class="col-md-6">\n                              <div class="pentagon occupied">\n                                <div class="text-center">\n                                  <h4>Occupied</h4>\n                                  <span>{{vm.allDrivers.occupied.total}}</span>\n                                </div>\n                              </div>\n                            </div>\n                             --><div class=col-md-12 style="min-height: 80px"><div class="pentagon available"><div class=text-center><h4>Free</h4><span>{{vm.data.length}}</span></div></div></div></div></uib-tab></uib-tabset></div></div></div></div>'),e.put("app/offers/offers.html",'<script type=text/ng-template id=headerCheckbox.html><input type="checkbox" ng-model="vm.offerCheckboxes.checked" class="select-all" value=""/></script><script type=text/ng-template id=driverCheckbox.html><input type="checkbox" ng-model="vm.driverCheckboxes.checked" class="select-all-drivers" value=""/></script><script type=text/ng-template id=alert.html><p>Are you sure you want to delete all offers assigned to this driver?</p>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">No\n        </button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary"\n                ng-click="vm.removeAllAssignedOffers();closeThisDialog(0)">Yes\n        </button>\n    </div></script><script type=text/ng-template id=alertSingleDelete.html><p>Are you sure you want to delete this offer?</p>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">No\n        </button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary"\n                ng-click="removeSingleOffer(index,row);closeThisDialog(0)">Yes\n        </button>\n    </div></script><div class=container-fluid><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><div class=row><div class="col-md-5 col-sm-12 col-xs-12"><form class=form-inline><div class="input-group col-md-4 col-sm-6 col-xs-12 no-pd"><input type=text class=form-control id=searchOffer placeholder="Enter Offer Code" ng-model=vm.offerTxt></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-center"><button type=submit class="btn btn-search" ng-click=vm.searchOffers()><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-left"><button type=submit class="btn btn-search" ng-click=vm.clearOfferSearch()><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></div></form><div class="panel panel-default"><div class="panel-heading box-6"><h4 style="margin-top: 0" class=title>Offers</h4></div><div class=panel-body><div class=table-responsive><table ng-table=offerTableParams class="table table-bordered"><tbody><tr ng-repeat="row in $data track by $index"><td header="\'headerCheckbox.html\'"><input type=checkbox ng-model=vm.offerCheckboxes.items[row.id]></td><td data-title="\'Code\'">{{row.code}}</td><td data-title="\'Offer Detail\'">{{row.description}}</td><td data-title="\'Action\'" class=text-center><button type=submit class="btn btn-add" ng-click=" vm.addOffer(row)"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button></td></tr></tbody></table></div><button type=submit class="btn btn-default pull-right" ng-click=vm.addOffers()><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Offer(s)</button></div></div></div><div class="col-md-7 col-sm-12 col-xs-12"><form class=form-inline><div class="input-group col-md-4 col-sm-6 col-xs-12 no-pd"><input type=text class=form-control id=searchDriver placeholder="Enter keyword" ng-model=vm.driverTxt></div><div class="input-group col-md-1 col-sm-1 col-xs-12 no-pd text-center"><button type=submit class="btn btn-search" ng-click=vm.searchDrivers()><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 no-pd text-left"><button type=submit class="btn btn-search" ng-click=vm.clearDriverSearch()><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></div><div class="input-group col-md-4 col-sm-3 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div></form><div class="panel panel-default"><div class="panel-heading box-5"><h4 style="margin-top: 0" class=title>Drivers</h4></div><div class=panel-body><div class=table-responsive><table ng-table=driverTableParams class="table table-bordered"><tbody><tr ng-repeat="row in $data track by $index"><td header="\'driverCheckbox.html\'" width=30><input type=checkbox ng-model=vm.driverCheckboxes.items[row.id]></td><td data-title="\'Name\'">{{row.name}}</td><td data-title="\'Driver Info\'">{{row.phone}}, {{row.vehicle}}</td><td data-title="\'Assigned Offer(s)\'"><a ng-if=!row.offers ng-click=vm.getDriverOffers(row)>Show</a><!--<span ng-if="row.offers" ng-repeat="offer in row.offers">{{offer}}<br></span>--> <span ng-if=row.offers ng-repeat="offer in row.offers" class="label label-warning">{{offer}} <button class=label-btn ng-click=vm.openSingleAlert($index,row)>x</button></span></td><td ata-title="\'Action\'" class=text-center><button type=submit class="btn btn-add" ng-click=" vm.addDriver(row)"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button> <button type=submit class="btn btn-del" ng-click=vm.alertDeleteAllOffers(row)><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></td></tr></tbody></table></div><button type=submit class="btn btn-default pull-right" ng-click=" vm.addDrivers()"><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Driver(s)</button><div ng-if=vm.driverExistError>Driver(s) Already selected</div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Confirmation</h4></div><div class=panel-body><div class=table-responsive><table class="table table-responsive no-mr"><tr><td class=text-left>Offers</td></tr><tr><td class=text-left><span ng-if="vm.selectedOffers.length==0">No Offers Selected</span> <span ng-if="vm.selectedOffers.length>0" class="label label-warning" ng-repeat="offer in vm.selectedOffers track by $index">{{offer.code}} <button class=label-btn ng-click=vm.removeOffer($index)>x</button></span></td></tr><tr><td class=text-left><hr class=hidden-xs></td></tr></table><table class="table table-responsive no-mr"><tr><td class=text-left>Drivers</td></tr><tr><td class=text-left><span ng-if="vm.selectedDrivers.length==0">No Drivers Selected</span> <span ng-if="vm.selectedDrivers.length>0" ng-repeat="driver in vm.selectedDrivers track by $index" class="label label-info">{{driver.name}} <button class=label-btn ng-click=vm.removeDriver($index)>x</button></span></td></tr><tr ng-if="vm.selectedDrivers.length>0 || vm.selectedOffers.length>0"><td class=text-right><hr><button type=submit class="btn btn-default" ng-click=vm.clearAll()><span aria-hidden=true class="glyphicon glyphicon-remove"></span> Clear</button> <button type=submit class="btn btn-success" ng-click=vm.assignOffers()><span aria-hidden=true class="glyphicon glyphicon-ok"></span> Save</button></td></tr></table></div></div></div></div></div></div>'),e.put("app/performance/performance.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><br><br><br><br><div class="col-md-6 col-md-offset-6"><div class="flx-container flx-performance"><div class=flx-cnt-right><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-req.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_trip_request}}</h4></span><br><span>Bookings</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-suc.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_successful_trip}}</h4></span><br><span>Successful</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/new-rider.svg title=Tuktuk height=45></span><span><h4>{{ vm.riders.overview.cum_new_rider}}</h4></span><br><span>New Riders</span></div></div></div></div></div><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getTrips()" class="form-control cstm-width" type="daterange" ng-model="tripDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--   <select ng-model="vm.tripFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div></div></div><div class=row><div class=col-md-6><!---Driver---><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getDrivers()"class="form-control cstm-width" type="daterange" ng-model="driverDates" separator="/" format="DD-MMM-YY" opens="right" ranges="vm.ranges"/>\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--  <select ng-model="vm.driverFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Driver</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.driverChartOptions data=vm.drivers config=vm.config></nvd3></div></div></div></div></div></div><div class=col-md-6><!--Rider--><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getRiders()" class="form-control cstm-width" type="daterange" ng-model="riderDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!-- <select ng-model="vm.riderFrequency" class="form-control"\n                                ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency)"\n                                ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                        </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rider</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.riderChartOptions data=vm.riders config=vm.config></nvd3></div></div></div></div></div></div></div></div>'),e.put("app/riders/riders.html",'<div class=container-fluid><div class=row style="z-index:1; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class=row id=matrixChartDiv><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rider Acquisition</h4></div><div class=panel-body><div><div id=matrixChart></div></div></div></div></div></div></div>'),e.put("app/surge/surge.html",'<div class=content><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span></div></div><div class=geo-hash-select><select ng-change=vm.onPrecisionChange() style="padding:5px 10px; border-radius: 4px" ng-model=vm.selectedPrecision ng-options="precision.name for precision  in  vm.precisionArr track by precision.value"></select></div><ng-map click id=surgeMap center=indore style="width:100%; height:100%; position:fixed" zoom={{vm.selectedPrecision.value+8}}><div ng-repeat="group in vm.geohashGroups" class=geo-hash-box><shape ng-repeat="geohashItem in group.geoHashArr" name=rectangle editable=false draggable=false fill-color={{group.color}} fill-opacity=0.5 stroke-color=#000 stroke-weight=0.2 stroke-opacity=0.5 bounds={{geohashItem.boxBounds}} clickable=true on-click=vm.ShapeClicked() on-dblclick=vm.ShapeDblClicked()></shape></div></ng-map><div class="tabs-view tabs-view-2" ng-if="vm.groupCreation || vm.groupEdit"><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : !tabView}"><uib-tabset active=active><uib-tab index=0 heading=Surge><div class=row ng-if="vm.groupCreation || vm.groupEdit"><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<div class="panel panel-default ">--><!--<div class="panel-heading">--><!--<h4 style="margin-top: 0" class="title">Groups</h4>--><!--</div>--><!--<div class="panel-body">--><!--<div style="max-height: 200px; height: 80%; overflow:auto;" ng-if="vm.geohashGroups.length>0">--><!--<table class="table table-inverse table-bordered">--><!--<thead>--><!--<tr>--><!--<th width="30" class="text-center">#</th>--><!--<th>Name</th>--><!--<th width="30" class="text-center"><span class="fa fa-remove pointer"--><!--ng-click="toggle = !toggle"--><!--ng-class="{\'red\' : toggle}"></span>--><!--</th>--><!--&lt;!&ndash;  <th></th>&ndash;&gt;--><!--</tr>--><!--</thead>--><!--<tbody>--><!--<tr ng-repeat="group in vm.geohashGroups">--><!--<td class="text-center" style="color: {{group.color}}">{{$index}}</td>--><!--<td>{{group.groupTitle}}</td>--><!--<td class="text-center">--><!--<span class="fa fa-remove pointer"--><!--ng-click="vm.removeGroup(group.groupId)"></span>--><!--</td>--><!--&lt;!&ndash; <td><span ng-click="vm.editGroup(group.groupId, $index)">Edit</span></td>&ndash;&gt;--><!--</tr>--><!--</tbody>--><!--</table>--><!--</div>--><!--<div ng-if="vm.geohashGroups.length<=0">No groups available</div>--><!--</div>--><!--</div>--><!--</div>--><div class="col-md-12 col-sm-12 col-xs-12"><form role=form class=form-horizontal name=settingForm novalidate><div class=form-group><label class="col-md-12 col-sm-12 col-xs-12 text-center"><h3>TITLE</h3></label><div class="col-md-12 col-sm-12 col-xs-12"><input type=text placeholder="Group Title" name=inputGroupTitle ng-model=vm.setting.groupTitle class=form-control required><div ng-messages=settingForm.inputGroupTitle.$error ng-if=settingForm.inputGroupTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><div class=form-group><!--<label class="col-md-3 control-label">Type</label>--><div class="col-md-12 col-sm-12 col-xs-12 text-center"><label class=radio-inline><input ng-model=vm.setting.type type=radio value=x name=chargeType required ng-change=vm.setValueArr()> x</label><label class=radio-inline><input ng-model=vm.setting.type type=radio value=a name=chargeType required ng-change=vm.setValueArr()> +</label><p class=help-block></p><div ng-messages=settingForm.chargeType.$error ng-if=settingForm.chargeType.$touched><div ng-message=required>This field is required</div></div></div></div><div class=form-group><label class="col-md-6 col-sm-6 col-xs-6 text-left">Rider</label><label class="col-md-6 col-sm-6 col-xs-6 text-left">Driver</label><div class="col-md-6 col-sm-6 col-xs-6"><!--<input type="number" ng-model="vm.setting.value" placeholder="Rider" name="inputCharge"--><!--class="form-control" required>--><select class="form-control col-md-6 col-sm-6 col-xs-6" style="border-radius: 4px" ng-model=vm.setting.value ng-options="multiple.name for multiple  in  vm.multipleArrRider track by multiple.value"></select><div ng-messages=settingForm.inputCharge.$error ng-if=settingForm.inputCharge.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div><div class="col-md-6 col-sm-6 col-xs-6"><!--<input type="number" ng-model="vm.setting.driverValue" placeholder="Driver"--><!--name="inputDriverValue" class="form-control" required>--><select class="form-control col-md-6 col-sm-6 col-xs-6" style="border-radius: 4px" ng-model=vm.setting.driverValue ng-options="multiple.name for multiple  in  vm.multipleArrDriver track by multiple.value"></select><div ng-messages=settingForm.inputDriverValue.$error ng-if=settingForm.inputDriverValue.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><!--<div class="form-group">--><!--<label class="col-md-12 col-sm-12 col-xs-12" >Driver Value</label>--><!--<div class="col-sm-9">--><!--<input type="number" ng-model="vm.setting.driverValue" placeholder="Driver" name="inputDriverValue" class="form-control" required>--><!--<div ng-messages="settingForm.inputDriverValue.$error" ng-if="settingForm.inputDriverValue.$touched">--><!--<div ng-message="required">This field is required</div>--><!--</div>--><!--<p class="help-block"></p>--><!--</div>--><!--</div>--><div class="form-group time-picker"><br><br><label class="col-md-6 col-sm-6 col-xs-6">Start Time</label><label class="col-md-6 col-sm-6 col-xs-6">End Time</label><div class="col-md-6 col-sm-6 col-xs-6"><uib-timepicker ng-model=vm.setting.startTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep show-meridian=ismeridian></uib-timepicker></div><div class="col-md-6 col-sm-6 col-xs-6"><uib-timepicker ng-model=vm.setting.endTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep hour-max=23 show-meridian=ismeridian></uib-timepicker></div></div><div class=form-group><br><div class="col-md-12 col-sm-12 col-xs-12"><div class=checkbox><label><input type=checkbox ng-model=vm.setting.forceConfirm style="margin-top: 2px"> Force Confirm</label></div><p class=help-block></p></div><div class="col-md-4 col-sm-4 col-xs-12 text-center" ng-if=!vm.groupEdit><button ng-click=vm.createSurge() ng-disabled="!vm.setting.geoHashArr.length>0 || settingForm.$invalid" class="btn btn-success col-sm-12" type=submit>Save</button></div><div class="col-md-4 col-sm-4 col-xs-12 text-center" ng-if=vm.groupEdit><button ng-click=vm.createSurge() ng-disabled="!vm.setting.geoHashArr.length>0 || settingForm.$invalid" class="btn btn-success col-sm-12" type=submit>Update</button></div><div class="col-md-4 col-sm-4 col-xs-12"><a href="" ng-click=vm.onPrecisionChange() class=pull-right style="line-height: 30px">Create New</a></div><div class="col-md-4 col-sm-4 col-xs-12" ng-if=vm.setting.groupId><a href="" ng-click=vm.removeGroup(vm.setting.groupId) class=pull-right style="line-height: 30px">Delete Surge</a><!--<button --><!--class="btn btn-danger pull-right" type="button">Delete--><!--</button>--></div></div></form></div></div></uib-tab></uib-tabset></div></div></div>'),e.put("app/trips/trip_details.html",'<div class=content><div class=trip-state><span ng-if="selectedTrip.state == 20" class=text-primary style="white-space: nowrap">Requested </span><span ng-if="selectedTrip.state == 22" style="white-space: nowrap">Allocated</span> <span ng-if="selectedTrip.state == 30" style="white-space: nowrap">For Trip</span> <span ng-if="selectedTrip.state == 40" style="white-space: nowrap">At Pickup</span> <span ng-if="selectedTrip.state == 60" style="white-space: nowrap">At Destination</span> <span ng-if="selectedTrip.state == 50" class=text-info style="white-space: nowrap">In trip </span><span ng-if="selectedTrip.state == 61" class=text-success style="white-space: nowrap">Successful </span><span ng-if="selectedTrip.state == 70" class=text-warning style="white-space: nowrap">Can by Driver </span><span ng-if="selectedTrip.state == 71" class=text-warning style="white-space: nowrap">Can by Rider </span><span ng-if="selectedTrip.state == 80" style="white-space: nowrap">No Driver</span> <span ng-if="selectedTrip.state == 81" class=text-danger style="white-space: nowrap">Failed(NDA) </span><span ng-if="selectedTrip.state == 82" style="white-space: nowrap">Terminated</span><!--<span>&nbsp;|&nbsp;</span>--><!--<a href="" ng-click="confirmCancelTrip()">Cancel Trip</a>--> <span>&nbsp;|&nbsp;</span> <span ng-if=showHide><a href="" ng-click=vm.getBid();>Show Candidates</a></span> <span ng-if=!showHide><a href="" ng-click=vm.clearBid();>Clear Candidates</a></span></div><div class=content-div><ng-map id=driversMap center=indore style="width:100%; height:100%; position:fixed !important"><!--<div>--><!--<marker ng-repeat="data in data"></marker>--><!--</div>--></ng-map><div class=card ng-show=vm.editFareBox><div class=card-block><form class=form-inline><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-12 col-sm-12 col-xs-12 text-right"><span class="fa fa-remove" ng-click=vm.closeEditFareModal() style="padding: 10px 0px"></span></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-12 col-sm-12 col-xs-12"><h4 style="margin-bottom: 20px">Driver Fare (Rs. {{selectedTrip.driverFare}})</h4><p class=help-block></p></div><div class="form-group col-md-4 col-sm-4 col-xs-4"><div class=input-group><select style="min-width: 80px" class=form-control ng-change="" ng-model=vm.selectedFareType ng-options="fareType.name for fareType  in  vm.fareTypeArr track by fareType.value"></select></div></div><div class="form-group col-md-8 col-sm-8 col-xs-8"><div class=input-group style="width: 100%"><input class=form-control type=number placeholder=Fare name=inputFare ng-model=vm.inputFare></div><p class=help-block></p></div><div class="form-group col-md-12 col-sm-12 col-xs-12"><div class=input-group><select class=form-control ng-change="" ng-model=vm.selectedReason ng-options="reason.name for reason  in  vm.reasonArr track by reason.value"></select></div></div><div class="form-group col-md-12 col-sm-12 col-xs-12" ng-if="vm.selectedReason.value==5"><div class=input-group style="width: 100%"><p class="help-block text-center"></p><textarea class=form-control placeholder=Reason name=inputReason ng-model=vm.inputReason></textarea></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><hr></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-12 col-sm-12 col-xs-12"><h4 style="margin-bottom: 20px">Rider Fare (Rs. {{selectedTrip.riderFare}})</h4><p class=help-block></p></div><div class="form-group col-md-12 col-sm-12 col-xs-12"><div class=input-group style="width: 100%"><input class=form-control type=number placeholder=Tcash name=inputTcash ng-model=vm.inputTcash></div><p class=help-block><br></p></div><div class="col-md-6 col-sm-6 col-xs-6"><button type=button class="btn btn-primary" ng-click=confirmEdit()>Update</button></div><div class="col-md-6 col-sm-6 col-xs-6 text-right" style="line-height: 30px"><a class=text-right href=javascript:void(0) ng-click=vm.closeEditFareModal()>Cancel</a></div></div></div></div></form></div><!--/.Card content--></div><div class="tabs-view tabs-view-2"><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : tabView}"><uib-tabset active=active><uib-tab index=0 heading=Trip><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.requestOn)*1000 | date:"MMM dd, yyyy \'at\' hh:mm"}}</h4><span>date</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.startCode}}</h4><span>Start Code</span></div></div><div class=clearfix></div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>For Trip</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.disForTrip/1000) | number:2}} KM</h4><span>Distance</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.durForTrip) | toMinSec}}</h4><span>Duration</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.forTripspeed}}</h4><span>Speed</span></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12">&nbsp;</div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>In Trip</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.disInTrip/1000) | number:2}} KM</h4><span>Distance</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.durInTrip) | toMinSec}}</h4><span>Duration</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.inTripSpeed}}</h4><span>Speed</span></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12">&nbsp;</div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>Amount ( <a class=pointer ng-click=vm.openEditFareModal()>Edit Amount</a> )</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.driverFare}}</h4><span>driver\'s Fare</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.riderFare}}</h4><span>Rider\'s Fare</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.tcashUsed}}</h4><span>Amount <small>tCash</small></span><!-- <span>Amount Total<small> / Cash / tCash</small></span> --></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.cashback}}</h4><span>Cashback</span><!-- <span>Amount Total<small> / Cash / tCash</small></span> --></div></div><div class="col-md-12 col-sm-12 col-xs-12" ng-if="selectedTrip.fareSettled.length>0"><div class="table-responsive trip-detail-table"><table ng-table=tableParams class="table table-bordered"><tr class=truncate ng-repeat="row in selectedTrip.fareSettled"><td data-title="\'Date\'" class=text-left>{{(row.updatedOn)*1000 | date:"dd.MM.yy h:mma"}}</td><td data-title="\'Driver Fare\'" class=text-right>{{row.driverChangeFare}}</td><td data-title="\'Reason\'" class=text-left>{{row.fareChangeReason}}</td><td data-title="\'Rider Cashback\'" class=text-right>{{row.riderCashback}}</td><td data-title="\'By\'" class=text-left>{{row.updatedBy}}</td></tr></table></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><br><hr style=margin:0></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.waitingTime) | toMinSec}}</h4><span>Waiting Time</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{getTimeDiff(selectedTrip.requestOn,\n                                            selectedTrip.pickupOn ) |\n                                            secondsToDateTime}} / {{getTimeDiff(selectedTrip.pickupOn\n                                            ,selectedTrip.dropOn)|\n                                            secondsToDateTime}}</h4>\n                                        <span>Time for Trip / in Trip</span>\n                                    </div>\n                                </div> --><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">&nbsp;</small></h4>\n                                        <span>Time allocated</span>\n                                    </div>\n                                </div>\n                                <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.atPickupOn*1000 | date: "h:mma"}}</small></h4>\n                                        <span>At Pickup</span>\n                                    </div>\n                                </div> --><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.pickupOn ? (selectedTrip.pickupOn *1000 | date:"h:mma ") : \'N/A\'}} / {{selectedTrip.dropOn ? (selectedTrip.dropOn *1000| date:"h:mma ") : \'N/A\'}}</h4><span>Start Time / End Time</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderFeedback | number:2}} / {{selectedTrip.driverFeedback | number:2}}</h4><span>Rider\'s / driver\'s Feedback</span></div></div><!--<div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.driverFeedback | number:2}}</h4>\n                                        <span>driver\'s Feedback</span>\n                                    </div>\n                                </div>\n\n                                 <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">Rs.{{selectedTrip.driverFare}}</small></h4>\n                                        <span>Amount</span>\n                                    </div>\n                                </div> --><div class="col-md-8 col-sm-8 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riSurge}} / {{selectedTrip.drSurge}}</h4><span>Priority Pricing (rider/driver)</span></div></div></div></div></uib-tab><uib-tab index=0 heading=Driver ng-if=selectedTrip.driverInfo.id><div class="row tripInfo-driver-tab"><div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd"><div class="box box-heading box-0 text-center" ng-class="{\'box-online\': selectedTrip.driverInfo.state== 22 || selectedTrip.driverInfo.state== 11, \'box-offline\': selectedTrip.driverInfo.state== 10 } "><img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{selectedTrip.driverInfo.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class=iw-driver height=50><!--  <h4 class="title" style="margin-top:10px;">{{selectedTrip.driverInfo.name}}</h4> --></div></div><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number><a style="color: #aaa; font-size: 20px" target=_blank ui-sref=home.drivers_detail({driverId:selectedTrip.driverInfo.id})>{{selectedTrip.driverInfo.id}}</a></h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.name}}</h4><span>Name</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.phone}}</h4><span>phone</span></div></div><div class="col-md-8 col-sm-12 col-xs-12"><div class=box><h4 class="number email">{{selectedTrip.driverInfo.email ? selectedTrip.driverInfo.email:\'-\'}}</h4><span>Email</span></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.model.model}}</h4><span>Device</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.driverInfo.joinedOn)*1000 | date:"MMM dd, yyyy"}}</h4><span>joined On</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.rating | number:2}}</h4><span>feedback</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.ridesTotal}}</h4><span>Total Rides</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.driverInfo.ridesToday}}\n                                        </h4>\n                                        <span>Today\'s Ride</span>\n                                    </div>\n                                </div> --></div></div></uib-tab><uib-tab index=0 heading=Rider><div class=row><!-- <div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd">\n                                <div class="box box-heading box-0 text-center" ng-class="{\'box-online\': selectedTrip.riderInfo.state== 22 || selectedTrip.riderInfo.state== 11, \'box-offline\': selectedTrip.riderInfo.state== 10 } ">\n                                    <img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{selectedTrip.riderInfo.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class="iw-driver" height="50">\n                                    <h4 class="title" style="margin-top:10px;">{{selectedTrip.riderInfo.name}}</h4>\n                                </div>\n                            </div> --><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.name}}</h4><span>Name</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.phone}}</h4><span>phone</span></div></div><div class="col-md-12 col-sm-4 col-xs-12"><div class=box><h4 class="number email">{{selectedTrip.riderInfo.email ? selectedTrip.riderInfo.email:\'-\'}}</h4><span>Email</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.riderInfo.joinedOn)*1000 | date:"MMM dd, yyyy"}}</h4><span>joined On</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.ridesTotal}}</h4><span>Total Rides</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                     <div class="box">\n                                         <h4 class="number">{{selectedTrip.riderInfo.ridesToday}}\n                                         </h4>\n                                         <span>Today\'s Ride</span>\n                                     </div>\n                                 </div>\n                                  <div class="col-md-3 col-sm-4 col-xs-12">\n                                     <div class="box">\n                                         <h4 class="number">{{selectedTrip.driverInfo.avg | number:2}}</h4>\n                                         <span>feedback</span>\n                                     </div>\n                                 </div> --></div></div></uib-tab></uib-tabset></div></div></div></div>'),
e.put("app/trips/trip_search.html",'<style>.search-btn-trip {\n        position: fixed;\n        right: 9px;\n        top: 12px;\n        z-index: 91;\n    }</style><div class=search-btn-trip><form class=form-inline><div class=form-group><div style="max-height: 34px; overflow: hidden"><a ui-sref=home.trips() title="Show All Shapes" class="btn btn-default no-border"><i class="fa fa-arrow-left" aria-hidden=true></i></a></div></div></form></div><div class=container-fluid><br><br><br><br><div class=row><div class="col-md-8 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-body><form class="form-inline no-mr"><div class="input-group col-md-1"><h4>Search</h4></div><div class="input-group col-md-4"><select ng-model=vm.filterTerm class=form-control ng-options="filterFields.name for filterFields in vm.filterFields"><option value="" disabled=disabled>Search By</option></select></div><div class="input-group col-md-4"><input ng-model=vm.searchTerm class=form-control placeholder=term ng-change=vm.checkMinChr()></div><div class="input-group col-md-1"><button ng-disabled=!vm.enblBtn ng-click=vm.searchTable() class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div></form></div></div></div><div class="col-md-4 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-body><form class="form-inline no-mr"><div class="input-group col-md-1"><h4>Filter</h4></div><div class="input-group col-md-10 pull-right"><select ng-model=vm.statusCodes ng-change=vm.getResult() class=form-control ng-options="statusFilter.name for statusFilter in vm.tripStatusFilters"><option value="" disabled=disabled>Select Status</option></select></div></form></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default" style=min-height:10px><div class=panel-heading><div class="pull-right daterangepicker-leaderboard-box"><input ng-change=vm.getResult() class="form-control cstm-width text-center daterangepicker-leaderboard" type=daterange ng-model=datesForSearch separator=" - " format="DD MMM YY" opens=left ranges=vm.ranges></div><h4 style="margin-top: 0" class=title>Results</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered" ng-show=vm.showTableData><tr class=truncate ng-repeat="row in $data track by $index" ng-click=vm.setSelected(row.id) ng-class="{selected : row.id === vm.selectedRow}"><td data-title="\'Date\'" sortable="\'requestOn\'" style="width: 145px"><a target=_blank ui-sref="home.trip_detail({id: row.id})">{{row.id}}</a></td><td data-title="\'Date\'" sortable="\'requestOn\'" style="width: 145px"><a target=_blank ui-sref="home.trip_detail({id: row.id})">{{(row.requestOn)*1000 | date:"dd MMM yy"}}</a></td><td data-title="\'Status\'" sortable="\'tripState\'"><div ng-if="row.tripState == 20" class=text-primary style="white-space: nowrap">Requested</div><div ng-if="row.tripState == 22" style="white-space: nowrap">Allocated</div><div ng-if="row.tripState == 30" style="white-space: nowrap">For Trip</div><div ng-if="row.tripState == 40" style="white-space: nowrap">At Pickup</div><div ng-if="row.tripState == 60" style="white-space: nowrap">At Destination</div><div ng-if="row.tripState == 50" class=text-info style="white-space: nowrap">In trip</div><div ng-if="row.tripState == 61" class=text-success style="white-space: nowrap">Successful</div><div ng-if="row.tripState == 70" class=text-warning style="white-space: nowrap">Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning style="white-space: nowrap">Can by Rider</div><div ng-if="row.tripState == 80" style="white-space: nowrap">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger style="white-space: nowrap">Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82" style="white-space: nowrap">Terminated</div></td><td data-title="\'Driver\'"><a target=_blank ui-sref=home.drivers_detail({driverId:row.driverInfo.id})>{{row.driverInfo.name}}</a></td><td data-title="\'Rider\'">{{row.riderInfo.name}}</td><td data-title="\'Driver Fare\'" class=text-right><div>{{row.amount.driverFare | number:2}}<br></div></td><td data-title="\'Rider Fare\'" class=text-right><div>{{row.amount.riderFare | number:2}}</div></td><td data-title="\'tCASH\'" class=text-right><div>{{row.amount.tcash | number:2}}</div></td><td data-title="\'Request On\'" class=text-right><div>{{(row.requestOn)*1000 | date:"h:mma"}}</div></td><!--<td data-title="\'Time\'" sortable="\'time\'">--><!--<div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div>--><!--</td>--><!--<td data-title="\'Dist(KM)\'" sortable="\'disPickupDrop\'" align="center">--><!--<div>{{(row.disPickupDrop)/1000 | number:2}}</div>--><!--</td>--></tr></table></div></div></div><div class="alert alert-warning fade in" ng-show=!vm.showTableData><strong>oops!</strong> no result found.</div></div></div></div>'),e.put("app/trips/trips.html",'<style>.panel {\n        min-height: 550px;\n    }\n\n    .search-btn-trip {\n        position: fixed;\n        right: 9px;\n        top: 12px;\n        z-index: 91;\n    }</style><div class=search-btn-trip><form class=form-inline><div class=form-group><div style="max-height: 34px; overflow: hidden"><a ui-sref="home.search({city: city, vehicleType: vehicleType, startDate:vm.startDateURL, endDate:vm.endDateURL})" title="Show All Shapes" class="btn btn-default no-border"><i class="fa fa-search" aria-hidden=true></i></a></div></div></form></div><div class=container-fluid><!--<div class="row">--><!--<form class="form-inline date-selection date-selection-dr">--><!--<div class="form-group ">--><!--<input ng-change=" vm.onDateChange()" class="form-control cstm-width text-center" type="daterange"--><!--ng-model="tripDates" separator=" - " format="DD MMM YY" opens="right" ranges="vm.ranges">--><!--</div>--><!--</form>--><!--<span class="reload" ng-click="vm.refreshPage()"><i class="fa fa-refresh" aria-hidden="true"></i></span>--><!--</div>--><br><br><br><br><br><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><form class="form-inline pull-right"><div class=form-group><!--<div class="radio inpt-style">--><!--<label><input type="radio" ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)"--><!--name="optradio" ng-model="vm.tripFrequency.value" value="hour"><i></i> <span>Per Hour</span></label>--><!--<label><input type="radio" ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)"--><!--name="optradio" ng-model="vm.tripFrequency.value" value="day"> <i></i> <span>Per Day</span></label>--><!--</div>--> <input ng-change=vm.onDateChangeTrips() class="form-control text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges style="margin: -1px -2px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><nvd3 options=vm.tripChartOptions data=vm.tripData config=vm.config></nvd3></div></div></div><!--<div class="col-md-6 col-sm-12 col-xs-12">--><!--<div class="panel panel-default">--><!--<form class="form-inline pull-right">--><!--<div class="form-group ">--><!--<input--><!--ng-change="vm.onDateChangeTcash()"--><!--class="form-control text-center"--><!--type="daterange"--><!--ng-model="tripDates"--><!--separator=" - "--><!--format="DD MMM YY"--><!--opens="right"--><!--ranges="vm.ranges"--><!--style="margin: 8px 10px 0px 0px !important;--><!--padding: 0px;--><!--height: 20px;--><!--width: auto; font-size: 11px;">--><!--</div>--><!--</form>--><!--<div class="panel-heading">--><!--<h4 style="margin-top: 0" class="title">tCash Burned</h4></div>--><!--<div class="panel-body">--><!--<nvd3 options="vm.tcashChartOptions" data="vm.tcashData" config="vm.config"></nvd3>--><!--</div>--><!--</div>--><!--</div>--><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><form class="form-inline pull-right"><div class=form-group><input ng-change=vm.onDateChangeRide() class="form-control text-center" type=daterange ng-model=rideDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges style="margin: -1px -2px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=pull-right style="position: absolute; right: 28px; top: 3px" ng-if=""><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094; </span><span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}} </span><span ng-click="vm.changeDate(\'next\')" ng-show=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div><h4 style="margin-top: 0" class=title>Fulfillment</h4></div><div class=panel-body><div><nvd3 options=vm.newRidersChartOptions data=vm.newRiders config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 cancelled-trip-quad1"><div class="panel panel-default"><form class="form-inline pull-right"><div class=form-group><input ng-change=vm.onDateChangeTripsCancelled() class="form-control text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges style="margin: 8px 10px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Cancelled Trips</h4></div><div class=panel-body><div class="col-md-6 col-sm-6 col-xs-12"><h5>Driver {{totalCanDriver}}</h5><nvd3 options=vm.cancelTripByDriverChartOptions data=vm.cancelledTripByDriver config=vm.config></nvd3></div><div class="col-md-6 col-sm-6 col-xs-12"><h5>Rider {{totalCanRider}}</h5><nvd3 options=vm.cancelTripByRiderChartOptions data=vm.cancelledTripByRider config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right no-mr pd-2-"><div class=form-group><input ng-change=vm.onDateChangeBurn() class="form-control text-center" type=daterange ng-model=burnDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges style="margin: 8px 10px 0px 0px !important;\n                                        padding: 0px;\n                                        height: 20px;\n                                        width: auto; font-size: 11px"></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Burn</h4></div><div class=panel-body><nvd3 options=vm.burnChartOptions data=vm.burnData config=vm.config></nvd3></div></div></div></div></div>'),e.put("app/components/navbar/navbar.html","")}]);
//# sourceMappingURL=../maps/scripts/app-165e44ff9a.js.map
