function TripsService(e,t,i){var s=i;return t("",{frequency:"@frequency",vehicle:"@vehicle",id:"@id"},{getAllTrips:{method:"GET",url:s+"trips"},getTripDetail:{method:"GET",url:s+"tripinfo/:id",isArray:!1},getRiders:{method:"GET",url:s+"rider/:frequency/:vehicle",isArray:!0},getTCash:{method:"GET",url:s+"trips/tcash",isArray:!0},getBidDetail:{method:"GET",url:s+"trip/bid/drivers/:id",isArray:!0},getProfile:{method:"GET",url:s+"drivers/profile/:id",isArray:!1}})}function SurgeService(e,t,i){var s=i;return t("",{id:"@id"},{getGroups:{method:"GET",url:s+"surge/group/",isArray:!0},createGroup:{method:"POST",url:s+"surge/create/group/"},updateSurgeForGroup:{method:"POST",url:s+"surge/apply"},createSurge:{method:"POST",url:s+"surge/create",isArray:!0},removeGroup:{method:"DELETE",url:s+"surge/delete/group/:id/indore/auto"},updateGroup:{method:"PUT",url:s+"surge/edit/group",isArray:!0},getGroupSetting:{method:"GET",url:s+"surge/apply/group/:id"}})}function RidersService(e,t,i){var s=i;return t("",{id:"@id"},{getRiders:{method:"GET",url:s+"trips/riderChart",isArray:!0}})}function PerformanceService(e,t,i,s){var a=i;return t("",{frequency:"@frequency",vehicle:"@vehicle"},{getTrips:{method:"GET",url:a+"trip/:frequency/:vehicle",isArray:!0},getDrivers:{method:"GET",url:a+"driver/:frequency/:vehicle",isArray:!0},getRiders:{method:"GET",url:a+"rider/:frequency/:vehicle",isArray:!0}})}function PerformanceHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Requests",values:[]},{key:"Requests (U)",values:[]},{key:"Cancelled",values:[]},{key:"Cancelled (U)",values:[]},{key:"Fulfilled",values:[]},{key:"Fulfilled (U)",values:[]},{key:"Cancelled trips (by rider)",values:[]},{key:"Cancelled trips (by driver)",values:[]},{key:"tCash",values:[]},{key:"Failed",values:[]},{key:"Failed (U)",values:[]}],e.filteredDrivers=[{key:"New Drivers",values:[]},{key:"Active Drivers",values:[]},{key:"Avg Trip/Driver",values:[]}],e.filteredRiders=[{key:"New Riders",values:[]},{key:"Active Riders",values:[]},{key:"Total Riders",values:[]}],e.getTrips=function(t){var i=[],s=[],a=[],r=[],n=[],l=[],o=[],c=[],d=[],u=[],p=[];return _.each(t,function(t){var h=e.getLongDate(t.id);i.push([h,t.requests.total]),s.push([h,t.requests.unique_riders]),a.push([h,t.cancelled.total]),r.push([h,t.cancelled.unique]),n.push([h,t.success.total]),l.push([h,t.success.unique_riders]),o.push([h,t.cancelled.cancelled_by_riders]),c.push([h,t.cancelled.cancelled_by_drivers]),u.push([h,t.failed.total]),p.push([h,t.failed.unique_riders]),d.push([h,t.tcash_used])}),e.filteredTrips[0].values=i,e.filteredTrips[1].values=s,e.filteredTrips[2].values=a,e.filteredTrips[3].values=r,e.filteredTrips[4].values=n,e.filteredTrips[5].values=l,e.filteredTrips[6].values=o,e.filteredTrips[7].values=c,e.filteredTrips[8].values=d,e.filteredTrips[9].values=u,e.filteredTrips[10].values=p,e.filteredTrips},e.getDrivers=function(t){var i=[],s=[],a=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.total_offline]),s.push([r,t.total_online]),a.push([r,t.average_rides_per_driver])}),e.filteredDrivers[0].values=i,e.filteredDrivers[1].values=s,e.filteredDrivers[2].values=a,e.filteredDrivers},e.getRiders=function(t){var i=[],s=[],a=[];return _.each(t,function(t){var r=e.getLongDate(t.id);i.push([r,t.newly_reg_riders]),s.push([r,t.active_riders]),a.push([r,t.total_riders])}),e.filteredRiders[0].values=i,e.filteredRiders[1].values=s,e.filteredRiders[2].values=a,e.filteredRiders},e.getLongDate=function(e){var t=e,i=t.substring(0,4),s=t.substring(4,6),a=t.substring(6,8),r=t.substring(8,10),n=new Date(i,s-1,a,r);return n},e}function OfferService(e,t,i,s){var a=i;return t("",{id:"@id"},{getOffers:{method:"GET",url:a+"offers",isArray:!1},getDrivers:{method:"GET",url:a+"drivers/list",isArray:!1},getDriverOffers:{method:"GET",url:a+"offers/driver/:id",isArray:!1},assignOffers:{method:"POST",url:a+"drivers/offers",isArray:!1}})}function MapService(e,t,i,s){var a=i;return t("",{id:"@id",precision:"@precision"},{getDrivers:{method:"GET",url:a+"map/driver"},loadGeoJson:{method:"GET",url:s+"geofence"},registerList:{method:"GET",url:a+"drivers/registered",isArray:!0},inprocessList:{method:"GET",url:a+"drivers/inprocess"},deleteInProcessDriver:{method:"DELETE",url:a+"drivers/:id"},getDemandSupply:{method:"GET",url:a+"supply/demand/indore/auto/:precision",isArray:!0},getGroups:{method:"GET",url:a+"surge/group/",isArray:!0}})}function LoginService(e,t,i,s){var a=i,r=s;return t("",{id:"@id"},{doLogin:{method:"POST",url:r+"login"},logout:{method:"GET",url:a+"logout"}})}function LiveService(e,t,i){var s=i;return t("",{},{getOverview:{method:"GET",url:s+"overview/live/"},getTrips:{method:"GET",url:s+"trip/live/"},getDrivers:{method:"GET",url:s+"driver/live/"},getCancelTripsDriver:{method:"GET",url:s+"drivers/cancelled"},getCancelTripsRider:{method:"GET",url:s+"riders/cancelled"},getRiders:{method:"GET",url:s+"rider/live/"},getNewRiders:{method:"GET",url:s+"trips/newRiders",isArray:!0},heatmap:{method:"GET",url:s+"trips/heatmap",isArray:!0}})}function LiveHandler(){var e={};return e.trips=[],e.drivers=[],e.riders=[],e.filteredTrips=[{key:"Total Booking",values:[]},{key:"Total Successful Booking",values:[]},{key:"Unique Successful Booking",values:[]},{key:"In-Progress",values:[]},{key:"Total Cancelled",values:[]},{key:"Unique Cancelled",values:[]},{key:"Total Failed",values:[]},{key:"Unique Failed",values:[]}],e.filteredDrivers=[{key:"Total Drivers",values:[]},{key:"Free Drivers",values:[]},{key:"Occupied Driver",values:[]}],e.filteredRiders=[{key:"Total Riders",values:[]},{key:"New Riders",values:[]}],e.getTrips=function(){var t=[],i=[],s=[],a=[],r=[],n=[],l=[],o=[];return _.each(e.trips,function(c){var d=e.getLongDate(c.id);t.push([d,c.booking]),i.push([d,c.successful.total]),s.push([d,c.successful.unique_riders]),a.push([d,c.in_process]),r.push([d,c.cancelled.total]),n.push([d,c.cancelled.unique_riders]),l.push([d,c.failed.total]),o.push([d,c.failed.unique_rider])}),e.filteredTrips[0].values=t,e.filteredTrips[1].values=i,e.filteredTrips[2].values=s,e.filteredTrips[3].values=a,e.filteredTrips[4].values=r,e.filteredTrips[5].values=n,e.filteredTrips[6].values=l,e.filteredTrips[7].values=o,e.filteredTrips},e.getDrivers=function(){var t=[],i=[],s=[];return _.each(e.drivers,function(a){var r=e.getLongDate(a.id);t.push([r,a.total_count]),i.push([r,a.free_driver]),s.push([r,a.occupied_driver])}),e.filteredDrivers[0].values=t,e.filteredDrivers[1].values=i,e.filteredDrivers[2].values=s,e.filteredDrivers},e.canTripDriver=function(t){e.cancelledTripsDriver1=[];return _.each(t.drcan.data,function(t){e.cancelledTripsDriver1.push({label:t.reason_code,value:t.count})}),e.cancelledTripsDriver1},e.canTripRider=function(t){e.cancelledTripsRider1=[];return _.each(t.rican.data,function(t){e.cancelledTripsRider1.push({label:t.reason_code,value:t.count})}),e.cancelledTripsRider1},e.getRiders=function(){var t=[],i=[];return _.each(e.riders,function(s){var a=e.getLongDate(s.id);t.push([a,s.total_riders]),i.push([a,s.new_rider_reg])}),e.filteredRiders[0].values=t,e.filteredRiders[1].values=i,e.filteredRiders},e.getLongDate=function(e){var t=e,i=t.substring(0,4),s=t.substring(4,6),a=t.substring(6,8),r=t.substring(8,10),n=new Date(i,s-1,a,r);return n},e}function InitChart(){var e=[{x:1,y:5},{x:20,y:20},{x:40,y:10},{x:60,y:40},{x:80,y:5},{x:100,y:60}],t=d3.select("#visualisation"),i=1e3,s=500,a={top:20,right:20,bottom:20,left:50},r=d3.scale.linear().range([a.left,i-a.right]).domain([d3.min(e,function(e){return e.x}),d3.max(e,function(e){return e.x})]),n=d3.scale.linear().range([s-a.top,a.bottom]).domain([d3.min(e,function(e){return e.y}),d3.max(e,function(e){return e.y})]),l=d3.svg.axis().scale(r).tickSize(5).tickSubdivide(!0),o=d3.svg.axis().scale(n).tickSize(5).orient("left").tickSubdivide(!0);t.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+(s-a.bottom)+")").call(l),t.append("svg:g").attr("class","y axis").attr("transform","translate("+a.left+",0)").call(o);var c=d3.svg.line().x(function(e){return r(e.x)}).y(function(e){return n(e.y)}).interpolate("linear");t.append("svg:path").attr("d",c(e)).attr("stroke","blue").attr("stroke-width",2).attr("fill","none")}function DriversService(e,t,i){var s=i;return t("",{id:"@id"},{getTopDrivers:{method:"GET",url:s+"drivers/topdrivers",isArray:!0},getAcquisition:{method:"GET",url:s+"drivers/acquisition",isArray:!0},getProfile:{method:"GET",url:s+"drivers/profile/:id",isArray:!1},getTrips:{method:"GET",url:s+"drivers/:id/trips",isArray:!1}})}function AlertService(e,t,i){var s=i;return t("",{},{sendNotification:{method:"POST",url:s+"notification"},getNotification:{method:"GET",url:s+"notification",isArray:!0}})}function PunchCardFunc(){return{restrict:"EA",scope:{title:"@",data:"="},link:function(e,t,i){var s={};s.element=t,s.data=[[{key:"Type A",value:"a"},{key:"Type b",value:"b"}],[{key:"RA",value:"ra"},{key:"RB",value:"ra"}]];new D3punchcard(s).draw({width:t.offsetWidth})}}}function UserService(e,t,i,s,a){this.user,this.setUser=function(e){this.user=e,t.putObject("tuktuk.performance.admin",this.user),s.isAuthenticated=!0},this.getUser=function(){return null!=this.user?this.user:(this.user=t.getObject("tuktuk.performance.admin"),(void 0==this.user||"undefined"==this.user)&&(this.user=null),this.user)},this.clearUser=function(){this.user=null,t.remove("tuktuk.performance.admin"),e.defaults.headers.common.Authorization=""}}function StaticDataService(e,t,i){var s={};return s.cities=[{name:"Indore",value:"indore"},{name:"Bhopal",value:"bhopal"}],s.vehicleTypes=[{name:"Auto",value:"auto"},{name:"Bike",value:"bike"}],s.ranges={Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},s.getRandomColor=function(){for(var e="0123456789ABCDEF".split(""),t="#",i=0;6>i;i++)t+=e[Math.floor(16*Math.random())];return t},s}function ChartConfigService(e,t,i,s){var a={};return Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},a.lineChartConfig={refreshDataOnly:!1},a.lineChartOptions={chart:{type:"lineChart",height:"400",zoom:{enabled:!0},interpolate:"basis",legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0}},legendPosition:"top",margin:{top:0,right:20,bottom:100,left:50},x:function(e){return e[0]},y:function(e){return e[1]},color:d3.scale.category10().range(),duration:300,useInteractiveGuideline:!0,clipVoronoi:!1,showYAxis:!0,xAxis:{tickSize:"10",rotateLabels:"-90",tickFormat:function(e){return d3.time.format("%d %b %I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1,axisLabelDistance:0},x2Axis:{axisLabel:"Date",tickFormat:function(e){return d3.time.format("%I %p")(new Date(e))},showMaxMin:!0,staggerLabels:!1},yAxis:{axisLabel:"Trips",tickFormat:function(e){return d3.round(e)},showMaxMin:!0,axisLabelDistance:200}}},a.discreteBarChartOptions={chart:{type:"discreteBarChart",height:450,zoom:{enabled:!0},legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0}},legendPosition:"top",margin:{top:30,right:50,bottom:180,left:55},x:function(e){return e.label},y:function(e){return e.value},showValues:!0,valueFormat:function(e){return d3.round(e)},duration:500,xAxis:{axisLabel:"",rotateLabels:"-90"},yAxis:{axisLabel:"",axisLabelDistance:-10,tickFormat:function(e){return d3.round(e)}}}},a.multiBarChartOptions={chart:{type:"multiBarChart",height:400,margin:{top:30,right:50,bottom:100,left:55},legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:0,bottom:30,left:0}},legendPosition:"top",text:"Credit Recovery",x:function(e){return e.x},y:function(e){return e.y},stacked:!0,showControls:!1,clipEdge:!0,transitionDuration:1e3,useInteractiveGuideline:!1,xAxis:{rotateLabels:"-90",ticks:d3.time.months,tickFormat:function(e){return d3.time.format("%d %b %y")(new Date(e))},showMaxMin:!1},yAxis:{tickFormat:function(e){return d3.round(e)}}}},a.linePlusBarChartOptions={chart:{type:"linePlusBarChart",height:400,focusEnable:!1,legend:{vers:"classic",maxKeyLength:400,margin:{top:5,right:100,bottom:30,left:0}},legendPosition:"left",margin:{top:30,right:75,bottom:100,left:75},bars:{forceY:[0]},color:["#ff7f0e","#e377c2"],x:function(e,t){return t},xAxis:{rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=$scope.data[0].values[e]&&$scope.data[0].values[e].x||0;return t>0?d3.time.format("%x")(new Date(t)):null}}}},a.pieChartOptions={chart:{type:"pieChart",height:420,x:function(e){return e.label},y:function(e){return e.value},showLabels:!1,duration:500,labelThreshold:.01,labelSunbeamLayout:!0,legend:{margin:{top:5,right:5,bottom:5,left:0},height:200}}},a}TripsService.$inject=["$q","$resource","API"],SurgeService.$inject=["$q","$resource","API"],RidersService.$inject=["$q","$resource","API"],PerformanceService.$inject=["$q","$resource","API","StaticDataService"],OfferService.$inject=["$q","$resource","API","AUTH_API"],MapService.$inject=["$q","$resource","API","AUTH_API"],LoginService.$inject=["$q","$resource","API","AUTH_API"],LiveService.$inject=["$q","$resource","API"],DriversService.$inject=["$q","$resource","API"],AlertService.$inject=["$q","$resource","API"],UserService.$inject=["$http","$cookies","$resource","$rootScope","API"],StaticDataService.$inject=["$q","$resource","API"],ChartConfigService.$inject=["$q","$resource","API","PerformanceHandler"],function(){"use strict";angular.module("tuktukV2Dahboard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMap","ngDialog","ui.bootstrap","toastr","ngTable","rzModule","ngBootstrap","nvd3","httpInterceptor","ui-rangeSlider","angularjs-dropdown-multiselect","angularScreenfull","angular-geohash","angular-confirm"])}(),function(){"use strict";function e(){function e(){return t}var t=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"}];this.getTec=e}angular.module("tuktukV2Dahboard").service("webDevTec",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.relativeDate=e(t.creationDate).fromNow()}e.$inject=["moment"];var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("tuktukV2Dahboard").directive("acmeNavbar",e)}(),function(){"use strict";function e(e){function t(t,i,s,a){var r,n=e(i[0],{typeSpeed:40,deleteSpeed:40,pauseDelay:800,loop:!0,postfix:" "});i.addClass("acme-malarkey"),angular.forEach(t.extraValues,function(e){n.type(e).pause()["delete"]()}),r=t.$watch("vm.contributors",function(){angular.forEach(a.contributors,function(e){n.type(e.login).pause()["delete"]()})}),t.$on("$destroy",function(){r()})}function i(e,t){function i(){return s().then(function(){e.info("Activated Contributors View")})}function s(){return t.getContributors(10).then(function(e){return a.contributors=e,a.contributors})}var a=this;a.contributors=[],i()}i.$inject=["$log","githubContributor"];var s={restrict:"E",scope:{extraValues:"="},template:"&nbsp;",link:t,controller:i,controllerAs:"vm"};return s}e.$inject=["malarkey"],angular.module("tuktukV2Dahboard").directive("acmeMalarkey",e)}(),function(){"use strict";function e(e,t){function i(i){function a(e){return e.data}function r(t){e.error("XHR Failed for getContributors.\n"+angular.toJson(t.data,!0))}return i||(i=30),t.get(s+"/contributors?per_page="+i).then(a)["catch"](r)}var s="https://api.github.com/repos/Swiip/generator-gulp-angular",a={apiHost:s,getContributors:i};return a}e.$inject=["$log","$http"],angular.module("tuktukV2Dahboard").factory("githubContributor",e)}(),function(){"use strict";function e(e,t,i,s,a,r){function n(){s.getTripDetail({id:i.id},function(t){e.selectedTrip=t,l.snapCodesFor=e.selectedTrip.forTripSnapCode,l.snapCodesIn=e.selectedTrip.inTripSnapCode,l.initialize()},function(t){console.log(t),e.error=!0}),l.initialize=function(){function t(e,t,i){t=Math.pow(10,-t);for(var s=e.length,a=0,r=0,n=0,l=[],o=[];s>a;){var c,d=0,u=0;do c=e.charCodeAt(a++)-63,u|=(31&c)<<d,d+=5;while(c>=32);var p=1&u?~(u>>1):u>>1;r+=p,d=0,u=0;do c=e.charCodeAt(a++)-63,u|=(31&c)<<d,d+=5;while(c>=32);var h=1&u?~(u>>1):u>>1;n+=h,l.push(r*t),o.push(n*t)}i({lat:_.first(l),lon:_.first(o)},{lat:_.last(l),lon:_.last(o)})}var i=l.snapCodesFor,s=l.snapCodesIn,a=new google.maps.LatLng(22.717081666666665,75.87155666666666),r={zoom:14,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("driversMap"),r),o=google.maps.geometry.encoding.decodePath(i),c=google.maps.geometry.encoding.decodePath(s),d=(new google.maps.Polyline({path:o,strokeColor:"red",strokeOpacity:1,strokeWeight:3,map:n}),new google.maps.Polyline({path:c,strokeColor:"#8A87FC",strokeOpacity:1,strokeWeight:6,map:n}),{url:"assets/images/icons/marker-green.svg",scaledSize:new google.maps.Size(30,30)}),u={url:"assets/images/icons/marker-green.svg",scaledSize:new google.maps.Size(40,40)},p={url:"assets/images/icons/spacer.gif",scaledSize:new google.maps.Size(1,1)},h={url:"assets/images/icons/pickup.png",scaledSize:new google.maps.Size(20,20)},m={url:"assets/images/icons/drop.png",scaledSize:new google.maps.Size(20,20)},v={url:"assets/images/icons/marker-orange.svg",scaledSize:new google.maps.Size(30,30)},g=[],f=[],b=[],y=0;for(e.bidConstants={0:"Reject",1:"Accept","-2":"Low_ Battery","-1":"Offline",2:"Delivered","-3":"Unknown","-4":"Retry Failed"},y=0;y<(e.totalBid||[]).length;y++)(e.selectedTrip.driverInfo||{}).id===e.totalBid[y].dr?g[y]=new google.maps.Marker({position:new google.maps.LatLng(e.totalBid[y].lt,e.totalBid[y].ln),map:n,title:"Bid"+[y],icon:d}):g[y]=new google.maps.Marker({position:new google.maps.LatLng(e.totalBid[y].lt,e.totalBid[y].ln),map:n,title:"Bid"+[y],icon:v}),g[y].index=y,f[y]='<div class="popup_container"><div class="col-md-12 col-sm-12 col-xs-12"><h4 class="number ng-binding" style="margin: 14px 0 0 0;">'+e.selectedTripBid[y].name+'</h4><span>Name</span></div><div class="col-md-12 col-sm-12 col-xs-12"><h4 class="number ng-binding" style="margin: 14px 0 0 0;">'+e.bidConstants[e.selectedTripBid[y].bid]+"</h4><span>Bid</span><br></div></div>",b[y]=new google.maps.InfoWindow({content:f[y],maxWidth:300}),google.maps.event.addListener(g[y],"click",function(){b[this.index].open(n,g[this.index]),n.panTo(g[this.index].getPosition())});t(i,5,function(t,i){e.startLtFor=t.lat,e.endtLtFor=i.lat,e.starttLnFor=t.lon,e.endtLnFor=i.lon,new google.maps.Marker({position:new google.maps.LatLng(e.startLtFor,e.starttLnFor),icon:u,map:n}),new google.maps.Marker({position:new google.maps.LatLng(e.endtLtFor,e.endtLnFor),icon:p,map:n})}),t(s,5,function(t,i){e.startLtIn=t.lat,e.starttLnIn=t.lon,e.endtLtIn=i.lat,e.endtLnIn=i.lon,new google.maps.Marker({position:new google.maps.LatLng(e.startLtIn,e.starttLnIn),icon:h,map:n}),new google.maps.Marker({position:new google.maps.LatLng(e.endtLtIn,e.endtLnIn),icon:m,map:n})})}}var l=this;e.showHide=!0,e.selectedDates={},e.selectedDates.startDate=moment().format("YYYY-MM-DD"),e.selectedDates.endDate=moment().format("YYYY-MM-DD"),e.selectedTrip,e.selectedTripBid,l.bidDr,l.drID,l.drID2,l.getBid=function(){s.getBidDetail({id:i.id},function(t){e.selectedTripBid=t,l.bidDr=e.selectedTripBid,console.log("selectedTripBid-dr",e.selectedTripBid),e.totalBid=t,e.showHide=!1,l.initialize()},function(t){console.log(t),e.error=!0})},l.clearBid=function(){e.showHide=!0,e.totalBid=[],l.initialize()},l.getDriverDetail=function(){var t=l.drID;l.drID2=l.bidDr[t].dr,s.getProfile({id:l.drID2,from:moment(e.selectedDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.selectedDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){var t=e;l.infowindows.setContent(content),console.log("$scope.detail",t)},function(t){console.log(t),e.error=!0})},n()}e.$inject=["$scope","$interval","$stateParams","TripsService","$rootScope","NgMap"],angular.module("tuktukV2Dahboard").controller("TripDetailController",e)}(),function(){"use strict";function e(e,t,i,s,a,r,n,l,o,c){function d(e){var t=[];e=angular.fromJson(e);var i=["tCash","Trip"],s={};s.key=i[0],s.values=[],s.bar=!0;for(var a=0;a<e.length;a++){var r=1e3*moment(c.getLongDate(e[a].date)).unix();s.values.push([r,e[a].tcash])}t.push(s);var s={};s.key=i[1],s.values=[];for(var a=0;a<e.length;a++){var r=1e3*moment(c.getLongDate(e[a].date)).unix();s.values.push([r,e[a].trip])}return t.push(s),t}var u,p=this;p.ranges=i.ranges,e.tripDates={},e.tripDates.startDate=i.ranges["Last 7 Days"][0],e.tripDates.endDate=i.ranges["Last 7 Days"][1],p.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],p.tripFrequency={value:"day"},p.config=s.lineChartConfig,p.tripChartOptions=angular.copy(s.lineChartOptions),p.tcashChartOptions=angular.copy(s.linePlusBarChartOptions),p.tcashChartOptions.chart.xAxis={rotateLabels:"-90",axisLabel:"",tickFormat:function(e){var t=p.tcashData[0].values[e]&&p.tcashData[0].values[e].x||0;return t>0?d3.time.format("%d %b %y")(new Date(t)):null}},p.trips=[],p.filterTerm="",p.filterFields=[{value:"id",name:"ID"},{value:"dname",name:"Driver Name"},{value:"dphone",name:"Driver Phone"},{value:"dvehicle",name:"Vehicle Number"},{value:"rname",name:"Rider Name"},{value:"rphone",name:"Rider Phone"}],p.statusCodes="",p.tripStatusFilters=[{name:"All",value:"20,22,30,40,50,60,61,70,71,80,81,82"},{name:"Fullfiled",value:"61"},{name:"Cancelled ",value:"70,71"},{name:"In Progress",value:"20,22,30,40,50,60"},{name:"Failed",value:"80,81,82"}],p.searchTable=function(){e.tableParams.reload()},this.changeFrequency=function(e,t){console.log("Frequency changed ",t.value),p.tripChartOptions.chart.xAxis.axisLabel=t,"hour"==t?p.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:p.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},p.getTrips()},p.onDateChange=function(){p.getTCash(),p.getTrips()},p.getTCash=function(){l.getTCash({city:o.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,vehicle:o.vehicleType},{},function(e){p.tcashData=d(e).map(function(e){return e.values=e.values.map(function(e){return{x:e[0],y:e[1]}}),e}),console.log("response ",p.tcashData)},function(t){console.log(t),e.error=!0}),e.tableParams.reload()},p.getTrips=function(){a.getTrips({city:o.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:p.tripFrequency.value},{vehicle:o.vehicleType,frequency:p.tripFrequency.value},function(e){p.trips=c.getTrips(e[0].trip),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"Cancelled trips (by rider)"})),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"Cancelled trips (by driver)"})),p.trips=_.without(p.trips,_.findWhere(p.trips,{key:"tCash"})),u=e[0].trip},function(t){console.log(t),e.error=!0}),e.tableParams.page(1),e.tableParams.reload()};e.getTimeDiff=function(e,t){if(0==e||0==t)return"0";if(t){var i=t-e;return i}return"0"},e.tableParams=new r({page:1,count:20},{counts:[],getData:function(t){var i=10*(t.page()-1)+1;console.log("**************************");var s={};if(s.start=i,s.count=t.count(),s.startDate=moment(e.tripDates.startDate).startOf("day").unix(),s.endDate=moment(e.tripDates.endDate).endOf("day").unix(),t.orderBy().length>0){var a=t.orderBy()[0].substr(0,1);s.field=t.orderBy()[0].substr(1),"+"===a?s.orderby="ASC":s.orderby="DESC"}return p.searchTerm&&""!=p.searchTerm&&(s.term=p.filterTerm.value+"|"+p.searchTerm),""!=p.statusCodes.value&&(s.filterByStatus=p.statusCodes.value),l.getAllTrips(s).$promise.then(function(i){return t.total(i.total),i.data.length>0?e.tblNoData=!1:e.tblNoData=!0,i.data})}}),p.onDateChange(),p.refreshPage=function(){p.getTrips(),e.tableParams.reload()},heatmapChart(u)}e.$inject=["$scope","$interval","StaticDataService","ChartConfigService","PerformanceService","NgTableParams","$stateParams","TripsService","$rootScope","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("TripsController",e)}();var margin={top:50,right:0,bottom:100,left:30},width=960-margin.left-margin.right,height=430-margin.top-margin.bottom,gridSize=Math.floor(width/24),legendElementWidth=2*gridSize,buckets=9,colors=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],days=["Mo","Tu","We","Th","Fr","Sa","Su"],times=["1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12a","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p","12p"];datasets=["data.tsv","data2.tsv"];var svg=d3.select("#chart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),dayLabels=svg.selectAll(".dayLabel").data(days).enter().append("text").text(function(e){return e}).attr("x",0).attr("y",function(e,t){return t*gridSize}).style("text-anchor","end").attr("transform","translate(-6,"+gridSize/1.5+")").attr("class",function(e,t){return t>=0&&4>=t?"dayLabel mono axis axis-workweek":"dayLabel mono axis"}),timeLabels=svg.selectAll(".timeLabel").data(times).enter().append("text").text(function(e){return e}).attr("x",function(e,t){return t*gridSize}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+gridSize/2+", -6)").attr("class",function(e,t){return t>=7&&16>=t?"timeLabel mono axis axis-worktime":"timeLabel mono axis"}),heatmapChart=function(e){d3.tsv(e,function(e){return{day:+e.day,hour:+e.hour,value:+e.value}},function(e,t){var i=d3.scale.quantile().domain([0,buckets-1,d3.max(t,function(e){return e.value})]).range(colors),s=svg.selectAll(".hour").data(t,function(e){return e.day+":"+e.hour});s.append("title"),s.enter().append("rect").attr("x",function(e){return(e.hour-1)*gridSize}).attr("y",function(e){return(e.day-1)*gridSize}).attr("rx",4).attr("ry",4).attr("class","hour bordered").attr("width",gridSize).attr("height",gridSize).style("fill",colors[0]),s.transition().duration(1e3).style("fill",function(e){return i(e.value)}),s.select("title").text(function(e){return e.value}),s.exit().remove();var a=svg.selectAll(".legend").data([0].concat(i.quantiles()),function(e){return e});a.enter().append("g").attr("class","legend"),a.append("rect").attr("x",function(e,t){return legendElementWidth*t}).attr("y",height).attr("width",legendElementWidth).attr("height",gridSize/2).style("fill",function(e,t){return colors[t]}),a.append("text").attr("class","mono").text(function(e){return"? "+Math.round(e)}).attr("x",function(e,t){return legendElementWidth*t}).attr("y",height+gridSize),a.exit().remove()})};angular.module("tuktukV2Dahboard").factory("TripsService",TripsService),function(){"use strict";function e(e,t,i,s,a,r,n,l,o){function c(){v.setting.value="",v.setting.driverValue="",v.setting.groupTitle="",v.setting.type="x",v.setting.geoHashArr=[],v.setting.startTime=moment().add(0,"m"),v.setting.endTime=moment().add(0,"m"),v.setting.forceConfirm=!0}function d(e){var t;return _.each(v.geohashGroups,function(i){_.each(i.geoHashArr,function(s){return s.geoHash==e?void(t=i):void 0})}),t}function u(e){r.getGroupSetting({id:e},function(e){v.setting.type=e.type,v.setValueArr(),v.setting.driverValue={name:e.driverValue,value:e.driverValue},v.setting.value={name:e.value,value:e.value},v.setting.forceConfirm=e.forceConfirm?!0:!1},function(e){n.success(e)})}function p(){v.geohashGroups=[],r.getGroups({precision:v.selectedPrecision.value},function(e){var t=e,i=0;_.each(t,function(e){var t=e;t.color=v.colors[i],t.geoHashArr=[],_.each(e.geohash,function(e){t.geoHashArr.push(h(e))}),v.geohashGroups.push(t),i++}),console.log(" vm.geohashGroups ",v.geohashGroups)},function(e){n.error(e)})}function h(e){var t={};t.geoHash=e;var i=a.decode_bbox(t.geoHash);return t.boxBounds=[[i[0],i[1]],[i[2],i[3]]],t}function m(t){if(!v.groupCreation&&!v.groupEdit){v.groupCreation=!0;var i={};i.geoHashArr=[],i.groupTitle="untitled group",i.color="#cc99ff",i.startTime=moment().add(0,"m"),i.endTime=moment().add(15,"m"),v.setting.driverValue=v.multipleArrDriver[0],e.$apply(function(){v.geohashGroups.push(i)})}if(v.groupCreation){var s={};s.geoHash=a.encode(t.latLng.lat(),t.latLng.lng(),v.selectedPrecision.value),e.$apply(function(){_.last(v.geohashGroups).geoHashArr.push(h(s.geoHash)),v.setting=_.last(v.geohashGroups),v.setting.driverValue=v.multipleArrDriver[0],v.setting.value=v.multipleArrDriver[0]})}if(v.groupEdit){var s={};s.geoHash=a.encode(t.latLng.lat(),t.latLng.lng(),v.selectedPrecision.value),e.$apply(function(){v.setting.geoHashArr.push(h(s.geoHash))})}}var v=this;v.map,v.show500=!1,e.date=moment().format("dddd, MMMM Do YYYY"),v.geohashArray=[],v.geohashGroups=[],v.setting={},v.colors=["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],v.hstep=1,v.mstep=5,e.ismeridian=!1,e.toggle=!1,v.groupCreation=!1,v.groupEdit=!1,v.precisionArr=[{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8}],v.selectedPrecision=v.precisionArr[0],v.multipleArrRider=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.driverValue=v.multipleArrDriver[0],c(),v.setValueArr=function(){"x"==v.setting.type&&(v.multipleArrRider=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"1.1",value:1.1},{name:"1.2",value:1.2},{name:"1.3",value:1.3},{name:"1.4",value:1.4},{name:"1.5",value:1.5},{name:"1.6",value:1.6},{name:"1.7",value:1.7},{name:"1.8",value:1.8},{name:"1.9",value:1.9}],v.setting.driverValue=v.multipleArrDriver[0]),"a"==v.setting.type&&(v.multipleArrRider=[{name:"5",value:5},{name:"10",value:10},{name:"15",value:15},{name:"20",value:20},{name:"25",value:25},{name:"30",value:30},{name:"35",value:35},{name:"40",value:40},{name:"45",value:45},{name:"50",value:50}],v.setting.value=v.multipleArrRider[0],v.multipleArrDriver=[{name:"5",value:5},{name:"10",value:10},{name:"15",value:15},{name:"20",value:20},{name:"25",value:25},{name:"30",value:30},{name:"35",value:35},{name:"40",value:40},{name:"45",value:45},{name:"50",value:50}],v.setting.driverValue=v.multipleArrDriver[0])},v.ShapeClicked=function(e){
v.groupEdit=!0;var t=a.encode(e.latLng.lat(),e.latLng.lng(),v.selectedPrecision.value);if(v.setting=d(t),v.setting.groupId){v.groupEdit=!0,v.groupCreation=!1,console.log(v.setting.fromTime),console.log(v.setting.toTime);var i=v.setting.fromTime.slice(0,2),s=v.setting.fromTime.slice(2,4),r=v.setting.toTime.slice(0,2),n=v.setting.toTime.slice(2,4),l=new Date;l.setUTCHours(i,s,0,0);var o=l.getHours(),c=l.getMinutes(),p=new Date;p.setUTCHours(r,n,0,0);var h=p.getHours(),m=p.getMinutes();v.setting.startTime=moment().hour(o).minute(c),v.setting.endTime=moment().hour(h).minute(m),u(v.setting.groupId)}else v.groupEdit=!1,v.groupCreation=!0},v.ShapeDblClicked=function(e){e.stop();var t=a.encode(e.latLng.lat(),e.latLng.lng(),v.selectedPrecision.value);v.setting=d(t);var i=_.findIndex(v.setting.geoHashArr,{geoHash:t});v.setting.geoHashArr.splice(i,1)},s.getMap({id:"surgeMap"}).then(function(e){v.map=e,google.maps.event.addDomListener(v.map,"click",m),v.map.setClickableIcons(!1)}),v.onPrecisionChange=function(){v.groupCreation=!1,v.groupEdit=!1,v.geohashGroups=[],c(),p()},v.refresh=function(){v.groupCreation=!1,v.groupEdit=!1,c(),p()},v.removeGeoHash=function(){v.geohashArray.splice(index,1)},v.removeGroup=function(e){r.removeGroup({id:e},function(e){v.refresh(),p(),n.success(e)},function(e){n.success(e)})},p(),v.createSurge=function(){var e={};e.groupTitle=v.setting.groupTitle,e.geohash=_.pluck(v.setting.geoHashArr,"geoHash"),e.precision=v.selectedPrecision.value,e.precision=v.selectedPrecision.value,e.city=t.city,e.vehicleType=t.vehicleType,e.driverValue=v.setting.driverValue.value,e.value=v.setting.value.value;var i=moment.utc(v.setting.startTime).format("Hmm"),s=moment.utc(v.setting.endTime).format("Hmm");i.length<4?e.fromTime="0"+i:e.fromTime=i,s.length<4?e.toTime="0"+s:e.toTime=s,e.type=v.setting.type,e.forceConfirm=v.setting.forceConfirm?1:0,console.log(e),v.groupCreation?r.createSurge(e,function(e){v.groupCreation=!1,c(),p(),n.success("Surge Group Created.")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)}):(e.groupId=v.setting.groupId,r.updateGroup(e,function(e){v.groupEdit=!1,c(),p(),n.success("Surge Group Updated.")},function(e){500==e.status?n.error("Permission Denied"):n.error(e)}))},v.addSetting=function(){}}e.$inject=["$scope","$rootScope","$interval","NgMap","geohash","SurgeService","toastr","ngDialog","StaticDataService"],angular.module("tuktukV2Dahboard").controller("SurgeController",e)}(),angular.module("tuktukV2Dahboard").factory("SurgeService",SurgeService),function(){"use strict";function e(e,t,i,s,a,r,n,l,o,c,d,u,p){function h(){o.getRiders({},function(e){g.ridersData=v(JSON.parse(angular.toJson(e))),m()},function(t){console.log(t),e.error=!0})}function m(){var e=document.getElementById("matrixChartDiv").offsetWidth,t=document.getElementById("matrixChartDiv").offsetWidth-180,i=dimple.newSvg("#matrixChart",e,450),s=new dimple.chart(i,g.ridersData);s.setBounds(90,50,t,350);var a=s.addCategoryAxis("x",["RiderReg"]),r=s.addCategoryAxis("y",["Week","TotalRequest","UniqueRequest","FulfillRequest","UniqueFulfillRequest"]);s.addSeries("Week",dimple.plot.bubble);a.title="",r.title="",a.addOrderRule("Week"),s.draw()}function v(e){var t=[];return _.each(e,function(e){_.each(e.values,function(i){var s={};s.RiderReg=e.rider_reg,s.Week=i.week,s.TotalRequest=i.total_request,s.UniqueRequest=i.unique_request,s.FulfillRequest=i.fulfill_request,s.UniqueFulfillRequest=i.unique_fulfill_request,t.push(s)})}),t}var g=this;h(),g.refreshPage=function(){h()};var f;$(window).resize(function(){clearTimeout(f),f=setTimeout(function(){document.getElementById("matrixChartDiv").offsetWidth,document.getElementById("matrixChartDiv").offsetWidth-180;$("#matrixChart").empty(),h()},500)})}e.$inject=["$scope","$log","$rootScope","$interval","StaticDataService","ChartConfigService","PerformanceService","PerformanceHandler","RidersService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("RidersController",e)}(),angular.module("tuktukV2Dahboard").factory("RidersService",RidersService),function(){"use strict";function e(e,t,i,s,a,r,n,l){var o=this;o.ranges=i.ranges,e.tripDates={},e.tripDates.startDate=moment().subtract(1,"days").format("YYYY-MM-DD"),e.tripDates.endDate=moment().subtract(1,"days").format("YYYY-MM-DD"),e.driverDates=angular.copy(e.tripDates),e.riderDates=angular.copy(e.tripDates),o.timeFrequency=[{label:"Per Hour",value:"hour"},{label:"Per Day",value:"day"}],o.tripFrequency={value:"hour"},o.driverFrequency={value:"hour"},o.riderFrequency={value:"hour"},o.config=s.lineChartConfig,o.tripChartOptions=angular.copy(s.lineChartOptions),o.driverChartOptions=angular.copy(s.lineChartOptions),o.riderChartOptions=angular.copy(s.lineChartOptions),o.trips=[],o.drivers=[],o.riders=[],this.changeFrequency=function(e,t){switch(console.log("Frequency changed ",t.value),e){case"driver":o.driverChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.driverChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getDrivers();break;case"rider":o.riderChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.riderChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getRiders();break;default:o.tripChartOptions.chart.xAxis.axisLabel=t,"hour"==t?o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %I %p")(new Date(e).addHours(1))}:o.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},o.getTrips()}},o.getTrips=function(){n.getTrips({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.tripFrequency.value},{vehicle:r.vehicleType,frequency:o.tripFrequency.value},function(e){o.trips=l.getTrips(e[0].trip),o.trips.overview=e[0].overview},function(t){console.log(t),e.error=!0})},o.getDrivers=function(){n.getDrivers({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.driverFrequency.value},{vehicle:r.vehicleType,frequency:o.driverFrequency.value},function(e){o.drivers=l.getDrivers(e),console.log("vm.drivers ",o.drivers)},function(t){console.log(t),e.error=!0})},o.getRiders=function(){n.getRiders({city:r.city,startTime:e.tripDates.startDate,endTime:e.tripDates.endDate,count:1,page:1,rate:o.riderFrequency.value},{vehicle:r.vehicleType,frequency:o.riderFrequency.value},function(e){o.riders=l.getRiders(e[0].riders),o.riders.overview=e[0].overview,console.log("vm.riders ",l.riders)},function(t){console.log(t),e.error=!0})},o.getAllData=function(){o.getTrips(),o.getDrivers(),o.getRiders()},o.getAllData();var c=t(function(){o.getAllData()},3e4);e.$on("$destroy",function(){t.cancel(c)})}e.$inject=["$scope","$interval","StaticDataService","ChartConfigService","$stateParams","$rootScope","PerformanceService","PerformanceHandler"],angular.module("tuktukV2Dahboard").controller("PerformanceController",e)}(),angular.module("tuktukV2Dahboard").factory("PerformanceService",PerformanceService),angular.module("tuktukV2Dahboard").factory("PerformanceHandler",PerformanceHandler),function(e){function t(e){function t(t){return this.data=t.data.reverse(),this.element=t.element,this.max=e.max(this.data,function(t){return e.max(t.slice(1),function(e){return parseFloat(e.value)})}),t.upperLimit?this.upperLimit=t.upperLimit:this.upperLimit=this.max,this}return t.prototype.draw=function(t){function i(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","none"),e.select(t).selectAll("text.value").style("display","block")}function s(){var t=e.select(this).node().parentNode;e.select(t).selectAll("circle").style("display","block"),e.select(t).selectAll("text.value").style("display","none")}var a,r,n,l,o,c,d=10,u=5,p=t.width,h=80,m=p-h,v=35,g=v*this.data.length,f=m/this.data[0].length,b=14;return a=e.scale.linear().domain([0,this.data[0].length-1]).range([h+f/2,m+f/2]),r=e.scale.linear().domain([0,this.data.length-1]).range([0,g-v]),c=e.scale.linear().domain([0,this.upperLimit,this.max]).range([0,b,b]),n=e.select(this.element).html("").append("svg").attr("width",p).attr("height",g+3*d).append("g"),o=n.selectAll(".row").data([this.data[0].slice(1)]).enter().append("g").attr("class","xaxis"),o.append("line").attr("x1",0).attr("x2",p).attr("y1",3*d).attr("y2",3*d).style("stroke-width",1).style("stroke","#efefef"),o.selectAll("line.tick").data(function(e,t){return e}).enter().append("line").attr("class","tick").attr("x1",function(e,t){return h+a(t)}).attr("x2",function(e,t){return h+a(t)}).attr("y1",function(e,t){return 2*d}).attr("y2",function(e,t){return 3*d}).style("stroke-width",1).style("stroke","#efefef"),o.selectAll(".rule").data(function(e,t){return e}).enter().append("text").attr("class","rule").attr("x",function(e,t){return h+a(t)}).attr("y",d+u).attr("text-anchor","middle").text(function(e){return e.key}),l=n.selectAll(".row").data(this.data).enter().append("g").attr("class","row").attr("transform",function(e,t){var i=g-r(t)-v/2+3*d;return"translate(0, "+i+")"}),l.selectAll("line").data([0]).enter().append("line").attr("x1",0).attr("x2",p).attr("y1",v/2).attr("y2",v/2).style("stroke-width",1).style("stroke","#efefef"),l.selectAll(".textheader").data(function(e,t){return[e[0]]}).enter().append("text").attr("x",0).attr("y",function(e,t){return u}).attr("class","textheader").attr("text-anchor","left").text(function(e,t){return e.value}).on("mouseover",i).on("mouseout",s),l.selectAll("circle").data(function(e,t){return e.slice(1)}).enter().append("circle").style("fill","#888").attr("r",function(e,t){return c(parseFloat(e.value))}).attr("transform",function(e,t){var i=h+a(t);return"translate("+i+", 0)"}),l.selectAll("text.value").data(function(e,t){return e.slice(1)}).enter().append("text").attr("class","value").style("display","none").text(function(e,t){return e.value}).attr("text-anchor","middle").attr("x",function(e,t){return h+a(t)}).attr("y",function(e,t){return u}),this},t.prototype.destroy=function(){e.select(this.element).selectAll("text.textheader").on("mouseover",null).on("mouseout",null)},t}"object"==typeof exports?module.exports=t(require("d3")):"function"==typeof define&&define.amd?define(["d3"],t):e.D3punchcard=t(e.d3)}(this),function(){"use strict";function e(e,t,i,s,a,r){var n=this;n.offers=[],n.drivers=[],n.selectedOffers=[],n.selectedDrivers=[],n.offerCheckboxes={},n.driverCheckboxes={},n.noDriversSelected=!1,n.noOffersSelected=!1,n.filterTerm="",n.filterFields=[{value:"id",name:"Driver ID"},{value:"name",name:"Driver Name"},{value:"phone",name:"Driver Phone"}],n.addOffer=function(e){_.find(n.selectedOffers,{id:e.id})||n.selectedOffers.push(e)},n.removeOffer=function(e){n.selectedOffers.splice(e,1)},n.addDriver=function(e){_.find(n.selectedDrivers,{id:e.id})||n.selectedDrivers.push(e)},n.addDrivers=function(){n.noDriversSelected=!1;var t=_.pairs(n.driverCheckboxes.items);return 0==t.length?void(n.noDriversSelected=!0):void _.each(t,function(t){if(1==t[1]&&!_.find(n.selectedDrivers,{id:t[0]})){var i=_.find(e.driverTableParams.data,{id:t[0]});n.addDriver(i)}})},n.addOffers=function(){var t=_.pairs(n.offerCheckboxes.items);_.each(t,function(t){if(0==n.selectedOffers.length&&1==t[1]){var i=_.find(e.offerTableParams.data,{id:Number(t[0])});n.addOffer(i)}if(1==t[1]&&!_.find(n.selectedOffers,{id:Number(t[0])})){var i=_.find(e.offerTableParams.data,{id:Number(t[0])});n.addOffer(i)}})},n.removeDriver=function(e){n.selectedDrivers.splice(e,1)},n.searchOffers=function(){e.offerTableParams.reload()},n.searchDrivers=function(){e.driverTableParams.reload()},n.clearOfferSearch=function(){n.offerTxt="",e.offerTableParams.reload()},n.refreshPage=function(){e.driverTableParams.reload(),e.offerTableParams.reload()},n.clearDriverSearch=function(){n.driverTxt="",e.driverTableParams.reload()},n.assignOffers=function(){if(confirm("Are you sure you want to save?")){var e={};e.drivers=_.pluck(n.selectedDrivers,"id"),e.offers=_.pluck(n.selectedOffers,"code"),e.status=!0,t.assignOffers({},e,function(e){a.success("Offers assigned to selected drivers."),n.clearAll()},function(e){a.error("Error : "+e)})}},n.openSingleAlert=function(e,t){r.open({template:"alertSingleDelete.html",className:"ngdialog-theme-plain",overlay:!0,resolve:{index:function(){return e},row:function(){return t}},controller:["index","row","OfferService","$scope",function(e,t,i,s){s.index=e,s.row=t,console.log(e,t),s.removeSingleOffer=function(e,t){var s={};s.drivers=[t.id],s.offers=[t.offers[e]],s.status=!1,i.assignOffers({},s,function(i){a.success("Offer removed."),t.offers.splice(e,1)},function(e){a.error("Error : "+e)})}}]})},n.alertDeleteAllOffers=function(t){n.currentRow=t,r.open({template:"alert.html",className:"ngdialog-theme-plain",scope:e,overlay:!0})},n.removeAllAssignedOffers=function(){t.getDriverOffers({id:n.currentRow.id},function(e){var i={};i.drivers=[n.currentRow.id],i.offers=e.offers,i.status=!1,t.assignOffers({},i,function(e){a.success("All offers removed for this driver."),n.refreshPage()},function(e){a.error("Error : "+e)})},function(e){a.error("Error : "+e)})},n.getDriverOffers=function(e){t.getDriverOffers({id:e.id},function(t){e.offers=t.offers},function(e){a.error("Error : "+e)})},n.clearAll=function(){n.selectedOffers=[],n.selectedDrivers=[]},e.offerTableParams=new i({page:1,count:10},{counts:[],getData:function(i){var s=10*(i.page()-1)+1;console.log("**************************");var a={};if(a.start=s,a.count=i.count(),i.orderBy().length>0){var r=i.orderBy()[0].substr(0,1);a.field=i.orderBy()[0].substr(1),"+"===r?a.orderby="ASC":a.orderby="DESC"}return n.offerTxt&&""!=n.offerTxt&&(a.term="code|"+n.offerTxt),t.getOffers(a).$promise.then(function(t){return i.total(t.total),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,n.offerCheckboxes={checked:!1,items:{}},t.data})}}),e.driverTableParams=new i({page:1,count:10},{counts:[],getData:function(i){var s=10*(i.page()-1)+1;console.log("**************************");var a={};if(a.start=s,a.count=i.count(),i.orderBy().length>0){var r=i.orderBy()[0].substr(0,1);a.field=i.orderBy()[0].substr(1),"+"===r?a.orderby="ASC":a.orderby="DESC"}return n.driverTxt&&""!=n.driverTxt&&(a.term=n.filterTerm.value+"|"+n.driverTxt),t.getDrivers(a).$promise.then(function(t){return i.total(t.total),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,n.driverCheckboxes={checked:!1,items:{}},t.data})}}),e.$watch(function(){return n.offerCheckboxes.checked},function(t){angular.forEach(e.offerTableParams.data,function(e){n.offerCheckboxes.items[e.id]=t,console.log("value ",t)})}),e.$watch(function(){return n.offerCheckboxes.items},function(t){var i=0,a=0,r=e.offerTableParams.data.length;angular.forEach(e.offerTableParams.data,function(e){i+=n.offerCheckboxes.items[e.id]||0,a+=!n.offerCheckboxes.items[e.id]||0}),(0==a||0==i)&&(n.offerCheckboxes.checked=i==r),angular.element(s[0].getElementsByClassName("select-all")).prop("indeterminate",0!=i&&0!=a)},!0),e.$watch(function(){return n.driverCheckboxes.checked},function(t){var i=0;angular.forEach(e.driverTableParams.data,function(e){n.driverCheckboxes.items[e.id]=t,i++})}),e.$watch(function(){return n.driverCheckboxes.items},function(t){var i=0,a=0,r=e.driverTableParams.data.length;angular.forEach(e.driverTableParams.data,function(e){i+=n.driverCheckboxes.items[e.id]||0,a+=!n.driverCheckboxes.items[e.id]||0}),(0==a||0==i)&&(n.driverCheckboxes.checked=i==r),angular.element(s[0].getElementsByClassName("select-all-drivers")).prop("indeterminate",0!=i&&0!=a)},!0)}e.$inject=["$scope","OfferService","NgTableParams","$element","toastr","ngDialog"],angular.module("tuktukV2Dahboard").controller("OffersController",e)}(),angular.module("tuktukV2Dahboard").factory("OfferService",OfferService),function(){"use strict";function e(e,t,i,s,a,r,n,l){function o(){a.getDemandSupply({precision:d.selectedPrecision.value},function(t){e.allHash=t,e.totalHash=t.length;var i=0;_.each(e.allHash,function(e){var t=e;e.hash=c(e.geo_hash),t.color=d.colors[i],i++}),console.log(e.allHash)},function(t){console.log(t),e.error=!0})}function c(e){var t={};t.geoHash=e;var i=s.decode_bbox(t.geoHash);return t.boxBounds=[[i[0],i[1]],[i[2],i[3]]],t}var d=this;d.map;d.colors=["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],d.precisionArr=[{name:"6",value:6},{name:"7",value:7}],d.selectedPrecision=d.precisionArr[0];d.selectedPrecision.value;i.getMap({id:"bidMap"}).then(function(e){d.map=e,google.maps.event.addDomListener(d.map)}),d.onPrecisionChange=function(){o()},o()}e.$inject=["$scope","$rootScope","NgMap","geohash","MapService","toastr","ngDialog","StaticDataService"],angular.module("tuktukV2Dahboard").controller("DemandSupplyController",e)}(),function(){"use strict";function e(e,t,i,s,a,r){function n(){s.getDrivers({city:i.city,vehicle:i.vehicleType},function(e){l.allDrivers=e,console.log("vm.drivers ",l.allDrivers)},function(e){console.log("error ",e)})}var l=this;l.API_URL=r,l.allDrivers=[],console.log("map cont loaded"),a.getMap({id:"drivers_map"}).then(function(e){l.map=e,l.map&&l.map.data&&l.map.data.forEach(function(e){l.map.data.remove(e)}),e.data.setStyle({fillColor:"gray",strokeWeight:1,strokeOpacity:.1,fillOpacity:.1}),s.loadGeoJson({},function(e){l.geoJSON={},l.geoJSON=e,l.map.data.addGeoJson(l.geoJSON)},function(e){console.log("error ",e)})}),l.getAddress=function(e){alert("get address")},l.clicked=function(e){console.log("Clicked a link inside infoWindow",e);var t=parseFloat(e[0]),i=parseFloat(e[1]),s=new google.maps.LatLng(t,i),a=new google.maps.Geocoder;a.geocode({latLng:s},function(e,t){t==google.maps.GeocoderStatus.OK&&e[1]&&(l.driver.address=e[1].formatted_address)})},n(),l.showDetail=function(e,t,i){l.driver=t,l.map.showInfoWindow("iw-drivers",i)},l.hideDetail=function(){l.map.hideInfoWindow("iw-drivers")},l.getAddress=function(){l.map.hideInfoWindow("iw-drivers")}}e.$inject=["$scope","$log","$rootScope","MapService","NgMap","AUTH_API"],angular.module("tuktukV2Dahboard").controller("MapsController",e)}(),angular.module("tuktukV2Dahboard").factory("MapService",MapService),function(){"use strict";function e(e,t,i,s,a,r){e.cities=r.cities,e.vehicleTypes=r.vehicleTypes,i.selectedCity=r.cities[0],i.selectedVehicle=r.vehicleTypes[0],e.ChangeCity=function(e){i.selectedCity=e,i.city=e.value,s.go(s.current.name,{city:i.city,vehicleType:i.vehicleType})},e.ChangeVehicle=function(e){i.selectedVehicle=e,i.vehicleType=e.value,s.go(s.current.name,{city:i.city,vehicleType:i.vehicleType})},e.status={isopen:!1},e.toggled=function(e){t.log("Dropdown is now: ",e)}}e.$inject=["$scope","$log","$rootScope","$state","$stateParams","StaticDataService"],angular.module("tuktukV2Dahboard").controller("MainController",e)}(),function(){"use strict";function e(e,t,i,s,a,r,n,l,o){e.loginUser=function(){r.doLogin(e.user,function(e){console.log(e),e.success?(n.setUser(e),s.defaults.headers.common.Authorization="Basic "+e.token,i.isAuthenticated=!0,a.go("home.live",{city:i.city,vehicleType:i.vehicleType}),l.success("You are successfully logged in.")):l.error(e.msg)},function(e){console.log(e),l.error(e.data.msg)})}}e.$inject=["$scope","$log","$rootScope","$http","$state","LoginService","UserService","toastr","StaticDataService"],angular.module("tuktukV2Dahboard").controller("LoginController",e)}(),angular.module("tuktukV2Dahboard").factory("LoginService",LoginService),function(){"use strict";function e(e,t,i,s,a,r,n,l,o,c,d,u){function p(){x.canceledTripByDriver=[],o.getCancelTripsDriver({startTime:moment(w).startOf("day"),endTime:moment(w).endOf("day"),city:i.city,vehicle:i.vehicleType},function(e){console.log(e),x.canceledTripByDriver=u.canTripDriver(e),console.log("hey ",x.canceledTripByDriver)},function(t){console.log(t),e.error=!0})}function h(){x.canceledTripByRider=[],o.getCancelTripsRider({startTime:moment(w).startOf("day"),endTime:moment(w).endOf("day"),city:i.city,vehicle:i.vehicleType},function(e){console.log(e),x.canceledTripByRider=u.canTripRider(e),console.log("heyfsfsf ",x.canceledTripByRider)},function(t){console.log(t),e.error=!0})}function m(){o.getOverview({city:i.city,vehicle:i.vehicleType},function(e){x.overview=e},function(t){console.log(t),e.error=!0})}function v(){o.getNewRiders({from:moment(w).subtract(6,"days").startOf("day").unix(),to:moment(w).endOf("day").unix()},function(e){x.newRiders=g(e),console.log("response ",x.newRiders)},function(t){console.log(t),e.error=!0})}function g(e){var t=[],i=JSON.parse(angular.toJson(e)),s=0,a=0,r=["today","1 day ago","2 day ago","3 day ago","4 day ago","5 day ago","6 day ago","Above 7 days"];_.each(i,function(e){var i={};i.key=r[a],i.bar=!0,i.values=[],t.push(i),a++});var n={};return n.key=r[a],n.bar=!0,n.values=[],t.push(n),_.each(i,function(e){for(var i=e,a=0;7>=a;a++)t[a].values[s]={},t[a].values[s].x=d.getLongDate(i.date),t[a].values[s].y=Number(e.value[a].totalRides),t[a].values[s].uniqRides=Number(e.value[a].uniqRides),"Others"===e.value[a].id?t[a].values[s].date=e.value[a].id:t[a].values[s].date=Number(e.value[a].id);s++}),t}function f(){o.getOverview({city:i.city,vehicle:i.vehicleType,startTime:moment(w).startOf("day"),endTime:moment(w).endOf("day")},function(e){x.overview=e},function(t){console.log(t),e.error=!0})}function b(){c.getTrips({city:i.city,startTime:moment(w).startOf("day"),endTime:moment(w).endOf("day"),count:1,page:1,rate:"hour"},{vehicle:i.vehicleType,frequency:"hour"},function(t){x.trips=d.getTrips(t[0].trip),c.getDrivers({city:i.city,startTime:moment(w).startOf("day"),endTime:moment(w).endOf("day"),count:1,page:1,rate:"hour"},{vehicle:i.vehicleType,frequency:"hour"},function(e){x.drivers=d.getDrivers(e),x.trips=_.union(x.trips,x.drivers),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"Cancelled trips (by rider)"})),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"Cancelled trips (by driver)"})),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"tCash"})),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"New Drivers"})),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"Active Drivers"})),x.trips=_.without(x.trips,_.findWhere(x.trips,{key:"Avg Trip/Driver"}))},function(t){console.log(t),e.error=!0})},function(t){console.log(t),e.error=!0});x.resizeMap=function(){google.maps.event.trigger(x.map,"resize")},x.heatMapDataLength,x.loadHeatMap=function(){var t=moment(w).hour(e.rangSlider.min).unix(),s=moment(w).hour(e.rangSlider.max).unix();o.heatmap({city:i.city,vehicle:i.vehicleType,from:t,to:s,state:x.selected.id},function(e){x.heatMapDataLength=e.length;var t=[],i=[];_.forEach(e,function(e){t.push(new google.maps.LatLng(e.locPickupRequest.lt-0,e.locPickupRequest.ln-0))}),n.getMap({id:"live_map"}).then(function(e){x.map=e,y&&y.setMap(null),i=new google.maps.MVCArray(t),y=new google.maps.visualization.HeatmapLayer({data:i}),y.setMap(x.map)})},function(t){console.log(t),e.error=!0})}}var y,x=this,k=moment();x.heatMapFilers=[{label:"In-Process",id:"20,22,30,40,50"},{label:"Failed",id:"72,80,81,82"},{label:"Cancel",id:"70,71"},{label:"Success",id:"61"}],x.selected=x.heatMapFilers[0],e.rangSlider={max:24,min:0},e.slider={minValue:0,maxValue:24,options:{floor:0,ceil:24,showTicksValues:0,translate:function(e){return e+"h"},keyboardSupport:!1,onEnd:function(t,i,s,a){e.rangSlider.min=i,e.rangSlider.max=s,x.loadHeatMap()}}},e.ddSettings={enableSearch:!1},e.date=moment().format("dddd, MMMM Do YYYY"),x.config=l.lineChartConfig,x.tripChartOptions=angular.copy(l.lineChartOptions),x.newRidersChartOptions=angular.copy(l.multiBarChartOptions),x.newRidersChartOptions.chart.tooltip={contentGenerator:function(e,t,i,s,a){var r,n=e.data;r="Others"===n.date?"Above 7 days":moment(d.getLongDate(n.date.toString())).format("MMMM Do YYYY");var l='<div class="pd-10 text-left"><span><b>';return l+=r+" </b></span>",l+='<h3 class="no-mr">'+n.y+'<small style="color:#333;"> /'+n.uniqRides+'</small><br><small style="font-size:10px;color:#666;text-transform: uppercase;">Total Rides / Rides(U)</small></h3>',l+="</div>"}},x.drRideCancelReasonCode={dCR_TYRE_FLAT:"Flat tyre",dCR_VEH_ISSUE:"Vehicle issues",dCR_STUCK_TRAFFIC:"Stuck in traffic",dCR_CUSTOMER_LATE:"Customer is late"},x.cancelTripByDriverChartOptions=angular.copy(l.pieChartOptions),x.cancelTripByDriverChartOptions.chart.x=function(e){return x.drRideCancelReasonCode[e.label]},x.rdRideCancelReasonCode={rCR_MIND_CHANGE:"Changed my mind",rCR_ROUTE_CHANGE:"Changed the route",rCR_NOT_INTEREST:"not need the ride anymore",rCR_DRIVER_ASKED_TO:"Driver asked to cancel",rCR_OTHER:"Other",rCR_BEFORE_CONFIRM:"Ride canceled before confirmation"},x.cancelTripByRiderChartOptions=angular.copy(l.pieChartOptions),x.cancelTripByRiderChartOptions.chart.x=function(e){return console.log(e.label),x.rdRideCancelReasonCode[e.label]},x.tripChartOptions.chart.xAxis.tickFormat=function(e){return d3.time.format("%I %p")(new Date(e).addHours(1))},x.trips=[];var w=moment();x.live=!0,x.changeDate=function(t){"next"==t?(w=moment(w).add(1,"day"),e.date=moment(w).format("dddd, MMMM Do YYYY")):(w=moment(w).subtract(1,"day"),e.date=moment(w).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(w).unix()==moment(k).unix()?(x.live=!0,m()):(x.live=!1,f(),p(),h()),b(),v(),x.loadHeatMap(),p(),h()},v(),b(),m(),p(),h(),x.loadHeatMap();var T=a(function(){x.refreshPage()},3e4);e.$on("$destroy",function(){a.cancel(T)}),x.refreshPage=function(){b(),x.loadHeatMap(),v(),x.live?(m(),p(),h()):f()}}e.$inject=["$scope","$log","$rootScope","$state","$interval","$stateParams","NgMap","ChartConfigService","LiveService","PerformanceService","PerformanceHandler","LiveHandler"],angular.module("tuktukV2Dahboard").controller("LiveController",e)}(),angular.module("tuktukV2Dahboard").factory("LiveService",LiveService),angular.module("tuktukV2Dahboard").factory("LiveHandler",LiveHandler),function(){"use strict";function e(e,t,i,s,a,r,n,l,o,c){var d=this;moment();d.ranges=a.ranges,e.selectedDates={},e.selectedDates.startDate=moment().format("YYYY-MM-DD"),e.selectedDates.endDate=moment().format("YYYY-MM-DD"),d.getProfile=function(){r.getProfile({id:t.driverId,from:moment(e.selectedDates.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.selectedDates.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){d.profile=e},function(t){console.log(t),e.error=!0})},d.getProfile(),d.getAllData=function(){d.getProfile(),e.tableParams.reload()},d.refreshPage=function(){d.getAllData()},e.$on("$destroy",function(){s.cancel(interval)}),e.getTimeDiff=function(e,t){var i;if(0==e)return"0";i=0==t?new Date:new Date(1e3*t);var s=new Date(1e3*e),a=moment.utc(moment(s,"DD/MM/YYYY HH:mm:ss").diff(moment(i,"DD/MM/YYYY HH:mm:ss"))),r="";return a.hours()>0&&(r=a.hours()+" hr "),r+=a.minute()+" min "},e.tableParams=new n({page:1,count:20,sorting:{earning:"desc"}},{counts:[],getData:function(i){var s=10*(i.page()-1)+1;console.log("**************************");var a="",n="";return i.orderBy().length>0&&(a=i.orderBy()[0].substr(0,1),n=i.orderBy()[0].substr(1),a="+"===a?"ASC":"DESC"),r.getTrips({startDate:moment(e.selectedDates.startDate).startOf("day").unix(),endDate:moment(e.selectedDates.endDate).endOf("day").unix(),orderby:a,field:n,start:s,count:i.count()},{id:t.driverId}).$promise.then(function(t){return i.total(t.total),console.log("trop ",t),t.data.length>0?e.tblNoData=!1:e.tblNoData=!0,t.data})}})}e.$inject=["$scope","$stateParams","$rootScope","$interval","StaticDataService","DriversService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("DriversDetailController",e)}(),InitChart(),function(){"use strict";function e(e,t,i,s,a,r,n,l,o,c,d,u,p){function h(){u.getOverview({city:i.city,vehicle:i.vehicleType},function(e){m.overview=e},function(t){console.log(t),e.error=!0})}var m=this,v=moment(),g=(moment(),moment());m.live=!0,m.acquisitionData=[],m.ranges=a.ranges,m.config=r.lineChartConfig,m.acquisitionChart=angular.copy(r.discreteBarChartOptions),m.acquisitionChart.chart.xAxis.tickFormat=function(e){return d3.time.format("%d %b %y")(new Date(e))},e.date=moment().format("dddd, MMMM Do YYYY"),e.datesForAcq={},e.datesForAcq.startDate=moment().subtract(10,"days").format("YYYY-MM-DD"),e.datesForAcq.endDate=moment().format("YYYY-MM-DD"),m.changeDate=function(t){"next"==t?(g=moment(g).add(1,"day"),e.date=moment(g).format("dddd, MMMM Do YYYY")):(g=moment(g).subtract(1,"day"),e.date=moment(g).format("dddd, MMMM Do YYYY"),console.log("$scope.date ",e.date)),moment(g).unix()==moment(v).unix()?m.live=!0:m.live=!1,e.tableParams.reload(),e.tableParams.page(1),m.getAcquisition()},m.filterTerm="",m.filterFields=[{value:"id",name:"Driver ID"},{value:"dname",name:"Driver Name"},{value:"dphone",name:"Driver Phone"},{value:"dvehicle",name:"Vehicle Number"},{value:"vehicleType",name:"Vehicle Type"},{value:"riderFeedbackRating",name:"Feedback Rating "}],m.statusCodes="",m.driverStatusFilters=[{name:"All",value:"all"},{name:"Occupied",value:"22"},{name:"Unoccupied ",value:"11"},{name:"Offline",value:"10"}],m.searchTable=function(){e.tableParams.reload()},m.getAcquisition=function(){console.log(e.datesForAcq),o.getAcquisition({city:i.city,vehicle:i.vehicleType,from:moment(e.datesForAcq.startDate).startOf("day").format("YYYYMMDD").toString(),to:moment(e.datesForAcq.endDate).endOf("day").format("YYYYMMDD").toString()},function(e){m.acquisitionData=[];var t=[];_.each(e,function(e){t.push({label:l.getLongDate(e.id),value:e.count})}),m.acquisitionData.push({key:"Drivers",values:t}),console.log("vm.acquisitionData ",m.acquisitionData)},function(t){console.log(t),e.error=!0})},h(),m.getAcquisition(),m.refreshPage=function(){h(),m.getAcquisition(),e.tableParams.reload(),e.tableParams.page(1)},e.$on("$destroy",function(){s.cancel(interval)}),e.tableParams=new c({page:1,count:20,sorting:{earning:"desc"}},{counts:[],getData:function(t){var s=t.page();console.log("**************************");var a="",r="";t.orderBy().length>0&&(a=t.orderBy()[0].substr(0,1),r=t.orderBy()[0].substr(1),a="+"===a?"ASC":"DESC");var n={city:i.city,vehicle:i.vehicleType,from:moment(g).startOf("day").format("YYYYMMDD").toString(),to:moment(g).endOf("day").format("YYYYMMDD").toString(),orderby:a,field:r,start:s,count:t.count()};return m.searchTerm&&""!=m.searchTerm&&(n.term=m.filterTerm.value+"|"+m.searchTerm),""!=m.statusCodes.value&&(n.filterByStatus=m.statusCodes.value),o.getTopDrivers(n).$promise.then(function(i){return t.total(i.total),console.log("trop ",i),i.length>0?e.tblNoData=!1:e.tblNoData=!0,i})}})}e.$inject=["$scope","$log","$rootScope","$interval","StaticDataService","ChartConfigService","PerformanceService","PerformanceHandler","DriversService","NgTableParams","ngTableEventsChannel","LiveService","$resource"],angular.module("tuktukV2Dahboard").controller("DriversController",e)}(),angular.module("tuktukV2Dahboard").factory("DriversService",DriversService),function(){"use strict";function e(e,t,i,s,a,r,n){function l(){s.getNotification({},function(e){o.notification=e},function(t){console.log(t),e.error=!0})}var o=this,c=moment();o.formObj={},o.formObj.message={},o.formObj.notificationType="push",o.formObj.message.lang="hi",o.formObj.type="topic",o.selectedDrivers=[],o.selectedType,o.filterFields=[{value:"name",name:"Driver Name"},{value:"phone",name:"Driver Phone"}],o.expirationValues=[{value:1,name:"1 Hour"},{value:12,name:"12 Hour"},{value:24,name:"24 Hour"},{value:25,name:"1 Week"}],o.expireAt=o.expirationValues[0],o.filterTerm=o.filterFields[0],o.tabChanged=function(e){console.log("changed",e),o.selectedType=e,o.formObj.type=e},o.searchTable=function(){e.tableParams.reload()},o.clearSearch=function(){o.searchTerm="",e.tableParams.reload()},o.deselectAll=function(){o.selectedDrivers=[],
angular.forEach(e.tableParams.data,function(e){e&&e.selected&&(e.selected=!1)})},o.selectDriver=function(e,t){if(e.selected&&o.selectedDrivers.length<10)o.selectedDrivers.push(e);else if(e.selected)e.selected=!1,alert("You have selected maximum allowed drivers.");else{var i=_.indexOf(_.pluck(o.selectedDrivers,"id"),t);o.selectedDrivers.splice(i,1)}},e.confirmSendPushMsg=function(){i({text:"Are you sure want send Push Message?",title:"Are you Sure?",ok:"Yes",cancel:"No"}).then(function(){o.sendPushMsg()})},o.sendPushMsg=function(){o.formObj.message.id=moment().unix(),"user"==o.formObj.type?(o.formObj.drivers=[],o.formObj.drivers=_.pluck(o.selectedDrivers,"id")):o.formObj.drivers=[],o.expireAt.value>24?o.formObj.message.expireAt=moment().add(1,"week").unix():o.formObj.message.expireAt=moment().add(o.expireAt.value,"hour").unix(),s.sendNotification(o.formObj,function(e){a.success("Notification sent."),o.formObj={},o.formObj.message={},o.formObj.drivers=[],o.formObj.notificationType="push",o.formObj.message.lang="hi",o.formObj.type=o.selectedType,o.deselectAll()},function(e){a.success("Error in sending notification."+e)})},e.tableParams=new r({page:1,count:1e3,sorting:{earning:"desc"}},{counts:[],getData:function(i){var s=i.page();console.log("**************************");var a="",r="";i.orderBy().length>0&&(a=i.orderBy()[0].substr(0,1),r=i.orderBy()[0].substr(1),a="+"===a?"ASC":"DESC");var l={city:t.city,vehicle:t.vehicleType,from:moment(c).startOf("day").format("YYYYMMDD").toString(),to:moment(c).endOf("day").format("YYYYMMDD").toString(),orderby:a,field:r,start:s,count:i.count()};return o.searchTerm&&""!=o.searchTerm&&(l.term=o.filterTerm.value+"|"+o.searchTerm),n.getDrivers(l).$promise.then(function(t){return i.total(t.total),t.data.length>0?(e.tblNoData=!1,t.data):(e.tblNoData=!0,[])})}}),l(),o.refreshPage=function(){l()}}e.$inject=["$scope","$rootScope","$confirm","AlertService","toastr","NgTableParams","OfferService"],angular.module("tuktukV2Dahboard").controller("AlertController",e)}(),angular.module("tuktukV2Dahboard").factory("AlertService",AlertService),angular.module("httpInterceptor",[]).config(["$provide","$httpProvider","$compileProvider",function(e,t,i){var s=$(),a=$('<div class="app-loader"><div class="text-center" style="padding:10%"><img src="assets/images/ring.svg" title="Tuktuk" height="100px"></div></div>').appendTo($("body")).hide();t.interceptors.push(["$q","$rootScope","$location","$cookies",function(e,t,i,s){return{request:function(t){var i=t.url.indexOf(".html");return-1==i&&a.show(),t.params&&t.params.startTime&&t.params.endTime&&("hour"==t.params.rate?(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDDHH").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDDHH").toString()):(t.params.startTime=moment(t.params.startTime).startOf("day").format("YYYYMMDD").toString(),t.params.endTime=moment(t.params.endTime).endOf("day").format("YYYYMMDD").toString())),t||e.when(t)},requestError:function(t){return a.hide(),canRecover(t)?responseOrNewPromise:e.reject(t)},response:function(e){var t=e.config.url.indexOf(".html");return-1==t&&a.hide(),e},responseError:function(i){switch(a.hide(),i.status){case 401:t.$broadcast("unauthorized");break;case 403:break;case 500:}return e.reject(i)}}}]),i.directive("appMessages",function(){var e={link:[function(e,t,i){s.push($(t))}]};return e})}]),angular.module("tuktukV2Dahboard").filter("secondsToDateTime",[function(){return function(e){var t=new Date(1e3*e),i="",s=t.getUTCHours(),a=t.getUTCMinutes(),r=t.getUTCSeconds();return s&&(i+=s+":"),a&&(i+=a+":"),r&&(i+=r+""),i}}]).filter("toMinSec",function(){return function(e){var t=parseInt(e/60,10),i=e%60;return t+" Min."+(i?" & "+i+" Sec.":"")}}),angular.module("tuktukV2Dahboard").directive("ngPunchCard",PunchCardFunc),angular.module("tuktukV2Dahboard").service("UserService",UserService),angular.module("tuktukV2Dahboard").factory("StaticDataService",StaticDataService),angular.module("tuktukV2Dahboard").factory("ChartConfigService",ChartConfigService),function(){"use strict";function e(e,t,i,s,a,r,n,l,o){null!=t.getUser()&&(s.defaults.headers.common.Authorization="Basic "+t.getUser().token),e.debug("runBlock end"),n.city=i.cities[0].value,n.vehicleType=i.vehicleTypes[0].value,n.logout=function(){l.logout({},function(e){a.error("You have logged out successfully.")},function(e){a.error(e)}),t.clearUser(),r.go("login"),n.isAuthenticated=!1},n.$on("unauthorized",function(){t.clearUser(),r.go("login"),n.isAuthenticated=!1}),n.$on("$stateChangeStart",function(e,i,s,a,l){console.log("to - "+i.name+" $state.current.name - "+r.current.name),null!=t.getUser()&&"login"==i.name&&(n.isAuthenticated=!0,r.go("home.live",{city:n.city,vehicleType:n.vehicleType}),e.preventDefault())})}e.$inject=["$log","UserService","StaticDataService","$http","toastr","$state","$rootScope","LoginService","$templateCache"],angular.module("tuktukV2Dahboard").run(e)}(),function(){"use strict";function e(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main","abstract":!0}).state("home.performance",{url:"/performance/:city/:vehicleType",templateUrl:"app/performance/performance.html",controller:"PerformanceController",controllerAs:"vm"}).state("home.maps",{url:"/maps/:city/:vehicleType",templateUrl:"app/maps/maps.html",controller:"MapsController",controllerAs:"vm",cache:!1}).state("home.demandsupply",{url:"/maps/demand-supply/:city/:vehicleType",templateUrl:"app/maps/demand-supply.html",controller:"DemandSupplyController",controllerAs:"vm",cache:!1}).state("home.live",{url:"/live/:city/:vehicleType",templateUrl:"app/live/live.html",controller:"LiveController",controllerAs:"vm"}).state("home.drivers",{url:"/drivers/:city/:vehicleType",templateUrl:"app/drivers/drivers.html",controller:"DriversController",controllerAs:"vm"}).state("home.onboarding",{url:"/drivers/onboarding/:city/:vehicleType",templateUrl:"app/drivers/onboarding.html",controller:"OnboardingController",controllerAs:"vm"}).state("home.offers",{url:"/offers/",templateUrl:"app/offers/offers.html",controller:"OffersController",controllerAs:"vm"}).state("home.drivers_detail",{url:"/detail/:driverId",templateUrl:"app/drivers/detail.html",controller:"DriversDetailController",controllerAs:"vm"}).state("home.trips",{url:"/trips",templateUrl:"app/trips/trips.html",controller:"TripsController",controllerAs:"vm"}).state("home.trip_detail",{url:"/tripdetail/:id",templateUrl:"app/trips/trip_details.html",controller:"TripDetailController",controllerAs:"vm"}).state("home.riders",{url:"/riders",templateUrl:"app/riders/riders.html",controller:"RidersController",controllerAs:"vm"}).state("home.surge",{url:"/surge",templateUrl:"app/surge/surge.html",controller:"SurgeController",controllerAs:"vm"}).state("home.alert",{url:"/alert",templateUrl:"app/alert/alert.html",controller:"AlertController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("tuktukV2Dahboard").config(e)}(),function(){"use strict";angular.module("tuktukV2Dahboard").constant("malarkey",malarkey).constant("moment",moment).constant("API","https://dev-api-analytics.gotuktuk.in/rest/v1/").constant("AUTH_API","https://dev-api-analytics.gotuktuk.in/rest/o/v1/")}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=1e3,t.positionClass="toast-top-right",t.preventDuplicates=!1,t.progressBar=!1}e.$inject=["$logProvider","toastrConfig"],angular.module("tuktukV2Dahboard").config(e)}(),!function(e,t){"use strict";if("object"==typeof exports)module.exports=t(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(i){return e.dimple=t(i),e.dimple});else if(e.d3)e.dimple=t(e.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(e){"use strict";var t={version:"2.1.6",plot:{},aggregateMethod:{}};return t.axis=function(i,s,a,r,n,l){this.chart=i,this.position=s,this.categoryFields=null===n||void 0===n?a:[].concat(n),this.measure=r,this.timeField=n,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===l||void 0===l?!0:l,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var e,t,i=[],s=!1;if(this.chart&&this.chart.series){for(e=0;e<this.chart.series.length;e+=1)t=this.chart.series[e],t[this.position]===this&&(t.data&&t.data.length>0?i=i.concat(t.data):s=!0);s&&this.chart.data&&(i=i.concat(this.chart.data))}return i},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var t,i,s,a,r,n,l;return null!==this.tickFormat&&void 0!==this.tickFormat?t=this._hasTimeField()?e.time.format(this.tickFormat):e.format(this.tickFormat):this.showPercent?t=e.format("%"):this.useLog&&null!==this.measure?t=function(t){var i=Math.floor(Math.abs(t),0).toString().length,s=Math.min(Math.floor((i-1)/3),4),a="kmBT".substring(s-1,s),r="0"===Math.round(t/Math.pow(1e3,s)*10).toString().slice(-1)?0:1;return 0===t?0:e.format(",."+r+"f")(t/Math.pow(1e3,s))+a}:null!==this.measure?(i=Math.floor(Math.abs(this._max),0).toString(),s=Math.floor(Math.abs(this._min),0).toString(),a=Math.max(s.length,i.length),a>3?(r=Math.min(Math.floor((a-1)/3),4),n="kmBT".substring(r-1,r),l=1>=a-3*r?1:0,t=function(t){return 0===t?0:e.format(",."+l+"f")(t/Math.pow(1e3,r))+n}):(l=-Math.floor(Math.log(this._tick_step)/Math.LN10),t=e.format(",."+l+"f"))):t=function(e){return e},t},this._getTimePeriod=function(){var t=this.timePeriod,i=30,s=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(t=i>=s/1e3?e.time.seconds:i>=s/6e4?e.time.minutes:i>=s/36e5?e.time.hours:i>=s/864e5?e.time.days:i>=s/6048e5?e.time.weeks:i>=s/26298e5?e.time.months:e.time.years),t},this._getTooltipText=function(t,i){if(this._hasTimeField())i[this.position+"Field"][0]&&t.push(this.timeField+": "+this._getFormat()(i[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(e,s){null!==e&&void 0!==e&&i[this.position+"Field"][s]&&t.push(e+(i[this.position+"Field"][s]!==e?": "+i[this.position+"Field"][s]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":t.push(this.measure+": "+this._getFormat()(i.width));break;case"y":t.push(this.measure+": "+this._getFormat()(i.height));break;case"p":t.push(this.measure+": "+this._getFormat()(i.angle)+" ("+e.format("%")(i.piePct)+")");break;default:t.push(this.measure+": "+this._getFormat()(i[this.position+"Value"]))}},this._getTopMaster=function(){var e=this;return null!==this.master&&void 0!==this.master&&(e=this.master._getTopMaster()),e},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(t){var i;return i=null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(t)?Date.parse(t):new Date(t):e.time.format(this.dateParseFormat).parse(t)},this._update=function(i){var s,a,r,n,l=[],o=this.ticks||10,c=function(e,i,s){var a,r,n=e.categoryFields[0],l=e._getAxisData(),o=n,c=!1,d=!0,u=null;for(a=0;a<l.length;a+=1)if(u=e._parseDate(l[a][n]),null!==u&&void 0!==u&&isNaN(u)){d=!1;break}return d||e.chart.series.forEach(function(t){t[i]===e&&t[s]._hasMeasure()&&(o=t[s].measure,c=!0)},this),r=e._orderRules.concat({ordering:o,desc:c}),t._getOrderedList(l,n,r)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!i){if("y"!==this.position||null!==this._scale&&!i)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scale.log().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scale.linear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=e.scale.linear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(l=c(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){l=l.concat(c(e,"y","x"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(l.concat([""]))):this._scale=e.scale.linear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=e.svg.axis().orient("left").scale(this._scale),this.ticks&&this._draw.ticks(o);break;case 1:this._draw=e.svg.axis().orient("right").scale(this._scale),this.ticks&&this._draw.ticks(o)}}else if(this._hasTimeField()?this._scale=e.time.scale().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scale.log().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(l=c(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){l=l.concat(c(e,"x","y"))},this),this._scale=e.scale.ordinal().rangePoints([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(l.concat([""]))):this._scale=e.scale.linear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=e.svg.axis().orient("bottom").scale(this._scale),this.ticks&&this._draw.ticks(o);break;case 1:this._draw=e.svg.axis().orient("top").scale(this._scale),this.ticks&&this._draw.ticks(o)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(e){e._scale=this._scale},this),null!==i&&void 0!==i&&i!==!1||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(o).length>0)||"x"!==this.position&&"y"!==this.position||(s=this._scale.ticks(o),a=s[1]-s[0],r=((this._max-this._min)%a).toFixed(0),this._tick_step=a,0!==r&&(this._max=Math.ceil(this._max/a)*a,this._min=Math.floor(this._min/a)*a,this._update(!0))),n=null!==l&&void 0!==l&&l.length>0?this._scale.copy()(l[0]):this._min>0?this._scale.copy()(this._min):this._max<0?this._scale.copy()(this._max):this._scale.copy()(0),this._origin!==n&&(this._previousOrigin=null===this._origin?n:this._origin,this._origin=n),this},this.addGroupOrderRule=function(e,t){this._groupOrderRules.push({ordering:e,desc:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})}},t.chart=function(i,s){this.svg=i,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=s,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease="cubic-in-out",this.staggerDraw=!1,this._group=i.append("g"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(e,t){var i=0,s=0,a=-1;for(i=0;i<this.axes.length;i+=1){if(this.axes[i]===e){a=s;break}(null===t||void 0===t||t[0]===this.axes[i].position[0])&&(s+=1)}return a},this._getAllData=function(){var e=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(e=e.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(t){null!==t.data&&void 0!==t.data&&t.data.length>0&&(e=e.concat(t.data))}),e},this._getData=function(i,s,a,r,n,l,o,c,d,u){var p,h,m=[],v=function(e,t){var i=[];return null!==e&&(e._hasTimeField()?i.push(e._parseDate(t[e.timeField])):e._hasCategories()&&e.categoryFields.forEach(function(e){i.push(t[e])},this)),i},g={x:!1,y:!1,z:!1,p:!1,c:!1},f={x:[],y:[]},b={x:[],y:[],z:[],p:[]},y={min:null,max:null},x={x:[],y:[],z:[],p:[]},_=[],k={},w={x:0,y:0,z:0,p:0},T="",D=[],F=[],C=[],S="",P=[],A="",M=[],O="",L=[],B=[],R=i,E=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(T=this.storyboard.categoryFields[0],D=t._getOrderedList(R,T,this.storyboard._orderRules)),l&&l._hasCategories()&&l._hasMeasure()&&(S=l.categoryFields[0],P=t._getOrderedList(R,S,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),o&&o._hasCategories()&&o._hasMeasure()&&(A=o.categoryFields[0],M=t._getOrderedList(R,A,o._orderRules.concat([{ordering:o.measure,desc:!0}]))),d&&d._hasCategories()&&d._hasMeasure()&&(O=d.categoryFields[0],L=t._getOrderedList(R,O,d._orderRules.concat([{ordering:d.measure,desc:!0}]))),R.length>0&&s&&s.length>0&&(B=[].concat(r),F=[],s.forEach(function(e){void 0!==R[0][e]&&F.push(e)},this),d&&d._hasMeasure()?B.push({ordering:d.measure,desc:!0}):u&&u._hasMeasure()?B.push({ordering:u.measure,desc:!0}):c&&c._hasMeasure()?B.push({ordering:c.measure,desc:!0}):l&&l._hasMeasure()?B.push({ordering:l.measure,desc:!0}):o&&o._hasMeasure()&&B.push({ordering:o.measure,desc:!0}),C=t._getOrderedList(R,F,B)),R.sort(function(e,t){var i,s,a,r,n,l,o=0;if(""!==T&&(o=D.indexOf(e[T])-D.indexOf(t[T])),""!==S&&0===o&&(o=P.indexOf(e[S])-P.indexOf(t[S])),""!==A&&0===o&&(o=M.indexOf(e[A])-M.indexOf(t[A])),""!==O&&0===o&&(o=L.indexOf(e[O])-M.indexOf(t[O])),F&&F.length>0&&0===o)for(i=[].concat(F),o=0,a=0;a<C.length;a+=1){for(s=[].concat(C[a]),n=!0,l=!0,r=0;r<i.length;r+=1)n=n&&e[i[r]]===s[r],l=l&&t[i[r]]===s[r];if(n&&l){o=0;break}if(n){o=-1;break}if(l){o=1;break}}return o}),R.forEach(function(e){var t,i,r,n,p,h=-1,f=v(l,e),b=v(o,e),y=v(c,e),x=v(d,e),_=[];if(s&&0!==s.length)for(r=0;r<s.length;r+=1)void 0===e[s[r]]?_.push(s[r]):_.push(e[s[r]]);else _=["All"];for(t=_.join("/")+"_"+f.join("/")+"_"+b.join("/")+"_"+x.join("/")+"_"+y.join("/"),i=0;i<m.length;i+=1)if(m[i].key===t){h=i;break}-1===h&&(n={key:t,aggField:_,xField:f,xValue:null,xCount:0,yField:b,yValue:null,yCount:0,pField:x,pValue:null,pCount:0,zField:y,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},m.push(n),h=m.length-1),p=function(t,i){var s,r,n=!0,l={value:0,count:1},o={value:0,count:1},c="";null!==i&&(s=i.getFrameValue(),i.categoryFields.forEach(function(t,i){i>0&&(c+="/"),c+=e[t],n=c===s},this)),null!==t&&void 0!==t&&n&&(r=m[h],t._hasMeasure()&&null!==e[t.measure]&&void 0!==e[t.measure]&&(-1===r[t.position+"ValueList"].indexOf(e[t.measure])&&r[t.position+"ValueList"].push(e[t.measure]),isNaN(parseFloat(e[t.measure]))&&(g[t.position]=!0),l.value=r[t.position+"Value"],l.count=r[t.position+"Count"],o.value=e[t.measure],r[t.position+"Value"]=a(l,o),r[t.position+"Count"]+=1))},p(l,this.storyboard),p(o,this.storyboard),p(c,this.storyboard),p(d,this.storyboard),p(u,this.storyboard)},this),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==f.x&&(E=[],o._hasMeasure()&&E.push({ordering:o.measure,desc:!0}),f.x=t._getOrderedList(R,l.categoryFields[1],l._groupOrderRules.concat(E))),o&&o._hasCategories()&&o.categoryFields.length>1&&void 0!==f.y&&(E=[],l._hasMeasure()&&E.push({ordering:l.measure,desc:!0}),f.y=t._getOrderedList(R,o.categoryFields[1],o._groupOrderRules.concat(E)),f.y.reverse()),m.forEach(function(e){null!==l&&(g.x===!0&&(e.xValue=e.xValueList.length),p=(b.x[e.xField.join("/")]||0)+(o._hasMeasure()?Math.abs(e.yValue):0),b.x[e.xField.join("/")]=p),null!==o&&(g.y===!0&&(e.yValue=e.yValueList.length),p=(b.y[e.yField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.xValue):0),b.y[e.yField.join("/")]=p),null!==d&&(g.p===!0&&(e.pValue=e.pValueList.length),p=(b.p[e.pField.join("/")]||0)+(d._hasMeasure()?Math.abs(e.pValue):0),b.p[e.pField.join("/")]=p),null!==c&&(g.z===!0&&(e.zValue=e.zValueList.length),p=(b.z[e.zField.join("/")]||0)+(c._hasMeasure()?Math.abs(e.zValue):0),b.z[e.zField.join("/")]=p),null!==u&&((null===y.min||e.cValue<y.min)&&(y.min=e.cValue),(null===y.max||e.cValue>y.max)&&(y.max=e.cValue))},this);for(h in b.x)b.x.hasOwnProperty(h)&&(w.x+=b.x[h]);for(h in b.y)b.y.hasOwnProperty(h)&&(w.y+=b.y[h]);for(h in b.p)b.p.hasOwnProperty(h)&&(w.p+=b.p[h]);for(h in b.z)b.z.hasOwnProperty(h)&&(w.z+=b.z[h]);return m.forEach(function(t){var i,s,a,r,p,h=function(e,i,s){var a,r,l,o,c;null!==e&&void 0!==e&&(o=e.position,e._hasCategories()?e._hasMeasure()?(a=t[e.position+"Field"].join("/"),r=e.showPercent?b[e.position][a]/w[e.position]:b[e.position][a],-1===_.indexOf(a)&&(k[a]=r+(_.length>0?k[_[_.length-1]]:0),_.push(a)),l=t[o+"Bound"]=t["c"+o]="x"!==o&&"y"!==o||!n?r:k[a],t[s]=r,t[o]=l-("x"===o&&r>=0||"y"===o&&0>=r?r:0)):(t[o]=t["c"+o]=t[o+"Field"][0],t[s]=1,void 0!==f[o]&&null!==f[o]&&f[o].length>=2&&(t[o+"Offset"]=f[o].indexOf(t[o+"Field"][1]),t[s]=1/f[o].length)):(r=e.showPercent?t[o+"Value"]/b[i][t[i+"Field"].join("/")]:t[o+"Value"],a=t[i+"Field"].join("/")+(t[o+"Value"]>=0),c=x[o][a]=(null===x[o][a]||void 0===x[o][a]||"z"===o||"p"===o?0:x[o][a])+r,l=t[o+"Bound"]=t["c"+o]="x"!==o&&"y"!==o||!n?r:c,t[s]=r,t[o]=l-("x"===o&&r>=0||"y"===o&&0>=r?r:0)))};h(l,"y","width"),h(o,"x","height"),h(c,"z","r"),h(d,"p","angle"),null!==u&&null!==y.min&&null!==y.max&&(y.min===y.max&&(y.min-=.5,y.max+=.5),y.min=u.overrideMin||y.min,y.max=u.overrideMax||y.max,t.cValue=t.cValue>y.max?y.max:t.cValue<y.min?y.min:t.cValue,a=e.scale.linear().range([0,null===u.colors||1===u.colors.length?1:u.colors.length-1]).domain([y.min,y.max]),r=a(t.cValue),p=r-Math.floor(r),t.cValue===y.max&&(p=1),u.colors&&1===u.colors.length?(i=e.rgb(u.colors[0]),s=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)):u.colors&&u.colors.length>1?(i=e.rgb(u.colors[Math.floor(r)]),s=e.rgb(u.colors[Math.ceil(r)])):(i=e.rgb("white"),s=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)),i.r=Math.floor(i.r+(s.r-i.r)*p),i.g=Math.floor(i.g+(s.g-i.g)*p),i.b=Math.floor(i.b+(s.b-i.b)*p),t.fill=i.toString(),t.stroke=i.darker(.5).toString())},this),m},this._getDelay=function(e,i,s){return function(a){var r=0;return s&&i.staggerDraw&&(s.x._hasCategories()?r=t._helpers.cx(a,i,s)/i._widthPixels()*e:s.y._hasCategories()&&(r=(1-t._helpers.cy(a,i,s)/i._heightPixels())*e)),r}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(e){var t,i,s,a,r,n,l=e.data||this.data||[],o=[].concat(e.categoryFields||"All"),c=this._getData(l,o,e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),d=[],u={},p=e.startAngle*(Math.PI/180)||0,h=(e.endAngle||360)*(Math.PI/180);if(p>h&&(p-=2*Math.PI),e.p&&o.length>0){if(e.x&&e.y){for(o.pop(),d=this._getData(l,["__dimple_placeholder__"].concat(o),e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),t=0;t<c.length;t+=1)for(s=["__dimple_placeholder__"].concat(c[t].aggField),s.pop(),e.x&&e.x._hasCategories()&&(s=s.concat(c[t].xField)),e.y&&e.y._hasCategories()&&(s=s.concat(c[t].yField)),a=s.join("|"),i=0;i<d.length;i+=1)if(r=[].concat(d[i].aggField),e.x&&e.x._hasCategories()&&(r=r.concat(d[i].xField)),e.y&&e.y._hasCategories()&&(r=r.concat(d[i].yField)),n=r.join("|"),a===n){c[t].xField=d[i].xField,c[t].xValue=d[i].xValue,c[t].xCount=d[i].xCount,c[t].yField=d[i].yField,c[t].yValue=d[i].yValue,c[t].yCount=d[i].yCount,c[t].zField=d[i].zField,c[t].zValue=d[i].zValue,c[t].zCount=d[i].zCount,c[t].x=d[i].x,c[t].y=d[i].y,c[t].r=d[i].r,c[t].xOffset=d[i].xOffset,c[t].yOffset=d[i].yOffset,c[t].width=d[i].width,c[t].height=d[i].height,c[t].cx=d[i].cx,c[t].cy=d[i].cy,c[t].xBound=d[i].xBound,c[t].yBound=d[i].yBound,c[t].xValueList=d[i].xValueList,c[t].yValueList=d[i].yValueList,c[t].zValueList=d[i].zValueList,c[t].cValueList=d[i].cValueList,c[t].pieKey=d[i].key,c[t].value=c.pValue,u[d[i].key]||(u[d[i].key]={total:0,angle:p}),u[d[i].key].total+=c[t].pValue;break}}else for(t=0;t<c.length;t+=1)c[t].pieKey="All",c[t].value=c.pValue,u[c[t].pieKey]||(u[c[t].pieKey]={total:0,angle:p}),u[c[t].pieKey].total+=c[t].pValue;for(t=0;t<c.length;t+=1)c[t].piePct=c[t].pValue/u[c[t].pieKey].total,c[t].startAngle=u[c[t].pieKey].angle,c[t].endAngle=c[t].startAngle+c[t].piePct*(h-p),u[c[t].pieKey].angle=c[t].endAngle}e._positionData=c},this)},this._handleTransition=function(e,t,i,s){var a=null;return a=0===t?e:e.transition().duration(t).delay(i._getDelay(t,i,s)).ease(i.ease)},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(i){null!==i._eventHandlers&&i._eventHandlers.length>0&&i._eventHandlers.forEach(function(s){var a,r=function(a){var r=new t.eventArgs;null!==i.chart.storyboard&&(r.frameValue=i.chart.storyboard.getFrameValue()),r.seriesValue=a.aggField,r.xValue=a.x,r.yValue=a.y,r.zValue=a.z,r.pValue=a.p,r.colorValue=a.cValue,r.seriesShapes=i.shapes,r.selectedShape=e.select(this),s.handler(r)};if(null!==s.handler&&"function"==typeof s.handler)if(null!==i._markers&&void 0!==i._markers)for(a in i._markers)i._markers.hasOwnProperty(a)&&i._markers[a].on(s.event,r);else i.shapes.on(s.event,r)},this)},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this.addAxis=function(e,i,s,a){var r=null,n=null;if(null!==i&&void 0!==i&&(i=[].concat(i)),"string"==typeof e||e instanceof String)r=new t.axis(this,e,i,s,a),this.axes.push(r);else{if(n=e,r=new t.axis(this,n.position,i,s,a),r._hasMeasure()!==n._hasMeasure())throw"You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.";if(r._hasTimeField()!==n._hasTimeField())throw"You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.";if((null===r.categoryFields||void 0===r.categoryFields?0:r.categoryFields.length)!==(null===n.categoryFields||void 0===n.categoryFields?0:n.categoryFields.length))throw"You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type.";n._slaves.push(r)}return r},this.addCategoryAxis=function(e,t){return this.addAxis(e,t,null)},this.addColorAxis=function(e,t){var i=this.addAxis("c",null,e);return i.colors=null===t||void 0===t?null:[].concat(t),i},this.addLegend=function(e,i,s,a,r,n){n=null===n||void 0===n?this.series:[].concat(n),r=null===r||void 0===r?"left":r;var l=new t.legend(this,e,i,s,a,r,n);return this.legends.push(l),l},this.addLogAxis=function(e,t,i){var s=this.addAxis(e,null,t,null);return null!==i&&void 0!==i&&(s.logBase=i),s.useLog=!0,s},this.addMeasureAxis=function(e,t){return this.addAxis(e,null,t)},this.addPctAxis=function(e,t,i){var s=null;return s=null!==i&&void 0!==i?this.addAxis(e,i,t):this.addMeasureAxis(e,t),s.showPercent=!0,s},this.addSeries=function(e,i,s){(null===s||void 0===s)&&(s=this.axes),(null===i||void 0===i)&&(i=t.plot.bubble);var a,r=null,n=null,l=null,o=null,c=null;return s.forEach(function(e){null!==e&&i.supportedAxes.indexOf(e.position)>-1&&(null===r&&"x"===e.position[0]?r=e:null===n&&"y"===e.position[0]?n=e:null===l&&"z"===e.position[0]?l=e:null===o&&"c"===e.position[0]?o=e:null===o&&"p"===e.position[0]&&(c=e))},this),e&&(e=[].concat(e)),a=new t.series(this,e,r,n,l,o,c,i,t.aggregateMethod.sum,i.stacked),this.series.push(a),a},this.addTimeAxis=function(e,t,i,s){var a=this.addAxis(e,null,null,t);return a.tickFormat=s,a.dateParseFormat=i,a},this.assignClass=function(e,t){return this._assignedClasses[e]=t,this._assignedClasses[e]},this.assignColor=function(e,i,s,a){return this._assignedColors[e]=new t.color(i,s,a),this._assignedColors[e]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new t.color("#80B1D3"),new t.color("#FB8072"),new t.color("#FDB462"),new t.color("#B3DE69"),new t.color("#FFED6F"),new t.color("#BC80BD"),new t.color("#8DD3C7"),new t.color("#CCEBC5"),new t.color("#FFFFB3"),new t.color("#BEBADA"),new t.color("#FCCDE5"),new t.color("#D9D9D9")],this.draw=function(t,i){t=t||0;var s,a,r=null,n=null,l=!1,o=!1,c=this._xPixels(),d=this._yPixels(),u=this._widthPixels(),p=this._heightPixels();return(void 0===i||null===i||i===!1)&&this._getSeriesData(),this.axes.forEach(function(e){e._scale=null},this),this.axes.forEach(function(e){if(e._min=0,e._max=0,a=[],e._hasMeasure()){var t=!1;this.series.forEach(function(i){if(i._deepMatch(e)){var s=i._axisBounds(e.position);e._min>s.min&&(e._min=s.min),e._max<s.max&&(e._max=s.max),t=!0}},this),t||this._getAllData().forEach(function(t){e._min>t[e.measure]&&(e._min=t[e.measure]),e._max<t[e.measure]&&(e._max=t[e.measure])},this)}else e._hasTimeField()?(e._min=null,e._max=null,this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].timeField&&void 0!==t[e.position].timeField&&-1===a.indexOf(t[e.position].timeField)&&a.push(t[e.position].timeField);
},this),e._getAxisData().forEach(function(t){a.forEach(function(i){var s=e._parseDate(t[i]);(null===e._min||s<e._min)&&(e._min=s),(null===e._max||s>e._max)&&(e._max=s)},this)},this)):e._hasCategories()&&(e._min=0,s=[],this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].categoryFields[0]&&void 0!==t[e.position].categoryFields[0]&&-1===a.indexOf(t[e.position].categoryFields[0])&&a.push(t[e.position].categoryFields[0])},this),e._getAxisData().forEach(function(e){a.forEach(function(t){-1===s.indexOf(e[t])&&s.push(e[t])},this)},this),e._max=s.length);null!==e._slaves&&void 0!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(t){t._min=e._min,t._max=e._max},this),e._update(),null===r&&"x"===e.position?r=e:null===n&&"y"===e.position&&(n=e)},this),this.axes.forEach(function(i){var s=!1,a=null,h=0,m=null,v=!1,g=0,f={l:null,t:null,r:null,b:null},b=0,y=0,x="",_=this,k=function(e){var i;return i=null===a||0===t||s?e:_._handleTransition(e,t,_)},w=function(){var t=e.select(this).selectAll("text");return!i.measure&&i._max>0&&("x"===i.position?t.attr("x",u/i._max/2):"y"===i.position&&t.attr("y",-1*(p/i._max)/2)),i.categoryFields&&i.categoryFields.length>0&&(i!==r||null!==n.categoryFields&&0!==n.categoryFields.length||t.attr("y",d+p-n._scale(0)+9),i!==n||null!==r.categoryFields&&0!==r.categoryFields.length||t.attr("x",-1*(r._scale(0)-c)-9)),this},T=function(t){return function(){var i=e.select(this).attr("class")||"";return-1===i.indexOf(t)&&(i+=" "+t),i.trim()}};null===i.gridlineShapes?(i.showGridlines||null===i.showGridlines&&!i._hasCategories()&&(!l&&"x"===i.position||!o&&"y"===i.position))&&(i.gridlineShapes=this._group.append("g").attr("class","dimple-gridline"),"x"===i.position?l=!0:o=!0):"x"===i.position?l=!0:o=!0,null===i.shapes&&(i.shapes=this._group.append("g").attr("class","dimple-axis dimple-axis-"+i.position).each(function(){_.noFormats||e.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),s=!0),i===r&&null!==n?(a="translate(0, "+(null===n.categoryFields||0===n.categoryFields.length?n._scale(0):d+p)+")",m="translate(0, "+(i===r?d+p:d)+")",h=-p):i===n&&null!==r?(a="translate("+(null===r.categoryFields||0===r.categoryFields.length?r._scale(0):c)+", 0)",m="translate("+(i===n?c:c+u)+", 0)",h=-u):"x"===i.position?(m=a="translate(0, "+(i===r?d+p:d)+")",h=-p):"y"===i.position&&(m=a="translate("+(i===n?c:c+u)+", 0)",h=-u),null!==a&&null!==i._draw&&(i._hasTimeField()?k(i.shapes).call(i._draw.ticks(i._getTimePeriod(),i.timeInterval).tickFormat(i._getFormat())).attr("transform",a).each(w):i.useLog?k(i.shapes).call(i._draw.ticks(4,i._getFormat())).attr("transform",a).each(w):k(i.shapes).call(i._draw.tickFormat(i._getFormat())).attr("transform",a).each(w),null!==i.gridlineShapes&&k(i.gridlineShapes).call(i._draw.tickSize(h,0,0).tickFormat("")).attr("transform",m)),k(i.shapes.selectAll("text")).attr("class",T(_.customClassList.axisLabel)).call(function(){_.noFormats||this.style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),k(i.shapes.selectAll("path, line")).attr("class",T(_.customClassList.axisLine)).call(function(){_.noFormats||this.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==i.gridlineShapes&&k(i.gridlineShapes.selectAll("line")).attr("class",T(_.customClassList.gridline)).call(function(){_.noFormats||this.style("fill","none").style("stroke","lightgray").style("opacity",.8)}),(null===i.measure||void 0===i.measure)&&(i.autoRotateLabel?i===r?(g=0,i.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();g=e>g?e:g}),g>u/i.shapes.selectAll("text")[0].length?(v=!0,i.shapes.selectAll("text").style("text-anchor","start").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+t.x+","+(t.y+t.height/2)+") translate(-5, 0)")})):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===i.position&&(g=0,i.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();g=e>g?e:g}),g>u/i.shapes.selectAll("text")[0].length?(v=!0,i.shapes.selectAll("text").style("text-anchor","end").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+(t.x+t.width)+","+(t.y+t.height/2)+") translate(5, 0)")})):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(v=!1,i.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==i.titleShape&&void 0!==i.titleShape&&i.titleShape.remove(),i.shapes.selectAll("text").each(function(){var e=this.getBBox();(null===f.l||-9-e.width<f.l)&&(f.l=-9-e.width),(null===f.r||e.x+e.width>f.r)&&(f.r=e.x+e.width),v?((null===f.t||e.y+e.height-e.width<f.t)&&(f.t=e.y+e.height-e.width),(null===f.b||e.height+e.width>f.b)&&(f.b=e.height+e.width)):((null===f.t||e.y<f.t)&&(f.t=e.y),(null===f.b||9+e.height>f.b)&&(f.b=9+e.height))}),"x"===i.position?(y=i===r?d+p+f.b+5:d+f.t-10,b=c+u/2):"y"===i.position&&(b=i===n?c+f.l-10:c+u+f.r+20,y=d+p/2,x="rotate(270, "+b+", "+y+")"),i.hidden||"x"!==i.position&&"y"!==i.position||null===i.title||(i.titleShape=this._group.append("text").attr("class","dimple-axis dimple-title "+_.customClassList.axisTitle+" dimple-axis-"+i.position),i.titleShape.attr("x",b).attr("y",y).attr("text-anchor","middle").attr("transform",x).text(void 0!==i.title?i.title:null===i.categoryFields||void 0===i.categoryFields||0===i.categoryFields.length?i.measure:i.categoryFields.join("/")).each(function(){_.noFormats||e.select(this).style("font-family",i.fontFamily).style("font-size",i._getFontSize())}),i===r?i.titleShape.each(function(){e.select(this).attr("y",y+this.getBBox().height/1.65)}):i===n&&i.titleShape.each(function(){e.select(this).attr("x",b+this.getBBox().height/1.65)}))},this),this.series.forEach(function(e){e.plot.draw(this,e,t),this._registerEventHandlers(e)},this),this.legends.forEach(function(e){e._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(e){return this._assignedClasses[e]||(this._assignedClasses[e]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[e]},this.getColor=function(e){return(null===this._assignedColors[e]||void 0===this._assignedColors[e])&&(this._assignedColors[e]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[e]},this.setBounds=function(e,i,s,a){return this.x=e,this.y=i,this.width=s,this.height=a,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(e,i,s,a){return this.x=e,this.y=i,this.width=0,this.height=0,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parentWidth(this.svg.node())-this._xPixels()-t._parseXPosition(s,this.svg.node())},this._heightPixels=function(){return t._parentHeight(this.svg.node())-this._yPixels()-t._parseYPosition(a,this.svg.node())},this.draw(0,!0),this},this.setStoryboard=function(e,i){return this.storyboard=new t.storyboard(this,e),null!==i&&void 0!==i&&(this.storyboard.onTick=i),this.storyboard}},t.color=function(t,i,s){this.fill=t,this.stroke=null===i||void 0===i?e.rgb(t).darker(.5).toString():i,this.opacity=null===s||void 0===s?.8:s},t.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},t.legend=function(i,s,a,r,n,l,o){this.chart=i,this.series=o,this.x=s,this.y=a,this.width=r,this.height=n,this.horizontalAlign=l,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var i,s=this._getEntries(),a=0,r=0,n=0,l=0,o=15,c=9,d=5,u=this;this.shapes&&this.shapes.remove(),i=this.chart._group.selectAll(".dimple-dont-select-any").data(s).enter().append("g").attr("class",function(e){return"dimple-legend "+t._createClass(e.aggField)}).attr("opacity",1),i.append("text").attr("class",function(e){return"dimple-legend dimple-legend-text "+t._createClass(e.aggField)+" "+u.chart.customClassList.legendLabel}).text(function(e){return e.key}).call(function(){u.chart.noFormats||this.style("font-family",u.fontFamily).style("font-size",u._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var e=this.getBBox();e.width>a&&(a=e.width),e.height>r&&(r=e.height)}),i.append("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)}).attr("height",c).attr("width",o),r=(c>r?c:r)+u._getVerticalPadding(),a+=o+u._getHorizontalPadding(),i.each(function(i){n+a>u._widthPixels()&&(n=0,l+=r),l>u._heightPixels()?e.select(this).remove():(e.select(this).select("text").attr("x","left"===u.horizontalAlign?u._xPixels()+o+d+n:u._xPixels()+(u._widthPixels()-n-a)+o+d).attr("y",function(){return u._yPixels()+l+this.getBBox().height/1.65}).attr("width",u._widthPixels()).attr("height",u._heightPixels()),e.select(this).select("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)+" "+u.chart.customClassList.legendKey+" "+e.css}).attr("x","left"===u.horizontalAlign?u._xPixels()+n:u._xPixels()+(u._widthPixels()-n-a)).attr("y",u._yPixels()+l).attr("height",c).attr("width",o).call(function(){u.chart.noFormats||this.style("fill",i.fill).style("stroke",i.stroke).style("opacity",i.opacity).style("shape-rendering","crispEdges")}),n+=a)}),this.shapes=i},this._getEntries=function(){var e=[];return this.series&&this.series.forEach(function(t){var i=t._positionData;i.forEach(function(i){var s,a=-1,r=t.plot.grouped&&!t.x._hasCategories()&&!t.y._hasCategories()&&i.aggField.length<2?"All":i.aggField.slice(-1)[0];for(s=0;s<e.length;s+=1)if(e[s].key===r){a=s;break}-1===a&&t.chart._assignedColors[r]&&(e.push({key:r,fill:t.chart._assignedColors[r].fill,stroke:t.chart._assignedColors[r].stroke,opacity:t.chart._assignedColors[r].opacity,css:t.chart._assignedClasses[r],series:t,aggField:i.aggField}),a=e.length-1)})},this),e},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){var e;return e=isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){var e;return e=isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return t._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.chart.svg.node())}},t.series=function(e,t,i,s,a,r,n,l,o,c){this.chart=e,this.x=i,this.y=s,this.z=a,this.c=r,this.p=n,this.plot=l,this.categoryFields=t,this.aggregate=o,this.stacked=c,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(e){var t,i,s,a={min:0,max:0},r=null,n=null,l=[],o=0,c=this._positionData;return"x"===e?(r=this.x,n=this.y):"y"===e?(r=this.y,n=this.x):"z"===e?r=this.z:"p"===e?r=this.p:"c"===e&&(r=this.c),r.showPercent?c.forEach(function(e){e[r.position+"Bound"]<a.min&&(a.min=e[r.position+"Bound"]),e[r.position+"Bound"]>a.max&&(a.max=e[r.position+"Bound"])},this):null===n||null===n.categoryFields||0===n.categoryFields.length?c.forEach(function(e){!this._isStacked()||"x"!==r.position&&"y"!==r.position?(e[r.position+"Value"]<a.min&&(a.min=e[r.position+"Value"]),e[r.position+"Value"]>a.max&&(a.max=e[r.position+"Value"])):e[r.position+"Value"]<0?a.min=a.min+e[r.position+"Value"]:a.max=a.max+e[r.position+"Value"]},this):(t=r.position+"Value",i=n.position+"Field",s=[],c.forEach(function(e){var a=e[i].join("/"),r=s.indexOf(a);-1===r&&(s.push(a),r=s.length-1),void 0===l[r]&&(l[r]={min:0,max:0},r>=o&&(o=r+1)),this.stacked?e[t]<0?l[r].min=l[r].min+e[t]:l[r].max=l[r].max+e[t]:(e[t]<l[r].min&&(l[r].min=e[t]),e[t]>l[r].max&&(l[r].max=e[t]))},this),l.forEach(function(e){void 0!==e&&(e.min<a.min&&(a.min=e.min),e.max>a.max&&(a.max=e.max))},this)),a},this._deepMatch=function(e){var t=!1;return this[e.position]===e?t=!0:void 0!==e._slaves&&null!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(e){t=t||this._deepMatch(e)},this),t},this._dropLineOrigin=function(){var e=0,t=0,i={x:null,y:null},s={x:null,y:null};return this.chart.axes.forEach(function(e){"x"===e.position&&null===s.x?e._hasTimeField()?s.x=this.chart._xPixels():s.x=e._origin:"y"===e.position&&null===s.y&&(e._hasTimeField()?s.y=this.chart._yPixels()+this.chart._heightPixels():s.y=e._origin)},this),this.chart.axes.forEach(function(a){"x"!==a.position||this.x.hidden?"y"!==a.position||this.y.hidden||(this._deepMatch(a)&&(0===t?i.x=s.x:1===t&&(i.x=this.chart._xPixels()+this.chart._widthPixels())),t+=1):(this._deepMatch(a)&&(0===e?i.y=s.y:1===e&&(i.y=this.chart._yPixels())),e+=1)},this),i},this._getTooltipFontSize=function(){var e;return e=this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(e,t){this._eventHandlers.push({event:e,handler:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getTooltipText=function(e){var t=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(i,s){null!==i&&void 0!==i&&null!==e.aggField[s]&&void 0!==e.aggField[s]&&t.push(i+(e.aggField[s]!==i?": "+e.aggField[s]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(t,e),this.y&&this.y._hasCategories()&&this.y._getTooltipText(t,e),this.z&&this.z._hasCategories()&&this.z._getTooltipText(t,e),this.p._getTooltipText(t,e)):(this.x&&this.x._getTooltipText(t,e),this.y&&this.y._getTooltipText(t,e),this.z&&this.z._getTooltipText(t,e)),this.c&&this.c._getTooltipText(t,e),t.filter(function(e,i){return t.indexOf(e)===i})}},t.storyboard=function(e,t){null!==t&&void 0!==t&&(t=[].concat(t)),this.chart=e,this.categoryFields=t,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){if(!this.storyLabel){var e=this.chart,t=this,i=0;this.chart.axes.forEach(function(e){"x"===e.position&&(i+=1)},this),this.storyLabel=this.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",this.chart._xPixels()+.01*this.chart._widthPixels()).attr("y",this.chart._yPixels()+(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)*(i>1?1.25:-1)).call(function(){e.noFormats||this.style("font-family",t.fontFamily).style("font-size",t._getFontSize())})}this.storyLabel.text(this.categoryFields.join("\\")+": "+this.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(e){var t=-1,i="";null!==this.categoryFields&&(this.categoryFields.forEach(function(t,s){s>0&&(i+="/"),i+=e[t]},this),t=this._categories.indexOf(i),-1===t&&(this._categories.push(i),t=this._categories.length-1))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){var e;return e=this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(e){this._frame=e%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getFrameValue=function(){var e=null;return this._frame>=0&&this._getCategories().length>this._frame&&(e=this._getCategories()[this._frame]),e},this.goToFrame=function(e){if(this._getCategories().length>0){var t=this._getCategories().indexOf(e);this._goToFrameIndex(t)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(e){return function(){e._goToFrameIndex(e._frame+1),null!==e.onTick&&e.onTick(e.getFrameValue()),e._drawText(e.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},t.aggregateMethod.avg=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),(e.value*e.count+t.value*t.count)/(e.count+t.count)},t.aggregateMethod.count=function(e,t){return e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count+t.count},t.aggregateMethod.max=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value>t.value?e.value:t.value},t.aggregateMethod.min=function(e,t){return null===e.value?parseFloat(t.value):parseFloat(e.value)<parseFloat(t.value)?parseFloat(e.value):parseFloat(t.value)},t.aggregateMethod.sum=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value+t.value},t.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,a){var r,n,l,o,c,d,u,p,h,m,v,g,f,b,y,x,_,k,w,T,D,F,C=s._positionData,S=[],P=null,A="dimple-series-"+i.series.indexOf(s),M=s.x._hasCategories()||s.y._hasCategories()?0:1,O=!1,L={},B=[],R=[],E=function(){return function(i,s,a,r){e.select(s).style("opacity",1),t._showPointTooltip(i,s,a,r)}},$=function(i){return function(s,a,r,n){e.select(a).style("opacity",n.lineMarkers||i.data.length<2?t._helpers.opacity(s,r,n):0),t._removeTooltip(s,a,r,n)}},q=function(e,r){t._drawMarkers(e,i,s,a,A,O,E(e),$(e),r)},V=function(e,a){var r;return"step"===s.interpolation&&s[e]._hasCategories()?(r=t._helpers[e](a,i,s)+("y"===e?t._helpers.height(a,i,s):0),s[e].categoryFields.length<2&&(r+=("y"===e?1:-1)*t._helpers[e+"Gap"](i,s))):r=t._helpers["c"+e](a,i,s),parseFloat(r)},I=function(t,i){return e.svg.line().x(function(e){return s.x._hasCategories()||!i?e.x:s.x[i]}).y(function(e){return s.y._hasCategories()||!i?e.y:s.y[i]}).interpolate(t)},z=function(e,t){return parseFloat(e)-parseFloat(t)},G=function(e,t){return parseFloat(e.x)-parseFloat(t.x)},Y=function(e,t,i){var s,a,r=t[t.length-1],n=9999,l=r;for(s=0;s<e.length;s+=1)(e[s].x!==r.x||e[s].y!==r.y)&&(a=180-Math.atan2(e[s].x-r.x,e[s].y-r.y)*(180/Math.PI),a>i&&n>a&&(l=e[s],n=a));return t.push(l),n};for(r="step"===s.interpolation?"step-after":s.interpolation,m=t._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(O=!0),s.x._hasCategories()?(D="x",F="y"):s.y._hasCategories()&&(D="y",F="x"),n=0;n<C.length;n+=1){for(c=[],u=-1,o=M;o<C[n].aggField.length;o+=1)c.push(C[n].aggField[o]);for(d=t._createClass(c),o=0;o<S.length;o+=1)if(S[o].keyString===d){u=o;break}-1===u&&(u=S.length,S.push({key:c,keyString:d,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:D&&C[n][D+"Field"]&&C[n][D+"Field"].length>=2?C[n][D+"Field"][0]:"All"})),S[u].data.push(C[n])}for(m&&S.sort(function(e,i){return t._arrayIndexCompare(m,e.key,i.key)}),n=0;n<S.length;n+=1){for(S[n].data.sort(t._getSeriesSortPredicate(i,s,m)),l=0;l<S[n].data.length;l+=1)S[n].points.push({x:V("x",S[n].data[l]),y:V("y",S[n].data[l])}),D&&(L[S[n].group]||(L[S[n].group]={}),L[S[n].group][S[n].points[S[n].points.length-1][D]]=s[F]._origin);v=S[n].points,"step"===s.interpolation&&v.length>1&&D&&(s.x._hasCategories()?(v.push({x:2*v[v.length-1].x-v[v.length-2].x,y:v[v.length-1].y}),L[S[n].group][v[v.length-1][D]]=s[F]._origin):s.y._hasCategories()&&(v=[{x:v[0].x,y:2*v[0].y-v[1].y}].concat(v),L[S[n].group][v[0][D]]=s[F]._origin,S[n].points=v))}for(b in L)if(L.hasOwnProperty(b)){B[b]=[];for(y in L[b])L[b].hasOwnProperty(y)&&B[b].push(parseFloat(y));B[b].sort(z)}for(n=0;n<S.length;n+=1){if(v=S[n].points,x=S[n].group,g=[],R=[],O&&t._addGradient(S[n].key,"fill-area-gradient-"+S[n].keyString,s.x._hasCategories()?s.x:s.y,C,i,a,"fill"),B[x]&&B[x].length>0)for(l=0,o=0;l<B[x].length;l+=1)B[x][l]>=v[0][D]&&B[x][l]<=v[v.length-1][D]&&(f={},f[D]=B[x][l],f[F]=L[x][B[x][l]],g.push(f),v[o][D]>B[x][l]?R.push(f):(R.push(v[o]),L[S[n].group][B[x][l]]=v[o][F],o+=1));else if(s._orderRules&&s._orderRules.length>0)R=v.concat(v[0]);else{v=v.sort(G),R.push(v[0]),T=0;do T=Y(v,R,T);while(R.length<=v.length&&(R[0].x!==R[R.length-1].x||R[0].y!==R[R.length-1].y))}g=g.reverse(),_=I(r,"_previousOrigin")(R),k=I("step-after"===r?"step-before":"step-before"===r?"step-after":r,"_previousOrigin")(g),w=I("linear","_previousOrigin")(R),S[n].entry=_+(k&&k.length>0?"L"+k.substring(1):"")+(w&&w.length>0?"L"+w.substring(1,w.indexOf("L")):0),_=I(r)(R),k=I("step-after"===r?"step-before":"step-before"===r?"step-after":r)(g),w=I("linear")(R),S[n].update=_+(k&&k.length>0?"L"+k.substring(1):"")+(w&&w.length>0?"L"+w.substring(1,w.indexOf("L")):0),_=I(r,"_origin")(R),k=I("step-after"===r?"step-before":"step-before"===r?"step-after":r,"_origin")(g),w=I("linear","_origin")(R),S[n].exit=_+(k&&k.length>0?"L"+k.substring(1):"")+(w&&w.length>0?"L"+w.substring(1,w.indexOf("L")):0),S[n].color=i.getColor(S[n].key.length>0?S[n].key[S[n].key.length-1]:"All"),S[n].css=i.getClass(S[n].key.length>0?S[n].key[S[n].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),P=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+A).data(S):s.shapes.data(S,function(e){return e.key}),P.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return A+" dimple-line "+e.keyString+" "+i.customClassList.areaSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){i.noFormats||this.attr("opacity",function(e){return O?1:e.color.opacity}).style("fill",function(e){return O?"url(#"+t._createClass(["fill-area-gradient-"+e.keyString])+")":e.color.fill}).style("stroke",function(e){return O?"url(#"+t._createClass(["stroke-area-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(e){e.markerData=e.data,q(e,this)}),p=i._handleTransition(P,a,i).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,q(e,this)}),h=i._handleTransition(P.exit(),a,i).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],q(e,this)}),t._postDrawHandling(s,p,h,a),s.shapes=P}},t.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(e,i,s){var a,r,n=i._positionData,l=null,o=["dimple-series-"+e.series.indexOf(i),"dimple-bar"],c=!i._isStacked()&&i.x._hasMeasure(),d=!i._isStacked()&&i.y._hasMeasure(),u="none";i.x._hasCategories()&&i.y._hasCategories()?u="both":i.x._hasCategories()?u="x":i.y._hasCategories()&&(u="y"),null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),l=null===i.shapes||void 0===i.shapes?e._group.selectAll("."+o.join(".")).data(n):i.shapes.data(n,function(e){return e.key}),l.enter().append("rect").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),o.join(" ")+" "+t._createClass(s)+" "+e.customClassList.barSeries+" "+t._helpers.css(i,e)}).attr("x",function(s){var a=i.x._previousOrigin;return"x"===u?a=t._helpers.x(s,e,i):"both"===u&&(a=t._helpers.cx(s,e,i)),a}).attr("y",function(s){var a=i.y._previousOrigin;return"y"===u?a=t._helpers.y(s,e,i):"both"===u&&(a=t._helpers.cy(s,e,i)),a}).attr("width",function(s){return"x"===u?t._helpers.width(s,e,i):0}).attr("height",function(s){return"y"===u?t._helpers.height(s,e,i):0}).on("mouseover",function(s){t._showBarTooltip(s,this,e,i)}).on("mouseleave",function(s){t._removeTooltip(s,this,e,i)}).call(function(){e.noFormats||this.attr("opacity",function(s){return t._helpers.opacity(s,e,i)}).style("fill",function(s){return t._helpers.fill(s,e,i)}).style("stroke",function(s){return t._helpers.stroke(s,e,i)})}),a=e._handleTransition(l,s,e,i).attr("x",function(s){return c?t._helpers.cx(s,e,i)-i.x.floatingBarWidth/2:t._helpers.x(s,e,i)}).attr("y",function(s){return d?t._helpers.cy(s,e,i)-i.y.floatingBarWidth/2:t._helpers.y(s,e,i)}).attr("width",function(s){return c?i.x.floatingBarWidth:t._helpers.width(s,e,i)}).attr("height",function(s){return d?i.y.floatingBarWidth:t._helpers.height(s,e,i)}).call(function(){e.noFormats||this.attr("fill",function(s){return t._helpers.fill(s,e,i)}).attr("stroke",function(s){return t._helpers.stroke(s,e,i)})}),r=e._handleTransition(l.exit(),s,e,i).attr("x",function(s){var a=i.x._origin;return"x"===u?a=t._helpers.x(s,e,i):"both"===u&&(a=t._helpers.cx(s,e,i)),a}).attr("y",function(s){var a=i.y._origin;return"y"===u?a=t._helpers.y(s,e,i):"both"===u&&(a=t._helpers.cy(s,e,i)),a}).attr("width",function(s){return"x"===u?t._helpers.width(s,e,i):0}).attr("height",function(s){return"y"===u?t._helpers.height(s,e,i):0}),t._postDrawHandling(i,a,r,s),i.shapes=l}},t.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(e,i,s){var a,r,n=i._positionData,l=null,o=["dimple-series-"+e.series.indexOf(i),"dimple-bubble"];null!==e._tooltipGroup&&void 0!==e._tooltipGroup&&e._tooltipGroup.remove(),l=null===i.shapes||void 0===i.shapes?e._group.selectAll("."+o.join(".")).data(n):i.shapes.data(n,function(e){return e.key}),l.enter().append("circle").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(i){var s=[];return s=s.concat(i.aggField),s=s.concat(i.xField),s=s.concat(i.yField),s=s.concat(i.zField),o.join(" ")+" "+t._createClass(s)+" "+e.customClassList.bubbleSeries+" "+t._helpers.css(i,e)}).attr("cx",function(s){return i.x._hasCategories()?t._helpers.cx(s,e,i):i.x._previousOrigin}).attr("cy",function(s){return i.y._hasCategories()?t._helpers.cy(s,e,i):i.y._previousOrigin}).attr("r",0).on("mouseover",function(s){t._showPointTooltip(s,this,e,i)}).on("mouseleave",function(s){t._removeTooltip(s,this,e,i)}).call(function(){e.noFormats||this.attr("opacity",function(s){return t._helpers.opacity(s,e,i)}).style("fill",function(s){return t._helpers.fill(s,e,i)}).style("stroke",function(s){return t._helpers.stroke(s,e,i)})}),a=e._handleTransition(l,s,e,i).attr("cx",function(s){return t._helpers.cx(s,e,i)}).attr("cy",function(s){return t._helpers.cy(s,e,i)}).attr("r",function(s){return t._helpers.r(s,e,i)}).call(function(){e.noFormats||this.attr("fill",function(s){return t._helpers.fill(s,e,i)}).attr("stroke",function(s){return t._helpers.stroke(s,e,i)})}),r=e._handleTransition(l.exit(),s,e,i).attr("r",0).attr("cx",function(s){return i.x._hasCategories()?t._helpers.cx(s,e,i):i.x._origin}).attr("cy",function(s){return i.y._hasCategories()?t._helpers.cy(s,e,i):i.y._origin}),t._postDrawHandling(i,a,r,s),i.shapes=l}},t.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(i,s,a){var r,n,l,o,c,d,u,p,h,m,v=s._positionData,g=[],f=null,b="dimple-series-"+i.series.indexOf(s),y=s.x._hasCategories()||s.y._hasCategories()?0:1,x=!1,_=function(){return function(i,s,a,r){e.select(s).style("opacity",1),t._showPointTooltip(i,s,a,r)}},k=function(i){return function(s,a,r,n){e.select(a).style("opacity",n.lineMarkers||i.data.length<2?t._helpers.opacity(s,r,n):0),t._removeTooltip(s,a,r,n)}},w=function(e,r){t._drawMarkers(e,i,s,a,b,x,_(e),k(e),r)},T=function(e,a){var r;return"step"===s.interpolation&&s[e]._hasCategories()?(s.barGap=0,s.clusterBarGap=0,r=t._helpers[e](a,i,s)+("y"===e?t._helpers.height(a,i,s):0)):r=t._helpers["c"+e](a,i,s),parseFloat(r.toFixed(1))},D=function(t,i){return e.svg.line().x(function(e){return s.x._hasCategories()||!i?e.x:s.x[i]}).y(function(e){return s.y._hasCategories()||!i?e.y:s.y[i]}).interpolate(t)};for(r="step"===s.interpolation?"step-after":s.interpolation,m=t._getSeriesOrder(s.data||i.data,s),s.c&&(s.x._hasCategories()&&s.y._hasMeasure()||s.y._hasCategories()&&s.x._hasMeasure())&&(x=!0),n=0;n<v.length;n+=1){for(c=[],u=-1,o=y;o<v[n].aggField.length;o+=1)c.push(v[n].aggField[o]);for(d=t._createClass(c),o=0;o<g.length;o+=1)if(g[o].keyString===d){u=o;break}-1===u&&(u=g.length,g.push({key:c,keyString:d,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),g[u].data.push(v[n])}for(m&&g.sort(function(e,i){return t._arrayIndexCompare(m,e.key,i.key)}),n=0;n<g.length;n+=1){for(g[n].data.sort(t._getSeriesSortPredicate(i,s,m)),x&&t._addGradient(g[n].key,"fill-line-gradient-"+g[n].keyString,s.x._hasCategories()?s.x:s.y,v,i,a,"fill"),l=0;l<g[n].data.length;l+=1)g[n].points.push({x:T("x",g[n].data[l]),y:T("y",g[n].data[l])});"step"===s.interpolation&&g[n].points.length>1&&(s.x._hasCategories()?g[n].points.push({x:2*g[n].points[g[n].points.length-1].x-g[n].points[g[n].points.length-2].x,y:g[n].points[g[n].points.length-1].y}):s.y._hasCategories()&&(g[n].points=[{x:g[n].points[0].x,y:2*g[n].points[0].y-g[n].points[1].y}].concat(g[n].points))),g[n].entry=D(r,"_previousOrigin")(g[n].points),g[n].update=D(r)(g[n].points),g[n].exit=D(r,"_origin")(g[n].points),g[n].color=i.getColor(g[n].key.length>0?g[n].key[g[n].key.length-1]:"All"),g[n].css=i.getClass(g[n].key.length>0?g[n].key[g[n].key.length-1]:"All")}null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),f=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+b).data(g):s.shapes.data(g,function(e){return e.key}),f.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return b+" dimple-line "+e.keyString+" "+i.customClassList.lineSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(){i.noFormats||this.attr("opacity",function(e){return x?1:e.color.opacity}).style("fill","none").style("stroke",function(e){return x?"url(#"+t._createClass(["fill-line-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",s.lineWeight)}).each(function(e){e.markerData=e.data,w(e,this)}),p=i._handleTransition(f,a,i).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,w(e,this)}),h=i._handleTransition(f.exit(),a,i).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],w(e,this)}),t._postDrawHandling(s,p,h,a),s.shapes=f}},t.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(i,s,a){var r,n,l=s._positionData,o=null,c=["dimple-series-"+i.series.indexOf(s),"dimple-pie"],d=function(e){var a;return a=s.x&&s.y?t._helpers.r(e,i,s):i._widthPixels()<i._heightPixels()?i._widthPixels()/2:i._heightPixels()/2;
},u=function(e){var i=d(e);return s.outerRadius&&(i=t._parsePosition(s.outerRadius,i)),Math.max(i,0)},p=function(e){var i=0;return s.innerRadius&&(i=t._parsePosition(s.innerRadius,d(e))),Math.max(i,0)},h=function(t){var i;return(i=e.svg.arc().innerRadius(p(t)).outerRadius(u(t)))(t)},m=function(t){t.innerRadius=p(t),t.outerRadius=u(t);var i,s=e.interpolate(this._current,t);return i=e.svg.arc().innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}),this._current=s(0),function(e){return i(s(e))}},v=function(e){return function(a){var r,n;return s.x&&s.y?(r=!e||s.x._hasCategories()?t._helpers.cx(a,i,s):s.x._previousOrigin,n=!e||s.y._hasCategories()?t._helpers.cy(a,i,s):s.y._previousOrigin):(r=i._xPixels()+i._widthPixels()/2,n=i._yPixels()+i._heightPixels()/2),"translate("+r+","+n+")"}};null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),o=null===s.shapes||void 0===s.shapes?i._group.selectAll("."+c.join(".")).data(l):s.shapes.data(l,function(e){return e.key}),o.enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){var s=[];return s=s.concat(e.aggField),s=s.concat(e.pField),c.join(" ")+" "+t._createClass(s)+" "+i.customClassList.pieSeries+" "+t._helpers.css(e,i)}).attr("d",h).on("mouseover",function(e){t._showBarTooltip(e,this,i,s)}).on("mouseleave",function(e){t._removeTooltip(e,this,i,s)}).call(function(){i.noFormats||this.attr("opacity",function(e){return t._helpers.opacity(e,i,s)}).style("fill",function(e){return t._helpers.fill(e,i,s)}).style("stroke",function(e){return t._helpers.stroke(e,i,s)})}).attr("transform",v(!0)).each(function(e){this._current=e,e.innerRadius=p(e),e.outerRadius=u(e)}),r=i._handleTransition(o,a,i,s).call(function(){a&&a>0?this.attrTween("d",m):this.attr("d",h),i.noFormats||this.attr("fill",function(e){return t._helpers.fill(e,i,s)}).attr("stroke",function(e){return t._helpers.stroke(e,i,s)})}).attr("transform",v(!1)),n=i._handleTransition(o.exit(),a,i,s).attr("transform",v(!0)).attr("d",h),t._postDrawHandling(s,r,n,a),s.shapes=o}},t._addGradient=function(e,i,s,a,r,n,l){var o=[].concat(e),c=r.svg.select("#"+t._createClass([i])),d=[],u=s.position+"Field",p=!0,h=[];a.forEach(function(e){-1===d.indexOf(e[u])&&e.aggField.join("_")===o.join("_")&&d.push(e[u])},this),d=d.sort(function(e,t){return s._scale(e)-s._scale(t)}),null===c.node()&&(p=!1,c=r.svg.append("defs").append("linearGradient").attr("id",t._createClass([i])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===s.position?s._scale(d[0])+r._widthPixels()/d.length/2:0).attr("y1","y"===s.position?s._scale(d[0])-r._heightPixels()/d.length/2:0).attr("x2","x"===s.position?s._scale(d[d.length-1])+r._widthPixels()/d.length/2:0).attr("y2","y"===s.position?s._scale(d[d.length-1])-r._heightPixels()/d.length/2:0)),d.forEach(function(e,t){var i={},s=0;for(s=0;s<a.length;s+=1)if(a[s].aggField.join("_")===o.join("_")&&a[s][u].join("_")===e.join("_")){i=a[s];break}h.push({offset:Math.round(t/(d.length-1)*100)+"%",color:i[l]})},this),p?r._handleTransition(c.selectAll("stop").data(h),n,r).attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}):c.selectAll("stop").data(h).enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color})},t._arrayIndexCompare=function(e,t,i){var s,a,r,n,l,o;for(a=0;a<e.length;a+=1){for(n=!0,l=!0,o=[].concat(e[a]),r=0;r<t.length;r+=1)n=n&&t[r]===o[r];for(r=0;r<i.length;r+=1)l=l&&i[r]===o[r];if(n&&l){s=0;break}if(n){s=-1;break}if(l){s=1;break}}return s},t._createClass=function(e){var t,i,s=[];if(i=function(e){var t=e.charCodeAt(0),i="-";return t>=65&&90>=t&&(i=e.toLowerCase()),i},e.length>0)for(t=0;t<e.length;t+=1)e[t]&&s.push("dimple-"+e[t].toString().replace(/[^a-z0-9]/g,i));else s=["dimple-all"];return s.join(" ")},t._drawMarkerBacks=function(i,s,a,r,n,l){var o,c,d,u=["dimple-marker-back",n,i.keyString];a.lineMarkers&&(o=null===a._markerBacks||void 0===a._markerBacks||void 0===a._markerBacks[i.keyString]?s._group.selectAll("."+u.join(".")).data(i.markerData):a._markerBacks[i.keyString].data(i.markerData,function(e){return e.key}),d=l.nextSibling&&l.nextSibling.id?o.enter().insert("circle","#"+l.nextSibling.id):o.enter().append("circle"),d.attr("id",function(e){return t._createClass([e.key+" Marker Back"])}).attr("class",function(e){var i=[];return a.x._hasCategories()&&(i=i.concat(e.xField)),a.y._hasCategories()&&(i=i.concat(e.yField)),t._createClass(i)+" "+u.join(" ")}).attr("cx",function(e){return a.x._hasCategories()?t._helpers.cx(e,s,a):a.x._previousOrigin}).attr("cy",function(e){return a.y._hasCategories()?t._helpers.cy(e,s,a):a.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),s._handleTransition(o,r,s).attr("cx",function(e){return t._helpers.cx(e,s,a)}).attr("cy",function(e){return t._helpers.cy(e,s,a)}).attr("r",2+a.lineWeight),c=s._handleTransition(o.exit(),r,s).attr("cx",function(e){return a.x._hasCategories()?t._helpers.cx(e,s,a):a.x._origin}).attr("cy",function(e){return a.y._hasCategories()?t._helpers.cy(e,s,a):a.y._origin}).attr("r",0),0===r?c.remove():c.each("end",function(){e.select(this).remove()}),(void 0===a._markerBacks||null===a._markerBacks)&&(a._markerBacks={}),a._markerBacks[i.keyString]=o)},t._drawMarkers=function(i,s,a,r,n,l,o,c,d){var u,p,h,m=["dimple-marker",n,i.keyString];u=null===a._markers||void 0===a._markers||void 0===a._markers[i.keyString]?s._group.selectAll("."+m.join(".")).data(i.markerData):a._markers[i.keyString].data(i.markerData,function(e){return e.key}),h=d.nextSibling&&d.nextSibling.id?u.enter().insert("circle","#"+d.nextSibling.id):u.enter().append("circle"),h.attr("id",function(e){return t._createClass([e.key+" Marker"])}).attr("class",function(e){var i=[],r=s.getClass(e.aggField.length>0?e.aggField[e.aggField.length-1]:"All");return a.x._hasCategories()&&(i=i.concat(e.xField)),a.y._hasCategories()&&(i=i.concat(e.yField)),t._createClass(i)+" "+m.join(" ")+" "+s.customClassList.lineMarker+" "+r}).on("mouseover",function(e){o(e,this,s,a)}).on("mouseleave",function(e){c(e,this,s,a)}).attr("cx",function(e){return a.x._hasCategories()?t._helpers.cx(e,s,a):a.x._previousOrigin}).attr("cy",function(e){return a.y._hasCategories()?t._helpers.cy(e,s,a):a.y._previousOrigin}).attr("r",0).attr("opacity",a.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",a.lineWeight).attr("stroke",function(e){return l?t._helpers.fill(e,s,a):i.color.stroke})}),s._handleTransition(u,r,s).attr("cx",function(e){return t._helpers.cx(e,s,a)}).attr("cy",function(e){return t._helpers.cy(e,s,a)}).attr("r",2+a.lineWeight).attr("opacity",a.lineMarkers||i.data.length<2?i.color.opacity:0).call(function(){s.noFormats||this.attr("fill","white").style("stroke-width",a.lineWeight).attr("stroke",function(e){return l?t._helpers.fill(e,s,a):i.color.stroke})}),p=s._handleTransition(u.exit(),r,s).attr("cx",function(e){return a.x._hasCategories()?t._helpers.cx(e,s,a):a.x._origin}).attr("cy",function(e){return a.y._hasCategories()?t._helpers.cy(e,s,a):a.y._origin}).attr("r",0),0===r?p.remove():p.each("end",function(){e.select(this).remove()}),(void 0===a._markers||null===a._markers)&&(a._markers={}),a._markers[i.keyString]=u,t._drawMarkerBacks(i,s,a,r,n,d)},t._getOrderedList=function(e,i,s){var a,r=[],n=[],l=[].concat(i),o=[].concat(i),c=[];return null!==s&&void 0!==s&&(c=c.concat(s)),c=c.concat({ordering:l,desc:!1}),c.forEach(function(t){var i,s=[],a=[];if("function"==typeof t.ordering){if(e&&e.length>0)for(i in e[0])e[0].hasOwnProperty(i)&&-1===o.indexOf(i)&&o.push(i)}else if(t.ordering instanceof Array){for(i=0;i<t.ordering.length;i+=1)e&&e.length>0&&e[0].hasOwnProperty(t.ordering[i])&&a.push(t.ordering[i]),s.push(t.ordering[i]);a.length>s.length/2?o.concat(a):t.values=s}else o.push(t.ordering)},this),a=t._rollUp(e,l,o),c.length>=1&&(c.forEach(function(e){var t=null===e.desc||void 0===e.desc?!1:e.desc,i=e.ordering,s=[],a=function(e){var t,i=0;for(t=0;t<e.length;t+=1){if(isNaN(e[t])){i=void 0;break}i+=parseFloat(e[t])}return i},n=function(e,t){var i=0,s=a(e),r=a(t);return isNaN(s)||isNaN(r)?isNaN(Date.parse(e[0]))||isNaN(Date.parse(t[0]))?e[0]<t[0]?i=-1:e[0]>t[0]&&(i=1):i=Date.parse(e[0])-Date.parse(t[0]):i=parseFloat(s)-parseFloat(r),i};"function"==typeof i?r.push(function(e,s){return(t?-1:1)*i(e,s)}):e.values&&e.values.length>0?(e.values.forEach(function(e){s.push([].concat(e).join("|"))},this),r.push(function(e,i){var a,r,n,o="",c="";for(n=0;n<l.length;n+=1)n>0&&(o+="|",c+="|"),o+=e[l[n]],c+=i[l[n]];return a=s.indexOf(o),r=s.indexOf(c),a=0>a?t?-1:s.length:a,r=0>r?t?-1:s.length:r,(t?-1:1)*(a-r)})):[].concat(e.ordering).forEach(function(e){r.push(function(i,s){var a=0;return void 0!==i[e]&&void 0!==s[e]&&(a=n([].concat(i[e]),[].concat(s[e]))),(t?-1:1)*a})})}),a.sort(function(e,t){for(var i=0,s=0;i<r.length&&0===s;)s=r[i](e,t),i+=1;return s}),a.forEach(function(e){var t,i=[];if(1===l.length)n.push(e[l[0]]);else{for(t=0;t<l.length;t+=1)i.push(e[l[t]]);n.push(i)}},this)),n},t._getSeriesOrder=function(e,i){var s=[].concat(i._orderRules),a=i.categoryFields,r=[];return null!==a&&void 0!==a&&a.length>0&&(null!==i.c&&void 0!==i.c&&i.c._hasMeasure()&&s.push({ordering:i.c.measure,desc:!0}),i.x._hasMeasure()&&s.push({ordering:i.x.measure,desc:!0}),i.y._hasMeasure()&&s.push({ordering:i.y.measure,desc:!0}),r=t._getOrderedList(e,a,s)),r},t._getSeriesSortPredicate=function(e,i,s){return function(a,r){var n=0;return i.x._hasCategories()&&(n=t._helpers.cx(a,e,i)-t._helpers.cx(r,e,i)),0===n&&i.y._hasCategories()&&(n=t._helpers.cy(a,e,i)-t._helpers.cy(r,e,i)),0===n&&s&&(n=t._arrayIndexCompare(s,a.aggField,r.aggField)),n}},t._helpers={cx:function(e,i,s){var a=0;return a=null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(e.cx):s.x._hasCategories()&&s.x.categoryFields.length>=2?s.x._scale(e.cx)+t._helpers.xGap(i,s)+(e.xOffset+.5)*(i._widthPixels()/s.x._max-2*t._helpers.xGap(i,s))*e.width:s.x._scale(e.cx)+i._widthPixels()/s.x._max/2},cy:function(e,i,s){var a=0;return a=null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(e.cy):null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2?s.y._scale(e.cy)-i._heightPixels()/s.y._max+t._helpers.yGap(i,s)+(e.yOffset+.5)*(i._heightPixels()/s.y._max-2*t._helpers.yGap(i,s))*e.height:s.y._scale(e.cy)-i._heightPixels()/s.y._max/2},r:function(e,t,i){var s=0,a=1;return null===i.z||void 0===i.z?s=i.radius&&"auto"!==i.radius?i.radius:5:(i.radius&&"auto"!==i.radius&&i.radius>1&&(a=i.radius/i.z._scale(i.z._max)),s=i.z._hasMeasure()?i.z._scale(e.r)*a:i.z._scale(t._heightPixels()/100)*a),s},xGap:function(e,t){var i=0;return(null===t.x.measure||void 0===t.x.measure)&&t.barGap>0&&(i=e._widthPixels()/t.x._max*(t.barGap>.99?.99:t.barGap)/2),i},xClusterGap:function(e,i,s){var a=0;return null!==s.x.categoryFields&&void 0!==s.x.categoryFields&&s.x.categoryFields.length>=2&&s.clusterBarGap>0&&!s.x._hasMeasure()&&(a=e.width*(i._widthPixels()/s.x._max-2*t._helpers.xGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),a},yGap:function(e,t){var i=0;return(null===t.y.measure||void 0===t.y.measure)&&t.barGap>0&&(i=e._heightPixels()/t.y._max*(t.barGap>.99?.99:t.barGap)/2),i},yClusterGap:function(e,i,s){var a=0;return null!==s.y.categoryFields&&void 0!==s.y.categoryFields&&s.y.categoryFields.length>=2&&s.clusterBarGap>0&&!s.y._hasMeasure()&&(a=e.height*(i._heightPixels()/s.y._max-2*t._helpers.yGap(i,s))*(s.clusterBarGap>.99?.99:s.clusterBarGap)/2),a},x:function(e,i,s){var a=0;return a=s.x._hasTimeField()?s.x._scale(e.x)-t._helpers.width(e,i,s)/2:null!==s.x.measure&&void 0!==s.x.measure?s.x._scale(e.x):s.x._scale(e.x)+t._helpers.xGap(i,s)+e.xOffset*(t._helpers.width(e,i,s)+2*t._helpers.xClusterGap(e,i,s))+t._helpers.xClusterGap(e,i,s)},y:function(e,i,s){var a=0;return a=s.y._hasTimeField()?s.y._scale(e.y)-t._helpers.height(e,i,s)/2:null!==s.y.measure&&void 0!==s.y.measure?s.y._scale(e.y):s.y._scale(e.y)-i._heightPixels()/s.y._max+t._helpers.yGap(i,s)+e.yOffset*(t._helpers.height(e,i,s)+2*t._helpers.yClusterGap(e,i,s))+t._helpers.yClusterGap(e,i,s)},width:function(e,i,s){var a=0;return a=null!==s.x.measure&&void 0!==s.x.measure?Math.abs(s.x._scale(e.x<0?e.x-e.width:e.x+e.width)-s.x._scale(e.x)):s.x._hasTimeField()?s.x.floatingBarWidth:e.width*(i._widthPixels()/s.x._max-2*t._helpers.xGap(i,s))-2*t._helpers.xClusterGap(e,i,s)},height:function(e,i,s){var a=0;return a=s.y._hasTimeField()?s.y.floatingBarWidth:null!==s.y.measure&&void 0!==s.y.measure?Math.abs(s.y._scale(e.y)-s.y._scale(e.y<=0?e.y+e.height:e.y-e.height)):e.height*(i._heightPixels()/s.y._max-2*t._helpers.yGap(i,s))-2*t._helpers.yClusterGap(e,i,s)},opacity:function(e,t,i){var s=0;return s=null!==i.c&&void 0!==i.c?e.opacity:t.getColor(e.aggField.slice(-1)[0]).opacity},fill:function(e,t,i){var s=0;return s=null!==i.c&&void 0!==i.c?e.fill:t.getColor(e.aggField.slice(-1)[0]).fill},stroke:function(e,t,i){var s=0;return s=null!==i.c&&void 0!==i.c?e.stroke:t.getColor(e.aggField.slice(-1)[0]).stroke},css:function(e,t){return t.getClass(e.aggField.slice(-1)[0])}},t._parentHeight=function(e){var i=e.offsetHeight;return(0>=i||null===i||void 0===i)&&(i=e.clientHeight),(0>=i||null===i||void 0===i)&&(i=null===e.parentNode||void 0===e.parentNode?0:t._parentHeight(e.parentNode)),i},t._parentWidth=function(e){var i=e.offsetWidth;return(!i||0>i)&&(i=e.clientWidth),(!i||0>i)&&(i=e.parentNode?t._parentWidth(e.parentNode):0),i},t._parsePosition=function(e,t){var i,s=0;return e&&(i=e.toString().split(","),i.forEach(function(i){i&&(isNaN(i)?"%"===i.slice(-1)?s+=t*(parseFloat(i.slice(0,i.length-1))/100):"px"===i.slice(-2)?s+=parseFloat(i.slice(0,i.length-2)):s=e:s+=parseFloat(i))},this)),0>s&&(s=t+s),s},t._parseXPosition=function(e,i){return t._parsePosition(e,t._parentWidth(i))},t._parseYPosition=function(e,i){return t._parsePosition(e,t._parentHeight(i))},t._postDrawHandling=function(t,i,s,a){0===a?(i.each(function(e,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,i)}),s.remove()):(i.each("end",function(e,i){null!==t.afterDraw&&void 0!==t.afterDraw&&t.afterDraw(this,e,i)}),s.each("end",function(){e.select(this).remove()}))},t._removeTooltip=function(e,t,i,s){i._tooltipGroup&&i._tooltipGroup.remove()},t._rollUp=function(e,t,i){var s=[];return t=null!==t&&void 0!==t?[].concat(t):[],e.forEach(function(e){var a=-1,r={},n=!0;s.forEach(function(i,s){-1===a&&(n=!0,t.forEach(function(t){n=n&&e[t]===i[t]},this),n&&(a=s))},this),-1!==a?r=s[a]:(t.forEach(function(t){r[t]=e[t]},this),s.push(r),a=s.length-1),i.forEach(function(i){-1===t.indexOf(i)&&(void 0===r[i]&&(r[i]=[]),r[i]=r[i].concat(e[i]))},this),s[a]=r},this),s},t._showBarTooltip=function(t,i,s,a){var r,n,l,o,c,d,u=5,p=10,h=750,m=e.select(i),v=m.node().getBBox().x,g=m.node().getBBox().y,f=m.node().getBBox().width,b=m.node().getBBox().height,y=m.attr("opacity"),x=m.attr("fill"),_=a._dropLineOrigin(),k=e.rgb(e.rgb(x).r+.6*(255-e.rgb(x).r),e.rgb(x).g+.6*(255-e.rgb(x).g),e.rgb(x).b+.6*(255-e.rgb(x).b)),w=e.rgb(e.rgb(x).r+.8*(255-e.rgb(x).r),e.rgb(x).g+.8*(255-e.rgb(x).g),e.rgb(x).b+.8*(255-e.rgb(x).b)),T=a.getTooltipText(t),D=0,F=0,C=0,S=function(e,t){var i=m.node().getCTM(),a=s.svg.node().createSVGPoint();return a.x=e||0,a.y=t||0,a.matrixTransform(i)};null!==s._tooltipGroup&&void 0!==s._tooltipGroup&&s._tooltipGroup.remove(),s._tooltipGroup=s.svg.append("g"),a.p||(d=a._isStacked()?1:f/2,a.x._hasCategories()||null===_.y||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",v<a.x._origin?v+d:v+f-d).attr("y1",g<_.y?g+b:g).attr("x2",v<a.x._origin?v+d:v+f-d).attr("y2",g<_.y?g+b:g).call(function(){s.noFormats||this.style("fill","none").style("stroke",x).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(h/2).duration(h/2).ease("linear").attr("y2",g<_.y?_.y-1:_.y+1),d=a._isStacked()?1:b/2,a.y._hasCategories()||null===_.x||s._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+s.customClassList.tooltipDropLine).attr("x1",v<_.x?v+f:v).attr("y1",g<a.y._origin?g+d:g+b-d).attr("x2",v<_.x?v+f:v).attr("y2",g<a.y._origin?g+d:g+b-d).call(function(){s.noFormats||this.style("fill","none").style("stroke",x).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",y)}).transition().delay(h/2).duration(h/2).ease("linear").attr("x2",v<_.x?_.x-1:_.x+1)),r=s._tooltipGroup.append("g"),n=r.append("rect").attr("class","dimple-tooltip "+s.customClassList.tooltipBox),r.selectAll(".dimple-dont-select-any").data(T).enter().append("text").attr("class","dimple-tooltip "+s.customClassList.tooltipLabel).text(function(e){return e}).call(function(){s.noFormats||this.style("font-family",a.tooltipFontFamily).style("font-size",a._getTooltipFontSize())}),r.each(function(){F=this.getBBox().width>F?this.getBBox().width:F,C=this.getBBox().width>C?this.getBBox().height:C}),r.selectAll("text").attr("x",0).attr("y",function(){return D+=this.getBBox().height,D-this.getBBox().height/2}),n.attr("x",-u).attr("y",-u).attr("height",Math.floor(D+u)-.5).attr("width",F+2*u).attr("rx",5).attr("ry",5).call(function(){s.noFormats||this.style("fill",w).style("stroke",k).style("stroke-width",2).style("opacity",.95)}),S(v+f+u+p+F).x<parseFloat(s.svg.node().getBBox().width)?(l=v+f+u+p,o=g+b/2-(D-(C-u))/2):S(v-(u+p+F)).x>0?(l=v-(u+p+F),o=g+b/2-(D-(C-u))/2):S(0,g+b+D+p+u).y<parseFloat(s.svg.node().getBBox().height)?(l=v+f/2-(2*u+F)/2,l=l>0?l:p,l=l+F<parseFloat(s.svg.node().getBBox().width)?l:parseFloat(s.svg.node().getBBox().width)-F-p,o=g+b+2*u):(l=v+f/2-(2*u+F)/2,l=l>0?l:p,l=l+F<parseFloat(s.svg.node().getBBox().width)?l:parseFloat(s.svg.node().getBBox().width)-F-p,o=g-D-(C-u)),c=S(l,o),r.attr("transform","translate("+c.x+" , "+c.y+")")},t._showPointTooltip=function(i,s,a,r){var n,l,o,c,d=5,u=10,p=750,h=e.select(s),m=parseFloat(h.attr("cx")),v=parseFloat(h.attr("cy")),g=parseFloat(h.attr("r")),f=t._helpers.opacity(i,a,r),b=h.attr("stroke"),y=r._dropLineOrigin(),x=e.rgb(e.rgb(b).r+.6*(255-e.rgb(b).r),e.rgb(b).g+.6*(255-e.rgb(b).g),e.rgb(b).b+.6*(255-e.rgb(b).b)),_=e.rgb(e.rgb(b).r+.8*(255-e.rgb(b).r),e.rgb(b).g+.8*(255-e.rgb(b).g),e.rgb(b).b+.8*(255-e.rgb(b).b)),k=0,w=0,T=0,D=r.getTooltipText(i);null!==a._tooltipGroup&&void 0!==a._tooltipGroup&&a._tooltipGroup.remove(),a._tooltipGroup=a.svg.append("g"),a._tooltipGroup.append("circle").attr("cx",m).attr("cy",v).attr("r",g).call(function(){a.noFormats||this.attr("opacity",0).style("fill","none").style("stroke",b).style("stroke-width",1)}).transition().duration(p/2).ease("linear").attr("r",g+r.lineWeight+2).call(function(){a.noFormats||this.attr("opacity",1).style("stroke-width",2)}),null!==y.y&&a._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+a.customClassList.tooltipDropLine).attr("x1",m).attr("y1",v<y.y?v+g+r.lineWeight+2:v-g-r.lineWeight-2).attr("x2",m).attr("y2",v<y.y?v+g+r.lineWeight+2:v-g-r.lineWeight-2).call(function(){a.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",f)}).transition().delay(p/2).duration(p/2).ease("linear").attr("y2",v<y.y?y.y-1:y.y+1),null!==y.x&&a._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+a.customClassList.tooltipDropLine).attr("x1",m<y.x?m+g+r.lineWeight+2:m-g-r.lineWeight-2).attr("y1",v).attr("x2",m<y.x?m+g+r.lineWeight+2:m-g-r.lineWeight-2).attr("y2",v).call(function(){a.noFormats||this.style("fill","none").style("stroke",b).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",f)}).transition().delay(p/2).duration(p/2).ease("linear").attr("x2",m<y.x?y.x-1:y.x+1),n=a._tooltipGroup.append("g"),l=n.append("rect").attr("class","dimple-tooltip "+a.customClassList.tooltipBox),n.selectAll(".dont-select-any").data(D).enter().append("text").attr("class","dimple-tooltip "+a.customClassList.tooltipLabel).text(function(e){return e}).call(function(){a.noFormats||this.style("font-family",r.tooltipFontFamily).style("font-size",r._getTooltipFontSize())}),n.each(function(){w=this.getBBox().width>w?this.getBBox().width:w,T=this.getBBox().width>T?this.getBBox().height:T}),n.selectAll("text").attr("x",0).attr("y",function(){return k+=this.getBBox().height,k-this.getBBox().height/2}),l.attr("x",-d).attr("y",-d).attr("height",Math.floor(k+d)-.5).attr("width",w+2*d).attr("rx",5).attr("ry",5).call(function(){a.noFormats||this.style("fill",_).style("stroke",x).style("stroke-width",2).style("opacity",.95)}),m+g+d+u+w<parseFloat(a.svg.node().getBBox().width)?(o=m+g+d+u,c=v-(k-(T-d))/2):m-g-(d+u+w)>0?(o=m-g-(d+u+w),c=v-(k-(T-d))/2):v+g+k+u+d<parseFloat(a.svg.node().getBBox().height)?(o=m-(2*d+w)/2,o=o>0?o:u,o=o+w<parseFloat(a.svg.node().getBBox().width)?o:parseFloat(a.svg.node().getBBox().width)-w-u,c=v+g+2*d):(o=m-(2*d+w)/2,o=o>0?o:u,o=o+w<parseFloat(a.svg.node().getBBox().width)?o:parseFloat(a.svg.node().getBBox().width)-w-u,c=v-k-(T-d)),n.attr("transform","translate("+o+" , "+c+")")},t.filterData=function(e,t,i){var s=e;return null!==t&&null!==i&&(null!==i&&void 0!==i&&(i=[].concat(i)),s=[],e.forEach(function(e){null===e[t]?s.push(e):i.indexOf([].concat(e[t]).join("/"))>-1&&s.push(e)},this)),s},t.getUniqueValues=function(e,t){var i=[];return null!==t&&void 0!==t&&(t=[].concat(t),e.forEach(function(e){var s="";t.forEach(function(t,i){i>0&&(s+="/"),s+=e[t]},this),-1===i.indexOf(s)&&i.push(s)},this)),i},t.newSvg=function(t,i,s){var a=null;if((null===t||void 0===t)&&(t="body"),a=e.select(t),a.empty())throw"The '"+t+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return a.append("svg").attr("width",i).attr("height",s)},t}),angular.module("tuktukV2Dahboard").run(["$templateCache",function(e){e.put("app/alert/alert.html",'<style>body {\n        background: #fff !important;\n    }</style><div class="container-fluid alert-container"><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><div class="tabs-view alert-tabs-view"><uib-tabset active=active><uib-tab index=0 heading="All Drivers" select="vm.tabChanged(\'topic\')"><div class=row><div class="col-md-7 col-sm-12 col-xs-12"><form role=form name=msgForm novalidate><div class="form-group col-md-6"><label class=control-label>TYPE</label><br><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=push name=inputNotificationType>Push</label><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=sms name=inputNotificationType disabled=disabled>SMS</label><p class=help-block></p><br></div><div class="form-group col-md-6"><label class=control-label>LANGUAGE</label><br><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=en name=inputLang>English</label><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=hi name=inputLang checked=checked>Hindi</label><p class=help-block></p><br></div><div class="form-group col-md-12"><label class=control-label>Title</label><input ng-model=vm.formObj.message.title type=text placeholder="Enter Title" name=inputTitle class=form-control required><div ng-messages=msgForm.inputTitle.$error ng-if=msgForm.inputTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p><br></div><div class="form-group col-md-12"><label>MESSAGE</label><textarea ng-model=vm.formObj.message.message class=form-control rows=5 name=inputMessage required></textarea><!--<p class="help-block">Character Count: {{"149"}}</p>--><div ng-messages=msgForm.inputMessage.$error ng-if=msgForm.inputMessage.$touched><div ng-message=required>This field is required</div></div><p class=help-block><a href=https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab target=_blank>(Download Chrome Extensions)</a></p><br></div><div class="form-group col-md-6"><label class=control-label>URL</label><input ng-model=vm.formObj.message.url type=text placeholder="Enter URL" name=inputURL class=form-control><br></div><div class="form-group col-md-2"><label class=control-label>Expiration</label><select class=form-control style="padding:5px 10px; border-radius: 4px" ng-model=vm.expireAt ng-options="exp.name for exp in vm.expirationValues track by exp.value"></select><p class=help-block></p><br></div><div class="form-group col-md-12"><!--<button class="btn btn-success" type="submit" ng-disabled="msgForm.$invalid"--><!--ng-click="vm.sendPushMsg()">Send <i class="fa fa-paper-plane"--><!--aria-hidden="true"></i>--><!--</button>--> <button class="btn btn-success" type=submit ng-disabled=msgForm1.$invalid ng-click=confirmSendPushMsg()>Send <i class="fa fa-paper-plane" aria-hidden=true></i></button></div></form></div></div></uib-tab><uib-tab index=1 heading="Selected Driver" select="vm.tabChanged(\'user\')"><div class=row><div class="col-md-7 col-sm-12 col-xs-12"><form role=form name=msgForm1><div class="form-group col-md-6"><label class=control-label>TYPE</label><br><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=push name=inputNotificationType>Push</label><label class=radio-inline><input ng-model=vm.formObj.notificationType type=radio value=sms name=inputNotificationType disabled=disabled>SMS</label><p class=help-block></p><br></div><div class="form-group col-md-6"><label class=control-label>LANGUAGE</label><br><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=en name=inputLang>English</label><label class=radio-inline><input type=radio ng-model=vm.formObj.message.lang value=hi name=inputLang>Hindi</label><p class=help-block></p><br></div><div class="form-group col-md-12"><label class=control-label>Title</label><input ng-model=vm.formObj.message.title type=text placeholder="Enter Title" name=inputTitle class=form-control required><div ng-messages=msgForm1.inputTitle.$error ng-if=msgForm1.inputTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p><br></div><div class="form-group col-md-12" ng-if="vm.selectedDrivers.length>0"><label>DRIVERS</label><br><div ng-repeat="driver in vm.selectedDrivers" class=badge>{{driver.name}}</div><p class=help-block></p><br></div><div class="form-group col-md-12"><label>MESSAGE</label><textarea ng-model=vm.formObj.message.message class=form-control rows=5 name=inputMessage required></textarea><div ng-messages=msgForm1.inputMessage.$error ng-if=msgForm1.inputMessage.$touched><div ng-message=required>This field is required</div></div><p class=help-block><a href=https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab target=_blank>(Download Chrome Extensions)</a></p><br></div><div class="form-group col-md-6"><label class=control-label>URL</label><input ng-model=vm.formObj.message.url type=text placeholder="Enter URL" name=inputURL class=form-control><p class=help-block></p><br></div><div class="form-group col-md-2"><label class=control-label>Expiration</label><select class=form-control style="padding:5px 10px; border-radius: 4px" ng-model=vm.expireAt ng-options="exp.name for exp in vm.expirationValues track by exp.value"></select><p class=help-block></p><br></div><div class="form-group col-md-12"><!--<button class="btn btn-success" type="submit" ng-disabled="msgForm1.$invalid"--><!--ng-click="vm.sendPushMsg()">Send <i class="fa fa-paper-plane"--><!--aria-hidden="true"></i>--><!--</button>--> <button class="btn btn-success" type=submit ng-disabled=msgForm1.$invalid ng-click=confirmSendPushMsg()>Send <i class="fa fa-paper-plane" aria-hidden=true></i></button></div></form></div><div class="col-md-5 col-sm-12 col-xs-12"><form class="form-inline col-md-12 col-sm-12 col-xs-12" role=form name=msgForm2><label class=control-label>SELECT DRIVERS</label><br><br><div class="input-group col-md-4 col-sm-6 col-xs-12"><input type=text ng-model=vm.searchTerm placeholder="Driver Name" class=form-control></div><div class="input-group col-md-4 col-sm-3 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"></select></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-center"><button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-search" type=submit><span class="glyphicon glyphicon-search" aria-hidden=true></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-left"><button ng-disabled=!vm.searchTerm ng-click=vm.clearSearch() class="btn btn-search" type=submit><span class="glyphicon glyphicon-remove" aria-hidden=true></span></button></div></form><!--<form role="form" name="msgForm1">--><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<label class="control-label">SELECT DRIVERS</label>--><!--</div>--><!--<div class="inline-group col-md-6 col-sm-12 col-xs-12">--><!--<input ng-model="vm.searchTerm" class="form-control input-search-term"--><!--placeholder="Driver Name" />--><!--</div>--><!--<div class="inline-group col-md-4 col-sm-12 col-xs-12 no-mr no-pd">--><!--<button ng-disabled="!vm.searchTerm" ng-click="vm.searchTable()" class="btn btn-small">--><!--Search--><!--</button>--><!--<p class="help-block"></p>--><!--</div>--><!--</form>--><div class="col-md-12 col-sm-12 col-xs-12"><div class=table-responsive style="max-height: 400px; overflow: auto"><table ng-table=tableParams class="table table-bordered table-striped text-center"><tbody><tr ng-repeat="row in $data track by $index" ng-if=!tblNoData><td data-title="\'#\'" class=text-center><input type=checkbox ng-model=row.selected ng-change="vm.selectDriver(row, row.id)"></td><td data-title="\'Name\'" class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.id})>{{row.name}}</a></td><td data-title="\'Phone\'" class=text-center>{{row.phone}}</td></tr><tr ng-if=tblNoData><td colspan=3>no result found</td></tr></tbody></table></div></div></div></div></uib-tab><uib-tab index=2 heading=Archive><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=table-responsive><table ng-table=msgTableParams class="table table-bordered table-striped text-center"><tbody><tr ng-repeat="row in vm.notification"><td data-title="\'ID\'" class=text-left>{{row.id}}</td><td data-title="\'Title\'" class=text-left>{{row.title}}</td><td data-title="\'Message\'" class=text-left>{{row.message.message}}</td><td data-title="\'Send On\'" class=text-left>{{(row.sendOn)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Updated On\'" class=text-left>{{(row.updatedOn)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Expire At\'" class=text-left>{{(row.message.expireAt)*1000 | date:"dd MMM yy h:mma"}}</td><td data-title="\'Type\'" class=text-left>{{row.type}}</td><td data-title="\'Notification Type\'" class=text-left>{{row.notificationType}}</td><td data-title="\'Send To\'" class=text-left><div style="width:200px; word-break: break-all">{{row.sendTo.toString()}}</div></td><td data-title="\'Author\'" class=text-left>{{row.author}}</td></tr><!--<tr >--><!--<td colspan="3">--><!--no result found--><!--</td>--><!--</tr>--></tbody></table></div></div></div></uib-tab></uib-tabset></div></div><br><br>'),e.put("app/drivers/detail.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=selectedDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><!--<div class="col-md-12 col-sm-12 col-xs-12">\n            <span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px;">&#10094;</span> <span class="text-center" ng-model="date" style="display: inline-block; padding: 7px 0;">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if="!vm.live" style="display: inline-block; padding: 7px;">&#10095;</span>\n        </div>--></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd"><div class="box box-heading box-0 text-center" ng-class="{\'box-online\': vm.profile.state== 22 || vm.profile.state== 11, \'box-offline\': vm.profile.state== 10 } "><img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{vm.profile.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class=iw-driver height=50><h4 class=title style=margin-top:10px>{{vm.profile.name}}</h4></div></div><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.id}}</h4><span>id</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.phone}}</h4><span>phone</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.vehicle}}</h4><span>vehicle number</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.joinedOn*1000 | date:\'dd MMM yy\'}}</h4><span>joined On</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.rides_today.total}} <small>/ {{vm.profile.rides_today.unique_ride}}</small></h4><span>ride / u</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.rides_total.total}} <small>/ {{vm.profile.rides_total.unique_ride}}</small></h4><span>Total rides</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate1.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_distance.total | number:2}}</h4><span>distance</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate2.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_online.total_hours | secondsToDateTime}}</h4><span>online hour</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{vm.profile.feedbackRating | number:2}}</h4><span>feedback</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{vm.profile.total_fare | number:0}} <small>/ {{vm.profile.today_fare | number:0}}</small></h4><span>total fare / fare</span></div></div><div class="col-md-2 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{vm.profile.total_earning | number:0}} <small>/ {{vm.profile.today_earning | number:0}}</small></h4><span>total earning / earning</span></div></div><!--\n<div class="col-md-2 col-sm-4 col-xs-12">\n                        <div class="box">\n                            <h4 class="number" ng-if="vm.profile.state== 22 || vm.profile.state== 11">Online</h4>\n                            <h4 class="number" ng-if="vm.profile.state== 10">Offline</h4>\n                            <span>Current Status</span>\n                        </div>\n                    </div>\n --><div class="col-md-2 col-sm-4 col-xs-12"><div class=box uib-popover-template="\'myPopoverTemplate3.html\'" popover-trigger=mouseenter popover-placement=bottom><h4 class=number>{{vm.profile.today_bid.total}}</h4><span>bid</span></div></div></div></div></div></div></div><div class=row><!--<div class="col-md-12 col-sm-12 col-xs-12">\n                    <div class="panel panel-default">\n                        <div class="panel-heading">\n                            <h4 style="margin-top: 0" class="title">Heatmap</h4></div>\n                        <div class="panel-body">\n                            <div id="example">\n                                <svg id="visualisation" width="1000" height="500"></svg>\n                            </div>\n                        </div>\n                    </div>\n                </div>--><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered table-striped"><tr ng-class="{\'unTruncate\':row.showMore,\'truncate\':!row.showMore}" class=truncate ng-repeat="row in $data track by $index"><!--<td data-title="\'Trip ID\'" sortable="\'id\'" style="text-transform: inherit">--><!--<div style="white-space: normal;">--><!--<a >{{row.id}}</a>--><!--</div>--><!--</td>--><td data-title="\'Date & Time\'" sortable="\'requestOn\'" style=width:150px><a target=_blank ui-sref="home.trip_detail({id: row.id,driverId: row.driverInfo.id,riderId: row.riderInfo.id})">{{(row.requestOn)*1000 | date:"dd/MM/yy \'at\' h:mma"}}</a></td><td data-title="\'Status\'" sortable="\'tripState\'" style="width: 100px"><div ng-if="row.tripState == 20" class=text-primary>Requested</div><div ng-if="row.tripState == 22">Allocated</div><div ng-if="row.tripState == 30">For Trip</div><div ng-if="row.tripState == 40">At Pickup</div><div ng-if="row.tripState == 60">At Destination</div><div ng-if="row.tripState == 50" class=text-info>In trip</div><div ng-if="row.tripState == 61" class=text-success>Successful</div><div ng-if="row.tripState == 70" class=text-warning>Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning>Can by Rider</div><div ng-if="row.tripState == 80">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger>Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82">Terminated</div></td><td data-title="\'Rider Info\'">{{row.riderInfo.name}}<!--<br>{{row.riderInfo.phone}}--></td><!--<td data-title="\'Pickup\'" style="max-width: 200px;">--><!--<div style="white-space: normal;">{{row.pickUp.line1 + \' \' + row.pickUp.line2}}--><!--{{row.pickUp.city + " " + row.pickUp.state + \' \' +--><!--row.pickUp.country}}--><!--</div>--><!--</td>--><!--<td data-title="\'Drop\'" style="max-width: 200px;">--><!--<div style="white-space: normal;">{{row.drop.line1 + \' \' + row.drop.line2}}--><!--{{row.pickUp.city + " " + row.drop.state + \' \' +--><!--row.drop.country}}--><!--</div>--><!--</td>--><td data-title="\'Time\'" align=center>{{getTimeDiff(row.dropOn,row.pickupOn)}}</td><td data-title="\'Distance (KM)\'" align=center>{{(row.disPickupDrop)/1000 | number:2}}</td><td data-title="\'Amount (Rs.)\'" align=right>{{row.amount.total | number:2}}<br><!--<span class="small">Cash: {{row.amount.cash | number:2}}</span>--><!--<span class="small">Citrus: {{row.amount.citrus | number:2}}</span>--><!--<span class="small">Discount: {{row.amount.discount | number:2}}</span>--></td><!--<td data-title="\'Rating\'" sortable="\'riderFeedbackRating\'" align="center">\n                                    <div style="white-space: normal;">{{row.riderFeedbackRating | number:1}}</div>\n                                </td>\n                                <td data-title="\'\'">\n                                    <button class="btn btn-xs btn-link" ng-click="showMore(row)">More <i\n                                            class="glyphicon glyphicon-triangle-bottom"></i></button>\n                                </td>--></tr></table><table class="table table-bordered table-condensed" ng-show=tblNoData><tr><td colspan=9>No data found</td></tr></table></div></div><br><br></div></div></div></div><script type=text/ng-template id=myPopoverTemplate1.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_distance.intrip | number:2}}</h4>\n        <span>in trip</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_distance.forTrip | number:2}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate2.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_online.intrip_time | secondsToDateTime}}</h4>\n        <span>in trip</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_online.fortrip_time | secondsToDateTime}}</h4>\n        <span>for trip</span>\n\n    </div></script><script type=text/ng-template id=myPopoverTemplate3.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.profile.today_bid.accepted}}</h4>\n        <span>accepted</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.rejected}}</h4>\n        <span>rejected</span>\n        <br>\n        <h4 class="number no-mr pd10-tp">{{vm.profile.today_bid.ignored}}</h4>\n        <span>ignored</span>\n\n    </div></script>'),
e.put("app/drivers/drivers.html",'<div class=container-fluid><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><div class=pull-right><input ng-change=vm.getAcquisition() class="form-control cstm-width text-center daterangepicker-aqq-chart" type=daterange ng-model=datesForAcq separator=" - " format="DD MMM YY" opens=left ranges=vm.ranges></div><h4 style="margin-top: 0" class=title>Driver Acquisition</h4></div><div class=panel-body><div><nvd3 options=vm.acquisitionChart data=vm.acquisitionData config=vm.config></nvd3></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12" ngsf-fullscreen><form class=form-inline><div class="input-group col-md-3 col-sm-12 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div><div class="input-group col-md-3 col-sm-12 col-xs-12"><input ng-model=vm.searchTerm class="form-control input-search-term" placeholder=term ng-disabled=!vm.filterTerm></div><div class="input-group col-md-1 col-sm-12 col-xs-12"><button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-small">Search</button></div><div class="input-group col-md-3 col-sm-12 col-xs-12"><select ng-model=vm.statusCodes ng-change=vm.searchTable() class=form-control ng-options="statusFilter.name for statusFilter in vm.driverStatusFilters track by statusFilter.value"><option value="" disabled=disabled>Select Status</option></select></div></form><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Top Drivers</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered table-striped text-center"><!--<thead>\n                                <tr>\n                                    <th width="120" style="text-align:left;">#ID</th>\n                                    <th width="200" style="text-align:left;">Name</th>\n                                    <th width="120" style="text-align:right;">Earning(Rs.)</th>\n                                    <th width="120">Rides</th>\n                                    <th style="text-align:left;">Online</th>\n\n                                </tr>\n                            </thead>--><tbody><tr ng-repeat="row in $data track by $index"><!--<td data-title="\'#ID\'" class="text-left"><a--><!--ui-sref="home.drivers_detail({driverId:row.driver_id})">{{row.driver_id}}</a>--><!--</td>--><td data-title="\'Name\'" sortable="\'name\'" class=text-left><a target=_blank ui-sref=home.drivers_detail({driverId:row.driver_id})>{{row.name}}</a></td><td data-title="\'Phone\'" class=text-right>{{row.phone}}</td><td data-title="\'State\'" sortable="\'state\'" class=text-center><span ng-if="row.state== 22" class=text-warning>Occupied </span><span ng-if="row.state== 11" class=text-success>Online </span><span ng-if="row.state== 10" class=text-danger>Offline</span></td><td data-title="\'App Version\'" class=text-right>{{row.app_version}}</td><td data-title="\'Earning(Rs.)\'" sortable="\'earning\'" class=text-right>{{row.earning}}</td><td data-title="\'Rides\'" sortable="\'rides\'">{{row.rides}}</td><td class=text-left data-title="\'Online\'"><span ng-repeat="time in row.online" class="label label-primary">{{time.start*1000 | date:\'h:mma\'}} - {{time.end*1000 | date:\'h:mma\'}}</span></td></tr></tbody></table></div></div><br><br></div></div></div></div>'),e.put("app/drivers/onboarding.html",'<style>body {\n        background: #fff !important;\n    }</style><div class=container-fluid><br><br><br><br><br><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><h3 style="margin:0 0 20px" class="title text-center">DRIVER ONBOARDING</h3><div class="col-md-4 col-sm-12 col-xs-12"><form role=form class=form-horizontal><div class=form-group><label class="col-sm-3 control-label" for=inputEmail3>Email</label><div class=col-sm-9><input type=email placeholder=Email id=inputEmail3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=inputPassword3>Password</label><div class=col-sm-9><input type=password placeholder=Password id=inputPassword3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=exampleInputFile>File</label><div class=col-sm-9><input type=file id=exampleInputFile><p class=help-block>Example block-level help text here.</p></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><div class=checkbox><label><input type=checkbox> Active</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label">Choices</label><div class=col-sm-9><div class=checkbox><label><input type=checkbox checked="" value=option1 id=optionsCheckbox1 name=optionsRadios> Option one is this and that&mdash;be sure to include why it\'s great</label></div><div class=checkbox><label><input type=checkbox value=option2 id=optionsCheckbox2 name=optionsRadios> Option two can be something else and selecting it will deselect option one</label></div></div></div><div class=form-group><label class="col-sm-3 control-label">Sex</label><div class=col-sm-9><div class=radio><label><input type=radio checked="" value=option1 id=optionsRadios1 name=optionsRadios> Male</label></div><div class=radio><label><input type=radio value=option2 id=optionsRadios2 name=optionsRadios> Female</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><button class="btn btn-default pull-right" type=submit>Create User</button></form></div><div class="col-md-4 col-sm-12 col-xs-12"><form role=form class=form-horizontal><div class=form-group><label class="col-sm-3 control-label" for=inputEmail3>Email</label><div class=col-sm-9><input type=email placeholder=Email id=inputEmail3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=inputPassword3>Password</label><div class=col-sm-9><input type=password placeholder=Password id=inputPassword3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=exampleInputFile>File</label><div class=col-sm-9><input type=file id=exampleInputFile><p class=help-block>Example block-level help text here.</p></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><div class=checkbox><label><input type=checkbox> Active</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label">Choices</label><div class=col-sm-9><div class=checkbox><label><input type=checkbox checked="" value=option1 id=optionsCheckbox1 name=optionsRadios> Option one is this and that&mdash;be sure to include why it\'s great</label></div><div class=checkbox><label><input type=checkbox value=option2 id=optionsCheckbox2 name=optionsRadios> Option two can be something else and selecting it will deselect option one</label></div></div></div><div class=form-group><label class="col-sm-3 control-label">Sex</label><div class=col-sm-9><div class=radio><label><input type=radio checked="" value=option1 id=optionsRadios1 name=optionsRadios> Male</label></div><div class=radio><label><input type=radio value=option2 id=optionsRadios2 name=optionsRadios> Female</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><button class="btn btn-default pull-right" type=submit>Create User</button></form></div><div class="col-md-4 col-sm-12 col-xs-12"><form role=form class=form-horizontal><div class=form-group><label class="col-sm-3 control-label" for=inputEmail3>Email</label><div class=col-sm-9><input type=email placeholder=Email id=inputEmail3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=inputPassword3>Password</label><div class=col-sm-9><input type=password placeholder=Password id=inputPassword3 class=form-control><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label" for=exampleInputFile>File</label><div class=col-sm-9><input type=file id=exampleInputFile><p class=help-block>Example block-level help text here.</p></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><div class=checkbox><label><input type=checkbox> Active</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><div class=form-group><label class="col-sm-3 control-label">Choices</label><div class=col-sm-9><div class=checkbox><label><input type=checkbox checked="" value=option1 id=optionsCheckbox1 name=optionsRadios> Option one is this and that&mdash;be sure to include why it\'s great</label></div><div class=checkbox><label><input type=checkbox value=option2 id=optionsCheckbox2 name=optionsRadios> Option two can be something else and selecting it will deselect option one</label></div></div></div><div class=form-group><label class="col-sm-3 control-label">Sex</label><div class=col-sm-9><div class=radio><label><input type=radio checked="" value=option1 id=optionsRadios1 name=optionsRadios> Male</label></div><div class=radio><label><input type=radio value=option2 id=optionsRadios2 name=optionsRadios> Female</label></div><p class=help-block>Lorem ipsum dolor sit amet</p></div></div><button class="btn btn-default pull-right" type=submit>Create User</button></form></div></div></div></div>'),e.put("app/live/live.html",'<div class=container-fluid ng-if=vm.overview><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class="row overview-box"><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-1 text-center"><h4 class=title>DRIVERS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.driver.total_drivers}}</h4><span>Total</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.free_drivers}}</h4><span>Free</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.occupied_drivers}}</h4><span>Occupied</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.online_drivers_percentage | number:2}}%</h4><span>Online</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.driver.utilization_percentage | number:2}}%</h4><span>Utilization</span></div></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-2 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-2 text-center"><h4 class=title>BOOKINGS</h4></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.total_booking}} <small>/ {{vm.overview.trip.unique_booking}}</small></h4><span>Total / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.successful.total}} <small>/ {{ vm.overview.trip.successful.unique_riders}} / {{ vm.overview.trip.fulfillment | number:2}}%</small></h4><span>Fulfilled / U / Fulfilment</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number uib-popover-template="\'myPopoverTemplate.html\'" popover-trigger=mouseenter>{{vm.overview.trip.cancelled.total}} <small>/ {{ vm.overview.trip.cancelled.total_unique_rider}}</small></h4><span class="title text-warning">Cancelled / U</span><!--<button uib-popover-template="\'myPopoverTemplate.html\'" type="button" class="btn btn-default">Popover With Template</button>--></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.before_allocation.total_count}} <small>/ {{ vm.overview.trip.before_allocation.unique_count }}</small></h4><span class="title text-warning">Can before Alloc / U</span></div></div><div class="col-md-2 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.trip.failed.total}} <small>/ {{ vm.overview.trip.failed.unique_rider}}</small></h4><span>Failed / U</span></div></div><div class="col-md-1 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{ vm.overview.trip.in_process}}</h4><span>in Prog</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-3 text-center"><h4 class=title>RIDERS</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.total_riders}}</h4><span>Total</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.rider.new_riders_reg}}</h4><span>New</span></div></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12 text-center"><div class="panel panel-default"><div class=panel-body><div class="col-md-4 col-sm-4 col-xs-12 no-mr no-pd"><div class="box box-heading box-4 text-center"><h4 class=title>tCASH</h4></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.total_amount}}/-</h4><span>Total Amount</span></div></div><div class="col-md-4 col-sm-4 col-xs-6"><div class=box><h4 class=number>{{vm.overview.tcash.trip_affected}}</h4><span>Trips Affected</span></div></div></div></div></div></div><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rides</h4></div><div class=panel-body><div><nvd3 options=vm.newRidersChartOptions data=vm.newRiders config=vm.config></nvd3></div></div></div></div><div class=clearfix></div><div class="col-md-6 col-sm-12 col-xs-12 cancelled-trip-quad1"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Cancelled Trips</h4></div><div class=panel-body><div class="col-md-6 col-sm-6 col-xs-12"><h5>By driver</h5><nvd3 options=vm.cancelTripByDriverChartOptions data=vm.canceledTripByDriver config=vm.config></nvd3></div><div class="col-md-6 col-sm-6 col-xs-12"><h5>By Rider</h5><nvd3 options=vm.cancelTripByRiderChartOptions data=vm.canceledTripByRider config=vm.config></nvd3></div></div></div></div><div class="col-md-6 col-sm-6 col-xs-12" ngsf-fullscreen><div class="panel panel-default"><div class=panel-heading><div class=pull-right><select name=mySelect id=mySelect ng-options="option.label for option in vm.heatMapFilers track by option.id" ng-model=vm.selected ng-change=vm.loadHeatMap();></select><span style="padding:0 10px 0 5px">{{vm.heatMapDataLength}}</span> <a ngsf-toggle-fullscreen show-if-fullscreen-enabled style=color:#ccc><i class="fa fa-arrows-alt" show-if-fullscreen=false></i> <i show-if-fullscreen=true>X</i></a></div><h4 style="margin-top: 0" class=title>Heat Map</h4></div><div class=panel-body><div><ng-map id=live_map zoom=14 center="[22.717081666666665, 75.87155666666666]" on-resized=vm.resizeMap() trigger-resize=true style=height:400px><!--   <heatmap-layer id="foo" data="\'heatMapData\'"></heatmap-layer>--></ng-map><rzslider rz-slider-model=slider.minValue rz-slider-high=slider.maxValue rz-slider-options=slider.options></rzslider></div></div></div></div></div></div><script type=text/ng-template id=myPopoverTemplate.html><div class="box text-center">\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.rider_cancelled}}\n            <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled}}</small>\n        </h4>\n        <span>Rider Cancelled / u</span>\n        <h4 class="number no-mr">{{vm.overview.trip.cancelled.driver_cancelled}}\n            <small>/ {{vm.overview.trip.cancelled.unique_rider_cancelled_by_driver}}</small>\n        </h4>\n        <span>Driver Cancelled / u</span>\n\n    </div></script>'),e.put("app/login/login.html",'<style>html {\n    height: 100%;\n}\nbody {\n    background-color: #333;\n    height: 100%;\n    background-image: url("../../assets/images/blur-bg.jpg");\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-attachment: fixed;\n}</style><div class="well login-bg"><div class=row><div class=col-md-12><div class=col-md-12><h1 class=logo-login><img src=assets/images/gotuktuk-play-logo.png title=Tuktuk height=64></h1></div><div class=col-md-12><form name=login novalidate><div class=group><input class=inputMaterial type=text ng-model=user.username required placeholder=Username style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.username.$error ng-if=login.username.$touched><p ng-message=required>Please enter username.</p></div><div class=group><input class=inputMaterial type=password ng-model=user.password required placeholder=Password style="border:none !important"></div><div class="help-block animated slideInUp" ng-messages=login.password.$error ng-if=login.password.$touched><p ng-message=required>Please enter password.</p></div><div class=group><button class="btn btn-success form-control" style="border:none !important; width:100%" ng-disabled=login.$invalid ng-click=loginUser()>Login</button></div></form></div></div></div></div>'),e.put("app/main/main.html",'<nav id=load class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container-fluid><div class=row><div><a class=tg-menu ng-click="toggle = !toggle"><img src=assets/images/menu.svg title=Tuktuk></a></div></div></div></nav><div class=sidenav ng-class="{\'open\' : toggle}" style="z-index: 999999 !important"><a ng-click="toggle = !toggle" class=toggle-menu-close><img src=assets/images/menu.svg title=Tuktuk></a><ul class="nav nav-stacked"><li style="padding:2px 10px"><span class=pull-right style="color: #333; padding: 15px 0px">Admin <span style="padding: 0;color:#333" ng-click=logout() id=admin type=button uib-dropdown-toggle ng-disabled=disabled>[ Logout ] </span></span><img height=30 style="margin:10px 12px" title=Tuktuk src=assets/images/gotuktuk-play-logo.png></li><li class=header><span style="padding:5px 10px">{{selectedVehicle.name}}</span> | <span style="padding:5px 10px">{{selectedCity.name}}</span></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.live({city: city,vehicleType: vehicleType})"><span class="fa fa-heart"></span> Live</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.drivers({city: city,vehicleType: vehicleType})"><span class="fa fa-paper-plane"></span> Drivers</a><!--<ul class="nav sub-nav">--><!--<li><a ui-sref="home.onboarding({city: city,vehicleType: vehicleType})"><span class="fa fa-pencil-square-o"></span><strike>Onboarding</strike></a></li>--><!--</ul>--></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.maps({city: city,vehicleType: vehicleType})"><span class="fa fa-map"></span>Maps</a><ul class="nav sub-nav"><li><a ui-sref="home.demandsupply({city: city,vehicleType: vehicleType})"><span class="fa fa-line-chart"></span><strike>Demand / Supply</strike></a></li></ul></li><!--<li ng-click="toggle = !toggle" ui-sref-active="active"><a--><!--ui-sref="home.performance({city: city,vehicleType: vehicleType})"><span--><!--class="fa fa-area-chart "></span> <strike>Performance</strike> <sup--><!--class="text-lowercase">Beta</sup></a></li>--><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref="home.trips({city: city,vehicleType: vehicleType})"><span class="fa fa-map-pin"></span> Trips</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref=home.offers><span class="fa fa-barcode"></span> Offers</a></li><!--<li ng-click="toggle = !toggle" ui-sref-active="active"><a ui-sref="home.riders"> <span--><!--class="fa fa-users"></span> <strike>Riders</strike></a></li>--><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref=home.surge><span class="fa fa-rupee"></span> Surge</a></li><li ng-click="toggle = !toggle" ui-sref-active=active><a ui-sref=home.alert><span class="fa fa-bell"></span>Alert</a></li></ul></div><ui-view></ui-view>'),e.put("app/maps/demand-supply.html",'<style>.custom-marker.my1 {\n        font-size: 1.5em;\n        padding: 10px;\n        background: #fff;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n        border: #7F7F7F solid 1px;\n    }\n\n    .custom-marker.my1:after {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #fff transparent;\n        display: block;\n        width: 0;\n        z-index: 1;\n        margin-left: -6px;\n        bottom: -6px;\n        left: 50%;\n    }\n\n    .custom-marker.my1:before {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #7F7F7F transparent;\n        display: block;\n        width: 0;\n        z-index: 0;\n        margin-left: -6px;\n        bottom: -7px;\n        left: 50%;\n    }\n\n    .custom-marker.my2 {\n        font-size: 1.5em;\n        padding: 10px;\n        background: #fff;\n        -webkit-border-radius: 4px;\n        -moz-border-radius: 4px;\n        border-radius: 4px;\n        border: #7F7F7F solid 1px;\n        background: red;\n    }\n\n    .custom-marker.my2:after {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: red transparent;\n        display: block;\n        width: 0;\n        z-index: 1;\n        margin-left: -6px;\n        bottom: -6px;\n        left: 50%;\n    }\n\n    .custom-marker.my2:before {\n        content: \'\';\n        position: absolute;\n        border-style: solid;\n        border-width: 7px 6px 0;\n        border-color: #7F7F7F transparent;\n        display: block;\n        width: 0;\n        z-index: 0;\n        margin-left: -6px;\n        bottom: -7px;\n        left: 50%;\n    }</style><div class=content><div class=geo-hash-select><select ng-change=vm.onPrecisionChange() style="padding:5px 10px; border-radius: 4px" ng-model=vm.selectedPrecision ng-options="precision.name for precision  in  vm.precisionArr track by precision.value"></select></div><ng-map click id=bidMap center=indore style="width:100%; height:100%; position:fixed" zoom={{vm.selectedPrecision.value+8}}><div ng-repeat="data in allHash" class=geo-hash-box><shape name=rectangle editable=false draggable=false fill-color=red fill-opacity={{(data.rank)/10}} stroke-color=#000 stroke-weight=0.1 stroke-opacity=0.1 bounds={{data.hash.boxBounds}} clickable=true></shape></div><!--<ng-map click id="bidMap" center="indore" style="width:100%; height:100%; position:fixed"--><!--zoom="13">--><!--<custom-marker class="custom-marker my1" ng-repeat="data in allHash" position="{{(data.hash.boxBounds[0][0] + data.hash.boxBounds[1][0])/2}},{{(data.hash.boxBounds[0][1] + data.hash.boxBounds[1][1])/2}}"--><!--on-mouseover="mouseover()" on-mouseout="mouseout()"--><!--on-click="click()">--><!--<div class="my1">--><!--<div>D: {{data.demand}}, S: {{data.supply}}</div>--><!--</div>--><!--</custom-marker>--><!--<marker icon="{--><!--url:\'assets/images/icons/marker-red.svg\',--><!--scaledSize:[30,30]--><!--}" title="Demand: {{data.demand}}, Supply: {{data.supply}}" id="driver-{{$index}}"--><!--on-click="vm.map.showInfoWindow(\'iw-window\', \'driver-\'+$index)"--><!--position="{{(data.hash.boxBounds[0][0] + data.hash.boxBounds[1][0])/2}},{{(data.hash.boxBounds[0][1] + data.hash.boxBounds[1][1])/2}}">--><!--</marker>--><!--<info-window visible-on-marker="driver-{{$index}}" id="iw-window">--><!--<div ng-non-bindable>--><!--<div class="info-window">--><!--<div class="iw-wrapper">--><!--<div class="iw-content">--><!--Demand: {{data.demand}}<br>--><!--Supply: {{data.supply}}--><!--</div>--><!--</div>--><!--</div>--><!--</div>--><!--</info-window>--></ng-map><div class="row geo-fence-tbl" ng-if=" vm.groupCreation || vm.groupEdit"><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title><span class=pull-right ng-click=vm.onPrecisionChange()><i aria-hidden=true class="fa fa-plus"></i></span>Geo Hash</h4></div><div class=panel-body><form role=form class=form-horizontal name=settingForm novalidate><div class="form-group time-picker"><label class="col-sm-3 control-label">Duration</label><div class=col-sm-4><uib-timepicker ng-model=vm.setting.startTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep show-meridian=ismeridian></uib-timepicker></div><div class=col-sm-4><uib-timepicker ng-model=vm.setting.endTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep show-meridian=ismeridian></uib-timepicker></div></div><div class=form-group><label class="col-sm-3 control-label">Geo Hash</label><div class=col-sm-9><div ng-if="vm.setting.geoHashArr.length>0"><span ng-repeat="box in vm.setting.geoHashArr" class="label label-info">{{box.geoHash}}<!--<button class="label-btn" ng-click="vm.removeGeoHash($index)">--><!--x--><!--</button>--></span></div><div ng-if="vm.setting.geoHashArr.length<=0">No geohash created</div><p class=help-block></p></div></div><div class=form-group><label class="col-md-3 control-label">Type</label><div class=col-md-9><label class=radio-inline><input ng-model=vm.setting.type type=radio value=x name=chargeType checked=checked required> x</label><label class=radio-inline><input ng-model=vm.setting.type type=radio value=a name=chargeType required> +</label><p class=help-block></p><div ng-messages=settingForm.chargeType.$error ng-if=settingForm.chargeType.$touched><div ng-message=required>This field is required</div></div></div></div><div class=form-group><label class="col-sm-3 control-label">Charge</label><div class=col-sm-9><input type=number ng-model=vm.setting.value placeholder=Charge name=inputCharge class=form-control required><div ng-messages=settingForm.inputCharge.$error ng-if=settingForm.inputCharge.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><div class=form-group><label class="col-sm-3 control-label">Driver Value</label><div class=col-sm-9><input type=number ng-model=vm.setting.driverValue placeholder="Driver Value" name=inputDriverValue class=form-control required><div ng-messages=settingForm.inputDriverValue.$error ng-if=settingForm.inputDriverValue.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><div class=form-group><label class="col-sm-3 control-label">Group Name</label><div class=col-sm-9><input type=text placeholder="Group Title" name=inputGroupTitle ng-model=vm.setting.groupTitle class=form-control required><div ng-messages=settingForm.inputGroupTitle.$error ng-if=settingForm.inputGroupTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-9"><div class=checkbox><label><input type=checkbox ng-model=vm.setting.forceConfirm style="margin-top: 2px"> Force Confirm</label></div><p class=help-block></p><button ng-click=vm.createSurge() ng-disabled="!vm.setting.geoHashArr.length>0 || settingForm.$invalid" class="btn btn-success pull-left" type=submit>Save</button> <button ng-click=vm.removeGroup(vm.setting.groupId) ng-if=vm.setting.groupId class="btn btn-danger pull-right" type=button>Delete</button></div></div></form></div></div></div></div></div>'),e.put("app/maps/maps.html",'<style>.navbar-fixed-top, .navbar-fixed-bottom {\n        z-index: 10;\n    }\n\n    .live {\n        background-color: rgb(48, 176, 58);\n        border-radius: 100%;\n        height: 12px;\n        line-height: 12px;\n        position: absolute;\n        right: 50px !important;\n        text-indent: 17px;\n        top: 22px;\n        width: 12px;\n        z-index: 10;\n        left: inherit;\n    }</style><div class=content><div class=live>LIVE</div><div class=content-div><ng-map id=drivers_map center=indore style=height:100% zoom=12><map-data load-geo-json={{vm.API_URL}}geofence></map-data><!--<map-data  add-geo-json={{vm.geoJSON}}>\n            </map-data>--><div><marker ng-repeat="driver in vm.allDrivers.free.drivers track by $index" icon="{\n        url:\'assets/images/icons/marker-green.svg\',\n        scaledSize:[30,30],\n        origin: [0,0],\n        anchor: [15,15]\n      }" id=free-driver-{{$index}} on-click="vm.map.showInfoWindow(driver,\'free-driver-\'+$index)" position={{driver.marker}}></marker></div><info-window id=iw-drivers><div ng-non-bindable=""><div class=info-window><div class=iw-wrapper><div class="iw-header text-center"><img ng-src={{vm.driver.profile.profile_image}} class=iw-driver height=50><h3>{{vm.driver.profile.name}}</h3></div><div class=iw-content><table class=table><tbody><tr><td class=text-center><i class="fa fa-clock-o"></i></td><td>Time</td><td>{{vm.driver.profile.time | date:\'shortTime\'}}</td></tr><tr><td class=text-center><i class="fa fa-mobile-phone"></i></td><td>Phone#</td><td>{{vm.driver.profile.phone}}</td></tr><tr><td class=text-center><i class="fa fa-taxi"></i></td><td>Vehicle#</td><td>{{vm.driver.profile.vehicle}}</td></tr><tr><td class=text-center><i class="fa fa-user"></i></td><td>ID#</td><td>{{vm.driver.profile.driverId}}</td></tr><tr><td class=text-center><i class="fa fa-map-marker"></i></td><td>Location</td><td style=max-width:100px><a ng-click=vm.clicked(vm.driver.marker)><span ng-if=!vm.driver.address>Show</span></a> <span ng-if=vm.driver.address>{{vm.driver.address}}</span></td></tr></tbody></table></div></div></div></div></info-window></ng-map><div class="tabs-view tabs-view-2"><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : !tabView}"><uib-tabset active=active><uib-tab index=0 heading=Drivers><div class=row><!--\n              <div class="col-md-4">\n                              <div class="pentagon total">\n                                <div class="text-center">\n                                  <h4>Total</h4>\n                                  <span>{{vm.allDrivers.total}}</span>\n                                </div>\n                              </div>\n                            </div>\n\n                            <div class="col-md-6">\n                              <div class="pentagon occupied">\n                                <div class="text-center">\n                                  <h4>Occupied</h4>\n                                  <span>{{vm.allDrivers.occupied.total}}</span>\n                                </div>\n                              </div>\n                            </div>\n                             --><div class=col-md-12 style="min-height: 80px"><div class="pentagon available"><div class=text-center><h4>Free</h4><span>{{vm.allDrivers.free.total}}</span></div></div></div></div></uib-tab></uib-tabset></div></div></div></div>'),
e.put("app/offers/offers.html",'<script type=text/ng-template id=headerCheckbox.html><input type="checkbox" ng-model="vm.offerCheckboxes.checked" class="select-all" value=""/></script><script type=text/ng-template id=driverCheckbox.html><input type="checkbox" ng-model="vm.driverCheckboxes.checked" class="select-all-drivers" value=""/></script><script type=text/ng-template id=alert.html><p>Are you sure you want to delete all offers assigned to this driver?</p>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">No\n        </button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary"\n                ng-click="vm.removeAllAssignedOffers();closeThisDialog(0)">Yes\n        </button>\n    </div></script><script type=text/ng-template id=alertSingleDelete.html><p>Are you sure you want to delete this offer?</p>\n    <div class="ngdialog-buttons">\n        <button type="button" class="ngdialog-button ngdialog-button-secondary" ng-click="closeThisDialog(0)">No\n        </button>\n        <button type="button" class="ngdialog-button ngdialog-button-primary"\n                ng-click="removeSingleOffer(index,row);closeThisDialog(0)">Yes\n        </button>\n    </div></script><div class=container-fluid><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><div class=row><div class="col-md-5 col-sm-12 col-xs-12"><form class=form-inline><div class="input-group col-md-4 col-sm-6 col-xs-12 no-pd"><input type=text class=form-control id=searchOffer placeholder="Enter Offer Code" ng-model=vm.offerTxt></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-center"><button type=submit class="btn btn-search" ng-click=vm.searchOffers()><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 text-left"><button type=submit class="btn btn-search" ng-click=vm.clearOfferSearch()><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></div></form><div class="panel panel-default"><div class="panel-heading box-6"><h4 style="margin-top: 0" class=title>Offers</h4></div><div class=panel-body><div class=table-responsive><table ng-table=offerTableParams class="table table-bordered"><tbody><tr ng-repeat="row in $data track by $index"><td header="\'headerCheckbox.html\'"><input type=checkbox ng-model=vm.offerCheckboxes.items[row.id]></td><td data-title="\'Code\'">{{row.code}}</td><td data-title="\'Offer Detail\'">{{row.description}}</td><td data-title="\'Action\'" class=text-center><button type=submit class="btn btn-add" ng-click=" vm.addOffer(row)"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button></td></tr></tbody></table></div><button type=submit class="btn btn-default pull-right" ng-click=vm.addOffers()><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Offer(s)</button></div></div></div><div class="col-md-7 col-sm-12 col-xs-12"><form class=form-inline><div class="input-group col-md-4 col-sm-6 col-xs-12 no-pd"><input type=text class=form-control id=searchDriver placeholder="Enter keyword" ng-model=vm.driverTxt></div><div class="input-group col-md-1 col-sm-1 col-xs-12 no-pd text-center"><button type=submit class="btn btn-search" ng-click=vm.searchDrivers()><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class="input-group col-md-1 col-sm-1 col-xs-12 no-pd text-left"><button type=submit class="btn btn-search" ng-click=vm.clearDriverSearch()><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></div><div class="input-group col-md-4 col-sm-3 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div></form><div class="panel panel-default"><div class="panel-heading box-5"><h4 style="margin-top: 0" class=title>Drivers</h4></div><div class=panel-body><div class=table-responsive><table ng-table=driverTableParams class="table table-bordered"><tbody><tr ng-repeat="row in $data track by $index"><td header="\'driverCheckbox.html\'" width=30><input type=checkbox ng-model=vm.driverCheckboxes.items[row.id]></td><td data-title="\'Name\'">{{row.name}}</td><td data-title="\'Driver Info\'">{{row.phone}}, {{row.vehicle}}</td><td data-title="\'Assigned Offer(s)\'"><a ng-if=!row.offers ng-click=vm.getDriverOffers(row)>Show</a><!--<span ng-if="row.offers" ng-repeat="offer in row.offers">{{offer}}<br></span>--> <span ng-if=row.offers ng-repeat="offer in row.offers" class="label label-warning">{{offer}} <button class=label-btn ng-click=vm.openSingleAlert($index,row)>x</button></span></td><td ata-title="\'Action\'" class=text-center><button type=submit class="btn btn-add" ng-click=" vm.addDriver(row)"><span aria-hidden=true class="glyphicon glyphicon-plus"></span></button> <button type=submit class="btn btn-del" ng-click=vm.alertDeleteAllOffers(row)><span aria-hidden=true class="glyphicon glyphicon-remove"></span></button></td></tr></tbody></table></div><button type=submit class="btn btn-default pull-right" ng-click=" vm.addDrivers()"><span aria-hidden=true class="glyphicon glyphicon glyphicon-chevron-down"></span> Add Driver(s)</button><div ng-if=vm.driverExistError>Driver(s) Already selected</div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Confirmation</h4></div><div class=panel-body><div class=table-responsive><table class="table table-responsive no-mr"><tr><td class=text-left>Offers</td></tr><tr><td class=text-left><span ng-if="vm.selectedOffers.length==0">No Offers Selected</span> <span ng-if="vm.selectedOffers.length>0" class="label label-warning" ng-repeat="offer in vm.selectedOffers track by $index">{{offer.code}} <button class=label-btn ng-click=vm.removeOffer($index)>x</button></span></td></tr><tr><td class=text-left><hr class=hidden-xs></td></tr></table><table class="table table-responsive no-mr"><tr><td class=text-left>Drivers</td></tr><tr><td class=text-left><span ng-if="vm.selectedDrivers.length==0">No Drivers Selected</span> <span ng-if="vm.selectedDrivers.length>0" ng-repeat="driver in vm.selectedDrivers track by $index" class="label label-info">{{driver.name}} <button class=label-btn ng-click=vm.removeDriver($index)>x</button></span></td></tr><tr ng-if="vm.selectedDrivers.length>0 || vm.selectedOffers.length>0"><td class=text-right><hr><button type=submit class="btn btn-default" ng-click=vm.clearAll()><span aria-hidden=true class="glyphicon glyphicon-remove"></span> Clear</button> <button type=submit class="btn btn-success" ng-click=vm.assignOffers()><span aria-hidden=true class="glyphicon glyphicon-ok"></span> Save</button></td></tr></table></div></div></div></div></div></div>'),e.put("app/performance/performance.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=vm.getAllData() class="form-control cstm-width text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><br><br><br><br><div class="col-md-6 col-md-offset-6"><div class="flx-container flx-performance"><div class=flx-cnt-right><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-req.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_trip_request}}</h4></span><br><span>Bookings</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/trip-suc.svg title=Tuktuk height=45></span><span><h4>{{ vm.trips.overview.cum_successful_trip}}</h4></span><br><span>Successful</span></div><div class=text-left><span class=pull-left style="padding:4px 10px 4px 0"><img src=assets/images/new-rider.svg title=Tuktuk height=45></span><span><h4>{{ vm.riders.overview.cum_new_rider}}</h4></span><br><span>New Riders</span></div></div></div></div></div><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getTrips()" class="form-control cstm-width" type="daterange" ng-model="tripDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--   <select ng-model="vm.tripFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div></div></div><div class=row><div class=col-md-6><!---Driver---><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getDrivers()"class="form-control cstm-width" type="daterange" ng-model="driverDates" separator="/" format="DD-MMM-YY" opens="right" ranges="vm.ranges"/>\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)" ng-model=vm.driverFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!--  <select ng-model="vm.driverFrequency" class="form-control"\n                            ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency)"\n                            ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                    </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Driver</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.driverChartOptions data=vm.drivers config=vm.config></nvd3></div></div></div></div></div></div><div class=col-md-6><!--Rider--><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"><form class=form-inline><!--<div class="form-group ">\n                    <input ng-change="vm.getRiders()" class="form-control cstm-width" type="daterange" ng-model="riderDates" separator="/" format="DD-MMM-YY" opens="left" ranges="vm.ranges">\n                </div>--><div class=form-group style=margin-top:15px><div class="radio inpt-style"><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio name=optradio ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)" ng-model=vm.riderFrequency.value value=day> <i></i> <span>Per Day</span></label></div><!-- <select ng-model="vm.riderFrequency" class="form-control"\n                                ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency)"\n                                ng-options="frequency.label for frequency in vm.timeFrequency track by frequency.value">\n                        </select>--></div></form></div></div><br><div class=row><div class=col-md-12><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rider</h4></div><div class=panel-body><div class=table-responsive><nvd3 options=vm.riderChartOptions data=vm.riders config=vm.config></nvd3></div></div></div></div></div></div></div></div>'),e.put("app/riders/riders.html",'<div class=container-fluid><div class=row style="z-index:1; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span ng-click="vm.changeDate(\'prev\')" style="display: inline-block; padding: 7px">&#10094;</span> <span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span> <span ng-click="vm.changeDate(\'next\')" ng-if=!vm.live style="display: inline-block; padding: 7px">&#10095;</span></div></div><span class=live ng-if=vm.live>LIVE</span> <span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br><div class=row id=matrixChartDiv><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Rider Acquisition</h4></div><div class=panel-body><div><div id=matrixChart></div></div></div></div></div></div></div>'),e.put("app/surge/surge.html",'<div class=content><div class=row style="z-index:99; position:fixed; width:auto; padding:10px 0; left:53px"><div class="col-md-12 col-sm-12 col-xs-12"><span class=text-center ng-model=date style="display: inline-block; padding: 7px 0">{{date}}</span></div></div><div class=geo-hash-select><select ng-change=vm.onPrecisionChange() style="padding:5px 10px; border-radius: 4px" ng-model=vm.selectedPrecision ng-options="precision.name for precision  in  vm.precisionArr track by precision.value"></select></div><ng-map click id=surgeMap center=indore style="width:100%; height:100%; position:fixed" zoom={{vm.selectedPrecision.value+8}}><div ng-repeat="group in vm.geohashGroups" class=geo-hash-box><shape ng-repeat="geohashItem in group.geoHashArr" name=rectangle editable=false draggable=false fill-color={{group.color}} fill-opacity=0.5 stroke-color=#000 stroke-weight=0.1 stroke-opacity=0.5 bounds={{geohashItem.boxBounds}} clickable=true on-click=vm.ShapeClicked() on-dblclick=vm.ShapeDblClicked()></shape></div></ng-map><div class="row geo-fence-tbl" ng-if="vm.groupCreation || vm.groupEdit"><!--<div class="col-md-12 col-sm-12 col-xs-12">--><!--<div class="panel panel-default ">--><!--<div class="panel-heading">--><!--<h4 style="margin-top: 0" class="title">Groups</h4>--><!--</div>--><!--<div class="panel-body">--><!--<div style="max-height: 200px; height: 80%; overflow:auto;" ng-if="vm.geohashGroups.length>0">--><!--<table class="table table-inverse table-bordered">--><!--<thead>--><!--<tr>--><!--<th width="30" class="text-center">#</th>--><!--<th>Name</th>--><!--<th width="30" class="text-center"><span class="fa fa-remove pointer"--><!--ng-click="toggle = !toggle"--><!--ng-class="{\'red\' : toggle}"></span>--><!--</th>--><!--&lt;!&ndash;  <th></th>&ndash;&gt;--><!--</tr>--><!--</thead>--><!--<tbody>--><!--<tr ng-repeat="group in vm.geohashGroups">--><!--<td class="text-center" style="color: {{group.color}}">{{$index}}</td>--><!--<td>{{group.groupTitle}}</td>--><!--<td class="text-center">--><!--<span class="fa fa-remove pointer"--><!--ng-click="vm.removeGroup(group.groupId)"></span>--><!--</td>--><!--&lt;!&ndash; <td><span ng-click="vm.editGroup(group.groupId, $index)">Edit</span></td>&ndash;&gt;--><!--</tr>--><!--</tbody>--><!--</table>--><!--</div>--><!--<div ng-if="vm.geohashGroups.length<=0">No groups available</div>--><!--</div>--><!--</div>--><!--</div>--><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title><span class=pull-right ng-click=vm.onPrecisionChange()><i aria-hidden=true class="fa fa-close"></i></span>Surge</h4></div><div class=panel-body style="padding: 30px"><form role=form class=form-horizontal name=settingForm novalidate><div class=form-group><label class="col-md-12 col-sm-12 col-xs-12 text-center"><h5><b>Title</b></h5></label><div class="col-md-12 col-sm-12 col-xs-12"><input type=text placeholder="Group Title" name=inputGroupTitle ng-model=vm.setting.groupTitle class=form-control required><div ng-messages=settingForm.inputGroupTitle.$error ng-if=settingForm.inputGroupTitle.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><!--<div class="form-group">--><!--<label class="col-sm-3 control-label" >Geo Hash</label>--><!--<div class="col-sm-9">--><!--<div ng-if="vm.setting.geoHashArr.length>0">--><!--<span ng-repeat="box in vm.setting.geoHashArr"  class="label label-info">{{box.geoHash}}--><!--&lt;!&ndash;<button class="label-btn" ng-click="vm.removeGeoHash($index)">&ndash;&gt;--><!--&lt;!&ndash;x&ndash;&gt;--><!--&lt;!&ndash;</button>&ndash;&gt;--><!--</span>--><!--</div>--><!--<div ng-if="vm.setting.geoHashArr.length<=0">No geohash created</div>--><!--<p class="help-block"></p>--><!--</div>--><!--</div>--><div class=form-group><!--<label class="col-md-3 control-label">Type</label>--><div class="col-md-12 col-sm-12 col-xs-12 text-center"><label class=radio-inline><input ng-model=vm.setting.type type=radio value=x name=chargeType required ng-change=vm.setValueArr()> x</label><label class=radio-inline><input ng-model=vm.setting.type type=radio value=a name=chargeType required ng-change=vm.setValueArr()> +</label><p class=help-block></p><div ng-messages=settingForm.chargeType.$error ng-if=settingForm.chargeType.$touched><div ng-message=required>This field is required</div></div></div></div><div class=form-group><label class="col-md-6 col-sm-6 col-xs-6 text-left">Rider</label><label class="col-md-6 col-sm-6 col-xs-6 text-left">Driver</label><div class="col-md-6 col-sm-6 col-xs-6"><!--<input type="number" ng-model="vm.setting.value" placeholder="Rider" name="inputCharge"--><!--class="form-control" required>--><select class="col-md-6 col-sm-6 col-xs-6" style="border-radius: 4px" ng-model=vm.setting.value ng-options="multiple.name for multiple  in  vm.multipleArrRider track by multiple.value"></select><div ng-messages=settingForm.inputCharge.$error ng-if=settingForm.inputCharge.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div><div class="col-md-6 col-sm-6 col-xs-6"><!--<input type="number" ng-model="vm.setting.driverValue" placeholder="Driver"--><!--name="inputDriverValue" class="form-control" required>--><select class="col-md-6 col-sm-6 col-xs-6" style="border-radius: 4px" ng-model=vm.setting.driverValue ng-options="multiple.name for multiple  in  vm.multipleArrDriver track by multiple.value"></select><div ng-messages=settingForm.inputDriverValue.$error ng-if=settingForm.inputDriverValue.$touched><div ng-message=required>This field is required</div></div><p class=help-block></p></div></div><!--<div class="form-group">--><!--<label class="col-md-12 col-sm-12 col-xs-12" >Driver Value</label>--><!--<div class="col-sm-9">--><!--<input type="number" ng-model="vm.setting.driverValue" placeholder="Driver" name="inputDriverValue" class="form-control" required>--><!--<div ng-messages="settingForm.inputDriverValue.$error" ng-if="settingForm.inputDriverValue.$touched">--><!--<div ng-message="required">This field is required</div>--><!--</div>--><!--<p class="help-block"></p>--><!--</div>--><!--</div>--><div class="form-group time-picker"><label class="col-md-6 col-sm-6 col-xs-6">Start Time</label><label class="col-md-6 col-sm-6 col-xs-6">End Time</label><div class="col-md-6 col-sm-6 col-xs-6"><uib-timepicker ng-model=vm.setting.startTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep show-meridian=ismeridian></uib-timepicker></div><div class="col-md-6 col-sm-6 col-xs-6"><uib-timepicker ng-model=vm.setting.endTime ng-change=changed() hour-step=vm.hstep minute-step=vm.mstep hour-max=23 show-meridian=ismeridian></uib-timepicker></div></div><div class=form-group><br><br><div class="col-md-4 col-sm-4 col-xs-4"><div class=checkbox><label><input type=checkbox ng-model=vm.setting.forceConfirm style="margin-top: 2px"> Force Confirm</label></div><p class=help-block></p></div><div class="col-md-4 col-sm-4 col-xs-4 text-center" ng-if=!vm.groupEdit><button ng-click=vm.createSurge() ng-disabled="!vm.setting.geoHashArr.length>0 || settingForm.$invalid" class="btn btn-success col-sm-12" type=submit>Save</button></div><div class="col-md-4 col-sm-4 col-xs-4 text-center" ng-if=vm.groupEdit><button ng-click=vm.createSurge() ng-disabled="!vm.setting.geoHashArr.length>0 || settingForm.$invalid" class="btn btn-success col-sm-12" type=submit>Update</button></div><div class="col-md-4 col-sm-4 col-xs-4" ng-if=vm.setting.groupId><a href="" ng-click=vm.removeGroup(vm.setting.groupId) class=pull-right style="line-height: 30px">Delete Surge</a><!--<button --><!--class="btn btn-danger pull-right" type="button">Delete--><!--</button>--></div></div></form></div></div></div></div></div>'),e.put("app/trips/trip_details.html",'<div class=content><div class=content-div><ng-map id=driversMap center=indore style=height:100%><!--<div>--><!--<marker ng-repeat="data in data"></marker>--><!--</div>--></ng-map><div class=tabs-view-2><button ng-click="tabView = !tabView" ng-class="{\'left-arrow\' : tabView}" class="btn btn-default tabs-toggle-btn map-btn" title="Show More..."><i class="fa fa-angle-double-right"></i></button><div class=tabs-toggle ng-class="{\'tabs-show\' : tabView}"><uib-tabset active=active><uib-tab index=0 heading=Trip><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.requestOn)*1000 | date:"MMM dd, yyyy \'at\' hh:mm"}}</h4><span>date</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.startCode}}</h4><span>Start Code</span></div></div><div class=clearfix></div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>For Trip</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.disForTrip/1000)}} KM</h4><span>Distance</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.durForTrip) | toMinSec}}</h4><span>Duration</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.forTripspeed}}</h4><span>Speed</span></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12">&nbsp;</div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>In Trip</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.disInTrip/1000) | number:2}} KM</h4><span>Distance</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.durInTrip) | toMinSec}}</h4><span>Duration</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.inTripSpeed}}</h4><span>Speed</span></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12">&nbsp;</div><div class="col-md-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 heading-box1"><h3>Amount</h3><hr></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.driverFare}}</h4><span>driver\'s Fare</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.riderFare}}</h4><span>Rider\'s Fare</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>Rs. {{selectedTrip.tcashUsed}}</h4><span>Amount <small>tCash</small></span><!-- <span>Amount Total<small> / Cash / tCash</small></span> --></div></div></div></div><div class="col-md-12 col-sm-12 col-xs-12">&nbsp;<br>&nbsp;<hr style=margin:0></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.waitingTime) | toMinSec}}</h4><span>Waiting Time</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{getTimeDiff(selectedTrip.requestOn,\n                                            selectedTrip.pickupOn ) |\n                                            secondsToDateTime}} / {{getTimeDiff(selectedTrip.pickupOn\n                                            ,selectedTrip.dropOn)|\n                                            secondsToDateTime}}</h4>\n                                        <span>Time for Trip / in Trip</span>\n                                    </div>\n                                </div> --><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">&nbsp;</small></h4>\n                                        <span>Time allocated</span>\n                                    </div>\n                                </div>\n                                <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.atPickupOn*1000 | date: "h:mma"}}</small></h4>\n                                        <span>At Pickup</span>\n                                    </div>\n                                </div> --><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.pickupOn ? (selectedTrip.pickupOn *1000 | date:"h:mma ") : \'N/A\'}} / {{selectedTrip.dropOn ? (selectedTrip.dropOn *1000| date:"h:mma ") : \'N/A\'}}</h4><span>Start Time / End Time</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderFeedback | number:2}} / {{selectedTrip.driverFeedback | number:2}}</h4><span>Rider\'s / driver\'s Feedback</span></div></div><!--<div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.driverFeedback | number:2}}</h4>\n                                        <span>driver\'s Feedback</span>\n                                    </div>\n                                </div>\n                                \n                                 <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">Rs.{{selectedTrip.driverFare}}</small></h4>\n                                        <span>Amount</span>\n                                    </div>\n                                </div> --><div class="col-md-8 col-sm-8 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riSurge}} / {{selectedTrip.drSurge}}</h4><span>Priority Pricing (rider/driver)</span></div></div><div class="col-md-4 col-sm-4 col-xs-12" ng-if=showHide><h4 class=number>&nbsp;</h4><span><a href="" ng-click=vm.getBid();>Show Candidates</a></span></div><div class="col-md-4 col-sm-4 col-xs-12" ng-if=!showHide><h4 class=number>&nbsp;</h4><span><a href="" ng-click=vm.clearBid();>Clear Candidates</a></span></div></div></div></uib-tab><uib-tab index=0 heading=Driver><div class="row tripInfo-driver-tab"><div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd"><div class="box box-heading box-0 text-center" ng-class="{\'box-online\': selectedTrip.driverInfo.state== 22 || selectedTrip.driverInfo.state== 11, \'box-offline\': selectedTrip.driverInfo.state== 10 } "><img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{selectedTrip.driverInfo.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000" class=iw-driver height=50><!--  <h4 class="title" style="margin-top:10px;">{{selectedTrip.driverInfo.name}}</h4> --></div></div><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.name}}</h4><span>Name</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.phone}}</h4><span>phone</span></div></div><div class="col-md-12 col-sm-12 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.email ? selectedTrip.driverInfo.email:\'-\'}}</h4><span>Email</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.driverInfo.joinedOn)*1000 | date:"MMM dd, yyyy"}}</h4><span>joined On</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.rating | number:2}}</h4><span>feedback</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.driverInfo.ridesTotal}}</h4><span>Total Rides</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                    <div class="box">\n                                        <h4 class="number">{{selectedTrip.driverInfo.ridesToday}}\n                                        </h4>\n                                        <span>Today\'s Ride</span>\n                                    </div>\n                                </div> --></div></div></uib-tab><uib-tab index=0 heading=Rider><div class=row><!-- <div class="col-md-2 col-sm-12 col-xs-12 no-mr no-pd">\n                                <div class="box box-heading box-0 text-center"\n                                ng-class="{\'box-online\': selectedTrip.riderInfo.state== 22 || selectedTrip.riderInfo.state== 11, \'box-offline\': selectedTrip.riderInfo.state== 10 } ">\n                                <img ng-src="https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url={{selectedTrip.riderInfo.profileImage}}&container=focus&resize_w=75&resize_h=75&refresh=2592000"\n                                class="iw-driver" height="50">\n                                <h4 class="title" style="margin-top:10px;">{{selectedTrip.riderInfo.name}}</h4>\n\n                            </div>\n                        </div> --><div class="col-md-10 col-sm-12 col-xs-12"><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.id}}</h4><span>id</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.name}}</h4><span>Name</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.phone}}</h4><span>phone</span></div></div><div class="col-md-12 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.email ? selectedTrip.riderInfo.email:\'-\'}}</h4><span>Email</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{(selectedTrip.riderInfo.joinedOn)*1000 | date:"MMM dd, yyyy"}}</h4><span>joined On</span></div></div><div class="col-md-4 col-sm-4 col-xs-12"><div class=box><h4 class=number>{{selectedTrip.riderInfo.ridesTotal}}</h4><span>Total Rides</span></div></div><!-- <div class="col-md-4 col-sm-4 col-xs-12">\n                                     <div class="box">\n                                         <h4 class="number">{{selectedTrip.riderInfo.ridesToday}}\n                                         </h4>\n                                         <span>Today\'s Ride</span>\n                                     </div>\n                                 </div>\n                                  <div class="col-md-3 col-sm-4 col-xs-12">\n                                     <div class="box">\n                                         <h4 class="number">{{selectedTrip.driverInfo.avg | number:2}}</h4>\n                                         <span>feedback</span>\n                                     </div>\n                                 </div> --></div></div></uib-tab></uib-tabset></div></div></div></div>'),
e.put("app/trips/trips.html",'<div class=container-fluid><div class=row><form class="form-inline date-selection date-selection-dr"><div class=form-group><input ng-change=" vm.onDateChange()" class="form-control cstm-width text-center" type=daterange ng-model=tripDates separator=" - " format="DD MMM YY" opens=right ranges=vm.ranges></div></form><span class=reload ng-click=vm.refreshPage()><i class="fa fa-refresh" aria-hidden=true></i></span><br><br><br><br><br></div><div class=row><div class=col-md-6></div><div class="col-md-6 text-right"></div></div><br><!-- <div class="row">\n         <div class="col-md-12">\n             <div class="panel panel-default">\n                 <div class="panel-body">\n                     <h4 style="margin-top: 0">Heatmap</h4>\n                     <br>\n\n                     <div class="table-responsive">\n                         <div id="chart"></div>\n                       &lt;!&ndash;  <nvd3 options="vm.tripChartOptions" data="vm.trips" config="vm.config"></nvd3>&ndash;&gt;\n                     </div>\n                 </div>\n             </div>\n         </div>\n     </div>--><div class=row><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><form class="form-inline pull-right"><div class=form-group><div class="radio inpt-style"><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=hour><i></i> <span>Per Hour</span></label><label><input type=radio ng-change="vm.changeFrequency(\'trip\', vm.tripFrequency.value)" name=optradio ng-model=vm.tripFrequency.value value=day> <i></i> <span>Per Day</span></label></div></div></form><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips</h4></div><div class=panel-body><nvd3 options=vm.tripChartOptions data=vm.trips config=vm.config></nvd3></div></div></div><div class="col-md-6 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>tCash Burned</h4></div><div class=panel-body><nvd3 options=vm.tcashChartOptions data=vm.tcashData config=vm.config></nvd3></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><form class=form-inline><div class="input-group col-md-3 col-sm-4 col-xs-12"><select ng-model=vm.filterTerm class=form-control ng-options="statusFilter.name for statusFilter in vm.filterFields track by statusFilter.value"><option value="" disabled=disabled>Select Filter</option></select></div><div class="input-group col-md-3 col-sm-4 col-xs-12"><input ng-model=vm.searchTerm class=form-control placeholder=term ng-disabled=!vm.filterTerm></div><div class="input-group col-md-1 col-sm-4 col-xs-12"><button ng-disabled=!vm.searchTerm ng-click=vm.searchTable() class="btn btn-search"><span aria-hidden=true class="glyphicon glyphicon-search"></span></button></div><div class="input-group col-md-3 col-sm-4 col-xs-12"><select ng-model=vm.statusCodes ng-change=vm.getTrips() class=form-control ng-options="statusFilter.name for statusFilter in vm.tripStatusFilters track by statusFilter.value"><option value="" disabled=disabled>Select Status</option></select></div></form></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class="panel panel-default"><div class=panel-heading><h4 style="margin-top: 0" class=title>Trips Table</h4></div><div class=panel-body><div class=table-responsive><table ng-table=tableParams class="table table-bordered"><tr class=truncate ng-repeat="row in $data track by $index"><!-- <td data-title="\'Trip ID\'" sortable="\'id\'" style="text-transform: inherit">\n                                     <a target="_blank"\n                                        ui-sref="home.trip_detail({id: row.id,driverId: row.driverInfo.id,riderId: row.riderInfo.id})">{{row.id}}\n                                     </a>\n                                 </td>--><td data-title="\'Date & Time\'" sortable="\'requestOn\'" style="width: 145px"><a target=_blank ui-sref="home.trip_detail({id: row.id})"><div>{{(row.requestOn)*1000 | date:"dd MMM yy h:mma"}}</div></a></td><td data-title="\'Status\'" sortable="\'tripState\'"><div ng-if="row.tripState == 20" class=text-primary style="white-space: nowrap">Requested</div><div ng-if="row.tripState == 22" style="white-space: nowrap">Allocated</div><div ng-if="row.tripState == 30" style="white-space: nowrap">For Trip</div><div ng-if="row.tripState == 40" style="white-space: nowrap">At Pickup</div><div ng-if="row.tripState == 60" style="white-space: nowrap">At Destination</div><div ng-if="row.tripState == 50" class=text-info style="white-space: nowrap">In trip</div><div ng-if="row.tripState == 61" class=text-success style="white-space: nowrap">Successful</div><div ng-if="row.tripState == 70" class=text-warning style="white-space: nowrap">Can by Driver</div><div ng-if="row.tripState == 71" class=text-warning style="white-space: nowrap">Can by Rider</div><div ng-if="row.tripState == 80" style="white-space: nowrap">No Drv Avlble</div><div ng-if="row.tripState == 81" class=text-danger style="white-space: nowrap">Failed (No Drivers Accepted)</div><div ng-if="row.tripState == 82" style="white-space: nowrap">Terminated</div></td><td data-title="\'Driver Info\'"><div>{{row.driverInfo.name}}<br><!--  <span class="small">{{row.driverInfo.phone}}</span>\n                                          <span class="small">{{row.driverInfo.vehicle}}</span>--></div></td><!--<td data-title="\'VType\'" sortable="\'vehicleType\'" align="center">--><!--<div>{{row.vehicleType}}</div>--><!--</td>--><td data-title="\'Rider  Info\'"><div>{{row.riderInfo.name}}</div></td><!--<td data-title="\'Pickup\'" style="width:150px;">\n                                    <div class="truncate truncate-pick-drop">{{row.pickUp.line1 + \' \' + row.pickUp.line2}} {{row.drop.city + \'\n                                        \' +row.pickUp.state + \' \' +\n                                        row.pickUp.country}}\n                                    </div>\n                                </td>\n                                <td data-title="\'Drop\'" style="width:150px;">\n                                    <div class="truncate truncate-pick-drop">{{row.drop.line1 + \' \' + row.drop.line2}} {{row.drop.city + \' \'\n                                        +row.drop.state + \' \' +\n                                        row.drop.country}}\n                                    </div>\n                                </td>--><td data-title="\'Time\'" sortable="\'time\'"><div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div><!--<div>{{getTimeDiff(row.pickupOn,row.dropOn)| secondsToDateTime}}</div>--></td><td data-title="\'Dist(KM)\'" sortable="\'disPickupDrop\'" align=center><div>{{(row.disPickupDrop)/1000 | number:2}}</div></td><!-- <td data-title="\'Amt(Rs.)\'" sortable="\'amount\'" align="right">\n                                     <div class="truncate truncate-amt"><b>{{row.amount.total}}</b>\n                                         <span class="small">Cash: {{row.amount.cash | number:2}}</span>\n                                         <span class="small">Citrus: {{row.amount.citrus | number:2}}</span>\n                                         <span class="small">Discount: {{row.amount.discount | number:2}} </span>\n                                     </div>\n                                 </td>\n                                 <td data-title="\'Rating\'" sortable="\'riderFeedbackRating\'" align="center">\n                                     <div>{{row.riderFeedbackRating | number:1}}</div>\n                                 </td>--><!-- <td data-title="\'Show\'" align="center">\n                                     <button class="btn btn-xs btn-link" ng-click="showMore(row)"><i\n                                             ng-class="{\'glyphicon-chevron-up\':row.showMore,\'glyphicon-chevron-down\':!row.showMore}"\n                                             class="glyphicon glyphicon-chevron-down"></i></button>\n                                 </td>--></tr></table><table class="table table-bordered table-striped table-condensed" ng-show=tblNoData><tr><td colspan=11>No data found</td></tr></table></div></div></div></div></div><!--<div class="row">\n        <div class="col-md-6">\n            &lt;!&ndash;-Driver-&ndash;&gt;\n            <div class="row">\n                <div class="col-md-6"></div>\n                <div class="col-md-6 text-right">\n                    <form class="form-inline">\n                        <div class="form-group " style="margin-top:15px">\n                            <div class="radio inpt-style">\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)"\n                                              ng-model="vm.driverFrequency.value" value="hour"><i></i>\n                                    <span>Per Hour</span></label>\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'driver\',vm.driverFrequency.value)"\n                                              ng-model="vm.driverFrequency.value" value="day"> <i></i>\n                                    <span>Per Day</span></label>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <br>\n\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="panel panel-default">\n                        <div class="panel-body">\n                            <h4 style="margin-top: 0">Driver</h4>\n                            <br>\n\n                            <div class="table-responsive">\n                                <nvd3 options="vm.driverChartOptions" data="vm.drivers" config="vm.config"></nvd3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="col-md-6">\n            &lt;!&ndash;Rider&ndash;&gt;\n            <div class="row">\n                <div class="col-md-6"></div>\n                <div class="col-md-6 text-right">\n                    <form class="form-inline">\n\n                        <div class="form-group " style="margin-top:15px">\n                            <div class="radio inpt-style">\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)"\n                                              ng-model="vm.riderFrequency.value" value="hour"><i></i>\n                                    <span>Per Hour</span></label>\n                                <label><input type="radio" name="optradio"\n                                              ng-change="vm.changeFrequency(\'rider\', vm.riderFrequency.value)"\n                                              ng-model="vm.riderFrequency.value" value="day"> <i></i>\n                                    <span>Per Day</span></label>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <br>\n\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="panel panel-default">\n                        <div class="panel-body">\n                            <h4 style="margin-top: 0">Rider</h4>\n                            <br>\n\n                            <div class="table-responsive">\n                                <nvd3 options="vm.riderChartOptions" data="vm.riders" config="vm.config"></nvd3>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>--></div>'),e.put("app/components/navbar/navbar.html","")}]);
//# sourceMappingURL=../maps/scripts/app-f15fceecbd.js.map
